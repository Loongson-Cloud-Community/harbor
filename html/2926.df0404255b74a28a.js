"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[2926],{2926:(Fi,Ze,_)=>{_.r(Ze),_.d(Ze,{ArtifactModule:()=>ep});var N=_(2787),C=_(4554),e=_(5879),l=_(8280),x=_(2141),D=_(7655);let ae=(()=>{var t;class o{constructor(i,r,a){this.scanningService=i,this.userPermissionService=r,this.errorHandlerService=a,this._hasEnabledScanner=!1,this._hasScannerSupportVulnerability=!1,this._hasScannerSupportSBOM=!1,this._hasAddLabelImagePermission=!1,this._hasRetagImagePermission=!1,this._hasDeleteImagePermission=!1,this._hasScanImagePermission=!1,this._hasSbomPermission=!1,this._scanner=void 0}getProjectScanner(){return this._scanner}getScanBtnState(){return this._scanBtnState}getSbomBtnState(){return this._sbomBtnState}hasEnabledScanner(){return this._hasEnabledScanner}hasAddLabelImagePermission(){return this._hasAddLabelImagePermission}hasRetagImagePermission(){return this._hasRetagImagePermission}hasDeleteImagePermission(){return this._hasDeleteImagePermission}hasScanImagePermission(){return this._hasScanImagePermission}hasSbomPermission(){return this._hasSbomPermission}hasScannerSupportVulnerability(){return this._hasScannerSupportVulnerability}hasScannerSupportSBOM(){return this._hasScannerSupportSBOM}init(i){this._getProjectScanner(i),this._getPermissionRule(i)}updateStates(i,r,a){r&&(this._scanBtnState=r),a&&(this._sbomBtnState=a),this._hasEnabledScanner=i}updateCapabilities(i){i&&(void 0!==i?.support_vulnerability&&(this._hasScannerSupportVulnerability=i.support_vulnerability),void 0!==i?.support_sbom&&(this._hasScannerSupportSBOM=i.support_sbom))}_getProjectScanner(i){this._hasEnabledScanner=!1,this._scanBtnState=l.xp5.LOADING,this._sbomBtnState=l.xp5.LOADING,this.scanningService.getProjectScanner(i).subscribe(r=>{r&&"{}"!==JSON.stringify(r)?(this._scanner=r,r.disabled||"healthy"!==r.health?this.updateStates(!1,l.xp5.ERROR,l.xp5.ERROR):(this.updateStates(!0,l.xp5.SUCCESS,l.xp5.SUCCESS),r?.capabilities&&this.updateCapabilities(r?.capabilities))):this.updateStates(!1,l.xp5.ERROR,l.xp5.ERROR)},r=>{this._scanner=null,this.updateStates(!1,l.xp5.ERROR,l.xp5.ERROR)})}_getPermissionRule(i){this.userPermissionService.hasProjectPermissions(i,[{resource:x._W.REPOSITORY_ARTIFACT_LABEL.KEY,action:x._W.REPOSITORY_ARTIFACT_LABEL.VALUE.CREATE},{resource:x._W.REPOSITORY.KEY,action:x._W.REPOSITORY.VALUE.PULL},{resource:x._W.ARTIFACT.KEY,action:x._W.ARTIFACT.VALUE.DELETE},{resource:x._W.REPOSITORY_TAG_SCAN_JOB.KEY,action:x._W.REPOSITORY_TAG_SCAN_JOB.VALUE.CREATE},{resource:x._W.REPOSITORY_TAG_SBOM_JOB.KEY,action:x._W.REPOSITORY_TAG_SBOM_JOB.VALUE.CREATE}]).subscribe(a=>{this._hasAddLabelImagePermission=a[0],this._hasRetagImagePermission=a[1],this._hasDeleteImagePermission=a[2],this._hasScanImagePermission=a[3],this._hasSbomPermission=a?.[4]??!1,this._hasSbomPermission=!0},a=>this.errorHandlerService.error(a))}}return(t=o).\u0275fac=function(i){return new(i||t)(e.LFG(x.pg),e.LFG(x.Hx),e.LFG(D.q))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),o})();var A=_(6814),v=_(9515);function U(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"span"),e._uU(1,"<"),e.TgZ(2,"a",2),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.backInitRepo())}),e._uU(3),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(3),e.Oqu(n.repoName)}}function $(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"span"),e._uU(1," <"),e.TgZ(2,"a",2),e.NdJ("click",function(){const a=e.CHM(n).index,s=e.oxw(2);return e.KtG(s.jumpDigest(a))}),e._uU(3),e.ALo(4,"slice"),e.qZA()()}if(2&t){const n=o.$implicit;e.xp6(3),e.Oqu(e.Dn7(4,1,n,0,15))}}function W(t,o){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,$,5,5,"span",14),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.referArtifactNameArray)}}function V(t,o){if(1&t&&(e.TgZ(0,"h2",15),e._uU(1),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",n.repoName," ")}}function E(t,o){if(1&t&&(e.TgZ(0,"h2",15),e._uU(1),e.ALo(2,"slice"),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.hij(" ",e.Dn7(2,1,n.artifactDigest,0,15)," ")}}function qi(t,o){1&t&&(e.TgZ(0,"li",12)(1,"button",16),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"REPOSITORY.INFO")," "))}let ft=(()=>{var t;class o{constructor(i,r,a){this.route=i,this.router=r,this.artifactListPageService=a,this.referArtifactNameArray=[],this.routeParamsSub||(this.routeParamsSub=this.route.params.subscribe(s=>{if(this.depth=this.route.snapshot.firstChild.params.depth,this.depth){const c=this.depth.split("-");this.referArtifactNameArray=c.slice(0,c.length-1),this.artifactDigest=this.depth.split("-")[c.length-1]}else this.referArtifactNameArray=[],this.artifactDigest=null;this.init()}))}ngOnDestroy(){this.routeParamsSub&&(this.routeParamsSub.unsubscribe(),this.routeParamsSub=null)}init(){this.projectId=this.route.snapshot.parent.params.id;let i=this.route.snapshot.parent.data;i&&(this.projectName=i.projectResolver.name),this.repoName=this.route.snapshot.params.repo,this.artifactListPageService.init(+this.projectId)}watchGoBackEvt(i){this.router.navigate(["harbor","projects",i,"repositories"])}goProBack(){this.router.navigate(["harbor","projects"])}backInitRepo(){this.router.navigate(["harbor","projects",this.projectId,"repositories",this.repoName])}jumpDigest(i){const r=this.referArtifactNameArray.slice(0,i+1);this.router.navigate(r&&r.length?["harbor","projects",this.projectId,"repositories",this.repoName,"artifacts-tab","depth",r.join("-")]:["harbor","projects",this.projectId,"repositories",this.repoName])}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(N.gz),e.Y36(N.F0),e.Y36(ae))},t.\u0275cmp=e.Xpm({type:t,selectors:[["artifact-list-page"]],decls:27,vars:12,consts:[[1,"breadcrumb"],[1,"back-icon"],[3,"click"],[4,"ngIf"],[1,"overview-section"],[1,"title-wrapper"],[1,"title-block"],["sub-header-title","","class","custom-h2",4,"ngIf"],[1,"detail-section"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],["id","configTabs","role","tablist",1,"nav"],["role","presentation","class","nav-item",4,"ngIf"],["role","presentation",1,"nav-item"],["id","repo-image","aria-controls","image","type","button","routerLinkActive","active","routerLink","./artifacts-tab",1,"btn","btn-link","nav-link"],[4,"ngFor","ngForOf"],["sub-header-title","",1,"custom-h2"],["id","repo-info","aria-controls","info","type","button","routerLinkActive","active","routerLink","./info-tab",1,"btn","btn-link","nav-link"]],template:function(i,r){1&i&&(e.TgZ(0,"div")(1,"div",0)(2,"span",1),e._uU(3,"<"),e.qZA(),e.TgZ(4,"a",2),e.NdJ("click",function(){return r.goProBack()}),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"span",1),e._uU(8,"<"),e.qZA(),e.TgZ(9,"a",2),e.NdJ("click",function(){return r.watchGoBackEvt(r.projectId)}),e._uU(10),e.qZA(),e.YNc(11,U,4,1,"span",3),e.YNc(12,W,2,1,"span",3),e.qZA(),e.TgZ(13,"section",4)(14,"div",5)(15,"div",6),e.YNc(16,V,2,1,"h2",7),e.YNc(17,E,3,5,"h2",7),e.qZA()()(),e.TgZ(18,"section",8)(19,"div",9)(20,"ul",10),e.YNc(21,qi,4,3,"li",11),e.TgZ(22,"li",12)(23,"button",13),e._uU(24),e.ALo(25,"translate"),e.qZA()()(),e._UZ(26,"router-outlet"),e.qZA()()()),2&i&&(e.xp6(5),e.Oqu(e.lcZ(6,8,"SIDE_NAV.PROJECTS")),e.xp6(5),e.Oqu(r.projectName),e.xp6(1),e.Q6J("ngIf",r.depth),e.xp6(1),e.Q6J("ngIf",(null==r.referArtifactNameArray?null:r.referArtifactNameArray.length)>=1),e.xp6(4),e.Q6J("ngIf",!r.artifactDigest),e.xp6(1),e.Q6J("ngIf",r.artifactDigest),e.xp6(4),e.Q6J("ngIf",!r.artifactDigest),e.xp6(3),e.hij(" ",e.lcZ(25,10,"REPOSITORY.ARTIFACTS")," "))},dependencies:[N.lC,N.rH,N.Od,A.sg,A.O5,v.X$,A.OU],styles:[".breadcrumb[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;cursor:pointer;color:#007cbb;font-size:16px;padding:5px;border-radius:2px;margin-right:5px}.back-icon[_ngcontent-%COMP%]{color:#007cbb;font-size:16px}"]}),o})();var te=_(9315),je=_(2096),w=_(4716),fe=_(7398),Je=_(6306),u=_(1691),R=_(6126);const _t=[{filterBy:"type",filterByShowText:"Type",listItem:[{filterText:"IMAGE",showItem:"ARTIFACT.IMAGE"},{filterText:"CHART",showItem:"ARTIFACT.CHART"},{filterText:"CNAB",showItem:"ARTIFACT.CNAB"},{filterText:"WASM",showItem:"ARTIFACT.WASM"}]},{filterBy:"tags",filterByShowText:"Tags",listItem:[{filterText:"*",showItem:"ARTIFACT.TAGGED"},{filterText:"nil",showItem:"ARTIFACT.UNTAGGED"},{filterText:"",showItem:"ARTIFACT.ALL"}]},{filterBy:"labels",filterByShowText:"Label",listItem:[]}];var G=function(t){return t.COSIGN="signature.cosign",t.NOTATION="signature.notation",t.NYDUS="accelerator.nydus",t.SBOM="sbom.harbor",t}(G||{}),B=function(t){return t.IMAGE="IMAGE",t.CHART="CHART",t.CNAB="CNAB",t.OPENPOLICYAGENT="OPENPOLICYAGENT",t}(B||{});const Qe="images/artifact-default.svg";var Ee=function(t){return t.ACCESSORY_TYPE="accessoryType",t}(Ee||{});function He(t,o,n,i){if(t&&o&&n){if(t===B.IMAGE){if(i===M.DOCKER)return`${M.DOCKER} pull ${o}@${n}`;if(i===M.PODMAN)return`${M.PODMAN} pull ${o}@${n}`}if(t===B.CNAB)return`${M.CNAB} pull ${o}@${n}`}return null}function _e(t,o,n,i){if(t&&o&&n){if(t===B.IMAGE){if(i===M.DOCKER)return`${M.DOCKER} pull ${o}:${n}`;if(i===M.PODMAN)return`${M.PODMAN} pull ${o}:${n}`}if(t===B.CNAB)return`cnab-to-oci pull ${o}:${n}`;if(t===B.CHART)return`helm pull oci://${o} --version ${n}`}return null}var M=function(t){return t.DOCKER="docker",t.PODMAN="podman",t.CHART="helm",t.CNAB="cnab-to-oci",t}(M||{}),bt=function(t){return t.SPDX="SPDX",t}(bt||{});const Ve={sbomVersion:"spdxVersion",sbomName:"name",sbomDataLicense:"dataLicense",sbomId:"SPDXID",sbomDocumentNamespace:"documentNamespace",sbomCreated:"creationInfo.created",sbomPackage:{packages:["name","versionInfo","licenseConcluded"]}};function Ge(t,o,n){if(t&&o){const i=t?.split(".");let r=o;i.forEach((a,s)=>{const c=Object.getOwnPropertyNames(r);"__proto__"!==a&&"constructor"!==a&&(s===i.length-1?r[a]=n:(c.includes(a)||(r[a]={}),r=r[a]))})}}const Ji=(t,o)=>{let n=o;return t&&o&&(t?.split(".")).forEach(r=>{n&&(n=n[r]??null)}),n};function ze(t,o){let n=null;if(o)switch(typeof t){case"string":n=Ji(t,o);break;case"object":if(Array.isArray(t)&&Array.isArray(o))n=o.map(i=>{let r={};return t.forEach(a=>{Ge(a,r,ze(a,i))}),r});else{const i=Object.getOwnPropertyNames(t);n=n||{},i.forEach(r=>{o[r]&&Ge(r,n,ze(t[r],o[r]))})}}return n}function Qi(t){if(t&&function ji(t){return Object.keys(t??{}).includes(Ve.sbomId)}(t)){const o={};return o.sbomJsonRaw=t,o.sbomType=bt.SPDX,Object.getOwnPropertyNames(Ve).forEach(i=>{Ge(i,o,ze(Ve[i],t))}),o}return null}class Hi{}var F=function(t){return t.VULNERABILITIES="vulnerabilities",t.BUILD_HISTORY="build_history",t.SUMMARY="readme.md",t.VALUES="values.yaml",t.DEPENDENCIES="dependencies",t.SBOMS="sboms",t}(F||{}),$e=_(3924),Pe=_(6266),q=_(9788),S=_(3555),ie=_(2979),se=_(8645),Vi=_(3020),Gi=_(9358),zi=_(6593);class be{constructor(){this.triggerUploadArtifact=new se.x}}let $i=(()=>{var t;class o extends be{constructor(i,r,a){super(),this.iconService=i,this.domSanitizer=r,this.event=a,this.triggerUploadArtifact=new se.x,this._iconMap={},this._sharedIconObservableMap={}}getIcon(i){return this._iconMap[i]}setIcon(i,r){this._iconMap[i]||(this._iconMap[i]=r)}getIconsFromBackEnd(i){i&&i.length&&i.forEach(r=>{r.icon&&!this.getIcon(r.icon)&&(this._sharedIconObservableMap[r.icon]||(this._sharedIconObservableMap[r.icon]=this.iconService.getIcon({digest:r.icon}).pipe((0,Vi.B)())),this._sharedIconObservableMap[r.icon].subscribe(a=>{this.setIcon(r.icon,this.domSanitizer.bypassSecurityTrustUrl(`data:${a["content-type"]};charset=utf-8;base64,${a.content}`)),this.event.publish(S.n.RETRIEVED_ICON)}))})}}return(t=o).\u0275fac=function(i){return new(i||t)(e.LFG(Gi.C),e.LFG(zi.H7),e.LFG(S.P))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),o})();var ce=_(4410);function Ki(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"img",14),e.NdJ("error",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.showDefaultIcon(r))}),e.qZA()}if(2&t){const n=e.oxw().$implicit,i=e.oxw();e.Q6J("title",n.type)("src",i.getIcon(n.icon),e.LSH)}}function Wi(t,o){if(1&t&&e._UZ(0,"sub-accessories",17),2&t){const n=e.oxw(2).$implicit,i=e.oxw();e.Q6J("projectName",i.projectName)("repositoryName",i.repositoryName)("artifactDigest",null==n?null:n.digest)("total",null==n?null:n.accessoryNumber)("accessories",null==n?null:n.accessories)}}function Xi(t,o){1&t&&(e.ynx(0,15),e.YNc(1,Wi,1,5,"sub-accessories",16),e.BQk())}function en(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-dg-row",4)(1,"clr-dg-action-overflow")(2,"button",5),e.NdJ("click",function(){const a=e.CHM(n).$implicit,s=e.oxw();return e.KtG(s.delete(a))}),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"button",5),e.NdJ("click",function(){const a=e.CHM(n).$implicit,s=e.oxw();return e.KtG(s.copyDigest(a))}),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.TgZ(8,"clr-dg-cell",6),e._UZ(9,"hr",7)(10,"hr",8),e.TgZ(11,"div",9)(12,"div",10),e.YNc(13,Ki,1,2,"img",11),e.qZA(),e.TgZ(14,"a",12),e.NdJ("click",function(){const a=e.CHM(n).$implicit,s=e.oxw();return e.KtG(s.goIntoArtifactSummaryPage(a))}),e._uU(15),e.qZA()()(),e.TgZ(16,"clr-dg-cell")(17,"div",9),e._uU(18),e.qZA()(),e.TgZ(19,"clr-dg-cell")(20,"div",9),e._uU(21),e.qZA()(),e.TgZ(22,"clr-dg-cell")(23,"div",9),e._uU(24),e.ALo(25,"harborDatetime"),e.qZA()(),e.YNc(26,Xi,2,0,"ng-container",13),e.qZA()}if(2&t){const n=o.$implicit,i=o.index,r=e.oxw(),a=e.MAs(1);e.Q6J("clrDgItem",n),e.xp6(3),e.hij(" ",e.lcZ(4,13,"REPOSITORY.DELETE")," "),e.xp6(3),e.hij(" ",e.lcZ(7,15,"REPOSITORY.COPY_DIGEST_ID")," "),e.xp6(3),e.Udp("height",(null==a.el||null==a.el.nativeElement?null:a.el.nativeElement.offsetHeight)||0,"px"),e.Q6J("hidden",i!==(null==r.displayedAccessories?null:r.displayedAccessories.length)-1),e.xp6(3),e.s9C("title",null==n?null:n.digest),e.xp6(1),e.Q6J("ngIf",r.getIcon(n.icon)),e.xp6(2),e.Oqu(null==n||null==n.digest?null:n.digest.slice(0,15)),e.xp6(3),e.hij(" ",n.type," "),e.xp6(3),e.hij(" ",r.size(n.size)," "),e.xp6(3),e.hij(" ",e.xi3(25,17,n.creation_time,"short")," "),e.xp6(2),e.Q6J("ngIf",null==n||null==n.accessories?null:n.accessories.length)}}function tn(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){e.oxw();const n=e.MAs(2);e.xp6(1),e.lnq("",n.firstItem+1," - ",n.lastItem+1," ",e.lcZ(2,3,"ROBOT_ACCOUNT.OF")," ")}}function nn(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-dg-footer")(1,"clr-dg-pagination",18,19),e.NdJ("clrDgPageChange",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.currentPage=r)}),e.YNc(3,tn,3,5,"span",3),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("clrDgPageSize",n.pageSize)("clrDgPage",n.currentPage)("clrDgTotalItems",n.total),e.xp6(2),e.Q6J("ngIf",n.total),e.xp6(1),e.AsE(" ",n.total," ",e.lcZ(5,6,"ROBOT_ACCOUNT.ITEMS")," ")}}let rn=(()=>{var t;class o{constructor(i,r,a,s,c,p,g){this.activatedRoute=i,this.router=r,this.newArtifactService=a,this.artifactService=s,this.errorHandlerService=c,this.cdf=p,this.event=g,this.accessories=[],this.currentPage=1,this.total=0,this.pageSize=5,this.page=1,this.displayedAccessories=[],this.loading=!1}ngAfterViewInit(){this.cdf.detectChanges()}ngOnInit(){this.iconSub||(this.iconSub=this.event.subscribe(S.n.RETRIEVED_ICON,()=>{this.cdf.detectChanges()})),this.displayedAccessories=(0,u.d9)(this.accessories)}ngOnDestroy(){this.iconSub&&(this.iconSub.unsubscribe(),this.iconSub=null)}size(i){return(0,u.BU)(i.toString())}getIcon(i){return this.artifactService.getIcon(i)}showDefaultIcon(i){i&&i.target&&(i.target.src=Qe)}goIntoArtifactSummaryPage(i){this.router.navigate(["artifacts",i.digest],this.activatedRoute.snapshot.queryParams[q.jv]===q.gT?{relativeTo:this.activatedRoute,queryParams:{[q.jv]:q.gT,[Ee.ACCESSORY_TYPE]:i.type}}:{relativeTo:this.activatedRoute,queryParams:{[Ee.ACCESSORY_TYPE]:i.type}})}delete(i){this.event.publish(S.n.DELETE_ACCESSORY,i)}clrLoad(){if(1===this.currentPage)return this.displayedAccessories=(0,u.d9)(this.accessories),this.getIconFromBackend(),void this.getAccessoriesAsync(this.displayedAccessories);this.loading=!0;const i={projectName:this.projectName,repositoryName:(0,u.gI)(this.repositoryName),reference:this.artifactDigest,page:this.currentPage,pageSize:5};this.newArtifactService.listAccessories(i).pipe((0,w.x)(()=>this.loading=!1)).subscribe(r=>{this.displayedAccessories=r,this.cdf.detectChanges(),this.getIconFromBackend(),this.getAccessoriesAsync(this.displayedAccessories)},r=>{this.errorHandlerService.error(r)})}getIconFromBackend(){this.displayedAccessories?.length&&this.artifactService.getIconsFromBackEnd(this.displayedAccessories)}getAccessoriesAsync(i){i&&i.length&&i.forEach(r=>{const a={projectName:this.projectName,repositoryName:(0,u.gI)(this.repositoryName),reference:r.digest,page:1,pageSize:5};this.newArtifactService.listAccessoriesResponse(a).subscribe(s=>{if(s.headers){let c=s.headers.get("x-total-count");c&&(r.accessoryNumber=Number.parseInt(c,10))}r.accessories=s.body,this.cdf.detectChanges()})})}copyDigest(i){this.event.publish(S.n.COPY_DIGEST,i)}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(N.gz),e.Y36(N.F0),e.Y36(ie.b),e.Y36(be),e.Y36(D.q),e.Y36(e.sBO),e.Y36(S.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["sub-accessories"]],inputs:{projectName:"projectName",repositoryName:"repositoryName",artifactDigest:"artifactDigest",accessories:"accessories",total:"total"},decls:16,vars:15,consts:[[1,"ml-8",3,"clrDgLoading","clrDgRefresh"],["datagrid",""],[3,"clrDgItem",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"clrDgItem"],[1,"my-action-item",3,"click"],[1,"relative"],[1,"y-dash-line",3,"hidden"],[1,"x-dash-line"],[1,"cell"],[1,"artifact-icon-div","clr-display-inline-block",3,"title"],["class","artifact-icon",3,"title","src","error",4,"ngIf"],["href","javascript:void(0)",1,"margin-left-5",3,"click"],["ngProjectAs","clr-dg-row-detail",5,["clr-dg-row-detail"],4,"ngIf"],[1,"artifact-icon",3,"title","src","error"],["ngProjectAs","clr-dg-row-detail",5,["clr-dg-row-detail"]],[3,"projectName","repositoryName","artifactDigest","total","accessories",4,"clrIfExpanded"],[3,"projectName","repositoryName","artifactDigest","total","accessories"],[3,"clrDgPageSize","clrDgPage","clrDgTotalItems","clrDgPageChange"],["pagination",""]],template:function(i,r){1&i&&(e.TgZ(0,"clr-datagrid",0,1),e.NdJ("clrDgRefresh",function(){return r.clrLoad()}),e.TgZ(2,"clr-dg-column"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"clr-dg-column"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"clr-dg-column"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"clr-dg-column"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.YNc(14,en,27,20,"clr-dg-row",2),e.YNc(15,nn,6,8,"clr-dg-footer",3),e.qZA()),2&i&&(e.Q6J("clrDgLoading",r.loading),e.xp6(3),e.Oqu(e.lcZ(4,7,"ACCESSORY.ACCESSORY")),e.xp6(3),e.Oqu(e.lcZ(7,9,"PROJECT.TYPE")),e.xp6(3),e.Oqu(e.lcZ(10,11,"REPOSITORY.SIZE")),e.xp6(3),e.Oqu(e.lcZ(13,13,"ROBOT_ACCOUNT.CREATION")),e.xp6(2),e.Q6J("ngForOf",r.displayedAccessories),e.xp6(1),e.Q6J("ngIf",r.total>r.pageSize))},dependencies:[l.C9t,l.o_2,l.fv_,l.m4W,l.dRQ,l.Ltv,l.Z4N,l.Nz$,l.jND,l.KHL,l.PDs,l.Gcc,l.dml,l.Nh1,l.K8c,l.DbV,A.sg,A.O5,t,v.X$,ce.Z],styles:[".artifact-icon-div[_ngcontent-%COMP%]{text-align:center;width:2.5rem;height:.8rem}.artifact-icon[_ngcontent-%COMP%]{height:.8rem}.cell[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%}.margin-left-5[_ngcontent-%COMP%]{margin-left:5px}.ml-8[_ngcontent-%COMP%]{margin-left:8rem}.x-dash-line[_ngcontent-%COMP%]{position:absolute;width:80px;left:-80px;border:0;border-top:2px dotted #a2a9b6}.y-dash-line[_ngcontent-%COMP%]{position:absolute;border:0;border-left:2px dotted #a2a9b6;left:-4.2rem;bottom:0}.my-action-item[_ngcontent-%COMP%]{font-size:.7rem;letter-spacing:normal;background:0 0;border:0;cursor:pointer;display:block;line-height:1.15rem;margin:0;padding:.05rem 1.2rem 0;text-align:left;width:100%}"],changeDetection:0}),o})();var Re=_(3620),Ke=_(4664),T=_(6223),on=_(5738);function an(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"li",12),e.NdJ("click",function(){const a=e.CHM(n).$implicit,s=e.oxw();return e.KtG(s.selectedProjectName(null==a?null:a.name))}),e._uU(1),e.qZA()}if(2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",null==n?null:n.name," ")}}function sn(t,o){1&t&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"PROJECT.NAME_TOOLTIP")," "))}function cn(t,o){1&t&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"REPLICATION.NO_PROJECT_INFO")," "))}function ln(t,o){if(1&t&&(e.TgZ(0,"clr-control-error",13),e.YNc(1,sn,3,3,"ng-container",14),e.YNc(2,cn,3,3,"ng-container",14),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.projectName.invalid),e.xp6(1),e.Q6J("ngIf",n.notExist)}}function pn(t,o){1&t&&(e.TgZ(0,"clr-control-error",13),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"RETAG.TIP_REPO")," "))}let un=(()=>{var t;class o{constructor(i,r,a){this.fb=i,this.errorHandler=r,this.proService=a,this.selectedProjectList=[],this.proNameChecker=new se.x,this.notExist=!1,this.checkingName=!1,this.imageNameForm=this.fb.group({projectName:["",T.kI.compose([T.kI.minLength(2),T.kI.required,T.kI.pattern("^[a-z0-9]+(?:[._-][a-z0-9]+)*$")])],repoName:["",T.kI.compose([T.kI.required,T.kI.maxLength(256),T.kI.pattern("^[a-z0-9]+(?:[._-][a-z0-9]+)*(/[a-z0-9]+(?:[._-][a-z0-9]+)*)*")])]})}ngOnInit(){this.proNameChecker.pipe((0,Re.b)(200)).pipe((0,Ke.w)(i=>(this.notExist=!1,this.checkingName=!0,this.selectedProjectList=[],this.proService.listProjects({name:i,page:1,pageSize:10}).pipe((0,w.x)(()=>this.checkingName=!1))))).subscribe(i=>{if(i){this.selectedProjectList=i;let r=i.find(a=>a.name===this.imageNameForm.controls.projectName.value);this.notExist=!r}else this.notExist=!0},i=>{this.errorHandler.error(i),this.notExist=!0})}validateProjectName(){let i=this.imageNameForm.controls.projectName;i&&i.valid&&this.proNameChecker.next(i.value)}get form(){return this.imageNameForm}get projectName(){return this.imageNameForm.get("projectName")}get repoName(){return this.imageNameForm.get("repoName")}ngOnDestroy(){this.proNameChecker&&this.proNameChecker.unsubscribe()}leaveProjectInput(){this.selectedProjectList=[]}selectedProjectName(i){this.imageNameForm.controls.projectName.setValue(i),this.selectedProjectList=[],this.notExist=!1}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(T.QS),e.Y36(D.q),e.Y36(on.Y))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hbr-image-name-input"]],decls:23,vars:17,consts:[[1,"clr-form","clr-form-horizontal",3,"formGroup","mouseleave"],[1,"clr-form-control"],[1,"required","clr-control-label"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["type","text","id","project-name","formControlName","projectName","autocomplete","off",1,"clr-input","w-90",3,"keyup"],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"spinner","spinner-inline",3,"hidden"],[1,"selectBox"],[3,"click",4,"ngFor","ngForOf"],["class","tooltip-content",4,"ngIf"],["type","text","id","repo-name","formControlName","repoName","autocomplete","off",1,"clr-input","w-90"],[3,"click"],[1,"tooltip-content"],[4,"ngIf"]],template:function(i,r){1&i&&(e.TgZ(0,"form",0),e.NdJ("mouseleave",function(){return r.leaveProjectInput()}),e.TgZ(1,"div",1)(2,"label",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",3)(6,"div",4)(7,"input",5),e.NdJ("keyup",function(){return r.validateProjectName()}),e.qZA(),e._UZ(8,"clr-icon",6)(9,"span",7),e.TgZ(10,"div",8)(11,"ul"),e.YNc(12,an,2,1,"li",9),e.qZA()()(),e.YNc(13,ln,3,2,"clr-control-error",10),e.qZA()(),e.TgZ(14,"div",1)(15,"label",2),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"div",3)(19,"div",4),e._UZ(20,"input",11)(21,"clr-icon",6),e.qZA(),e.YNc(22,pn,3,3,"clr-control-error",10),e.qZA()()()),2&i&&(e.Q6J("formGroup",r.imageNameForm),e.xp6(3),e.Oqu(e.lcZ(4,13,"PROJECT.NAME")),e.xp6(2),e.ekj("clr-error",r.projectName.invalid&&(r.projectName.dirty||r.projectName.touched)||r.notExist),e.xp6(4),e.Q6J("hidden",!r.checkingName),e.xp6(1),e.Udp("display",r.selectedProjectList.length?"block":"none"),e.xp6(2),e.Q6J("ngForOf",r.selectedProjectList),e.xp6(1),e.Q6J("ngIf",r.projectName.invalid&&(r.projectName.dirty||r.projectName.touched)||r.notExist),e.xp6(3),e.Oqu(e.lcZ(17,15,"REPOSITORY.REPO_NAME")),e.xp6(2),e.ekj("clr-error",r.repoName.invalid&&(r.repoName.dirty||r.repoName.touched)),e.xp6(4),e.Q6J("ngIf",r.repoName.invalid&&(r.repoName.dirty||r.repoName.touched)))},dependencies:[T._Y,T.Fj,T.JJ,T.JL,A.sg,A.O5,l.qvL,l.MgK,l.VqA,T.sg,T.u,v.X$],styles:[".selectBox[_ngcontent-%COMP%]{position:absolute;width:278px;height:auto;background-color:#fff;border:1px solid rgba(0,0,0,.15);border-right-width:2px;border-bottom-width:2px;border-radius:6px;box-shadow:0 5px 10px #0003;z-index:100}.selectBox[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:3px 20px;cursor:pointer}.selectBox[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#262626;background-image:linear-gradient(180deg,#f5f5f5 0,#e8e8e8);background-repeat:repeat-x}.clr-input-wrapper[_ngcontent-%COMP%]{width:100%}.wrap-label[_ngcontent-%COMP%]{display:block}.wrap-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}.clr-control-container[_ngcontent-%COMP%]{width:60%}.w-90[_ngcontent-%COMP%]{width:278px}"]}),o})();const gn=["imageNameInput"];let At=(()=>{var t;class o{constructor(i,r,a,s){this.activatedRoute=i,this.artifactService=r,this.errorHandlerService=a,this.translateService=s,this.retagDialogOpened=!1}ngOnInit(){const i=this.activatedRoute.snapshot?.parent?.parent?.data;i&&(this.projectName=i.projectResolver.name),this.repoName=this.activatedRoute.snapshot?.parent?.params.repo}onRetag(){let i={projectName:this.imageNameInput.projectName.value,repositoryName:(0,u.gI)(this.imageNameInput.repoName.value),from:`${this.projectName}/${this.repoName}@${this.digest}`};this.artifactService.CopyArtifact(i).pipe((0,w.x)(()=>{this.imageNameInput.form.reset(),this.retagDialogOpened=!1})).subscribe({next:r=>{this.translateService.get("RETAG.MSG_SUCCESS").subscribe(a=>{this.errorHandlerService.info(a)})},error:r=>{this.errorHandlerService.error(r)}})}retag(i){this.retagDialogOpened=!0,this.imageNameInput.imageNameForm.reset({repoName:this.repoName,projectName:null}),this.digest=i,this.imageNameInput.notExist=!1}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(N.gz),e.Y36(ie.b),e.Y36(D.q),e.Y36(v.sK))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-copy-artifact"]],viewQuery:function(i,r){if(1&i&&e.Gf(gn,5),2&i){let a;e.iGM(a=e.CRH())&&(r.imageNameInput=a.first)}},decls:12,vars:9,consts:[[1,"hidden-tag",3,"clrModalOpen","clrModalStaticBackdrop","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body","retag-modal-body"],[1,"row","col-md-12"],["imageNameInput",""],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"]],template:function(i,r){if(1&i&&(e.TgZ(0,"clr-modal",0),e.NdJ("clrModalOpenChange",function(s){return r.retagDialogOpened=s}),e.TgZ(1,"h3",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"div",3),e._UZ(6,"hbr-image-name-input",null,4),e.qZA()(),e.TgZ(8,"div",5)(9,"button",6),e.NdJ("click",function(){return r.onRetag()}),e._uU(10),e.ALo(11,"translate"),e.qZA()()()),2&i){const a=e.MAs(7);e.Q6J("clrModalOpen",r.retagDialogOpened)("clrModalStaticBackdrop",!0),e.xp6(2),e.Oqu(e.lcZ(3,5,"REPOSITORY.RETAG")),e.xp6(7),e.Q6J("disabled",a.projectName.invalid||a.repoName.invalid||a.notExist||a.checkingName),e.xp6(1),e.hij(" ",e.lcZ(11,7,"BUTTON.CONFIRM")," ")}},dependencies:[l.qAN,l.VLi,un,v.X$]}),o})();var mn=_(544);const hn=["digestTarget"];let Tt=(()=>{var t;class o{constructor(){this.showTagManifestOpened=!1,this.copyFailed=!1}onSuccess(i){this.copyFailed=!1,this.showTagManifestOpened=!1}onError(i){this.copyFailed=!0,this.textInput&&this.textInput.nativeElement.select()}showDigestId(i){this.digestId=i,this.showTagManifestOpened=!0,this.copyFailed=!1}}return(t=o).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-copy-digest"]],viewQuery:function(i,r){if(1&i&&e.Gf(hn,5),2&i){let a;e.iGM(a=e.CRH())&&(r.textInput=a.first)}},decls:16,vars:15,consts:[[1,"hidden-tag",3,"clrModalOpen","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"row","col-md-12"],["rows","2",1,"clr-textarea","w-100"],["digestTarget",""],[1,"modal-footer"],[1,"copy-failed",3,"hidden"],["type","button",1,"btn","btn-primary",3,"ngxClipboard","cbOnSuccess","cbOnError"]],template:function(i,r){if(1&i&&(e.TgZ(0,"clr-modal",0),e.NdJ("clrModalOpenChange",function(s){return r.showTagManifestOpened=s}),e.TgZ(1,"h3",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"div",3)(6,"textarea",4,5),e._uU(8),e.qZA()()(),e.TgZ(9,"div",6)(10,"span",7),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"button",8),e.NdJ("cbOnSuccess",function(s){return r.onSuccess(s)})("cbOnError",function(s){return r.onError(s)}),e._uU(14),e.ALo(15,"translate"),e.qZA()()()),2&i){const a=e.MAs(7);e.Q6J("clrModalOpen",r.showTagManifestOpened)("clrModalStaticBackdrop",!0)("clrModalClosable",!1),e.xp6(2),e.Oqu(e.lcZ(3,9,"REPOSITORY.COPY_DIGEST_ID")),e.xp6(6),e.Oqu(r.digestId),e.xp6(2),e.Q6J("hidden",!r.copyFailed),e.xp6(1),e.Oqu(e.lcZ(12,11,"TAG.COPY_ERROR")),e.xp6(2),e.Q6J("ngxClipboard",a),e.xp6(1),e.hij(" ",e.lcZ(15,13,"BUTTON.COPY")," ")}},dependencies:[l.qAN,l.VLi,mn.y,v.X$]}),o})();var Ct=_(7546),dn=_(6682),We=_(7625),Xe=_(8383),xt=_(3997),fn=_(2181),_n=_(5210);function bn(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){const a=e.CHM(n).$implicit,s=e.oxw(2);return e.KtG(s.selectLabel(a))}),e._UZ(1,"clr-icon",11)(2,"hbr-label-piece",12),e.qZA()}if(2&t){const n=o.$implicit,i=e.oxw(2);e.xp6(1),e.Udp("visibility",i.isSelect(n)?"visible":"hidden"),e.xp6(1),e.Q6J("label",n)("labelWidth",130)}}function An(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",8),e.YNc(2,bn,3,4,"button",9),e.qZA(),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("hidden",!n.candidateLabels.length),e.xp6(1),e.Q6J("ngForOf",n.candidateLabels)}}function Tn(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){const a=e.CHM(n).$implicit,s=e.oxw(2);return e.KtG(s.selectLabel(a))}),e._UZ(1,"clr-icon",11)(2,"hbr-label-piece",12),e.qZA()}if(2&t){const n=o.$implicit,i=e.oxw(2);e.xp6(1),e.Udp("visibility",i.isSelect(n)?"visible":"hidden"),e.xp6(1),e.Q6J("label",n)("labelWidth",130)}}function Cn(t,o){if(1&t&&(e.TgZ(0,"div",8),e.YNc(1,Tn,3,4,"button",13),e.qZA()),2&t){const n=e.oxw();e.Q6J("hidden",!n.candidateLabels.length),e.xp6(1),e.Q6J("ngForOf",n.candidateLabels)}}let vt=(()=>{var t;class o{constructor(i,r){this.labelService=i,this.router=r,this.usedInDropdown=!1,this.ownedLabels=[],this.width=180,this.scope="g",this.candidateLabels=[],this.loading=!1,this.clickLabel=new e.vpe,this._searchSubject=new se.x,this._subSearch||(this._subSearch=this._searchSubject.pipe((0,Re.b)(500),(0,xt.x)(),(0,fn.h)(a=>(a||this.initCandidateLabel(),!!a)),(0,Ke.w)(a=>this.getLabelObservable(a))).subscribe(a=>{this.candidateLabels=a}))}ngOnInit(){this.checkProjectId(),this.initCandidateLabel()}initCandidateLabel(){const i=[];if(this.ownedLabels?.length){const r=[],a=[];this.ownedLabels?.forEach(s=>{"p"===s.scope&&r.push(s.id),"g"===s.scope&&a.push(s.id)}),r?.length&&i.push(this.labelService.ListLabels({page:1,pageSize:50,scope:"p",projectId:this.projectId,q:encodeURIComponent(`id={${r.join(" ")}}`)})),a?.length&&i.push(this.labelService.ListLabels({page:1,pageSize:50,scope:"g",q:encodeURIComponent(`id={${a.join(" ")}}`)}))}i.push(this.getLabelObservable("")),(0,te.D)(i).pipe((0,fe.U)(r=>[].concat.apply([],r)),(0,fe.U)(r=>r.filter((a,s,c)=>c.findIndex(p=>p.id===a.id)===s))).subscribe(r=>{this.candidateLabels=r})}ngOnChanges(i){this.checkProjectId()}ngOnDestroy(){this._subSearch&&(this._subSearch.unsubscribe(),this._subSearch=null)}checkProjectId(){if("p"===this.scope&&!this.projectId)throw new Error("Attribute [projectId] is required")}search(){this._searchSubject.next(this.searchValue)}selectLabel(i){this.clickLabel.emit({label:i,isAdd:!this.isSelect(i)})}isSelect(i){return!!this.ownedLabels?.length&&this.ownedLabels.some(r=>r.id===i.id&&this.dropdownOpened)}goToLabelPage(){this.router.navigate("p"===this.scope?["harbor","projects",this.projectId,"labels"]:["harbor","labels"])}getLabelObservable(i){return this.loading=!0,"p"===this.scope?(0,te.D)([this.labelService.ListLabels({page:1,pageSize:50,scope:"p",projectId:this.projectId,q:i?encodeURIComponent(`name=~${i}`):null}),this.labelService.ListLabels({page:1,pageSize:50,scope:"g",q:i?encodeURIComponent(`name=~${i}`):null})]).pipe((0,fe.U)(r=>[].concat.apply([],r)),(0,w.x)(()=>this.loading=!1)):this.labelService.ListLabels({page:1,pageSize:50,scope:"g",q:i?encodeURIComponent(`name=~${i}`):null}).pipe((0,w.x)(()=>this.loading=!1))}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(_n.Q),e.Y36(N.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-label-selector"]],inputs:{usedInDropdown:"usedInDropdown",ownedLabels:"ownedLabels",width:"width",scope:"scope",projectId:"projectId",dropdownOpened:"dropdownOpened"},outputs:{clickLabel:"clickLabel"},features:[e.TTD],decls:13,vars:14,consts:[[1,"clr-input-wrapper","filter-label-input"],["type","text","autocomplete","off",1,"clr-input",3,"placeholder","ngModel","ngModelChange","keyup"],[1,"no-labels",3,"hidden"],[1,"spinner","spinner-inline"],[3,"hidden"],[1,"no-labels",3,"hidden","click"],[4,"ngIf","ngIfElse"],["notUsedInDropdown",""],[1,"has-label",3,"hidden"],["clrDropdownItem","","type","button","class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["clrDropdownItem","","type","button",1,"dropdown-item",3,"click"],["shape","check",1,"check-icon"],[3,"label","labelWidth"],["type","button","class","dropdown-item",3,"click",4,"ngFor","ngForOf"],["type","button",1,"dropdown-item",3,"click"]],template:function(i,r){if(1&i&&(e.TgZ(0,"div")(1,"div",0)(2,"input",1),e.NdJ("ngModelChange",function(s){return r.searchValue=s})("keyup",function(){return r.search()}),e.ALo(3,"translate"),e.qZA()(),e.TgZ(4,"div",2),e._UZ(5,"span",3),e.qZA(),e.TgZ(6,"div",4)(7,"div",5),e.NdJ("click",function(){return r.goToLabelPage()}),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,An,3,2,"ng-container",6),e.YNc(11,Cn,2,2,"ng-template",null,7,e.W1O),e.qZA()()),2&i){const a=e.MAs(12);e.Udp("width",r.width,"px"),e.xp6(2),e.s9C("placeholder",e.lcZ(3,10,"LABEL.FILTER_LABEL_PLACEHOLDER")),e.Q6J("ngModel",r.searchValue),e.xp6(2),e.Q6J("hidden",!r.loading),e.xp6(2),e.Q6J("hidden",r.loading),e.xp6(1),e.Q6J("hidden",r.candidateLabels.length),e.xp6(1),e.hij(" ",e.lcZ(9,12,"LABEL.NO_LABELS")," "),e.xp6(2),e.Q6J("ngIf",r.usedInDropdown)("ngIfElse",a)}},dependencies:[T.Fj,T.JJ,T.On,A.sg,A.O5,l.qvL,l.lU3,Xe.q,v.X$],styles:[".has-label[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;margin-top:10px}.filter-label-input[_ngcontent-%COMP%]{display:flex;justify-content:center}.no-labels[_ngcontent-%COMP%]{height:4rem;display:flex;align-items:center;justify-content:center}.dropdown-item[_ngcontent-%COMP%]{padding:3px;display:flex;align-items:center}.check-icon[_ngcontent-%COMP%]{margin-left:5px;margin-right:5px;margin-top:3px}.clr-form-control[_ngcontent-%COMP%]{margin-top:0!important}"]}),o})();var pe=_(4825),ne=_(27),St=_(7354),Me=_(5477),re=_(3179);const xn=["barChart"];let vn=(()=>{var t;class o{constructor(i){this.translate=i,this.metadata=[],this.translatedTextArr=[],this.isWhiteBackground=!1,this.hasViewInit=!1}ngOnInit(){this.translateText()}ngAfterViewInit(){this.hasViewInit=!0,this.initChart()}ngDoCheck(){this.hasViewInit&&this.initChart()}translateText(){if(this.metadata&&this.metadata.length>0){let i=[];this.metadata.forEach(r=>{i.push(this.translate.get(r.text))}),(0,te.D)(i).subscribe(r=>{this.translatedTextArr=r,this.hasViewInit&&this.initChart()})}}initChart(){this.barChart&&this.metadata&&this.metadata.length>0&&(this.barChart.nativeElement.width="240",this.barChart.nativeElement.height=25+20*this.metadata.length+"",this.context=this.barChart.nativeElement.getContext("2d"),this.getMax(),this.context.fillStyle=this.isWhiteBackground?"#000":"#fff",this.drawLine(50,0,50,5+20*this.metadata.length),this.drawLine(50,5+20*this.metadata.length,250,5+20*this.metadata.length),this.drawLine(90,5+20*this.metadata.length,90,2+20*this.metadata.length),this.drawLine(130,5+20*this.metadata.length,130,2+20*this.metadata.length),this.drawLine(170,5+20*this.metadata.length,170,2+20*this.metadata.length),this.drawLine(210,5+20*this.metadata.length,210,2+20*this.metadata.length),this.context.font="12px",this.context.textAlign="center",this.context.fillText(this.scale.toString(),90,20*this.metadata.length+18,50),this.context.fillText((2*this.scale).toString(),130,20*this.metadata.length+18,50),this.context.fillText((3*this.scale).toString(),170,20*this.metadata.length+18,50),this.context.fillText((4*this.scale).toString(),210,20*this.metadata.length+18,50),this.metadata.forEach((i,r)=>{this.drawBar(r,i.color,i.value)}))}drawBar(i,r,a){this.context.textBaseline="middle",this.context.textAlign="left",this.context.fillStyle=r,this.context.fillRect(50,5+20*i,a/this.scale*40,15),this.context.fillText(a.toString(),a/this.scale*40+53,12+20*i,37),this.context.textAlign="right";let s="";s=this.translatedTextArr&&this.translatedTextArr.length>0?this.translatedTextArr[i]:this.metadata[i].text,this.context.fillText(s,47,12+20*i,47)}drawLine(i,r,a,s){this.context.beginPath(),this.context.moveTo(i,r),this.context.lineTo(a,s),this.context.strokeStyle=this.isWhiteBackground?"#000":"#fff",this.context.stroke(),this.context.closePath()}getMax(){let i=1;this.metadata&&this.metadata.length>0&&this.metadata.forEach(r=>{r.value>i&&(i=r.value)}),this.max=i,this.scale=10*Math.ceil(i/40)}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(v.sK))},t.\u0275cmp=e.Xpm({type:t,selectors:[["histogram-chart"]],viewQuery:function(i,r){if(1&i&&e.Gf(xn,5),2&i){let a;e.iGM(a=e.CRH())&&(r.barChart=a.first)}},inputs:{metadata:"metadata",isWhiteBackground:"isWhiteBackground"},decls:3,vars:0,consts:[[1,"canvas"],["barChart",""]],template:function(i,r){1&i&&(e.TgZ(0,"canvas",0,1),e._uU(2," HTML5 canvas not supported "),e.qZA())},changeDetection:0}),o})();function Sn(t,o){if(1&t&&(e.TgZ(0,"clr-tooltip-content",11)(1,"span",12),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",13),e._uU(5),e.qZA()()),2&t){const n=e.oxw(2);e.Q6J("clrPosition","left")("clrSize","md"),e.xp6(2),e.Oqu(e.lcZ(3,4,"SCANNER.VULNERABILITY_SEVERITY")),e.xp6(3),e.Oqu(n.tipTitle)}}function In(t,o){if(1&t&&(e.TgZ(0,"clr-tooltip")(1,"div",7)(2,"div",8)(3,"div",9),e._uU(4),e.ALo(5,"slice"),e.qZA()()(),e.YNc(6,Sn,6,6,"clr-tooltip-content",10),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("className",n.getClass()),e.xp6(2),e.hij(" ",e.Dn7(5,2,null==n.vulnerabilitySummary?null:n.vulnerabilitySummary.severity,0,1)," ")}}function yn(t,o){if(1&t&&(e.TgZ(0,"div",14),e._UZ(1,"div",15),e.TgZ(2,"span",16),e._uU(3),e.qZA(),e.TgZ(4,"span",17),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div",15),e._uU(8,"-"),e.qZA(),e.TgZ(9,"span",18),e._uU(10),e.qZA(),e.TgZ(11,"span",19),e._uU(12),e.ALo(13,"translate"),e.qZA()()),2&t){const n=e.oxw();e.xp6(3),e.Oqu(n.total),e.xp6(2),e.Oqu(e.lcZ(6,4,"SCANNER.TOTAL")),e.xp6(5),e.Oqu(n.fixableCount),e.xp6(2),e.Oqu(e.lcZ(13,6,"SCANNER.FIXABLE"))}}function On(t,o){1&t&&(e.TgZ(0,"div",20),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"VULNERABILITY.NO_VULNERABILITY")," "))}const wn=function(t,o){return{"is-white":t,"is-dark":o}};function Nn(t,o){if(1&t&&(e.TgZ(0,"div",27)(1,"div",8)(2,"div",28),e._uU(3),e.ALo(4,"slice"),e.qZA()()()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("className",n.getClass()),e.xp6(1),e.Q6J("ngClass",e.WLB(7,wn,!n.isThemeLight(),n.isThemeLight())),e.xp6(1),e.hij(" ",e.Dn7(4,3,null==n.vulnerabilitySummary?null:n.vulnerabilitySummary.severity,0,1)," ")}}function Ln(t,o){1&t&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"span",12),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA()(),e.BQk()),2&t&&(e.xp6(2),e.hij("",e.lcZ(3,2,"VULNERABILITY.OVERALL_SEVERITY")," "),e.xp6(3),e.Oqu(e.lcZ(6,4,e.lcZ(7,6,"VULNERABILITY.SEVERITY.CRITICAL"))))}function Zn(t,o){1&t&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"span",12),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA()(),e.BQk()),2&t&&(e.xp6(2),e.hij("",e.lcZ(3,2,"VULNERABILITY.OVERALL_SEVERITY")," "),e.xp6(3),e.Oqu(e.lcZ(6,4,e.lcZ(7,6,"VULNERABILITY.SEVERITY.HIGH"))))}function En(t,o){1&t&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"span",12),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA()(),e.BQk()),2&t&&(e.xp6(2),e.hij("",e.lcZ(3,2,"VULNERABILITY.OVERALL_SEVERITY")," "),e.xp6(3),e.Oqu(e.lcZ(6,4,e.lcZ(7,6,"VULNERABILITY.SEVERITY.MEDIUM"))))}function Pn(t,o){1&t&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"span",12),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA()(),e.BQk()),2&t&&(e.xp6(2),e.hij("",e.lcZ(3,2,"VULNERABILITY.OVERALL_SEVERITY")," "),e.xp6(3),e.Oqu(e.lcZ(6,4,e.lcZ(7,6,"VULNERABILITY.SEVERITY.LOW"))))}function Rn(t,o){1&t&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"span",12),e._uU(5),e.ALo(6,"titlecase"),e.ALo(7,"translate"),e.qZA()(),e.BQk()),2&t&&(e.xp6(2),e.hij("",e.lcZ(3,2,"VULNERABILITY.OVERALL_SEVERITY")," "),e.xp6(3),e.Oqu(e.lcZ(6,4,e.lcZ(7,6,"VULNERABILITY.SEVERITY.NONE"))))}function Mn(t,o){1&t&&(e.ynx(0),e._UZ(1,"clr-icon",29),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.BQk()),2&t&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"VULNERABILITY.NO_VULNERABILITY")))}function Dn(t,o){if(1&t&&(e.TgZ(0,"div",30),e._UZ(1,"histogram-chart",31),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("isWhiteBackground",!n.isThemeLight())("metadata",n.passMetadataToChart())}}function kn(t,o){if(1&t&&(e.TgZ(0,"div")(1,"span",25),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",26),e._uU(5),e.qZA()()),2&t){const n=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,2,"SCANNER.SCANNED_BY")),e.xp6(3),e.Oqu(n.getScannerInfo())}}function Un(t,o){if(1&t&&(e.TgZ(0,"clr-tooltip-content",21)(1,"div",22),e.YNc(2,Nn,5,10,"div",23),e.YNc(3,Ln,8,8,"ng-container",1),e.YNc(4,Zn,8,8,"ng-container",1),e.YNc(5,En,8,8,"ng-container",1),e.YNc(6,Pn,8,8,"ng-container",1),e.YNc(7,Rn,8,8,"ng-container",1),e.YNc(8,Mn,5,3,"ng-container",1),e.qZA(),e._UZ(9,"hr"),e.YNc(10,Dn,2,2,"div",24),e.YNc(11,kn,6,4,"div",1),e.TgZ(12,"div")(13,"span",25),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"span",26),e._uU(17),e.qZA()(),e.TgZ(18,"div")(19,"span",25),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"span"),e._uU(23),e.ALo(24,"harborDatetime"),e.qZA()()()),2&t){const n=e.oxw();e.Q6J("clrPosition","right")("clrSize","lg"),e.xp6(2),e.Q6J("ngIf",!n.noVulnerability),e.xp6(1),e.Q6J("ngIf",n.isCritical),e.xp6(1),e.Q6J("ngIf",n.isHigh),e.xp6(1),e.Q6J("ngIf",n.isMedium),e.xp6(1),e.Q6J("ngIf",n.isLow),e.xp6(1),e.Q6J("ngIf",n.isNone),e.xp6(1),e.Q6J("ngIf",n.noVulnerability),e.xp6(2),e.Q6J("ngIf",!n.noVulnerability),e.xp6(1),e.Q6J("ngIf",n.scanner),e.xp6(3),e.Oqu(e.lcZ(15,15,"SCANNER.DURATION")),e.xp6(3),e.Oqu(n.duration()),e.xp6(3),e.hij("",e.lcZ(21,17,"VULNERABILITY.CHART.SCANNING_TIME")," "),e.xp6(3),e.Oqu(e.xi3(24,19,n.completeTimestamp,"short"))}}function Fn(t,o){if(1&t&&(e.TgZ(0,"clr-tooltip-content",35)(1,"div",12)(2,"span",25),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"div")(8,"span"),e._uU(9),e.ALo(10,"translate"),e.qZA()()()),2&t){const n=e.oxw(2);e.Q6J("clrSize","lg"),e.xp6(3),e.hij("",e.lcZ(4,4,"VULNERABILITY.CHART.SCANNING_PERCENT")," "),e.xp6(3),e.Oqu(n.completePercent),e.xp6(3),e.Oqu(e.lcZ(10,6,"VULNERABILITY.CHART.SCANNING_PERCENT_EXPLAIN"))}}function qn(t,o){1&t&&(e.TgZ(0,"clr-tooltip",26)(1,"div",32),e._UZ(2,"clr-icon",33),e.qZA(),e.YNc(3,Fn,11,8,"clr-tooltip-content",34),e.qZA())}let Jn=(()=>{var t;class o{constructor(i){this.translate=i,this._tipTitle="",this.vulnerabilitySummary={scan_status:u.Iy.NOT_SCANNED,severity:""}}ngOnInit(){let i="VULNERABILITY.SEVERITY.NONE";switch(this.vulnerabilitySummary.severity){case u.AT.CRITICAL:i="VULNERABILITY.SEVERITY.CRITICAL";break;case u.AT.HIGH:i="VULNERABILITY.SEVERITY.HIGH";break;case u.AT.MEDIUM:i="VULNERABILITY.SEVERITY.MEDIUM";break;case u.AT.LOW:i="VULNERABILITY.SEVERITY.LOW"}this.translate.get(i).subscribe(r=>{this._tipTitle=r})}get tipTitle(){return this._tipTitle}get total(){return this.vulnerabilitySummary&&this.vulnerabilitySummary.summary&&this.vulnerabilitySummary.summary.total?this.vulnerabilitySummary.summary.total:0}get fixableCount(){return this.vulnerabilitySummary&&this.vulnerabilitySummary.summary&&this.vulnerabilitySummary.summary.fixable?this.vulnerabilitySummary.summary.fixable:0}get sevSummary(){return this.vulnerabilitySummary&&this.vulnerabilitySummary.summary?this.vulnerabilitySummary.summary.summary:null}get criticalCount(){return this.sevSummary?this.sevSummary[u.AT.CRITICAL]:0}duration(){if(this.vulnerabilitySummary&&this.vulnerabilitySummary.duration){let i="";const r=Math.floor(this.vulnerabilitySummary.duration/60);r&&(i+=r+" min ");const a=this.vulnerabilitySummary.duration%60;return a&&(i+=a+" sec"),i}return"0"}get highCount(){return this.sevSummary?this.sevSummary[u.AT.HIGH]:0}get mediumCount(){return this.sevSummary?this.sevSummary[u.AT.MEDIUM]:0}get lowCount(){return this.sevSummary?this.sevSummary[u.AT.LOW]:0}get noneCount(){return this.vulnerabilitySummary&&this.vulnerabilitySummary.summary&&this.vulnerabilitySummary.summary.summary?this.vulnerabilitySummary.summary.summary[u.AT.NONE]:0}get completePercent(){return this.vulnerabilitySummary?`${this.vulnerabilitySummary.complete_percent}%`:"0%"}isLimitedSuccess(){return this.vulnerabilitySummary&&this.vulnerabilitySummary.complete_percent<100}get completeTimestamp(){return this.vulnerabilitySummary&&this.vulnerabilitySummary.end_time?this.vulnerabilitySummary.end_time:new Date}get isCritical(){return this.vulnerabilitySummary&&u.AT.CRITICAL===this.vulnerabilitySummary.severity}get isHigh(){return this.vulnerabilitySummary&&u.AT.HIGH===this.vulnerabilitySummary.severity}get isMedium(){return this.vulnerabilitySummary&&u.AT.MEDIUM===this.vulnerabilitySummary.severity}get isLow(){return this.vulnerabilitySummary&&u.AT.LOW===this.vulnerabilitySummary.severity}get isNone(){return this.vulnerabilitySummary&&u.AT.NONE===this.vulnerabilitySummary.severity&&this.total>0}get noVulnerability(){return 0===this.total}getClass(){if(this.vulnerabilitySummary&&this.vulnerabilitySummary.severity){if(this.isCritical)return"level-critical";if(this.isHigh)return"level-high";if(this.isMedium)return"level-medium";if(this.isLow)return"level-low";if(this.isNone)return"level-none"}return null}passMetadataToChart(){return[{text:"VULNERABILITY.SEVERITY.CRITICAL",value:this.criticalCount?this.criticalCount:0,color:re.gX.CRITICAL},{text:"VULNERABILITY.SEVERITY.HIGH",value:this.highCount?this.highCount:0,color:re.gX.HIGH},{text:"VULNERABILITY.SEVERITY.MEDIUM",value:this.mediumCount?this.mediumCount:0,color:re.gX.MEDIUM},{text:"VULNERABILITY.SEVERITY.LOW",value:this.lowCount?this.lowCount:0,color:re.gX.LOW},{text:"VULNERABILITY.SEVERITY.NONE",value:this.noneCount?this.noneCount:0,color:re.gX.NA}]}isThemeLight(){return localStorage.getItem(Me.BJ)===Me.XO.LIGHT}getScannerInfo(){if(this.scanner){if(this.scanner.name&&this.scanner.version)return`${this.scanner.name}@${this.scanner.version}`;if(this.scanner.name&&!this.scanner.version)return`${this.scanner.name}`}return""}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(v.sK))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hbr-result-tip-histogram"]],inputs:{scanner:"scanner",vulnerabilitySummary:"vulnerabilitySummary"},decls:8,vars:4,consts:[[1,"tip-wrapper","width-215"],[4,"ngIf"],["clrTooltipTrigger","",1,"tip-block"],["class","circle-block",4,"ngIf"],["class","pl-1 margin-left-5 tip-wrapper bar-block-none shadow-none width-150",4,"ngIf"],["class","w-800",3,"clrPosition","clrSize",4,"clrIfOpen"],["class","margin-left-5",4,"ngIf"],["clrTooltipTrigger","",1,"level-border"],[3,"className"],[1,"inner"],[3,"clrPosition","clrSize",4,"clrIfOpen"],[3,"clrPosition","clrSize"],[1,"font-weight-600"],[1,"font-weight-600","margin-left-5"],[1,"circle-block"],[1,"black-point-container","margin-left-10"],[1,"margin-left-10","font-weight-800","font-size-14"],[1,"margin-left-5","font-size-14"],[1,"margin-left-10","font-weight-800","font-size-12"],[1,"margin-left-5","font-size-12"],[1,"pl-1","margin-left-5","tip-wrapper","bar-block-none","shadow-none","width-150"],[1,"w-800",3,"clrPosition","clrSize"],[1,"bar-tooltip-font-larger"],["class","level-border clr-display-inline-block margin-right-5",4,"ngIf"],["class","bar-summary bar-tooltip-fon",4,"ngIf"],[1,"bar-scanning-time"],[1,"margin-left-5"],[1,"level-border","clr-display-inline-block","margin-right-5"],[1,"inner",3,"ngClass"],["shape","check-circle","size","32",1,"is-success"],[1,"bar-summary","bar-tooltip-fon"],[3,"isWhiteBackground","metadata"],["clrTooltipTrigger",""],["shape","exclamation-triangle","size","20",1,"is-warning"],[3,"clrSize",4,"clrIfOpen"],[3,"clrSize"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0),e.YNc(1,In,7,6,"clr-tooltip",1),e.TgZ(2,"clr-tooltip")(3,"div",2),e.YNc(4,yn,14,8,"div",3),e.YNc(5,On,3,3,"div",4),e.qZA(),e.YNc(6,Un,25,22,"clr-tooltip-content",5),e.qZA(),e.YNc(7,qn,4,0,"clr-tooltip",6),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngIf",!r.noVulnerability),e.xp6(3),e.Q6J("ngIf",!r.noVulnerability),e.xp6(1),e.Q6J("ngIf",r.noVulnerability),e.xp6(2),e.Q6J("ngIf",r.isLimitedSuccess()))},dependencies:[l.qvL,l.nqY,l.Jmj,l.bMv,l.zDF,A.mk,A.O5,vn,v.X$,A.OU,A.rS,ce.Z],styles:[".bar-wrapper[_ngcontent-%COMP%]{width:144px;height:12px}.bar-state[_ngcontent-%COMP%]{text-align:center}.bar-state[_ngcontent-%COMP%]   .unknow-text[_ngcontent-%COMP%]{margin-left:-5px}.bar-state-chart[_ngcontent-%COMP%]{margin-top:2px}.bar-state-chart[_ngcontent-%COMP%]   .loop-height[_ngcontent-%COMP%]{height:2px}.bar-state-error[_ngcontent-%COMP%]{position:relative;top:-4px}.error-text[_ngcontent-%COMP%]{position:relative;top:1px;margin-left:-5px;cursor:pointer}.scanning-button[_ngcontent-%COMP%]{height:24px;margin-top:0;margin-bottom:0;vertical-align:middle;top:-12px;position:relative}.tip-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;color:#fff;text-align:center;font-size:10px;height:15px;line-height:15px}.bar-block-critical[_ngcontent-%COMP%]{background-color:#ff4d2e}.bar-block-high[_ngcontent-%COMP%]{background-color:#ff8f3d}.bar-block-medium[_ngcontent-%COMP%]{background-color:#ffce66}.bar-block-low[_ngcontent-%COMP%]{background-color:#fff1ad}.bar-block-none[_ngcontent-%COMP%]{background-color:#2ec0ff}.bar-block-unknown[_ngcontent-%COMP%]{background-color:gray}.bar-tooltip-font[_ngcontent-%COMP%]{font-size:13px;color:#fff}.bar-tooltip-font-title[_ngcontent-%COMP%]{font-weight:600}.bar-summary[_ngcontent-%COMP%]{margin-top:12px;text-align:left}.bar-scanning-time[_ngcontent-%COMP%]{margin-top:12px}.bar-summary-item[_ngcontent-%COMP%]{margin-top:3px;margin-bottom:3px}.bar-summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(1){width:26px;text-align:center;display:inline-block}.bar-summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:nth-child(2){width:28px;display:inline-block}.option-right[_ngcontent-%COMP%]{padding-right:16px}.refresh-btn[_ngcontent-%COMP%]{cursor:pointer}.refresh-btn[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{color:#007cbb}.tip-icon-medium[_ngcontent-%COMP%]{color:orange}.tip-icon-low[_ngcontent-%COMP%]{color:#007cbb}.font-color-green[_ngcontent-%COMP%]{color:green}.bar-tooltip-font-larger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle}hr[_ngcontent-%COMP%]{border-bottom:0;border-color:#aaa;margin:6px -10px}.font-weight-600[_ngcontent-%COMP%]{font-weight:600}.result-row[_ngcontent-%COMP%]{position:relative}.help-icon[_ngcontent-%COMP%], .ml-3px[_ngcontent-%COMP%]{margin-left:3px}.w-360[_ngcontent-%COMP%]{width:360px!important}.margin-left-5[_ngcontent-%COMP%]{margin-left:5px}.margin-left-10[_ngcontent-%COMP%]{margin-left:10px}.width-30[_ngcontent-%COMP%]{width:26px}.width-215[_ngcontent-%COMP%]{width:215px}.width-150[_ngcontent-%COMP%]{width:150px}.level-border[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-items:center;border-radius:50%;height:26px;width:26px;line-height:26px}.inner[_ngcontent-%COMP%]{margin:auto;height:18px;width:18px;line-height:18px;font-size:12px;font-weight:600;border-radius:50%;text-align:center}.level-critical[_ngcontent-%COMP%]{background:#FF4D2E;color:#ff4d2e}.level-high[_ngcontent-%COMP%]{background:#FF8F3D;color:#ff8f3d}.level-medium[_ngcontent-%COMP%]{background-color:#ffce66;color:#ffce66}.level-low[_ngcontent-%COMP%]{background:#FFF1AD;color:#fff1ad}.level-none[_ngcontent-%COMP%]{background-color:gray;color:gray}.black-point-container[_ngcontent-%COMP%]{display:inline-block;position:relative;height:6px}.black-point[_ngcontent-%COMP%]{position:absolute;width:4px;height:4px;border-radius:50%}.font-weight-800[_ngcontent-%COMP%]{font-weight:800}.color-green[_ngcontent-%COMP%]{color:green}.tip-block[_ngcontent-%COMP%]{position:relative}.font-size-14[_ngcontent-%COMP%]{font-size:14px}.font-size-12[_ngcontent-%COMP%]{font-size:12px}.margin-right-5[_ngcontent-%COMP%]{margin-right:5px}.is-white[_ngcontent-%COMP%]{background-color:#fff}.is-dark[_ngcontent-%COMP%]{background-color:#000}"]}),o})();function Qn(t,o){1&t&&(e.TgZ(0,"div",4)(1,"span",5),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"VULNERABILITY.STATE.QUEUED")))}function Hn(t,o){if(1&t&&(e.TgZ(0,"div",6)(1,"a",7),e._UZ(2,"clr-icon",8),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("href",n.viewLog(),e.LSH),e.xp6(2),e.hij(" ",e.lcZ(4,2,"VULNERABILITY.STATE.ERROR")," ")}}function Vn(t,o){1&t&&(e.TgZ(0,"div",9)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",10),e._UZ(5,"progress"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"VULNERABILITY.STATE.SCANNING")))}function Gn(t,o){if(1&t&&(e.TgZ(0,"div",9),e._UZ(1,"hbr-result-tip-histogram",11),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("scanner",n.getScanner())("vulnerabilitySummary",n.summary)}}function zn(t,o){1&t&&(e.TgZ(0,"div",4)(1,"span",12),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"VULNERABILITY.STATE.STOPPED")))}function $n(t,o){1&t&&(e.TgZ(0,"div",4)(1,"span",13),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"VULNERABILITY.STATE.OTHER_STATUS")))}const ve=3e3;let et=(()=>{var t;class o{constructor(i,r,a,s){this.artifactService=i,this.scanService=r,this.errorHandler=a,this.eventService=s,this.repoName="",this.projectName="",this.artifactDigest="",this.onSubmitting=!1,this.onStopping=!1,this.retryCounter=0,this.submitFinish=new e.vpe,this.submitStopFinish=new e.vpe,this.scanFinished=new e.vpe}ngOnInit(){(this.status===u.Iy.RUNNING||this.status===u.Iy.PENDING)&&!this.stateCheckTimer&&(this.stateCheckTimer=(0,pe.H)(0,ve).subscribe(()=>{this.getSummary()})),this.scanSubscription||(this.scanSubscription=this.eventService.subscribe(S.n.START_SCAN_ARTIFACT,i=>{this.repoName+"/"+this.artifactDigest===i&&this.scanNow()})),this.stopSubscription||(this.stopSubscription=this.eventService.subscribe(S.n.STOP_SCAN_ARTIFACT,i=>{this.repoName+"/"+this.artifactDigest===i&&this.stopScan()}))}ngOnDestroy(){this.stateCheckTimer&&(this.stateCheckTimer.unsubscribe(),this.stateCheckTimer=null),this.scanSubscription&&(this.scanSubscription.unsubscribe(),this.scanSubscription=null),this.stopSubscription&&(this.stopSubscription.unsubscribe(),this.stopSubscription=null)}get status(){return this.summary&&this.summary.scan_status?this.summary.scan_status:u.Iy.NOT_SCANNED}get completed(){return this.status===u.Iy.SUCCESS}get error(){return this.status===u.Iy.ERROR}get queued(){return this.status===u.Iy.PENDING}get scanning(){return this.status===u.Iy.RUNNING}get stopped(){return this.status===u.Iy.STOPPED}get otherStatus(){return!(this.completed||this.error||this.queued||this.scanning||this.stopped)}scanNow(){this.onSubmitting?console.error("duplicated submit"):this.repoName&&this.artifactDigest?(this.onSubmitting=!0,this.scanService.scanArtifact({projectName:this.projectName,reference:this.artifactDigest,repositoryName:(0,u.gI)(this.repoName),scanType:{scan_type:ne.SZ.VULNERABILITY}}).pipe((0,w.x)(()=>this.submitFinish.emit(!1))).subscribe(()=>{this.onSubmitting=!1,this.summary={scan_status:u.Iy.PENDING},this.stateCheckTimer||(this.stateCheckTimer=(0,pe.H)(ve,ve).subscribe(()=>{this.getSummary()}))},i=>{this.onSubmitting=!1,i&&i.error&&409===i.error.code?console.error(i.error.message):this.errorHandler.error(i)})):console.error("bad repository or tag")}getSummary(){!this.repoName||!this.artifactDigest||this.artifactService.getArtifact({projectName:this.projectName,repositoryName:(0,u.gI)(this.repoName),reference:this.artifactDigest,withScanOverview:!0,withAccessory:!0,XAcceptVulnerabilities:u.eB}).subscribe(i=>{i.scan_overview&&this.copyValue(Object.values(i.scan_overview)[0]),!this.queued&&!this.scanning&&(this.stateCheckTimer&&(this.stateCheckTimer.unsubscribe(),this.stateCheckTimer=null),this.scanFinished.emit(i)),this.eventService.publish(S.n.UPDATE_VULNERABILITY_INFO,i)},i=>{this.errorHandler.error(i),this.retryCounter++,this.retryCounter>=3&&(this.stateCheckTimer&&(this.stateCheckTimer.unsubscribe(),this.stateCheckTimer=null),this.retryCounter=0)})}copyValue(i){!this.summary||!i||!i.scan_status||(this.summary=(0,u.d9)(i))}viewLog(){return`${u.S$}/projects/${this.projectName}/repositories/${(0,u.gI)(this.repoName)}/artifacts/${this.artifactDigest}/scan/${this.summary.report_id}/log`}getScanner(){return this.summary&&this.summary.scanner?this.summary.scanner:this.inputScanner}stopScan(){this.onStopping?console.error("duplicated stopping command"):this.repoName&&this.artifactDigest?(this.onStopping=!0,this.scanService.stopScanArtifact({projectName:this.projectName,reference:this.artifactDigest,repositoryName:(0,u.gI)(this.repoName),scanType:{scan_type:ne.SZ.VULNERABILITY}}).pipe((0,w.x)(()=>{this.submitStopFinish.emit(!1),this.onStopping=!1})).subscribe(()=>{this.stateCheckTimer||(this.stateCheckTimer=(0,pe.H)(ve,ve).subscribe(()=>{this.getSummary()})),this.errorHandler.info("VULNERABILITY.TRIGGER_STOP_SUCCESS")},i=>{this.errorHandler.error(i)})):console.error("bad repository or artifact")}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(ie.b),e.Y36(St.I),e.Y36(D.q),e.Y36(S.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hbr-vulnerability-bar"]],inputs:{inputScanner:"inputScanner",repoName:"repoName",projectName:"projectName",artifactDigest:"artifactDigest",summary:"summary"},outputs:{submitFinish:"submitFinish",submitStopFinish:"submitStopFinish",scanFinished:"scanFinished"},decls:7,vars:6,consts:[[1,"bar-wrapper"],["class","bar-state",4,"ngIf"],["class","bar-state bar-state-error",4,"ngIf"],["class","bar-state bar-state-chart",4,"ngIf"],[1,"bar-state"],[1,"label","label-orange"],[1,"bar-state","bar-state-error"],["rel","noopener noreferrer","target","_blank",1,"error-text",3,"href"],["shape","error","size","24",1,"is-error"],[1,"bar-state","bar-state-chart"],[1,"progress","loop","loop-height"],[3,"scanner","vulnerabilitySummary"],[1,"label","stopped"],[1,"label","not-scan"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0),e.YNc(1,Qn,4,3,"div",1),e.YNc(2,Hn,5,4,"div",2),e.YNc(3,Vn,6,3,"div",3),e.YNc(4,Gn,2,2,"div",3),e.YNc(5,zn,4,3,"div",1),e.YNc(6,$n,4,3,"div",1),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngIf",r.queued),e.xp6(1),e.Q6J("ngIf",r.error),e.xp6(1),e.Q6J("ngIf",r.scanning),e.xp6(1),e.Q6J("ngIf",r.completed),e.xp6(1),e.Q6J("ngIf",r.stopped),e.xp6(1),e.Q6J("ngIf",r.otherStatus))},dependencies:[l.qvL,A.O5,Jn,v.X$],styles:[".bar-wrapper[_ngcontent-%COMP%]{width:210px}.bar-state[_ngcontent-%COMP%]   .unknow-text[_ngcontent-%COMP%]{margin-left:-5px}.bar-state[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:50%}.bar-state-chart[_ngcontent-%COMP%]   .loop-height[_ngcontent-%COMP%]{height:2px}.bar-state-error[_ngcontent-%COMP%]{position:relative}.error-text[_ngcontent-%COMP%]{position:relative;top:1px;margin-left:-5px;cursor:pointer}.scanning-button[_ngcontent-%COMP%]{height:24px;margin-top:0;margin-bottom:0;vertical-align:middle;top:-12px;position:relative}.tip-wrapper[_ngcontent-%COMP%]{display:inline-block;height:10px;max-width:120px}.bar-tooltip-font-title[_ngcontent-%COMP%]{font-weight:600}.bar-summary[_ngcontent-%COMP%]{margin-top:12px;text-align:left}.bar-scanning-time[_ngcontent-%COMP%]{margin-top:12px}.bar-summary-item[_ngcontent-%COMP%]{margin-top:3px;margin-bottom:3px}.bar-summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(1){width:30px;text-align:center;display:inline-block}.bar-summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){width:28px;display:inline-block}.option-right[_ngcontent-%COMP%]{padding-right:16px}.refresh-btn[_ngcontent-%COMP%]{cursor:pointer}.refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.tip-icon-medium[_ngcontent-%COMP%]{color:orange}.tip-icon-low[_ngcontent-%COMP%]{color:#ff0}.font-color-green[_ngcontent-%COMP%]{color:green}.bar-tooltip-font-larger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle}hr[_ngcontent-%COMP%]{border-bottom:0;border-color:#aaa;margin:6px -10px}.font-weight-600[_ngcontent-%COMP%]{font-weight:600}.rightPos[_ngcontent-%COMP%]{position:absolute;z-index:100;right:35px;margin-top:4px}.result-row[_ngcontent-%COMP%]{position:relative}.help-icon[_ngcontent-%COMP%]{margin-left:3px}.mt-3px[_ngcontent-%COMP%]{margin-top:5px}.label-critical[_ngcontent-%COMP%]{background:#ff4d2e;color:#000}.label-danger[_ngcontent-%COMP%]{background:#ff8f3d!important;color:#000!important}.label-medium[_ngcontent-%COMP%]{background-color:#ffce66;color:#000}.label-low[_ngcontent-%COMP%]{background:#fff1ad;color:#000}.label-none[_ngcontent-%COMP%]{background-color:#2ec0ff;color:#000}.no-border[_ngcontent-%COMP%]{border:none}hbr-vulnerability-bar[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], hbr-vulnerability-bar[_ngcontent-%COMP%]   .not-scan[_ngcontent-%COMP%]{width:90%}.stopped[_ngcontent-%COMP%]{border-color:#cccc15}"]}),o})();function Wn(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",6)(1,"a",7),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.goIntoArtifactSbomSummaryPage())}),e.ALo(2,"translate"),e._uU(3),e.ALo(4,"translate"),e.qZA()()}2&t&&(e.xp6(1),e.s9C("title",e.lcZ(2,2,"SBOM.Details")),e.xp6(2),e.hij(" ",e.lcZ(4,4,"SBOM.Details"),""))}function Xn(t,o){1&t&&(e.TgZ(0,"div",8),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SBOM.NO_SBOM")," "))}function er(t,o){1&t&&(e.TgZ(0,"div",14)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"SBOM.PACKAGES")," "))}function tr(t,o){1&t&&(e.ynx(0),e.TgZ(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.BQk()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"SBOM.NO_SBOM")))}function ir(t,o){if(1&t&&(e.TgZ(0,"div")(1,"span",12),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",13),e._uU(5),e.qZA()()),2&t){const n=e.oxw(3);e.xp6(2),e.Oqu(e.lcZ(3,2,"SCANNER.SCANNED_BY")),e.xp6(3),e.Oqu(n.getScannerInfo())}}function nr(t,o){if(1&t&&(e.TgZ(0,"clr-tooltip-content",9)(1,"div",10),e.YNc(2,er,4,3,"div",11),e.YNc(3,tr,4,3,"ng-container",1),e.qZA(),e._UZ(4,"hr"),e.YNc(5,ir,6,4,"div",1),e.TgZ(6,"div")(7,"span",12),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"span",13),e._uU(11),e.qZA()(),e.TgZ(12,"div")(13,"span",12),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"span"),e._uU(17),e.ALo(18,"harborDatetime"),e.qZA()()()),2&t){const n=e.oxw(2);e.Q6J("clrPosition","right")("clrSize","lg"),e.xp6(2),e.Q6J("ngIf",n.showSbomDetailLink()),e.xp6(1),e.Q6J("ngIf",n.showNoSbom()),e.xp6(2),e.Q6J("ngIf",n.scanner),e.xp6(3),e.Oqu(e.lcZ(9,9,"SCANNER.DURATION")),e.xp6(3),e.Oqu(n.duration()),e.xp6(3),e.hij("",e.lcZ(15,11,"SBOM.CHART.SCANNING_TIME")," "),e.xp6(3),e.Oqu(e.xi3(18,13,n.completeTimestamp,"short"))}}function rr(t,o){if(1&t&&(e.TgZ(0,"clr-tooltip")(1,"div",2),e.YNc(2,Wn,5,6,"div",3),e.YNc(3,Xn,3,3,"div",4),e.qZA(),e.YNc(4,nr,19,16,"clr-tooltip-content",5),e.qZA()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.showSbomDetailLink()),e.xp6(1),e.Q6J("ngIf",n.showNoSbom())}}let sr=(()=>{var t;class o{constructor(i,r,a){this.translate=i,this.activatedRoute=r,this.router=a,this.sbomSummary={scan_status:u.bl.NOT_GENERATED_SBOM},this.artifactDigest="",this.sbomDigest="",this.accessories=[]}duration(){if(this.sbomSummary&&this.sbomSummary.duration){let i="";const r=Math.floor(this.sbomSummary.duration/60);r&&(i+=r+" min ");const a=this.sbomSummary.duration%60;return a&&(i+=a+" sec"),i}return"0"}getSbomAccessories(){return this.accessories?.filter(i=>i.type===G.SBOM)??[]}get completePercent(){return this.sbomSummary.scan_status===u.bl.SUCCESS?"100%":"0%"}get completeTimestamp(){return this.sbomSummary&&this.sbomSummary.end_time?this.sbomSummary.end_time:new Date}showSbomDetailLink(){return this.sbomDigest&&this.getSbomAccessories().length>0}showNoSbom(){return!this.sbomDigest||0===this.getSbomAccessories().length}showTooltip(){return!this.sbomSummary||!(this.sbomSummary&&this.sbomSummary.scan_status!==u.bl.SUCCESS)}isThemeLight(){return localStorage.getItem(Me.BJ)===Me.XO.LIGHT}getScannerInfo(){if(this.scanner){if(this.scanner.name&&this.scanner.version)return`${this.scanner.name}@${this.scanner.version}`;if(this.scanner.name&&!this.scanner.version)return`${this.scanner.name}`}return""}goIntoArtifactSbomSummaryPage(){this.router.navigate(["artifacts",this.artifactDigest],this.activatedRoute.snapshot.queryParams[q.jv]===q.gT?{relativeTo:this.activatedRoute,queryParams:{[q.jv]:q.gT,sbomDigest:this.sbomDigest??"",tab:ne.SZ.SBOM}}:{relativeTo:this.activatedRoute,queryParams:{sbomDigest:this.sbomDigest??"",tab:ne.SZ.SBOM}})}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(v.sK),e.Y36(N.gz),e.Y36(N.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hbr-sbom-tip-histogram"]],inputs:{scanner:"scanner",sbomSummary:"sbomSummary",artifactDigest:"artifactDigest",sbomDigest:"sbomDigest",accessories:"accessories"},decls:2,vars:1,consts:[[1,"tip-wrapper","width-120"],[4,"ngIf"],["clrTooltipTrigger","",1,"tip-block"],["class","circle-block",4,"ngIf"],["class","tip-wrapper label width-120",4,"ngIf"],["class","w-800",3,"clrPosition","clrSize",4,"clrIfOpen"],[1,"circle-block"],["href","javascript:void(0)",1,"digest",3,"title","click"],[1,"tip-wrapper","label","width-120"],[1,"w-800",3,"clrPosition","clrSize"],[1,"bar-tooltip-font-larger"],["class","level-border clr-display-inline-block margin-right-5",4,"ngIf"],[1,"bar-scanning-time"],[1,"margin-left-5"],[1,"level-border","clr-display-inline-block","margin-right-5"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0),e.YNc(1,rr,5,2,"clr-tooltip",1),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngIf",r.showTooltip()))},dependencies:[l.nqY,l.Jmj,l.bMv,l.zDF,A.O5,v.X$,ce.Z],styles:[".tip-wrapper[_ngcontent-%COMP%]{display:flex;align-items:left;text-align:left;font-size:.65rem;height:15px;line-height:15px}.bar-scanning-time[_ngcontent-%COMP%]{margin-top:12px}.bar-tooltip-font-larger[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;vertical-align:middle}hr[_ngcontent-%COMP%]{border-bottom:0;border-color:#aaa;margin:6px -10px}.font-weight-600[_ngcontent-%COMP%]{font-weight:600}.margin-left-5[_ngcontent-%COMP%]{margin-left:5px}.width-120[_ngcontent-%COMP%]{width:120px}.level-border[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-items:center;border-radius:50%;height:26px;width:26px;line-height:26px}.tip-block[_ngcontent-%COMP%]{position:relative}.tip-block[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{max-width:80%;min-width:50%}.margin-right-5[_ngcontent-%COMP%]{margin-right:5px}"]}),o})();function cr(t,o){1&t&&(e.TgZ(0,"div",4)(1,"span",5),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"SBOM.STATE.QUEUED")))}function lr(t,o){if(1&t&&(e.TgZ(0,"div",6)(1,"a",7),e._UZ(2,"clr-icon",8),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("href",n.viewLog(),e.LSH),e.xp6(2),e.hij(" ",e.lcZ(4,2,"SBOM.STATE.ERROR")," ")}}function pr(t,o){1&t&&(e.TgZ(0,"div",9)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",10),e._UZ(5,"progress"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"SBOM.STATE.SCANNING")))}function ur(t,o){if(1&t&&(e.TgZ(0,"div",9),e._UZ(1,"hbr-sbom-tip-histogram",11),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("scanner",n.getScanner())("artifactDigest",n.artifactDigest)("accessories",n.accessories)("sbomSummary",n.sbomOverview)("sbomDigest",n.sbomDigest)}}function gr(t,o){1&t&&(e.TgZ(0,"div",4)(1,"span",12),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"SBOM.STATE.STOPPED")))}function mr(t,o){1&t&&(e.TgZ(0,"div",4)(1,"span",13),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"SBOM.STATE.OTHER_STATUS")))}const Se=3e3;let dr=(()=>{var t;class o{constructor(i,r,a,s){this.artifactService=i,this.scanService=r,this.errorHandler=a,this.eventService=s,this.repoName="",this.projectName="",this.projectId="",this.artifactDigest="",this.sbomDigest="",this.accessories=[],this.onSubmitting=!1,this.onStopping=!1,this.retryCounter=0,this.submitFinish=new e.vpe,this.submitStopFinish=new e.vpe,this.scanFinished=new e.vpe}ngOnInit(){(this.status===u.bl.RUNNING||this.status===u.bl.PENDING)&&!this.stateCheckTimer&&(this.stateCheckTimer=(0,pe.H)(0,Se).subscribe(()=>{this.getSbomOverview()})),this.generateSbomSubscription||(this.generateSbomSubscription=this.eventService.subscribe(S.n.START_GENERATE_SBOM,i=>{this.repoName+"/"+this.artifactDigest===i&&this.generateSbom()})),this.stopSubscription||(this.stopSubscription=this.eventService.subscribe(S.n.STOP_SBOM_ARTIFACT,i=>{this.repoName+"/"+this.artifactDigest===i&&this.stopSbom()}))}ngOnDestroy(){this.stateCheckTimer&&(this.stateCheckTimer.unsubscribe(),this.stateCheckTimer=null),this.generateSbomSubscription&&(this.generateSbomSubscription.unsubscribe(),this.generateSbomSubscription=null),this.stopSubscription&&(this.stopSubscription.unsubscribe(),this.stopSubscription=null)}get status(){return this.sbomOverview&&this.sbomOverview.scan_status?this.sbomOverview.scan_status:u.bl.NOT_GENERATED_SBOM}get completed(){return!(this.sbomOverview&&this.status!==u.bl.SUCCESS||this.status!==u.bl.SUCCESS&&!this.sbomDigest)}get error(){return this.status===u.bl.ERROR}get queued(){return this.status===u.bl.PENDING}get generating(){return this.status===u.bl.RUNNING}get stopped(){return this.status===u.bl.STOPPED}get otherStatus(){return!(this.completed||this.error||this.queued||this.generating||this.stopped)}generateSbom(){this.onSubmitting?console.error("duplicated submit"):this.repoName&&this.artifactDigest?(this.onSubmitting=!0,this.scanService.scanArtifact({projectName:this.projectName,reference:this.artifactDigest,repositoryName:(0,u.gI)(this.repoName),scanType:{scan_type:ne.SZ.SBOM}}).pipe((0,w.x)(()=>this.submitFinish.emit(!1))).subscribe(()=>{this.onSubmitting=!1,this.sbomOverview={scan_status:u.bl.PENDING},this.stateCheckTimer||(this.stateCheckTimer=(0,pe.H)(Se,Se).subscribe(()=>{this.getSbomOverview()}))},i=>{this.onSubmitting=!1,i&&i.error&&409===i.error.code?console.error(i.error.message):this.errorHandler.error(i)})):console.error("bad repository or tag")}getSbomOverview(){!this.repoName||!this.artifactDigest||this.artifactService.getArtifact({projectName:this.projectName,repositoryName:(0,u.gI)(this.repoName),reference:this.artifactDigest,withSbomOverview:!0,withAccessory:!0,XAcceptVulnerabilities:u.eB}).subscribe(i=>{i.sbom_overview&&this.copyValue(i.sbom_overview),!this.queued&&!this.generating&&(this.stateCheckTimer&&(this.stateCheckTimer.unsubscribe(),this.stateCheckTimer=null),this.scanFinished.emit(i)),this.eventService.publish(S.n.UPDATE_SBOM_INFO,i)},i=>{this.errorHandler.error(i),this.retryCounter++,this.retryCounter>=3&&(this.stateCheckTimer&&(this.stateCheckTimer.unsubscribe(),this.stateCheckTimer=null),this.retryCounter=0)})}copyValue(i){!this.sbomOverview||!i||!i.scan_status||(this.sbomOverview=(0,u.d9)(i))}viewLog(){return`${u.S$}/projects/${this.projectName}/repositories/${(0,u.gI)(this.repoName)}/artifacts/${this.artifactDigest}/scan/${this.sbomOverview.report_id}/log`}getScanner(){return this.inputScanner}stopSbom(){this.onStopping?console.error("duplicated stopping command for SBOM generation"):this.repoName&&this.artifactDigest?(this.onStopping=!0,this.scanService.stopScanArtifact({projectName:this.projectName,reference:this.artifactDigest,repositoryName:(0,u.gI)(this.repoName),scanType:{scan_type:ne.SZ.SBOM}}).pipe((0,w.x)(()=>{this.submitStopFinish.emit(!1),this.onStopping=!1})).subscribe(()=>{this.stateCheckTimer||(this.stateCheckTimer=(0,pe.H)(Se,Se).subscribe(()=>{this.getSbomOverview()})),this.errorHandler.info("SBOM.TRIGGER_STOP_SUCCESS")},i=>{this.errorHandler.error(i)})):console.error("bad repository or artifact")}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(ie.b),e.Y36(St.I),e.Y36(D.q),e.Y36(S.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hbr-sbom-bar"]],inputs:{inputScanner:"inputScanner",repoName:"repoName",projectName:"projectName",projectId:"projectId",artifactDigest:"artifactDigest",sbomDigest:"sbomDigest",sbomOverview:"sbomOverview",accessories:"accessories"},outputs:{submitFinish:"submitFinish",submitStopFinish:"submitStopFinish",scanFinished:"scanFinished"},decls:7,vars:6,consts:[[1,"bar-wrapper"],["class","bar-state",4,"ngIf"],["class","bar-state bar-state-error",4,"ngIf"],["class","bar-state bar-state-chart",4,"ngIf"],[1,"bar-state"],[1,"label","label-orange"],[1,"bar-state","bar-state-error"],["rel","noopener noreferrer","target","_blank",1,"error-text",3,"href"],["shape","error","size","24",1,"is-error"],[1,"bar-state","bar-state-chart"],[1,"progress","loop","loop-height"],[3,"scanner","artifactDigest","accessories","sbomSummary","sbomDigest"],[1,"label","stopped"],[1,"label","not-scan"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0),e.YNc(1,cr,4,3,"div",1),e.YNc(2,lr,5,4,"div",2),e.YNc(3,pr,6,3,"div",3),e.YNc(4,ur,2,5,"div",3),e.YNc(5,gr,4,3,"div",1),e.YNc(6,mr,4,3,"div",1),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngIf",r.queued),e.xp6(1),e.Q6J("ngIf",r.error),e.xp6(1),e.Q6J("ngIf",r.generating),e.xp6(1),e.Q6J("ngIf",r.completed),e.xp6(1),e.Q6J("ngIf",r.stopped),e.xp6(1),e.Q6J("ngIf",r.otherStatus))},dependencies:[l.qvL,A.O5,sr,v.X$],styles:[".bar-wrapper[_ngcontent-%COMP%]{width:210px}hbr-sbom-bar[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%], hbr-sbom-bar[_ngcontent-%COMP%]   .not-scan[_ngcontent-%COMP%]{width:90%}.bar-state[_ngcontent-%COMP%]   .unknow-text[_ngcontent-%COMP%]{margin-left:-5px}.bar-state[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{max-width:60%;min-width:50%}.bar-state-chart[_ngcontent-%COMP%]   .loop-height[_ngcontent-%COMP%]{height:2px;width:100px}.bar-state-error[_ngcontent-%COMP%]{position:relative}.error-text[_ngcontent-%COMP%]{position:relative;top:1px;margin-left:-5px;cursor:pointer}.stopped[_ngcontent-%COMP%]{border-color:#cccc15}"]}),o})();const fr=["filterArea"];function _r(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-icon",5),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return r.opened=!0,e.KtG(r.dropdownOpened=!0)}),e.qZA()}if(2&t){const n=e.oxw();e.s9C("id",n.searchId)}}function br(t,o){if(1&t&&(e.TgZ(0,"option",15),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=o.$implicit;e.s9C("value",n.filterBy),e.xp6(1),e.hij(" ",e.lcZ(2,2,n.filterByShowText)," ")}}function Ar(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"input",18),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.inputTag=r)})("keyup",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.searchByInputTag())}),e.ALo(3,"translate"),e.qZA()()()}if(2&t){const n=e.oxw(2);e.xp6(2),e.s9C("placeholder",e.lcZ(3,3,"ARTIFACT.FILTER_FOR_ARTIFACTS")),e.Q6J("readonly","tags"!==n.filterByType)("ngModel",n.inputTag)}}function Tr(t,o){if(1&t&&(e.TgZ(0,"span"),e._UZ(1,"hbr-label-piece",19),e.qZA()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("label",n.selectedValue)}}function Cr(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw(3);e.xp6(1),e.Oqu(n.selectedValue)}}function xr(t,o){if(1&t&&(e.TgZ(0,"span"),e.YNc(1,Tr,2,1,"span",3),e.YNc(2,Cr,2,1,"span",3),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf","labels"===n.filterByType),e.xp6(1),e.Q6J("ngIf","labels"!==n.filterByType)}}function vr(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(){const a=e.CHM(n).$implicit,s=e.oxw(3);return e.KtG(s.selectValue(a))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n.showItem)," ")}}function Sr(t,o){if(1&t&&(e.ynx(0),e.YNc(1,vr,3,3,"div",20),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.multipleFilter[0].listItem)}}function Ir(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(){const a=e.CHM(n).$implicit,s=e.oxw(3);return e.KtG(s.selectValue(a))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n.showItem)," ")}}function yr(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Ir,3,3,"div",20),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.multipleFilter[1].listItem)}}function Or(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"label",22),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"app-label-selector",23),e.NdJ("clickLabel",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.selectValue(r))}),e.qZA(),e.BQk()}if(2&t){const n=e.oxw(2);e.xp6(2),e.Oqu(e.lcZ(3,6,"REPOSITORY.FILTER_ARTIFACT_BY_LABEL")),e.xp6(2),e.Q6J("scope","p")("projectId",n.projectId)("dropdownOpened",n.dropdownOpened)("width",200)("ownedLabels",n.getSelectLabel())}}function wr(t,o){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"div",6)(2,"div",7)(3,"select",8),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.filterByType=r)})("change",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.selectFilterType())}),e.YNc(4,br,3,4,"option",9),e.qZA()()(),e.TgZ(5,"div",10)(6,"div",11),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.dropdownOpened=!r.dropdownOpened)}),e.TgZ(7,"clr-icon",12),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.opened=!1)}),e.qZA(),e.YNc(8,Ar,4,5,"div",13),e.YNc(9,xr,3,2,"span",3),e.qZA(),e.TgZ(10,"div",14),e.YNc(11,Sr,2,1,"ng-container",3),e.YNc(12,yr,2,1,"ng-container",3),e.YNc(13,Or,5,8,"ng-container",3),e.qZA()(),e.BQk()}if(2&t){const n=e.oxw();e.xp6(3),e.s9C("id",n.typeSelectId),e.Q6J("ngModel",n.filterByType),e.xp6(1),e.Q6J("ngForOf",n.multipleFilter),e.xp6(1),e.ekj("open",n.dropdownOpened),e.xp6(3),e.Q6J("ngIf",!n.selectedValue),e.xp6(1),e.Q6J("ngIf",n.selectedValue),e.xp6(2),e.Q6J("ngIf",n.filterByType===n.multipleFilter[0].filterBy),e.xp6(1),e.Q6J("ngIf",n.filterByType===n.multipleFilter[1].filterBy),e.xp6(1),e.Q6J("ngIf",n.filterByType===n.multipleFilter[2].filterBy)}}function Nr(t,o){1&t&&e._UZ(0,"span",24)}let Lr=(()=>{var t;class o{constructor(i){this.renderer=i,this.withDivider=!1,this.opened=!1,this.multipleFilter=_t,this.filterByType=_t[0].filterBy,this.dropdownOpened=!0,this.filterEvent=new e.vpe,this.searchId="search-btn",this.typeSelectId="type-select",this._keyupEventSubject=new se.x,this.renderer.listen("window","click",r=>{r.target.id===this.searchId||r.target.id===this.typeSelectId||this.filterArea.nativeElement.contains(r.target)||(this.dropdownOpened=!1)})}ngOnInit(){this._keyupEventSubscription||(this._keyupEventSubscription=this._keyupEventSubject.pipe((0,Re.b)(500)).subscribe(i=>{this.filterEvent.emit({type:this.filterByType,isLabel:!1,isInputTag:!0,stringValue:i})}))}ngOnDestroy(){this._keyupEventSubscription&&(this._keyupEventSubscription.unsubscribe(),this._keyupEventSubscription=null)}selectFilterType(){this.selectedValue=null,this.dropdownOpened=!0,this.filterEvent.emit(this.filterByType===this.multipleFilter[2].filterBy?{type:this.filterByType,isLabel:!0}:{type:this.filterByType,isLabel:!1})}selectValue(i){this.filterByType===this.multipleFilter[2].filterBy?(this.selectedValue=i.isAdd?i.label:null,this.filterEvent.emit({type:this.filterByType,isLabel:!0,label:this.selectedValue})):(this.selectedValue=i?.filterText,this.filterEvent.emit({type:this.filterByType,isLabel:!1,stringValue:this.selectedValue}))}getSelectLabel(){return this.filterByType===this.multipleFilter[2].filterBy&&this.selectedValue?[this.selectedValue]:[]}searchByInputTag(){this._keyupEventSubject.next(this.inputTag)}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(e.Qsj))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-artifact-filter"]],viewQuery:function(i,r){if(1&i&&e.Gf(fr,5),2&i){let a;e.iGM(a=e.CRH())&&(r.filterArea=a.first)}},inputs:{withDivider:"withDivider",projectId:"projectId"},outputs:{filterEvent:"filterEvent"},decls:5,vars:3,consts:[["id","filterArea",1,"clr-row"],["filterArea",""],["shape","search","size","20","class","search-btn",3,"id","click",4,"ngIf"],[4,"ngIf"],["class","filter-divider",4,"ngIf"],["shape","search","size","20",1,"search-btn",3,"id","click"],[1,"clr-control-container","m-r-10px"],[1,"clr-select-wrapper"],[1,"clr-select",3,"id","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"dropdown"],[1,"dropdown-toggle","border-bottom-color",3,"click"],["shape","search","size","20",1,"search-dropdown-toggle",3,"click"],["class","clr-control-container",4,"ngIf"],[1,"dropdown-menu"],[3,"value"],[1,"clr-control-container"],[1,"clr-input-wrapper"],[1,"clr-input","no-outline",3,"readonly","placeholder","ngModel","ngModelChange","keyup"],[3,"label"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"],[1,"clr-control-label"],[3,"scope","projectId","dropdownOpened","width","ownedLabels","clickLabel"],[1,"filter-divider"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0,1),e.YNc(2,_r,1,1,"clr-icon",2),e.YNc(3,wr,14,10,"ng-container",3),e.YNc(4,Nr,1,0,"span",4),e.qZA()),2&i&&(e.xp6(2),e.Q6J("ngIf",!r.opened),e.xp6(1),e.Q6J("ngIf",r.opened),e.xp6(1),e.Q6J("ngIf",r.withDivider))},dependencies:[T.YN,T.Kr,T.Fj,T.EJ,T.JJ,T.On,l.qvL,l.MgK,A.sg,A.O5,Xe.q,vt,v.X$],styles:[".search-btn[_ngcontent-%COMP%]{cursor:pointer}.dropdown-toggle[_ngcontent-%COMP%]{height:1.3rem;width:200px;display:flex;justify-content:left;border-bottom:.05rem solid}.clr-control-label[_ngcontent-%COMP%]{margin-bottom:1rem;margin-left:.5rem}.filter-divider[_ngcontent-%COMP%]{display:inline-block;height:24px;width:1px;margin-right:6px;margin-left:6px}.clr-row[_ngcontent-%COMP%]{align-items:center;margin:0}.m-r-10px[_ngcontent-%COMP%]{margin-right:10px}.search-dropdown-toggle[_ngcontent-%COMP%]{margin-right:5px}.no-outline[_ngcontent-%COMP%]:focus{border:none;background:none}"]}),o})();var Zr=_(1183);function Er(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"hbr-copy-input",9),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",8),e._UZ(7,"hbr-copy-input",9),e.TgZ(8,"span"),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.BQk()),2&t){const n=e.oxw(3);e.xp6(2),e.Q6J("title",n.getPullCommandForDocker(n.selectedRow[0]))("iconMode",!0)("defaultValue",n.getPullCommandForDocker(n.selectedRow[0])),e.xp6(2),e.Oqu(e.lcZ(5,8,"PUSH_IMAGE.DOCKER")),e.xp6(3),e.Q6J("title",n.getPullCommandForPadMan(n.selectedRow[0]))("iconMode",!0)("defaultValue",n.getPullCommandForPadMan(n.selectedRow[0])),e.xp6(2),e.Oqu(e.lcZ(10,10,"PUSH_IMAGE.PODMAN"))}}function Pr(t,o){if(1&t&&(e.TgZ(0,"div",8),e._UZ(1,"hbr-copy-input",9),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("title",n.getPullCommandForCNAB(n.selectedRow[0]))("iconMode",!0)("defaultValue",n.getPullCommandForCNAB(n.selectedRow[0])),e.xp6(2),e.Oqu(e.lcZ(4,4,"PUSH_IMAGE.CNAB"))}}function Rr(t,o){if(1&t&&(e.TgZ(0,"div",8),e._UZ(1,"hbr-copy-input",9),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("title",n.getPullCommandForChart(n.selectedRow[0]))("iconMode",!0)("defaultValue",n.getPullCommandForChart(n.selectedRow[0])),e.xp6(2),e.Oqu(e.lcZ(4,4,"PUSH_IMAGE.HELM"))}}function Mr(t,o){if(1&t&&(e.TgZ(0,"clr-dropdown-menu",5),e.YNc(1,Er,11,12,"ng-container",6),e.YNc(2,Pr,5,6,"div",7),e.YNc(3,Rr,5,6,"div",7),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isImage(n.selectedRow[0])),e.xp6(1),e.Q6J("ngIf",n.isCNAB(n.selectedRow[0])),e.xp6(1),e.Q6J("ngIf",n.isChart(n.selectedRow[0]))}}function Dr(t,o){if(1&t&&(e.TgZ(0,"clr-dropdown",1)(1,"button",2),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"cds-icon",3),e.qZA(),e.YNc(5,Mr,4,3,"clr-dropdown-menu",4),e.qZA()),2&t){const n=e.oxw();e.Q6J("clrCloseMenuOnItemClick",!1),e.xp6(1),e.Q6J("disabled",1!==(null==n.selectedRow?null:n.selectedRow.length)||!n.hasPullCommand(n.selectedRow[0])),e.xp6(1),e.hij(" ",e.lcZ(3,3,"PUSH_IMAGE.COPY_PULL_COMMAND")," ")}}function kr(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"div",8),e._UZ(2,"hbr-copy-input",9),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA()(),e.TgZ(6,"div",8),e._UZ(7,"hbr-copy-input",9),e.TgZ(8,"span"),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.BQk()),2&t){const n=e.oxw(3);e.xp6(2),e.Q6J("title",n.getPullCommandForDockerByTag(n.artifact))("iconMode",!0)("defaultValue",n.getPullCommandForDockerByTag(n.artifact)),e.xp6(2),e.Oqu(e.lcZ(5,8,"PUSH_IMAGE.DOCKER")),e.xp6(3),e.Q6J("title",n.getPullCommandForPadManByTag(n.artifact))("iconMode",!0)("defaultValue",n.getPullCommandForPadManByTag(n.artifact)),e.xp6(2),e.Oqu(e.lcZ(10,10,"PUSH_IMAGE.PODMAN"))}}function Ur(t,o){if(1&t&&(e.TgZ(0,"div",8),e._UZ(1,"hbr-copy-input",9),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("title",n.getPullCommandForCNABByTag(n.artifact))("iconMode",!0)("defaultValue",n.getPullCommandForCNABByTag(n.artifact)),e.xp6(2),e.Oqu(e.lcZ(4,4,"PUSH_IMAGE.CNAB"))}}function Fr(t,o){if(1&t&&(e.TgZ(0,"div",8),e._UZ(1,"hbr-copy-input",9),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("title",n.getPullCommandForChartByTag(n.artifact))("iconMode",!0)("defaultValue",n.getPullCommandForChartByTag(n.artifact)),e.xp6(2),e.Oqu(e.lcZ(4,4,"PUSH_IMAGE.HELM"))}}function qr(t,o){if(1&t&&(e.TgZ(0,"clr-dropdown-menu",5),e.YNc(1,kr,11,12,"ng-container",6),e.YNc(2,Ur,5,6,"div",7),e.YNc(3,Fr,5,6,"div",7),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isImage(n.artifact)),e.xp6(1),e.Q6J("ngIf",n.isCNAB(n.artifact)),e.xp6(1),e.Q6J("ngIf",n.isChart(n.artifact))}}function Yr(t,o){if(1&t&&(e.TgZ(0,"clr-dropdown",1)(1,"button",2),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"cds-icon",3),e.qZA(),e.YNc(5,qr,4,3,"clr-dropdown-menu",4),e.qZA()),2&t){const n=e.oxw();e.Q6J("clrCloseMenuOnItemClick",!1),e.xp6(1),e.Q6J("disabled",1!==(null==n.selectedTags?null:n.selectedTags.length)||!n.hasPullCommandForTag(n.artifact)),e.xp6(1),e.hij(" ",e.lcZ(3,3,"PUSH_IMAGE.COPY_PULL_COMMAND")," ")}}let Ot=(()=>{var t;class o{constructor(){this.isTagMode=!1}hasPullCommand(i){return function Yi(t){return t.type===B.IMAGE||t.type===B.CNAB||t.type===B.CHART}(i)}isImage(i){return i.type===B.IMAGE}isCNAB(i){return i.type===B.CNAB}isChart(i){return i.type===B.CHART}getPullCommandForDocker(i){return He(i.type,`${this.registryUrl?this.registryUrl:location.hostname}/${this.projectName}/${this.repoName}`,i.digest,M.DOCKER)}getPullCommandForPadMan(i){return He(i.type,`${this.registryUrl?this.registryUrl:location.hostname}/${this.projectName}/${this.repoName}`,i.digest,M.PODMAN)}getPullCommandForCNAB(i){return He(i.type,`${this.registryUrl?this.registryUrl:location.hostname}/${this.projectName}/${this.repoName}`,i.digest,M.CNAB)}getPullCommandForChart(i){return _e(i.type,`${this.registryUrl?this.registryUrl:location.hostname}/${this.projectName}/${this.repoName}`,i.tags[0].name,M.CHART)}hasPullCommandForTag(i){return(i?.type===B.IMAGE||i?.type===B.CHART||i?.type===B.CNAB)&&this.accessoryType!==G.COSIGN&&this.accessoryType!==G.NOTATION&&this.accessoryType!==G.NYDUS}getPullCommandForDockerByTag(i){return _e(i.type,`${this.registryUrl?this.registryUrl:location.hostname}/${this.projectName}/${this.repoName}`,this.selectedTags[0].name,M.DOCKER)}getPullCommandForPadManByTag(i){return _e(i.type,`${this.registryUrl?this.registryUrl:location.hostname}/${this.projectName}/${this.repoName}`,this.selectedTags[0].name,M.PODMAN)}getPullCommandForCNABByTag(i){return _e(i.type,`${this.registryUrl?this.registryUrl:location.hostname}/${this.projectName}/${this.repoName}`,this.selectedTags[0].name,M.CNAB)}getPullCommandForChartByTag(i){return _e(i.type,`${this.registryUrl?this.registryUrl:location.hostname}/${this.projectName}/${this.repoName}`,this.selectedTags[0].name,M.CHART)}}return(t=o).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-pull-command"]],inputs:{isTagMode:"isTagMode",projectName:"projectName",registryUrl:"registryUrl",repoName:"repoName",selectedRow:"selectedRow",selectedTags:"selectedTags",artifact:"artifact",accessoryType:"accessoryType"},decls:2,vars:2,consts:[["class","mr-1",3,"clrCloseMenuOnItemClick",4,"ngIf"],[1,"mr-1",3,"clrCloseMenuOnItemClick"],["clrDropdownTrigger","",1,"btn","btn-link","copy-pull-command",3,"disabled"],["shape","angle","direction","down"],["clrPosition","bottom-right",4,"clrIfOpen"],["clrPosition","bottom-right"],[4,"ngIf"],["class","flex","aria-label","Dropdown header Action","clrDropdownItem","",4,"ngIf"],["aria-label","Dropdown header Action","clrDropdownItem","",1,"flex"],[3,"title","iconMode","defaultValue"]],template:function(i,r){1&i&&(e.YNc(0,Dr,6,5,"clr-dropdown",0),e.YNc(1,Yr,6,5,"clr-dropdown",0)),2&i&&(e.Q6J("ngIf",!r.isTagMode),e.xp6(1),e.Q6J("ngIf",r.isTagMode))},dependencies:[l.nkF,l.nqY,l.f_W,l.zwp,l.ZUS,l.lU3,A.O5,Zr.s,v.X$],styles:[".copy-pull-command[_ngcontent-%COMP%]{font-size:14px}.flex[_ngcontent-%COMP%]{display:flex;align-items:flex-end}"]}),o})();const Br=["confirmationDialog"],jr=["datagrid"];function Jr(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",46),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(3);return e.KtG(r.deleteArtifact())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&t){const n=e.oxw(3);e.Q6J("clrDisabled",!n.hasDeleteImagePermission||!n.selectedRow.length||n.depth),e.xp6(1),e.hij(" ",e.lcZ(2,2,"REPOSITORY.DELETE")," ")}}function Qr(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-dropdown-menu",34)(1,"button",35),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.stopNow())}),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"button",36),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.stopSbom())}),e.TgZ(6,"span"),e._uU(7),e.ALo(8,"translate"),e.qZA()(),e._UZ(9,"div",37),e.TgZ(10,"div",38),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.showDigestId())}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e._UZ(13,"div",37),e.TgZ(14,"clr-dropdown")(15,"button",39),e._uU(16),e.ALo(17,"translate"),e.qZA(),e._UZ(18,"div",37),e.TgZ(19,"clr-dropdown-menu",40)(20,"div",41)(21,"label",42),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"app-label-selector",43),e.NdJ("clickLabel",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.stickLabel(r))}),e.qZA()()()(),e.TgZ(25,"div",44),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.retag())}),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.YNc(28,Jr,3,4,"div",45),e.qZA()}if(2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("clrLoading",n.stopBtnState)("disabled",!(n.canStopScan()&&n.hasScanImagePermission)),e.xp6(2),e.Oqu(e.lcZ(4,21,"VULNERABILITY.STOP_NOW")),e.xp6(2),e.Q6J("clrLoading",n.stopBtnState)("disabled",!(n.canStopSbom()&&n.hasSbomPermission&&n.hasEnabledScanner)),e.xp6(2),e.Oqu(e.lcZ(8,23,"SBOM.STOP")),e.xp6(3),e.Q6J("clrDisabled",!(1===n.selectedRow.length&&!n.depth)),e.xp6(1),e.hij(" ",e.lcZ(12,25,"REPOSITORY.COPY_DIGEST_ID")," "),e.xp6(4),e.Q6J("disabled",!n.canAddLabel()||!n.hasAddLabelImagePermission||n.depth||n.inprogress),e.xp6(1),e.hij(" ",e.lcZ(17,27,"REPOSITORY.ADD_LABELS")," "),e.xp6(3),e.Q6J("hidden",!n.selectedRow.length),e.xp6(3),e.Oqu(e.lcZ(23,29,"REPOSITORY.ADD_LABEL_TO_IMAGE")),e.xp6(2),e.Q6J("usedInDropdown",!0)("dropdownOpened",!0)("width",200)("ownedLabels",null==n.selectedRow[0]?null:n.selectedRow[0].labels)("projectId",n.projectId)("scope","p"),e.xp6(1),e.Q6J("clrDisabled",1!==n.selectedRow.length||!n.hasRetagImagePermission||n.depth),e.xp6(1),e.hij(" ",e.lcZ(27,31,"REPOSITORY.RETAG")," "),e.xp6(2),e.Q6J("ngIf",n.hasDeleteImagePermission)}}function Hr(t,o){1&t&&(e.TgZ(0,"clr-dropdown",30)(1,"span",31),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"clr-icon",32),e.qZA(),e.YNc(5,Qr,29,33,"clr-dropdown-menu",33),e.qZA()),2&t&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"BUTTON.ACTIONS")," "))}function Vr(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"REPOSITORY.ARTIFACTS_COUNT")," ")}function Gr(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"REPOSITORY.PLATFORM")," ")}const Q=function(t){return{hidden:t}};function zr(t,o){if(1&t&&(e.TgZ(0,"clr-dg-column"),e.YNc(1,Gr,2,3,"ng-template",18),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("clrDgHideableColumn",e.VKq(1,Q,n.hiddenArray[1]))}}function $r(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"REPOSITORY.TAGS")," ")}function Kr(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"REPOSITORY.SIGNED")," ")}function Wr(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"REPOSITORY.SIZE")," ")}function Xr(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"REPOSITORY.VULNERABILITY")," ")}function eo(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"REPOSITORY.SBOM")," ")}function to(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"ARTIFACT.ANNOTATION")," ")}function io(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"REPOSITORY.LABELS")," ")}function no(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"REPOSITORY.PUSH_TIME")," ")}function ro(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"REPOSITORY.PULL_TIME")," ")}function oo(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"img",68),e.NdJ("error",function(r){e.CHM(n);const a=e.oxw(3);return e.KtG(a.showDefaultIcon(r))}),e.qZA()}if(2&t){const n=e.oxw(2).$implicit,i=e.oxw();e.Q6J("title",n.type)("src",i.getIcon(n.icon),e.LSH)}}function ao(t,o){if(1&t&&(e.TgZ(0,"div",66),e.YNc(1,oo,1,2,"img",67),e.qZA()),2&t){const n=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Q6J("ngIf",i.getIcon(n.icon))}}function so(t,o){1&t&&(e.TgZ(0,"clr-tooltip-content",74),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.Q6J("clrPosition","top-right")("clrSize","lg"),e.xp6(1),e.hij(" ",e.lcZ(2,3,"REPOSITORY.ARTIFACT_TOOTIP")," "))}function co(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-tooltip")(1,"div",69)(2,"div",70)(3,"a",71),e.NdJ("click",function(){e.CHM(n);const r=e.oxw().$implicit,a=e.oxw();return e.KtG(a.goIntoIndexArtifact(r))}),e._UZ(4,"clr-icon",72),e.qZA()()(),e.YNc(5,so,3,5,"clr-tooltip-content",73),e.qZA()}}function lo(t,o){if(1&t&&(e.TgZ(0,"clr-dg-cell")(1,"div",57),e._uU(2),e.qZA()()),2&t){const n=e.oxw().$implicit;e.xp6(2),e.lnq(" ",null==n.platform?null:n.platform.os," /",null==n.platform?null:n.platform.architecture,"",null!=n.platform&&n.platform.variant?"/"+(null==n.platform?null:n.platform.variant):""," ")}}function po(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw(2).$implicit;e.xp6(1),e.hij("(",null==n?null:n.tagNumber," )")}}function uo(t,o){if(1&t&&(e.TgZ(0,"tr",88)(1,"td",89),e._uU(2),e.qZA(),e.TgZ(3,"td",89),e._uU(4),e.ALo(5,"harborDatetime"),e.qZA(),e.TgZ(6,"td",89),e._uU(7),e.ALo(8,"harborDatetime"),e.qZA()()),2&t){const n=o.$implicit,i=e.oxw(4);e.xp6(2),e.hij(" ",n.name," "),e.xp6(2),e.hij(" ",n.pull_time===i.availableTime?"":e.xi3(5,3,n.pull_time,"short")," "),e.xp6(3),e.hij(" ",e.xi3(8,6,n.push_time,"short")," ")}}function go(t,o){1&t&&(e.TgZ(0,"tr"),e._uU(1," ... "),e.qZA())}function mo(t,o){if(1&t&&(e.TgZ(0,"clr-tooltip-content",82)(1,"table",83)(2,"thead",84)(3,"tr")(4,"th",85),e._uU(5),e.ALo(6,"uppercase"),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"th",85),e._uU(9),e.ALo(10,"uppercase"),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"th",85),e._uU(13),e.ALo(14,"uppercase"),e.ALo(15,"translate"),e.qZA()()(),e.TgZ(16,"tbody",86),e.YNc(17,uo,9,9,"tr",87),e.YNc(18,go,2,0,"tr",19),e.qZA()()()),2&t){const n=e.oxw(2).$implicit;e.Q6J("clrPosition","top-right")("clrSize","lg"),e.xp6(5),e.hij(" ",e.lcZ(6,7,e.lcZ(7,9,"REPOSITORY.TAGS"))," "),e.xp6(4),e.hij(" ",e.lcZ(10,11,e.lcZ(11,13,"REPOSITORY.PULL_TIME"))," "),e.xp6(4),e.hij(" ",e.lcZ(14,15,e.lcZ(15,17,"REPOSITORY.PUSH_TIME"))," "),e.xp6(4),e.Q6J("ngForOf",n.tags),e.xp6(1),e.Q6J("ngIf",(null==n?null:n.tagNumber)>8)}}function ho(t,o){if(1&t&&(e.TgZ(0,"div",75)(1,"clr-tooltip",76)(2,"div",77)(3,"div",78)(4,"span",79,80),e._uU(6),e.qZA(),e.YNc(7,po,2,1,"span",19),e.qZA()(),e.YNc(8,mo,19,19,"clr-tooltip-content",81),e.qZA()()),2&t){const n=e.MAs(5),i=e.oxw().$implicit,r=e.oxw();e.xp6(6),e.Oqu(r.tagsString(null==i?null:i.tags)),e.xp6(1),e.Q6J("ngIf",(null==i||null==i.tags?null:i.tags.length)>1&&r.isEllipsisActive(n))}}function fo(t,o){1&t&&e._UZ(0,"span",90)}function _o(t,o){1&t&&e._UZ(0,"clr-icon",91)}function bo(t,o){1&t&&e._UZ(0,"clr-icon",92)}function Ao(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ARTIFACT.SCAN_UNSUPPORTED")," "))}function To(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"hbr-vulnerability-bar",93),e.NdJ("submitStopFinish",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.submitStopFinish(r))})("scanFinished",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.scanFinished(r))})("submitFinish",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.submitFinish(r))}),e.qZA()}if(2&t){const n=e.oxw().$implicit,i=e.oxw();let r;e.Q6J("inputScanner",null==(r=i.handleScanOverview(n.scan_overview))?null:r.scanner)("projectName",i.projectName)("repoName",i.repoName)("artifactDigest",n.digest)("summary",i.handleScanOverview(n.scan_overview))}}function Co(t,o){1&t&&e._UZ(0,"span",90)}function xo(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"ARTIFACT.SBOM_UNSUPPORTED")," "))}function vo(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"hbr-sbom-bar",94),e.NdJ("submitStopFinish",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.submitSbomStopFinish(r))})("scanFinished",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.sbomFinished(r))})("submitFinish",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.submitSbomFinish(r))}),e.qZA()}if(2&t){const n=e.oxw().$implicit,i=e.oxw();let r;e.Q6J("inputScanner",null==(r=i.handleSbomOverview(n.sbom_overview))?null:r.scanner)("projectName",i.projectName)("projectId",i.projectId)("repoName",i.repoName)("accessories",null==n?null:n.accessories)("artifactDigest",null==n?null:n.digest)("sbomDigest",null==n?null:n.sbomDigest)("sbomOverview",null==n?null:n.sbom_overview)}}function So(t,o){if(1&t&&(e.TgZ(0,"div",95)(1,"span",96),e._uU(2),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.Oqu(n)}}function Io(t,o){if(1&t&&(e.TgZ(0,"clr-signpost-content",98)(1,"div"),e.YNc(2,So,3,1,"div",99),e.qZA()()),2&t){const n=e.oxw(2).$implicit;e.Q6J("clrPosition","left-top"),e.xp6(2),e.Q6J("ngForOf",n.annotationsArray)}}function yo(t,o){if(1&t&&(e.TgZ(0,"div",57)(1,"div",95)(2,"span",96),e._uU(3),e.qZA()(),e.TgZ(4,"div",62)(5,"div",97)(6,"clr-signpost")(7,"button",63),e._uU(8," ... "),e.qZA(),e.YNc(9,Io,3,2,"clr-signpost-content",64),e.qZA()()()()),2&t){const n=e.oxw().$implicit;e.xp6(3),e.Oqu(n.annotationsArray[0]),e.xp6(1),e.Q6J("hidden",(null==n.annotationsArray?null:n.annotationsArray.length)<=1)}}function Oo(t,o){if(1&t&&e._UZ(0,"hbr-label-piece",100),2&t){const n=e.oxw().$implicit;e.Q6J("label",n.labels[0])("labelWidth",90)("withTooltip",!0)}}function wo(t,o){if(1&t&&(e.TgZ(0,"div",103),e._UZ(1,"hbr-label-piece",104),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.Q6J("labelWidth",130)("label",n)("withTooltip",!0)}}function No(t,o){if(1&t&&(e.TgZ(0,"clr-signpost-content",98)(1,"div",101),e.YNc(2,wo,2,3,"div",102),e.qZA()()),2&t){const n=e.oxw().$implicit;e.Q6J("clrPosition","top-middle"),e.xp6(2),e.Q6J("ngForOf",n.labels)}}function Lo(t,o){if(1&t&&e._UZ(0,"sub-accessories",107),2&t){const n=e.oxw(2).$implicit,i=e.oxw();e.Q6J("projectName",i.projectName)("repositoryName",i.repoName)("artifactDigest",null==n?null:n.digest)("total",null==n?null:n.accessoryNumber)("accessories",null==n?null:n.accessories)}}function Zo(t,o){1&t&&(e.ynx(0,105),e.YNc(1,Lo,1,5,"sub-accessories",106),e.BQk())}function Eo(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-dg-row",47)(1,"clr-dg-cell",48)(2,"div",49),e.YNc(3,ao,2,1,"div",50),e.TgZ(4,"a",51),e.NdJ("click",function(){const a=e.CHM(n).$implicit,s=e.oxw();return e.KtG(s.goIntoArtifactSummaryPage(a))}),e._uU(5),e.ALo(6,"slice"),e.qZA(),e.YNc(7,co,6,0,"clr-tooltip",19),e.qZA()(),e.YNc(8,lo,3,3,"clr-dg-cell",19),e.TgZ(9,"clr-dg-cell",52),e.YNc(10,ho,9,2,"div",53),e.qZA(),e.TgZ(11,"clr-dg-cell"),e.YNc(12,fo,1,0,"span",54),e.YNc(13,_o,1,0,"clr-icon",55),e.YNc(14,bo,1,0,"clr-icon",56),e.qZA(),e.TgZ(15,"clr-dg-cell")(16,"div",57),e._uU(17),e.qZA()(),e.TgZ(18,"clr-dg-cell")(19,"div",57),e.YNc(20,Ao,3,3,"span",19),e.YNc(21,To,1,5,"hbr-vulnerability-bar",58),e.qZA()(),e.TgZ(22,"clr-dg-cell")(23,"div",57),e.YNc(24,Co,1,0,"span",54),e.YNc(25,xo,3,3,"span",19),e.YNc(26,vo,1,8,"hbr-sbom-bar",59),e.qZA()(),e.TgZ(27,"clr-dg-cell"),e.YNc(28,yo,10,2,"div",60),e.qZA(),e.TgZ(29,"clr-dg-cell")(30,"div",57),e.YNc(31,Oo,1,3,"hbr-label-piece",61),e.TgZ(32,"div",62)(33,"clr-signpost")(34,"button",63),e._uU(35," ... "),e.qZA(),e.YNc(36,No,3,2,"clr-signpost-content",64),e.qZA()()()(),e.TgZ(37,"clr-dg-cell")(38,"div",57),e._uU(39),e.ALo(40,"harborDatetime"),e.qZA()(),e.TgZ(41,"clr-dg-cell")(42,"div",57),e._uU(43),e.ALo(44,"harborDatetime"),e.qZA()(),e.YNc(45,Zo,2,0,"ng-container",65),e.qZA()}if(2&t){const n=o.$implicit,i=e.oxw();e.Q6J("clrDgItem",n),e.xp6(3),e.Q6J("ngIf",n.icon),e.xp6(1),e.s9C("title",n.digest),e.xp6(1),e.hij(" ",e.Dn7(6,22,n.digest,0,15),""),e.xp6(2),e.Q6J("ngIf",(null==n?null:n.references)&&(null==n||null==n.references?null:n.references.length)),e.xp6(1),e.Q6J("ngIf",i.depth),e.xp6(2),e.Q6J("ngIf",n.tags),e.xp6(2),e.Q6J("ngIf","checking"===n.signed),e.xp6(1),e.Q6J("ngIf","true"===n.signed),e.xp6(1),e.Q6J("ngIf","false"===n.signed),e.xp6(3),e.hij(" ",n.size?i.sizeTransform(n.size+""):""," "),e.xp6(3),e.Q6J("ngIf",!i.hasVul(n)),e.xp6(1),e.Q6J("ngIf",i.hasVul(n)),e.xp6(3),e.Q6J("ngIf",null==n?null:n.accessoryLoading),e.xp6(1),e.Q6J("ngIf",!(i.hasSbom(n)||null!=n&&n.accessoryLoading)),e.xp6(1),e.Q6J("ngIf",i.hasSbom(n)&&!(null!=n&&n.accessoryLoading)),e.xp6(2),e.Q6J("ngIf",null==n.annotationsArray?null:n.annotationsArray.length),e.xp6(3),e.Q6J("ngIf",null==n.labels?null:n.labels.length),e.xp6(1),e.Q6J("hidden",(null==n.labels?null:n.labels.length)<=1),e.xp6(7),e.hij(" ",e.xi3(40,26,n.push_time,"short")," "),e.xp6(4),e.hij(" ",n.pull_time===i.availableTime?"":e.xi3(44,29,n.pull_time,"short")," "),e.xp6(2),e.Q6J("ngIf",null==n||null==n.accessories?null:n.accessories.length)}}function Po(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){e.oxw();const n=e.MAs(55);e.xp6(1),e.lnq("",n.firstItem+1," - ",n.lastItem+1," ",e.lcZ(2,3,"REPOSITORY.OF"),"")}}const Ro=function(){return[15,25,50]},wt="0001-01-01T00:00:00.000Z";let Lt=(()=>{var t;class o{get hasAddLabelImagePermission(){return this.artifactListPageService.hasAddLabelImagePermission()}get hasRetagImagePermission(){return this.artifactListPageService.hasRetagImagePermission()}get hasDeleteImagePermission(){return this.artifactListPageService.hasDeleteImagePermission()}get hasScanImagePermission(){return this.artifactListPageService.hasScanImagePermission()}get hasSbomPermission(){return this.artifactListPageService.hasSbomPermission()}get hasEnabledScanner(){return this.artifactListPageService.hasEnabledScanner()}get hasScannerSupportVulnerability(){return this.artifactListPageService.hasScannerSupportVulnerability()}get hasScannerSupportSBOM(){return this.artifactListPageService.hasScannerSupportSBOM()}get scanBtnState(){return this.artifactListPageService.getScanBtnState()}get generateSbomBtnState(){return this.artifactListPageService.getSbomBtnState()}constructor(i,r,a,s,c,p,g,h,m,d){this.errorHandlerService=i,this.artifactService=r,this.newArtifactService=a,this.translateService=s,this.operationService=c,this.eventService=p,this.activatedRoute=g,this.router=h,this.appConfigService=m,this.artifactListPageService=d,this.artifactList=[],this.availableTime=wt,this.pullComparator=new u.sH("pull_time","date"),this.pushComparator=new u.sH("push_time","date"),this.loading=!0,this.selectedRow=[],this.pageSize=(0,u.tb)(u.V2.ARTIFACT_LIST_TAB_COMPONENT),this.currentPage=1,this.totalCount=0,this.onSendingStopScanCommand=!1,this.onStopScanArtifactsLength=0,this.scanStoppedArtifactLength=0,this.onSendingStopSbomCommand=!1,this.onStopSbomArtifactsLength=0,this.sbomStoppedArtifactLength=0,this.scanFinishedArtifactLength=0,this.onScanArtifactsLength=0,this.sbomFinishedArtifactLength=0,this.onSbomArtifactsLength=0,this.stopBtnState=l.xp5.DEFAULT,this.hiddenArray=(0,u.Ql)(u.V2.ARTIFACT_LIST_TAB_COMPONENT,[!1,!1,!1,!1,!1,!1,!1,!0,!1,!1,!1]),this.deleteArtifactobservableLists=[]}initRouterData(){if(this.projectId=this.activatedRoute.snapshot?.parent?.parent?.params.id,!this.projectId)return void this.errorHandlerService.error("Project ID cannot be unset.");const i=this.activatedRoute.snapshot?.parent?.parent?.data;if(i&&(this.projectName=i.projectResolver.name),this.repoName=this.activatedRoute.snapshot?.parent?.params.repo,this.repoName){if(this.depth=this.activatedRoute.snapshot.params.depth,this.depth){const r=this.depth.split("-");this.artifactDigest=this.depth.split("-")[r.length-1]}}else this.errorHandlerService.error("Repo name cannot be unset.")}ngOnInit(){const i=this.appConfigService.getConfig();this.registryUrl=i.registry_url,this.initRouterData(),this.updateArtifactSub||(this.updateArtifactSub=this.eventService.subscribe(S.n.UPDATE_VULNERABILITY_INFO,r=>{this.artifactList&&this.artifactList.length&&this.artifactList.forEach(a=>{a.digest===r.digest&&(a.scan_overview=r.scan_overview)})})),this.updateArtifactSbomSub||(this.updateArtifactSbomSub=this.eventService.subscribe(S.n.UPDATE_SBOM_INFO,r=>{this.artifactList&&this.artifactList.length&&this.artifactList.forEach(a=>{a.digest===r.digest&&this.updateArtifact(r,a)})})),this.deleteAccessorySub||(this.deleteAccessorySub=this.eventService.subscribe(S.n.DELETE_ACCESSORY,r=>{this.deleteAccessory(r)})),this.copyDigestSub||(this.copyDigestSub=this.eventService.subscribe(S.n.COPY_DIGEST,r=>{this.copyDigestComponent.showDigestId(r.digest)})),this.projectId&&this.artifactListPageService.init(this.projectId)}ngOnDestroy(){this.updateArtifactSub&&(this.updateArtifactSub.unsubscribe(),this.updateArtifactSub=null),this.deleteAccessorySub&&(this.deleteAccessorySub.unsubscribe(),this.deleteAccessorySub=null),this.copyDigestSub&&(this.copyDigestSub.unsubscribe(),this.copyDigestSub=null),this.datagrid?.columnsService?.columns?.forEach((i,r)=>{this.depth||r<2?this.hiddenArray[r]=!!i?._value?.hidden:this.hiddenArray[r+1]=!!i?._value?.hidden}),(0,u.ox)(u.V2.ARTIFACT_LIST_TAB_COMPONENT,this.hiddenArray)}clrDgRefresh(i){setTimeout(()=>{this.clrLoad(i)},0)}clrLoad(i){if(this.artifactList=[],this.loading=!0,!i||!i.page)return;this.pageSize=i.page.size,(0,u.Pe)(u.V2.ARTIFACT_LIST_TAB_COMPONENT,this.pageSize),this.selectedRow=[];let r=(0,u.wy)(i);r<=0&&(r=1);let a="";i.sort&&(a=i.sort.by,a=a.fieldName?a.fieldName:a,a=i.sort.reverse?`-${a}`:a),this.currentState=i;let s={};if(r&&this.pageSize&&(s.page=r,s.pageSize=this.pageSize),a&&(s.sort=a),this.filters&&this.filters.length){let c="";this.filters.forEach(p=>{c+=p}),s.q=encodeURIComponent(c)}if(this.artifactDigest){const c={repositoryName:(0,u.gI)(this.repoName),projectName:this.projectName,reference:this.artifactDigest,withImmutableStatus:!0,withLabel:!0,withScanOverview:!0,withSbomOverview:!0,withTag:!1,XAcceptVulnerabilities:u.eB,withAccessory:!1};this.newArtifactService.getArtifact(c).subscribe(p=>{let g=[],h=[];this.totalCount=p.references.length,p.references.forEach((m,d)=>{if(d>=(r-1)*this.pageSize&&d<r*this.pageSize){let f={repositoryName:(0,u.gI)(this.repoName),projectName:this.projectName,reference:m.child_digest,withImmutableStatus:!0,withLabel:!0,withScanOverview:!0,withSbomOverview:!0,withTag:!1,XAcceptVulnerabilities:u.eB,withAccessory:!1};h.push({platform:m.platform}),g.push(this.newArtifactService.getArtifact(f))}}),(0,te.D)(g).pipe((0,w.x)(()=>{this.loading=!1})).subscribe(m=>{this.artifactList=m,this.artifactList=(0,u.Pq)(this.artifactList,i),this.artifactList.forEach((d,f)=>{d.platform=(0,u.d9)(h[f].platform)}),this.getArtifactTagsAsync(this.artifactList),this.getAccessoriesAsync(this.artifactList),this.checkCosignAndSbomAsync(this.artifactList),this.getIconsFromBackEnd()},m=>{this.errorHandlerService.error(m)})},p=>{this.loading=!1})}else{let c={projectName:this.projectName,repositoryName:(0,u.gI)(this.repoName),withLabel:!0,withScanOverview:!0,withSbomOverview:!0,withTag:!1,sort:(0,u.td)(i),XAcceptVulnerabilities:u.eB,withAccessory:!1};Object.assign(c,s),this.newArtifactService.listArtifactsResponse(c).pipe((0,w.x)(()=>this.loading=!1)).subscribe(p=>{if(p.headers){let g=p.headers.get("X-Total-Count");g&&(this.totalCount=parseInt(g,0))}this.artifactList=p.body,this.getArtifactTagsAsync(this.artifactList),this.getAccessoriesAsync(this.artifactList),this.checkCosignAndSbomAsync(this.artifactList),this.getIconsFromBackEnd()},p=>{this.errorHandlerService.error(p)})}}refresh(){this.currentPage=1;let i=this.currentState;i||(i={page:{}},i.page.size=this.pageSize,i.page.from=0,i.page.to=this.pageSize-1),this.clrLoad(i)}canAddLabel(){if(this.selectedRow&&1===this.selectedRow.length)return!0;if(this.selectedRow&&this.selectedRow.length>1){for(let i=0;i<this.selectedRow.length;i++)if(this.selectedRow[i].labels&&this.selectedRow[i].labels.length)return!1;return!0}return!1}stickLabel(i){i.isAdd?this.addLabel(i?.label):this.removeLabel(i?.label)}addLabel(i){if(!this.inprogress){const r={projectName:this.projectName,repositoryName:(0,u.gI)(this.repoName),reference:this.selectedRow[0].digest,label:i};this.inprogress=!0,this.newArtifactService.addLabel(r).pipe((0,w.x)(()=>this.inprogress=!1)).subscribe({next:a=>{this.refresh()},error:a=>{this.refresh(),this.errorHandlerService.error(a)}})}}removeLabel(i){if(!this.inprogress){let r={projectName:this.projectName,repositoryName:(0,u.gI)(this.repoName),reference:this.selectedRow[0].digest,labelId:i.id};this.inprogress=!0,this.newArtifactService.removeLabel(r).pipe((0,w.x)(()=>this.inprogress=!1)).subscribe({next:a=>{this.refresh()},error:a=>{this.refresh(),this.errorHandlerService.error(a)}})}}sizeTransform(i){return(0,u.BU)(i)}hasEnabledSbom(){return this.hasScannerSupportSBOM&&this.hasEnabledScanner&&this.hasSbomPermission}retag(){this.selectedRow&&this.selectedRow.length&&!this.depth&&this.copyArtifactComponent.retag(this.selectedRow[0].digest)}deleteArtifact(){if(this.selectedRow&&this.selectedRow.length&&!this.depth){let r,a,s,c,i=[];this.selectedRow.forEach(g=>{i.push(g.digest.slice(0,15))}),r="REPOSITORY.DELETION_TITLE_ARTIFACT",a="REPOSITORY.DELETION_SUMMARY_ARTIFACT",c=2,s=i.join(" , ");let p=new Pe.c(r,a,s,this.selectedRow,9,c);this.confirmationDialog.open(p)}}confirmDeletion(i){if(i&&25===i.source&&1===i.state){this.loading=!0;const r=new R.gB;r.name="ACCESSORY.DELETE_ACCESSORY",r.data.id=i.data.id,r.state=R.yb.progressing,r.data.name=i.data.digest.slice(0,15),this.operationService.publishInfo(r);const a={projectName:this.projectName,repositoryName:(0,u.gI)(this.repoName),reference:i.data.digest};this.newArtifactService.deleteArtifact(a).pipe((0,w.x)(()=>this.loading=!1)).subscribe(s=>{this.errorHandlerService.info("ACCESSORY.DELETED_SUCCESS"),(0,R.hm)(r,R.yb.success),this.refresh()},s=>{this.errorHandlerService.error(s),(0,R.hm)(r,R.yb.failure,(0,$e.Po)(s))})}if(i&&9===i.source&&1===i.state){let r=i.data;r&&r.length&&(r.forEach(a=>{this.deleteArtifactobservableLists.push(this.delOperate(a))}),this.loading=!0,(0,te.D)(...this.deleteArtifactobservableLists).subscribe(a=>{let s=[],c=[];this.deleteArtifactobservableLists=[],a.forEach(p=>{p?c.push(p):s.push(p)}),this.selectedRow=[],s.length===a.length?this.clrLoad({page:{from:0,to:this.pageSize-1,size:this.pageSize}}):c.length===a.length?(this.loading=!1,this.errorHandlerService.error(a[a.length-1])):(this.errorHandlerService.error(c[c.length-1]),this.clrLoad({page:{from:0,to:this.pageSize-1,size:this.pageSize}}))}))}}delOperate(i){let r=new R.gB;r.name="OPERATION.DELETE_TAG",r.data.id=i.id,r.state=R.yb.progressing,r.data.name=i.digest,this.operationService.publishInfo(r);let a={projectName:this.projectName,repositoryName:(0,u.gI)(this.repoName),reference:i.digest};return this.newArtifactService.deleteArtifact(a).pipe((0,fe.U)(s=>{this.translateService.get("BATCH.DELETED_SUCCESS").subscribe(c=>{(0,R.hm)(r,R.yb.success)})}),(0,Je.K)(s=>{const c=(0,$e.Po)(s);return this.translateService.get(c).subscribe(p=>(0,R.hm)(r,R.yb.failure,p)),(0,je.of)(s)}))}showDigestId(){this.selectedRow&&1===this.selectedRow.length&&!this.depth&&this.copyDigestComponent.showDigestId(this.selectedRow[0].digest)}goIntoArtifactSummaryPage(i){this.router.navigate(["artifacts",i.digest],this.activatedRoute.snapshot.queryParams[q.jv]===q.gT?{relativeTo:this.activatedRoute,queryParams:{[q.jv]:q.gT,sbomDigest:i.sbomDigest??""}}:{relativeTo:this.activatedRoute,queryParams:{sbomDigest:i.sbomDigest??""}})}sbomStatus(i){if(i){let r=i.sbom_overview;if(r&&r.scan_status)return r.scan_status}return u.bl.NOT_GENERATED_SBOM}scanStatus(i){if(i){let r=this.handleScanOverview(i.scan_overview);if(r&&r.scan_status)return r.scan_status}return u.Iy.NOT_SCANNED}canScanNow(){if(!this.hasScanImagePermission||this.onSendingScanCommand)return!1;if(this.selectedRow&&this.selectedRow.length){let i=!0;return this.selectedRow.forEach(r=>{const a=this.scanStatus(r);this.isRunningState(a)&&(i=!1)}),i}return!1}canGenerateSbomNow(){if(!this.hasSbomPermission||this.onSendingSbomCommand)return!1;if(this.selectedRow&&this.selectedRow.length){let i=!0;return this.selectedRow.forEach(r=>{const a=this.sbomStatus(r);this.isRunningState(a)&&(i=!1)}),i}return!1}scanNow(){this.selectedRow.length&&(this.scanFinishedArtifactLength=0,this.onScanArtifactsLength=this.selectedRow.length,this.onSendingScanCommand=!0,this.selectedRow.forEach(i=>{this.eventService.publish(S.n.START_SCAN_ARTIFACT,this.repoName+"/"+i.digest)}))}generateSbom(){this.selectedRow.length&&(this.sbomFinishedArtifactLength=0,this.onSbomArtifactsLength=this.selectedRow.length,this.onSendingSbomCommand=!0,this.selectedRow.forEach(i=>{this.eventService.publish(S.n.START_GENERATE_SBOM,this.repoName+"/"+i.digest)}))}selectedRowHasVul(){return!!(this.selectedRow&&this.selectedRow[0]&&this.selectedRow[0].addition_links&&this.selectedRow[0].addition_links[F.VULNERABILITIES])}selectedRowHasSbom(){return!!(this.selectedRow&&this.selectedRow[0]&&this.selectedRow[0].addition_links&&this.selectedRow[0].addition_links[F.SBOMS])}hasVul(i){return!!(i&&i.addition_links&&i.addition_links[F.VULNERABILITIES])}hasSbom(i){return!!(i&&i.addition_links&&i.addition_links[F.SBOMS])}submitFinish(i){this.scanFinishedArtifactLength+=1,this.scanFinishedArtifactLength===this.onScanArtifactsLength&&(this.onSendingScanCommand=i)}submitStopFinish(i){this.scanStoppedArtifactLength+=1,this.scanStoppedArtifactLength===this.onStopScanArtifactsLength&&(this.onSendingStopScanCommand=i)}submitSbomFinish(i){this.sbomFinishedArtifactLength+=1,this.sbomFinishedArtifactLength===this.onSbomArtifactsLength&&(this.onSendingSbomCommand=i)}submitSbomStopFinish(i){this.sbomStoppedArtifactLength+=1,this.sbomStoppedArtifactLength===this.onStopSbomArtifactsLength&&(this.onSendingStopSbomCommand=i)}handleScanOverview(i){if(i){const r=Object.keys(i)??[];return r.length>0?i[r[0]]:null}return null}handleSbomOverview(i){if(i){const r=Object.keys(i)??[];return r.length>0?i[r[0]]:null}return null}goIntoIndexArtifact(i){let r="";r=this.depth?this.depth+"-"+i.digest:i.digest;const a=["harbor","projects",this.projectId,"repositories",this.repoName,"artifacts-tab","depth",r];this.activatedRoute.snapshot.queryParams[q.jv]===q.gT?this.router.navigate(a,{queryParams:{[q.jv]:q.gT}}):this.router.navigate(a)}filterEvent(i){this.filters=[],i?.isLabel?i?.label?.name&&this.filters.push(`${i.type}=(${i?.label?.id})`):i?.stringValue&&this.filters.push(i?.isInputTag?`${i.type}=~${i?.stringValue}`:`${i.type}=${i?.stringValue}`),this.refresh()}updateArtifact(i,r){i.scan_overview&&(r.scan_overview=i.scan_overview),i.sbom_overview&&(r.sbom_overview=i.sbom_overview),i.sbom_overview.sbom_digest&&(r.sbomDigest=i.sbom_overview.sbom_digest),void 0!==i.accessories&&i.accessories.length>0&&(r.accessories=i.accessories)}scanFinished(i){if(this.selectedRow&&this.selectedRow.length)for(let r=0;r<this.selectedRow.length;r++)if(i.digest===this.selectedRow[r].digest){this.updateArtifact(i,this.selectedRow[r]),this.selectedRow.splice(r,1);break}}sbomFinished(i){this.scanFinished(i)}getIconsFromBackEnd(){this.artifactList&&this.artifactList.length&&this.artifactService.getIconsFromBackEnd(this.artifactList)}showDefaultIcon(i){i&&i.target&&(i.target.src=Qe)}getIcon(i){return this.artifactService.getIcon(i)}getArtifactTagsAsync(i){i&&i.length&&i.forEach(r=>{const a={projectName:this.projectName,repositoryName:(0,u.gI)(this.repoName),reference:r.digest,page:1,pageSize:8};this.newArtifactService.listTagsResponse(a).subscribe(s=>{if(s.headers){let c=s.headers.get("x-total-count");c&&(r.tagNumber=Number.parseInt(c,10))}r.tags=s.body})})}getAccessoriesAsync(i){i&&i.length&&i.forEach(r=>{r.accessoryLoading=!0;const a={projectName:this.projectName,repositoryName:(0,u.gI)(this.repoName),reference:r.digest,page:1,pageSize:5};this.newArtifactService.listAccessoriesResponse(a).subscribe(s=>{if(s.headers){let c=s.headers.get("x-total-count");c&&(r.accessoryNumber=Number.parseInt(c,10))}r.accessories=s.body,r.accessoryLoading=!1})})}checkCosignAndSbomAsync(i){i&&i.length&&i.forEach(r=>{r.signed="checking";const a=r?.sbom_overview;r.sbomDigest=a?.sbom_digest;let s=`${G.COSIGN} ${G.NOTATION}`;r.sbomDigest||(s=`${s} ${G.SBOM}`),this.newArtifactService.listAccessories({projectName:this.projectName,repositoryName:(0,u.gI)(this.repoName),reference:r.digest,page:1,pageSize:5,q:encodeURIComponent(`type={${s}}`)}).subscribe({next:c=>{r.signed=c?.filter(p=>p.type!==G.SBOM)?.length?"true":"false",r.sbomDigest||(r.sbomDigest=c?.filter(p=>p.type===G.SBOM)?.[0]?.digest??void 0)},error:c=>{r.signed="false"}})})}canStopScan(){if(this.onSendingStopScanCommand)return!1;if(this.selectedRow&&this.selectedRow.length){let i=!0;return this.selectedRow.forEach(r=>{const a=this.scanStatus(r);this.isRunningState(a)||(i=!1)}),i}return!1}canStopSbom(){if(this.onSendingStopSbomCommand)return!1;if(this.selectedRow&&this.selectedRow.length){let i=!0;return this.selectedRow.forEach(r=>{const a=this.sbomStatus(r);this.isRunningState(a)||(i=!1)}),i}return!1}isRunningState(i){return i===u.Iy.RUNNING||i===u.Iy.PENDING||i===u.Iy.SCHEDULED}stopNow(){this.selectedRow&&this.selectedRow.length&&(this.scanStoppedArtifactLength=0,this.onStopScanArtifactsLength=this.selectedRow.length,this.onSendingStopScanCommand=!0,this.selectedRow.forEach(i=>{this.eventService.publish(S.n.STOP_SCAN_ARTIFACT,this.repoName+"/"+i.digest)}))}stopSbom(){this.selectedRow&&this.selectedRow.length&&(this.sbomStoppedArtifactLength=0,this.onStopSbomArtifactsLength=this.selectedRow.length,this.onSendingStopSbomCommand=!0,this.selectedRow.forEach(i=>{this.eventService.publish(S.n.STOP_SBOM_ARTIFACT,this.repoName+"/"+i.digest)}))}tagsString(i){if(i?.length){const r=[];return i.forEach(a=>{r.push(a.name)}),r.join(", ")}return null}deleteAccessory(i){let r,a,s,c;r="ACCESSORY.DELETION_TITLE_ACCESSORY",a="ACCESSORY.DELETION_SUMMARY_ONE_ACCESSORY",c=2,s=i.digest.slice(0,15);let p=new Pe.c("ACCESSORY.DELETION_TITLE_ACCESSORY","ACCESSORY.DELETION_SUMMARY_ONE_ACCESSORY",s,i,25,2);this.confirmationDialog.open(p)}isEllipsisActive(i){return i?.offsetWidth<i?.scrollWidth}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(D.q),e.Y36(be),e.Y36(ie.b),e.Y36(v.sK),e.Y36(Ct.f9),e.Y36(S.P),e.Y36(N.gz),e.Y36(N.F0),e.Y36(dn._),e.Y36(ae))},t.\u0275cmp=e.Xpm({type:t,selectors:[["artifact-list-tab"]],viewQuery:function(i,r){if(1&i&&(e.Gf(Br,5),e.Gf(At,5),e.Gf(Tt,5),e.Gf(jr,5)),2&i){let a;e.iGM(a=e.CRH())&&(r.confirmationDialog=a.first),e.iGM(a=e.CRH())&&(r.copyArtifactComponent=a.first),e.iGM(a=e.CRH())&&(r.copyDigestComponent=a.first),e.iGM(a=e.CRH())&&(r.datagrid=a.first)}},decls:62,vars:71,consts:[[1,"hidden-tag",3,"confirmAction"],["confirmationDialog",""],[1,"row","tag-row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"clrDgLoading","clrDgSelected","clrDgRefresh","clrDgSelectedChange"],["datagrid",""],[1,"action-bar"],["id","scan-btn","type","button",1,"btn","btn-secondary","scan-btn",3,"clrLoading","disabled","click"],["shape","shield-check","size","16"],["id","generate-sbom-btn","type","button",1,"btn","btn-secondary",3,"clrLoading","disabled","click"],["shape","sbom","size","16"],["class","btn btn-link",4,"ngIf"],[1,"right-pos"],[1,"mr-1",3,"registryUrl","projectName","repoName","selectedRow"],[3,"withDivider","projectId","filterEvent"],[1,"refresh-btn",3,"click"],["shape","refresh"],[1,"flex-max-width",3,"clrDgSortBy"],[3,"clrDgHideableColumn"],[4,"ngIf"],[1,"co-signed-column"],[1,"size-column",3,"clrDgSortBy"],[1,"vul-column"],[1,"sbom-column"],[1,"annotations-column"],[3,"clrDgSortBy"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgTotalItems","clrDgPage","clrDgPageSize","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[1,"btn","btn-link"],["clrDropdownTrigger","","id","artifact-list-action",1,"btn","pl-0"],["shape","caret down"],["class","action-dropdown","clrPosition","bottom-left",4,"clrIfOpen"],["clrPosition","bottom-left",1,"action-dropdown"],["clrDropdownItem","","id","stop-scan","type","button",1,"btn","btn-secondary","scan-btn","action-dropdown-item",3,"clrLoading","disabled","click"],["clrDropdownItem","","id","stop-sbom-btn","type","button",1,"btn","btn-secondary","scan-btn","action-dropdown-item",3,"clrLoading","disabled","click"],["role","separator","aria-hidden","true",1,"dropdown-divider"],["id","artifact-list-copy-digest","aria-label","copy digest","clrDropdownItem","",1,"action-dropdown-item","no-border",3,"clrDisabled","click"],["id","artifact-list-add-labels","clrDropdownTrigger","",1,"action-dropdown-item",3,"disabled"],[3,"hidden"],[1,"filter-grid"],[1,"dropdown-header"],[3,"usedInDropdown","dropdownOpened","width","ownedLabels","projectId","scope","clickLabel"],["id","artifact-list-copy","aria-label","retag","clrDropdownItem","",1,"action-dropdown-item",3,"clrDisabled","click"],["class","action-dropdown-item","clrDropdownItem","","id","artifact-list-delete",3,"clrDisabled","click",4,"ngIf"],["clrDropdownItem","","id","artifact-list-delete",1,"action-dropdown-item",3,"clrDisabled","click"],[3,"clrDgItem"],[1,"flex-max-width","truncated"],[1,"cell","white-normal"],["class","artifact-icon clr-display-inline-block",4,"ngIf"],["href","javascript:void(0)",1,"digest","margin-left-5",3,"title","click"],[1,"center"],["class","truncated width-p-100",4,"ngIf"],["class","spinner spinner-inline ml-2",4,"ngIf"],["shape","check-circle","size","20","class","signed",4,"ngIf"],["shape","times-circle","size","16","class","color-red",4,"ngIf"],[1,"cell"],[3,"inputScanner","projectName","repoName","artifactDigest","summary","submitStopFinish","scanFinished","submitFinish",4,"ngIf"],[3,"inputScanner","projectName","projectId","repoName","accessories","artifactDigest","sbomDigest","sbomOverview","submitStopFinish","scanFinished","submitFinish",4,"ngIf"],["class","cell",4,"ngIf"],[3,"label","labelWidth","withTooltip",4,"ngIf"],[1,"signpost-item",3,"hidden"],["clrSignpostTrigger","",1,"btn","btn-link"],[3,"clrPosition",4,"clrIfOpen"],["ngProjectAs","clr-dg-row-detail",5,["clr-dg-row-detail"],4,"ngIf"],[1,"artifact-icon","clr-display-inline-block"],["class","artifact-icon",3,"title","src","error",4,"ngIf"],[1,"artifact-icon",3,"title","src","error"],["clrTooltipTrigger","",1,"level-border"],[1,"inner","truncated"],["href","javascript:void(0)",3,"click"],["size","24","shape","folder",1,"icon-folder"],[3,"clrPosition","clrSize",4,"clrIfOpen"],[3,"clrPosition","clrSize"],[1,"truncated","width-p-100"],[1,"width-p-100"],["clrTooltipTrigger","",1,"center"],[1,"center","width-p-100"],[1,"truncated","width-p-75"],["tagsSpan",""],["class","lg",3,"clrPosition","clrSize",4,"clrIfOpen"],[1,"lg",3,"clrPosition","clrSize"],[1,"table","table-noborder","mt-0","table-tag"],[1,"tag-thead"],[1,"left","tag-header-color"],[1,"tag-tbody"],["class","tag-tr",4,"ngFor","ngForOf"],[1,"tag-tr"],[1,"left","tag-body-color"],[1,"spinner","spinner-inline","ml-2"],["shape","check-circle","size","20",1,"signed"],["shape","times-circle","size","16",1,"color-red"],[3,"inputScanner","projectName","repoName","artifactDigest","summary","submitStopFinish","scanFinished","submitFinish"],[3,"inputScanner","projectName","projectId","repoName","accessories","artifactDigest","sbomDigest","sbomOverview","submitStopFinish","scanFinished","submitFinish"],[1,"bar-state"],[1,"label","not-scan"],[1,"trigger-item"],[3,"clrPosition"],["class","bar-state",4,"ngFor","ngForOf"],[3,"label","labelWidth","withTooltip"],[1,"clr-signpost-content-label-list"],["class","margin-5px",4,"ngFor","ngForOf"],[1,"margin-5px"],[3,"labelWidth","label","withTooltip"],["ngProjectAs","clr-dg-row-detail",5,["clr-dg-row-detail"]],[3,"projectName","repositoryName","artifactDigest","total","accessories",4,"clrIfExpanded"],[3,"projectName","repositoryName","artifactDigest","total","accessories"]],template:function(i,r){1&i&&(e.TgZ(0,"confirmation-dialog",0,1),e.NdJ("confirmAction",function(s){return r.confirmDeletion(s)}),e.qZA(),e._UZ(2,"app-copy-artifact")(3,"app-copy-digest"),e.TgZ(4,"div",2)(5,"div",3)(6,"clr-datagrid",4,5),e.NdJ("clrDgRefresh",function(s){return r.clrDgRefresh(s)})("clrDgSelectedChange",function(s){return r.selectedRow=s}),e.TgZ(8,"clr-dg-action-bar",6)(9,"div")(10,"button",7),e.NdJ("click",function(){return r.scanNow()}),e._UZ(11,"clr-icon",8),e._uU(12,"\xa0 "),e.TgZ(13,"span"),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"button",9),e.NdJ("click",function(){return r.generateSbom()}),e._UZ(17,"clr-icon",10),e._uU(18,"\xa0 "),e.TgZ(19,"span"),e._uU(20),e.ALo(21,"translate"),e.qZA()(),e.YNc(22,Hr,6,3,"clr-dropdown",11),e.qZA(),e.TgZ(23,"div",12),e._UZ(24,"app-pull-command",13),e.TgZ(25,"app-artifact-filter",14),e.NdJ("filterEvent",function(s){return r.filterEvent(s)}),e.qZA(),e.TgZ(26,"span",15),e.NdJ("click",function(){return r.refresh()}),e._UZ(27,"clr-icon",16),e.qZA()()(),e.TgZ(28,"clr-dg-column",17),e.YNc(29,Vr,2,3,"ng-template",18),e.qZA(),e.YNc(30,zr,2,3,"clr-dg-column",19),e.TgZ(31,"clr-dg-column"),e.YNc(32,$r,2,3,"ng-template",18),e.qZA(),e.TgZ(33,"clr-dg-column",20),e.YNc(34,Kr,2,3,"ng-template",18),e.qZA(),e.TgZ(35,"clr-dg-column",21),e.YNc(36,Wr,2,3,"ng-template",18),e.qZA(),e.TgZ(37,"clr-dg-column",22),e.YNc(38,Xr,2,3,"ng-template",18),e.qZA(),e.TgZ(39,"clr-dg-column",23),e.YNc(40,eo,2,3,"ng-template",18),e.qZA(),e.TgZ(41,"clr-dg-column",24),e.YNc(42,to,2,3,"ng-template",18),e.qZA(),e.TgZ(43,"clr-dg-column"),e.YNc(44,io,2,3,"ng-template",18),e.qZA(),e.TgZ(45,"clr-dg-column",25),e.YNc(46,no,2,3,"ng-template",18),e.qZA(),e.TgZ(47,"clr-dg-column",25),e.YNc(48,ro,2,3,"ng-template",18),e.qZA(),e.TgZ(49,"clr-dg-placeholder"),e._uU(50),e.ALo(51,"translate"),e.qZA(),e.YNc(52,Eo,46,32,"clr-dg-row",26),e.TgZ(53,"clr-dg-footer")(54,"clr-dg-pagination",27,28),e.NdJ("clrDgPageChange",function(s){return r.currentPage=s}),e.TgZ(56,"clr-dg-page-size",29),e._uU(57),e.ALo(58,"translate"),e.qZA(),e.YNc(59,Po,3,5,"span",19),e._uU(60),e.ALo(61,"translate"),e.qZA()()()()()),2&i&&(e.xp6(6),e.Q6J("clrDgLoading",r.loading)("clrDgSelected",r.selectedRow),e.xp6(4),e.Q6J("clrLoading",r.scanBtnState)("disabled",!(r.canScanNow()&&r.selectedRowHasVul()&&r.hasEnabledScanner&&r.hasScannerSupportVulnerability&&r.hasScanImagePermission)),e.xp6(4),e.Oqu(e.lcZ(15,40,"VULNERABILITY.SCAN_NOW")),e.xp6(2),e.Q6J("clrLoading",r.generateSbomBtnState)("disabled",!(r.canGenerateSbomNow()&&r.selectedRowHasSbom()&&r.hasEnabledScanner&&r.hasSbomPermission&&r.hasScannerSupportSBOM)),e.xp6(4),e.Oqu(e.lcZ(21,42,"SBOM.GENERATE")),e.xp6(2),e.Q6J("ngIf",!r.depth),e.xp6(2),e.Q6J("registryUrl",r.registryUrl)("projectName",r.projectName)("repoName",r.repoName)("selectedRow",r.selectedRow),e.xp6(1),e.Q6J("withDivider",!0)("projectId",r.projectId),e.xp6(3),e.Q6J("clrDgSortBy","digest"),e.xp6(1),e.Q6J("clrDgHideableColumn",e.VKq(50,Q,r.hiddenArray[0])),e.xp6(1),e.Q6J("ngIf",r.depth),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(52,Q,r.hiddenArray[2])),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(54,Q,r.hiddenArray[3])),e.xp6(1),e.Q6J("clrDgSortBy","size"),e.xp6(1),e.Q6J("clrDgHideableColumn",e.VKq(56,Q,r.hiddenArray[4])),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(58,Q,r.hiddenArray[5])),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(60,Q,r.hiddenArray[6])),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(62,Q,r.hiddenArray[7])),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(64,Q,r.hiddenArray[8])),e.xp6(1),e.Q6J("clrDgSortBy",r.pushComparator),e.xp6(1),e.Q6J("clrDgHideableColumn",e.VKq(66,Q,r.hiddenArray[9])),e.xp6(1),e.Q6J("clrDgSortBy",r.pullComparator),e.xp6(1),e.Q6J("clrDgHideableColumn",e.VKq(68,Q,r.hiddenArray[10])),e.xp6(2),e.Oqu(e.lcZ(51,44,"ARTIFACT.PLACEHOLDER")),e.xp6(2),e.Q6J("ngForOf",r.artifactList),e.xp6(2),e.Q6J("clrDgTotalItems",r.totalCount)("clrDgPage",r.currentPage)("clrDgPageSize",r.pageSize),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(70,Ro)),e.xp6(1),e.Oqu(e.lcZ(58,46,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",r.totalCount),e.xp6(1),e.AsE(" ",r.totalCount," ",e.lcZ(61,48,"REPOSITORY.ITEMS"),"\xa0\xa0\xa0\xa0 "))},dependencies:[l.C9t,l.Gwl,l.fv_,l.m4W,l.dRQ,l._6O,l.YYR,l.Ltv,l.F7K,l.Z4N,l.Nz$,l.jND,l.KHL,l.PDs,l.Gcc,l.dml,l.Nh1,l.K8c,l.qvL,l.cCV,l.nqY,l.DbV,l.MPb,l.MgK,l.f_W,l.zwp,l.ZUS,l.lU3,l.EuU,l.hQ,l.QH5,l.Jmj,l.bMv,l.zDF,A.sg,A.O5,We.z,Xe.q,vt,et,dr,rn,At,Tt,Lr,Ot,v.X$,A.gd,A.OU,ce.Z],styles:[".refresh-btn[_ngcontent-%COMP%]{cursor:pointer}.refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.hidden-tag[_ngcontent-%COMP%]{display:block;height:0}.truncated[_ngcontent-%COMP%]{width:100px;line-height:20px;height:20px;display:inline-block;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.right-pos[_ngcontent-%COMP%]{margin-right:35px;display:flex;align-items:center}.tag-row[_ngcontent-%COMP%]{position:relative}.color-green[_ngcontent-%COMP%]{color:#1d5100}.color-red[_ngcontent-%COMP%]{color:#c92100}.color-gray[_ngcontent-%COMP%]{color:#565656}.cell[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%}.ml-8[_ngcontent-%COMP%]{margin-left:8px}.white-normal[_ngcontent-%COMP%]{white-space:normal}.digest[_ngcontent-%COMP%]{width:128px;flex-grow:0;flex-shrink:0}.artifact-icon[_ngcontent-%COMP%]{width:.8rem;height:.8rem;vertical-align:top}.width-p-100[_ngcontent-%COMP%]{width:100%}.width-p-100[_ngcontent-%COMP%]   .lg[_ngcontent-%COMP%]{width:550px}.tag-header-color[_ngcontent-%COMP%]{color:#fff}.tag-body-color[_ngcontent-%COMP%]{color:#ccc;max-width:120px}.table[_ngcontent-%COMP%]   .tag-tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:2px}.table[_ngcontent-%COMP%]   .tag-thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding-top:0;padding-bottom:5px;border:none;font-weight:400}.action-dropdown[_ngcontent-%COMP%]   .action-dropdown-item[_ngcontent-%COMP%]{position:static;padding-left:1rem;line-height:inherit;height:auto}.action-dropdown[_ngcontent-%COMP%]   .action-dropdown-item[_ngcontent-%COMP%]:before{margin-top:.5rem}.action-dropdown[_ngcontent-%COMP%]   .dropdown-header[_ngcontent-%COMP%]{text-transform:none}.eslip[_ngcontent-%COMP%]{margin-left:-3px}.execution-select[_ngcontent-%COMP%]{height:24px;display:flex;justify-content:flex-end}.execution-select[_ngcontent-%COMP%]   .filter-tag[_ngcontent-%COMP%]{float:left;margin-top:8px}.execution-select[_ngcontent-%COMP%]   .filter-tag[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]{margin-top:0}.no-border[_ngcontent-%COMP%]:focus{outline:none}.margin-left-5[_ngcontent-%COMP%]{margin-left:5px}.pull-command-column[_ngcontent-%COMP%]{width:6rem!important}.co-signed-column[_ngcontent-%COMP%]{width:7rem!important}.size-column[_ngcontent-%COMP%]{width:6rem!important}.vul-column[_ngcontent-%COMP%]{width:11rem!important}.sbom-column[_ngcontent-%COMP%]{width:7rem!important}.annotations-column[_ngcontent-%COMP%]{width:5rem!important}.signed[_ngcontent-%COMP%]{color:#00d40f}.mb-05[_ngcontent-%COMP%]{margin-bottom:.5rem}.top-3-px[_ngcontent-%COMP%]{top:3px}.center[_ngcontent-%COMP%]{display:flex;align-items:center}.width-p-75[_ngcontent-%COMP%]{width:75%}.action-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.signpost-item[_ngcontent-%COMP%]{margin-left:-24px;height:10px;display:flex;align-items:center}.margin-5px[_ngcontent-%COMP%]{margin:5px}.flex-max-width[_ngcontent-%COMP%]{max-width:220px;min-width:200px}.filter-grid[_ngcontent-%COMP%]{cursor:unset;padding:0}.filter-grid[_ngcontent-%COMP%]:hover{color:unset;background-color:unset}.clr-signpost-content-label-list[_ngcontent-%COMP%]{max-height:200px;overflow-y:auto;margin-bottom:-10px}"]}),o})();const ko=["newTagForm"],Uo=["confirmationDialog"];function Fo(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"button",29),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.addTag())}),e._UZ(1,"clr-icon",30),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&t){const n=e.oxw();e.Q6J("disabled",!n.hasCreateTagPermission),e.xp6(2),e.hij("\xa0",e.lcZ(3,2,"TAG.ADD_TAG")," ")}}function qo(t,o){1&t&&(e.TgZ(0,"clr-control-error",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"TAG.NAME_ALREADY_EXISTS")," "))}function Yo(t,o){1&t&&(e.TgZ(0,"clr-control-error",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"RETAG.TIP_TAG")," "))}function Bo(t,o){1&t&&(e.TgZ(0,"span",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"REPOSITORY.IMMUTABLE")))}function jo(t,o){if(1&t&&(e.TgZ(0,"clr-dg-row",32)(1,"clr-dg-cell")(2,"div",33)(3,"span",34),e._uU(4),e.qZA(),e.YNc(5,Bo,3,3,"span",35),e.qZA()(),e.TgZ(6,"clr-dg-cell"),e._uU(7),e.ALo(8,"harborDatetime"),e.qZA(),e.TgZ(9,"clr-dg-cell"),e._uU(10),e.ALo(11,"harborDatetime"),e.qZA()()),2&t){const n=o.$implicit,i=e.oxw();e.Q6J("clrDgItem",n),e.xp6(2),e.ekj("immutable",n.immutable),e.xp6(1),e.s9C("title",n.name),e.xp6(1),e.Oqu(n.name),e.xp6(1),e.Q6J("ngIf",n.immutable),e.xp6(2),e.Oqu(n.pull_time!==i.availableTime?e.xi3(8,8,n.pull_time,"short"):""),e.xp6(3),e.Oqu(e.xi3(11,11,n.push_time,"short"))}}function Jo(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&t){const n=e.oxw(),i=e.MAs(52);e.xp6(1),e.xDo("",i.firstItem+1," - ",i.lastItem+1," ",e.lcZ(2,5,"TAG.OF")," ",n.totalCount," ",e.lcZ(3,7,"TAG.ITEMS"),"")}}const Qo=function(){return[15,25,50]};class tt{constructor(){this.name=""}}let Ho=(()=>{var t;class o{constructor(i,r,a,s,c,p,g){this.operationService=i,this.artifactService=r,this.translateService=a,this.userPermissionService=s,this.systemInfoService=c,this.errorHandlerService=p,this.activatedRoute=g,this.isProxyCacheProject=!1,this.newTagName=new tt,this.selectedRow=[],this.isTagNameExist=!1,this.newTagformShow=!1,this.loading=!0,this.openTag=!1,this.availableTime=wt,this.totalCount=0,this.currentTags=[],this.pageSize=(0,u.tb)(u.V2.ARTIFACT_TAGS_COMPONENT),this.currentPage=1,this.tagNameChecker=new se.x,this.tagNameCheckOnGoing=!1,this.accessoryType=this.activatedRoute.snapshot.queryParams[Ee.ACCESSORY_TYPE]}ngOnInit(){this.getImagePermissionRule(this.projectId),this.invalidCreateTag(),this.systemInfoService.getSystemInfo().subscribe(i=>this.systemInfo=i,i=>this.errorHandlerService.error(i))}checkTagName(i){const r={projectName:this.projectName,repositoryName:(0,u.gI)(this.repositoryName),reference:this.artifactDetails.digest,withSignature:!0,withImmutableStatus:!0,q:encodeURIComponent(`name=${i}`)};return this.artifactService.listTags(r).pipe((0,w.x)(()=>this.tagNameCheckOnGoing=!1))}invalidCreateTag(){this.tagNameCheckSub||(this.tagNameCheckSub=this.tagNameChecker.pipe((0,Re.b)(500)).pipe((0,xt.x)()).pipe((0,Ke.w)(i=>(this.tagNameCheckOnGoing=!0,this.isTagNameExist=!1,this.checkTagName(i)))).subscribe(i=>{i&&i.length&&(this.isTagNameExist=!0)},i=>{this.errorHandlerService.error(i)}))}getCurrentArtifactTags(i){if(!i||!i.page)return;this.pageSize=i.page.size,(0,u.Pe)(u.V2.ARTIFACT_TAGS_COMPONENT,this.pageSize);let r=(0,u.wy)(i);r<=0&&(r=1);let a={projectName:this.projectName,repositoryName:(0,u.gI)(this.repositoryName),reference:this.artifactDetails.digest,page:r,withSignature:!0,withImmutableStatus:!0,pageSize:this.pageSize,sort:(0,u.td)(i)};this.loading=!0,this.artifactService.listTagsResponse(a).pipe((0,w.x)(()=>{this.loading=!1})).subscribe(s=>{if(s.headers){let c=s.headers.get("x-total-count");c&&(this.totalCount=Number.parseInt(c,10))}this.currentTags=s.body,this.currentTags=(0,u.Dd)(this.currentTags,i),this.currentTags=(0,u.Pq)(this.currentTags,i)},s=>{this.errorHandlerService.error(s)})}getImagePermissionRule(i){this.userPermissionService.hasProjectPermissions(this.projectId,[{resource:x._W.REPOSITORY_TAG.KEY,action:x._W.REPOSITORY_TAG.VALUE.DELETE},{resource:x._W.REPOSITORY_TAG.KEY,action:x._W.REPOSITORY_TAG.VALUE.CREATE}]).subscribe(a=>{this.hasDeleteTagPermission=a[0],this.hasCreateTagPermission=a[1]},a=>this.errorHandlerService.error(a))}addTag(){this.newTagformShow=!0}cancelAddTag(){this.newTagformShow=!1,this.newTagName=new tt}saveAddTag(){const i={projectName:this.projectName,repositoryName:(0,u.gI)(this.repositoryName),reference:this.artifactDetails.digest,tag:this.newTagName};this.loading=!0,this.artifactService.createTag(i).subscribe(r=>{this.newTagformShow=!1,this.newTagName=new tt,this.refresh()},r=>{this.loading=!1,this.errorHandlerService.error(r)})}removeTag(){if(this.selectedRow&&this.selectedRow.length){let r,a,s,c,i=[];this.selectedRow.forEach(g=>{i.push(g.name)}),r="REPOSITORY.DELETION_TITLE_TAG",a="REPOSITORY.DELETION_SUMMARY_TAG",c=2,s=i.join(" , ");let p=new Pe.c(r,a,s,this.selectedRow,9,c);this.confirmationDialog.open(p)}}confirmDeletion(i){if(i&&9===i.source&&1===i.state){let r=i.data;if(r&&r.length){let a=[];r.forEach(s=>{a.push(this.delOperate(s))}),this.loading=!0,(0,te.D)(...a).subscribe(s=>{let c=[],p=[];s.forEach(g=>{g?p.push(g):c.push(g)}),this.selectedRow=[],c.length===s.length?this.refresh():p.length===s.length?(this.loading=!1,this.errorHandlerService.error(s[s.length-1])):(this.errorHandlerService.error(p[p.length-1]),this.currentPage=1,this.getCurrentArtifactTags({page:{from:0,to:this.pageSize-1,size:this.pageSize}}))})}}}delOperate(i){let r=new R.gB;r.name="OPERATION.DELETE_TAG",r.state=R.yb.progressing,r.data.name=i.name,this.operationService.publishInfo(r);const a={projectName:this.projectName,repositoryName:(0,u.gI)(this.repositoryName),reference:this.artifactDetails.digest,tagName:i.name};return this.artifactService.deleteTag(a).pipe((0,fe.U)(s=>{this.translateService.get("BATCH.DELETED_SUCCESS").subscribe(c=>{(0,R.hm)(r,R.yb.success)})}),(0,Je.K)(s=>{const c=(0,$e.Po)(s);return this.translateService.get(c).subscribe(p=>(0,R.hm)(r,R.yb.failure,p)),(0,je.of)(s)}))}existValid(i){i?this.tagNameChecker.next(i):this.isTagNameExist=!1}hasImmutableOnTag(){return this.selectedRow.some(i=>i.immutable)}refresh(){this.loading=!0,this.currentPage=1,this.selectedRow=[],this.getCurrentArtifactTags({page:{from:0,to:this.pageSize-1,size:this.pageSize}})}ngOnDestroy(){this.tagNameCheckSub.unsubscribe()}get registryUrl(){return this.systemInfo&&this.systemInfo.registry_url?this.systemInfo.registry_url:location.hostname}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(Ct.f9),e.Y36(ie.b),e.Y36(v.sK),e.Y36(x.Hx),e.Y36(x.Ob),e.Y36(D.q),e.Y36(N.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["artifact-tag"]],viewQuery:function(i,r){if(1&i&&(e.Gf(ko,7),e.Gf(Uo,5)),2&i){let a;e.iGM(a=e.CRH())&&(r.currentForm=a.first),e.iGM(a=e.CRH())&&(r.confirmationDialog=a.first)}},inputs:{artifactDetails:"artifactDetails",projectName:"projectName",isProxyCacheProject:"isProxyCacheProject",projectId:"projectId",repositoryName:"repositoryName"},decls:59,vars:59,consts:[[3,"clrDgLoading","clrDgSelected","clrDgRefresh","clrDgSelectedChange"],[1,"action-bar"],["id","new-tag","type","button","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],["id","delete-tag","type","button",1,"btn","btn-secondary",3,"disabled","click"],["shape","trash","size","16"],[1,"right-pos"],[1,"mr-1",3,"isTagMode","artifact","accessoryType","registryUrl","projectName","repoName","selectedTags"],[1,"refresh-btn",3,"click"],["shape","refresh"],[1,"label-form","stack-block-label",3,"hidden"],["tagForm","ngForm"],["for","name"],[1,"clr-control-container"],["clrInput","","type","text","id","name","name","name","required","","size","20","autocomplete","off","pattern","^[\\w][\\w.-]{0,127}$",3,"ngModel","ngModelChange","keyup"],["name","ngModel"],[1,"spinner","spinner-inline","spinner-tag",3,"hidden"],["class","position-ab white-space-nowrap",4,"ngIf"],[1,"ml-1"],["type","button",1,"btn","btn-sm","btn-outline",3,"click"],["id","add-ok","type","submit",1,"btn","btn-sm","btn-primary",3,"disabled","click"],[3,"clrDgField"],[3,"clrDgSortBy"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgTotalItems","clrDgPage","clrDgPageSize","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],[1,"hidden-tag",3,"confirmAction"],["confirmationDialog",""],["id","new-tag","type","button",1,"btn","btn-secondary",3,"disabled","click"],["shape","plus","size","16"],[1,"position-ab","white-space-nowrap"],[3,"clrDgItem"],[1,"cell","white-normal"],["href","javascript:void(0)",1,"max-width-100",3,"title"],["class","label label-info ml-8",4,"ngIf"],[1,"label","label-info","ml-8"]],template:function(i,r){if(1&i&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"clr-datagrid",0),e.NdJ("clrDgRefresh",function(s){return r.getCurrentArtifactTags(s)})("clrDgSelectedChange",function(s){return r.selectedRow=s}),e.TgZ(4,"clr-dg-action-bar")(5,"div",1)(6,"div"),e.YNc(7,Fo,4,4,"button",2),e.TgZ(8,"button",3),e.NdJ("click",function(){return r.removeTag()}),e._UZ(9,"clr-icon",4),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",5),e._UZ(13,"app-pull-command",6),e.TgZ(14,"span",7),e.NdJ("click",function(){return r.refresh()}),e._UZ(15,"clr-icon",8),e.qZA()()(),e.TgZ(16,"form",9,10)(18,"section")(19,"label")(20,"label",11),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"label",12)(24,"input",13,14),e.NdJ("ngModelChange",function(s){return r.newTagName.name=s})("keyup",function(){return r.existValid(r.newTagName.name)}),e.qZA(),e._UZ(26,"span",15),e.YNc(27,qo,3,3,"clr-control-error",16),e.YNc(28,Yo,3,3,"clr-control-error",16),e.qZA()(),e.TgZ(29,"label",17)(30,"button",18),e.NdJ("click",function(){return r.cancelAddTag()}),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"button",19),e.NdJ("click",function(){return r.saveAddTag()}),e._uU(34),e.ALo(35,"translate"),e.qZA()()()()(),e.TgZ(36,"clr-dg-column",20),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"clr-dg-column",21),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"clr-dg-column",21),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"clr-dg-placeholder")(46,"span"),e._uU(47),e.ALo(48,"translate"),e.qZA()(),e.YNc(49,jo,12,14,"clr-dg-row",22),e.TgZ(50,"clr-dg-footer")(51,"clr-dg-pagination",23,24),e.NdJ("clrDgPageChange",function(s){return r.currentPage=s}),e.TgZ(53,"clr-dg-page-size",25),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.YNc(56,Jo,4,9,"span",26),e.qZA()()(),e.TgZ(57,"confirmation-dialog",27,28),e.NdJ("confirmAction",function(s){return r.confirmDeletion(s)}),e.qZA()),2&i){const a=e.MAs(17),s=e.MAs(25);e.xp6(1),e.Oqu(e.lcZ(2,38,"REPOSITORY.TAGS")),e.xp6(2),e.Q6J("clrDgLoading",r.loading)("clrDgSelected",r.selectedRow),e.xp6(4),e.Q6J("ngIf",!r.isProxyCacheProject),e.xp6(1),e.Q6J("disabled",!(r.selectedRow.length>=1&&!r.hasImmutableOnTag()&&r.hasDeleteTagPermission)),e.xp6(2),e.hij("\xa0",e.lcZ(11,40,"TAG.REMOVE_TAG")," "),e.xp6(3),e.Q6J("isTagMode",!0)("artifact",r.artifactDetails)("accessoryType",r.accessoryType)("registryUrl",r.registryUrl)("projectName",r.projectName)("repoName",r.repositoryName)("selectedTags",r.selectedRow),e.xp6(3),e.Q6J("hidden",!r.newTagformShow),e.xp6(5),e.Oqu(e.lcZ(22,42,"TAG.NAME")),e.xp6(2),e.ekj("clr-error",r.isTagNameExist||s.hasError("pattern")),e.xp6(1),e.Q6J("ngModel",r.newTagName.name),e.xp6(2),e.Q6J("hidden",!r.tagNameCheckOnGoing),e.xp6(1),e.Q6J("ngIf",r.isTagNameExist),e.xp6(1),e.Q6J("ngIf",s.hasError("pattern")),e.xp6(3),e.hij(" ",e.lcZ(32,44,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("disabled",r.isTagNameExist||r.tagNameCheckOnGoing||!r.newTagName.name||a.invalid),e.xp6(1),e.hij(" ",e.lcZ(35,46,"BUTTON.OK")," "),e.xp6(2),e.Q6J("clrDgField","name"),e.xp6(1),e.Oqu(e.lcZ(38,48,"TAG.NAME")),e.xp6(2),e.Q6J("clrDgSortBy","pull_time"),e.xp6(1),e.Oqu(e.lcZ(41,50,"TAG.PULL_TIME")),e.xp6(2),e.Q6J("clrDgSortBy","push_time"),e.xp6(1),e.Oqu(e.lcZ(44,52,"TAG.PUSH_TIME")),e.xp6(4),e.Oqu(e.lcZ(48,54,"TAG.PLACEHOLDER")),e.xp6(2),e.Q6J("ngForOf",r.currentTags),e.xp6(2),e.Q6J("clrDgTotalItems",r.totalCount)("clrDgPage",r.currentPage)("clrDgPageSize",r.pageSize),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(58,Qo)),e.xp6(1),e.Oqu(e.lcZ(55,56,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",r.totalCount)}},dependencies:[T._Y,T.Fj,T.JJ,T.JL,T.Q7,T.c5,T.On,T.F,l.C9t,l.Gwl,l.fv_,l.m4W,l.dRQ,l.YYR,l.Ltv,l.F7K,l.Z4N,l.jND,l.KHL,l.PDs,l.Gcc,l.dml,l.Nh1,l.K8c,l.qvL,l.MgK,l.VqA,l.xRP,A.sg,A.O5,We.z,Ot,v.X$,ce.Z],styles:[".label-form[_ngcontent-%COMP%]{max-width:100%!important}.clr-control-container[_ngcontent-%COMP%]{margin-bottom:1rem;position:relative}.btn.remove-btn[_ngcontent-%COMP%]{border:none;height:.6rem;line-height:1}.immutable[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.immutable[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{position:absolute;right:0;margin-right:0}.datagrid-action-bar[_ngcontent-%COMP%]{margin-top:.5rem}.position-ab[_ngcontent-%COMP%]{position:absolute}.white-space-nowrap[_ngcontent-%COMP%]{white-space:nowrap}.refresh-btn[_ngcontent-%COMP%]{cursor:pointer}.spinner-tag[_ngcontent-%COMP%]{position:absolute;right:-.7rem;top:1.2rem}.action-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.right-pos[_ngcontent-%COMP%]{margin-right:35px;display:flex;align-items:center}"]}),o})();function Vo(t,o){if(1&t&&(e.TgZ(0,"clr-stack-block")(1,"clr-stack-label"),e._uU(2),e.qZA(),e.TgZ(3,"clr-stack-content"),e._uU(4),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.Oqu(null==n?null:n.key),e.xp6(2),e.Oqu(null==n?null:n.value)}}function Go(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"h4",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"clr-stack-view")(5,"clr-stack-block",2)(6,"clr-stack-label"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.YNc(9,Vo,5,2,"clr-stack-block",3),e.ALo(10,"keyvalue"),e.qZA()(),e.BQk()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"ARTIFACT.OVERVIEW")),e.xp6(3),e.Q6J("clrSbExpanded",!0),e.xp6(2),e.Oqu(e.lcZ(8,6,"ARTIFACT.OVERVIEW")),e.xp6(2),e.Q6J("ngForOf",e.lcZ(10,8,n.commonProperties))}}var Zt=function(t){return t.CREATED="created",t.TYPE="type",t.MEDIA_TYPE="media_type",t.MANIFEST_MEDIA_TYPE="manifest_media_type",t.DIGEST="digest",t.SIZE="size",t.PUSH_TIME="push_time",t.PULL_TIME="pull_time",t}(Zt||{});let zo=(()=>{var t;class o{constructor(){this.commonProperties={}}ngOnChanges(i){if(i&&i.artifactDetails&&this.artifactDetails){Object.assign(this.commonProperties,this.artifactDetails.extra_attrs,this.artifactDetails.annotations);for(let r in this.commonProperties)this.commonProperties.hasOwnProperty(r)&&("object"==typeof this.commonProperties[r]&&(this.commonProperties[r]=null===this.commonProperties[r]?"":JSON.stringify(this.commonProperties[r])),r===Zt.CREATED&&(this.commonProperties[r]=new A.uU("en-us").transform(this.commonProperties[r],"short")))}}hasCommonProperties(){return"{}"!==JSON.stringify(this.commonProperties)}}return(t=o).\u0275fac=function(i){return new(i||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["artifact-common-properties"]],inputs:{artifactDetails:"artifactDetails"},features:[e.TTD],decls:1,vars:1,consts:[[4,"ngIf"],[1,"margin-bottom-075"],[3,"clrSbExpanded"],[4,"ngFor","ngForOf"]],template:function(i,r){1&i&&e.YNc(0,Go,11,10,"ng-container",0),2&i&&e.Q6J("ngIf",r.hasCommonProperties())},dependencies:[l.Jyd,l.O1G,l.W3d,l.PtE,A.sg,A.O5,v.X$,A.Nd],styles:[".margin-bottom-075[_ngcontent-%COMP%]{margin-bottom:.75rem}"]}),o})();function Et(t){return typeof t>"u"||null===t}var P={isNothing:Et,isObject:function $o(t){return"object"==typeof t&&null!==t},toArray:function Ko(t){return Array.isArray(t)?t:Et(t)?[]:[t]},repeat:function Xo(t,o){var i,n="";for(i=0;i<o;i+=1)n+=t;return n},isNegativeZero:function ea(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function Wo(t,o){var n,i,r,a;if(o)for(n=0,i=(a=Object.keys(o)).length;n<i;n+=1)t[r=a[n]]=o[r];return t}};function Pt(t,o){var n="",i=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!o&&t.mark.snippet&&(n+="\n\n"+t.mark.snippet),i+" "+n):i}function Ie(t,o){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=o,this.message=Pt(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(Ie.prototype=Object.create(Error.prototype)).constructor=Ie,Ie.prototype.toString=function(o){return this.name+": "+Pt(this,o)};var j=Ie;function it(t,o,n,i,r){var a="",s="",c=Math.floor(r/2)-1;return i-o>c&&(o=i-c+(a=" ... ").length),n-i>c&&(n=i+c-(s=" ...").length),{str:a+t.slice(o,n).replace(/\t/g,"\u2192")+s,pos:i-o+a.length}}function nt(t,o){return P.repeat(" ",o-t.length)+t}var ca=function sa(t,o){if(o=Object.create(o||null),!t.buffer)return null;o.maxLength||(o.maxLength=79),"number"!=typeof o.indent&&(o.indent=1),"number"!=typeof o.linesBefore&&(o.linesBefore=3),"number"!=typeof o.linesAfter&&(o.linesAfter=2);for(var a,n=/\r?\n|\r|\0/g,i=[0],r=[],s=-1;a=n.exec(t.buffer);)r.push(a.index),i.push(a.index+a[0].length),t.position<=a.index&&s<0&&(s=i.length-2);s<0&&(s=i.length-1);var p,g,c="",h=Math.min(t.line+o.linesAfter,r.length).toString().length,m=o.maxLength-(o.indent+h+3);for(p=1;p<=o.linesBefore&&!(s-p<0);p++)g=it(t.buffer,i[s-p],r[s-p],t.position-(i[s]-i[s-p]),m),c=P.repeat(" ",o.indent)+nt((t.line-p+1).toString(),h)+" | "+g.str+"\n"+c;for(g=it(t.buffer,i[s],r[s],t.position,m),c+=P.repeat(" ",o.indent)+nt((t.line+1).toString(),h)+" | "+g.str+"\n",c+=P.repeat("-",o.indent+h+3+g.pos)+"^\n",p=1;p<=o.linesAfter&&!(s+p>=r.length);p++)g=it(t.buffer,i[s+p],r[s+p],t.position-(i[s]-i[s+p]),m),c+=P.repeat(" ",o.indent)+nt((t.line+p+1).toString(),h)+" | "+g.str+"\n";return c.replace(/\n$/,"")},la=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],pa=["scalar","sequence","mapping"],k=function ga(t,o){if(o=o||{},Object.keys(o).forEach(function(n){if(-1===la.indexOf(n))throw new j('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=o,this.tag=t,this.kind=o.kind||null,this.resolve=o.resolve||function(){return!0},this.construct=o.construct||function(n){return n},this.instanceOf=o.instanceOf||null,this.predicate=o.predicate||null,this.represent=o.represent||null,this.representName=o.representName||null,this.defaultStyle=o.defaultStyle||null,this.multi=o.multi||!1,this.styleAliases=function ua(t){var o={};return null!==t&&Object.keys(t).forEach(function(n){t[n].forEach(function(i){o[String(i)]=n})}),o}(o.styleAliases||null),-1===pa.indexOf(this.kind))throw new j('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function Rt(t,o){var n=[];return t[o].forEach(function(i){var r=n.length;n.forEach(function(a,s){a.tag===i.tag&&a.kind===i.kind&&a.multi===i.multi&&(r=s)}),n[r]=i}),n}function rt(t){return this.extend(t)}rt.prototype.extend=function(o){var n=[],i=[];if(o instanceof k)i.push(o);else if(Array.isArray(o))i=i.concat(o);else{if(!o||!Array.isArray(o.implicit)&&!Array.isArray(o.explicit))throw new j("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");o.implicit&&(n=n.concat(o.implicit)),o.explicit&&(i=i.concat(o.explicit))}n.forEach(function(a){if(!(a instanceof k))throw new j("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(a.loadKind&&"scalar"!==a.loadKind)throw new j("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(a.multi)throw new j("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(a){if(!(a instanceof k))throw new j("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(rt.prototype);return r.implicit=(this.implicit||[]).concat(n),r.explicit=(this.explicit||[]).concat(i),r.compiledImplicit=Rt(r,"implicit"),r.compiledExplicit=Rt(r,"explicit"),r.compiledTypeMap=function ma(){var o,n,t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function i(r){r.multi?(t.multi[r.kind].push(r),t.multi.fallback.push(r)):t[r.kind][r.tag]=t.fallback[r.tag]=r}for(o=0,n=arguments.length;o<n;o+=1)arguments[o].forEach(i);return t}(r.compiledImplicit,r.compiledExplicit),r};var Ft=new rt({explicit:[new k("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new k("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new k("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]}),qt=new k("tag:yaml.org,2002:null",{kind:"scalar",resolve:function ha(t){if(null===t)return!0;var o=t.length;return 1===o&&"~"===t||4===o&&("null"===t||"Null"===t||"NULL"===t)},construct:function da(){return null},predicate:function fa(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"}),Yt=new k("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function _a(t){if(null===t)return!1;var o=t.length;return 4===o&&("true"===t||"True"===t||"TRUE"===t)||5===o&&("false"===t||"False"===t||"FALSE"===t)},construct:function ba(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function Aa(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function Ta(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function Ca(t){return 48<=t&&t<=55}function xa(t){return 48<=t&&t<=57}var Bt=new k("tag:yaml.org,2002:int",{kind:"scalar",resolve:function va(t){if(null===t)return!1;var r,o=t.length,n=0,i=!1;if(!o)return!1;if(("-"===(r=t[n])||"+"===r)&&(r=t[++n]),"0"===r){if(n+1===o)return!0;if("b"===(r=t[++n])){for(n++;n<o;n++)if("_"!==(r=t[n])){if("0"!==r&&"1"!==r)return!1;i=!0}return i&&"_"!==r}if("x"===r){for(n++;n<o;n++)if("_"!==(r=t[n])){if(!Ta(t.charCodeAt(n)))return!1;i=!0}return i&&"_"!==r}if("o"===r){for(n++;n<o;n++)if("_"!==(r=t[n])){if(!Ca(t.charCodeAt(n)))return!1;i=!0}return i&&"_"!==r}}if("_"===r)return!1;for(;n<o;n++)if("_"!==(r=t[n])){if(!xa(t.charCodeAt(n)))return!1;i=!0}return!(!i||"_"===r)},construct:function Sa(t){var i,o=t,n=1;if(-1!==o.indexOf("_")&&(o=o.replace(/_/g,"")),("-"===(i=o[0])||"+"===i)&&("-"===i&&(n=-1),i=(o=o.slice(1))[0]),"0"===o)return 0;if("0"===i){if("b"===o[1])return n*parseInt(o.slice(2),2);if("x"===o[1])return n*parseInt(o.slice(2),16);if("o"===o[1])return n*parseInt(o.slice(2),8)}return n*parseInt(o,10)},predicate:function Ia(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!P.isNegativeZero(t)},represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ya=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"),Na=/^[-+]?[0-9]+e/,jt=new k("tag:yaml.org,2002:float",{kind:"scalar",resolve:function Oa(t){return!(null===t||!ya.test(t)||"_"===t[t.length-1])},construct:function wa(t){var o,n;return n="-"===(o=t.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(o[0])>=0&&(o=o.slice(1)),".inf"===o?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===o?NaN:n*parseFloat(o,10)},predicate:function Za(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||P.isNegativeZero(t))},represent:function La(t,o){var n;if(isNaN(t))switch(o){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(o){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(o){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(P.isNegativeZero(t))return"-0.0";return n=t.toString(10),Na.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"}),Qt=Ft.extend({implicit:[qt,Yt,Bt,jt]}),Ht=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Vt=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"),Gt=new k("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function Ea(t){return null!==t&&(null!==Ht.exec(t)||null!==Vt.exec(t))},construct:function Pa(t){var o,n,i,r,a,s,c,d,p=0,g=null;if(null===(o=Ht.exec(t))&&(o=Vt.exec(t)),null===o)throw new Error("Date resolve error");if(n=+o[1],i=+o[2]-1,r=+o[3],!o[4])return new Date(Date.UTC(n,i,r));if(a=+o[4],s=+o[5],c=+o[6],o[7]){for(p=o[7].slice(0,3);p.length<3;)p+="0";p=+p}return o[9]&&(g=6e4*(60*+o[10]+ +(o[11]||0)),"-"===o[9]&&(g=-g)),d=new Date(Date.UTC(n,i,r,a,s,c,p)),g&&d.setTime(d.getTime()-g),d},instanceOf:Date,represent:function Ra(t){return t.toISOString()}}),zt=new k("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function Ma(t){return"<<"===t||null===t}}),ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r",$t=new k("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function Da(t){if(null===t)return!1;var o,n,i=0,r=t.length,a=ot;for(n=0;n<r;n++)if(!((o=a.indexOf(t.charAt(n)))>64)){if(o<0)return!1;i+=6}return i%8==0},construct:function ka(t){var o,n,i=t.replace(/[\r\n=]/g,""),r=i.length,a=ot,s=0,c=[];for(o=0;o<r;o++)o%4==0&&o&&(c.push(s>>16&255),c.push(s>>8&255),c.push(255&s)),s=s<<6|a.indexOf(i.charAt(o));return 0==(n=r%4*6)?(c.push(s>>16&255),c.push(s>>8&255),c.push(255&s)):18===n?(c.push(s>>10&255),c.push(s>>2&255)):12===n&&c.push(s>>4&255),new Uint8Array(c)},predicate:function Fa(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)},represent:function Ua(t){var i,r,o="",n=0,a=t.length,s=ot;for(i=0;i<a;i++)i%3==0&&i&&(o+=s[n>>18&63],o+=s[n>>12&63],o+=s[n>>6&63],o+=s[63&n]),n=(n<<8)+t[i];return 0==(r=a%3)?(o+=s[n>>18&63],o+=s[n>>12&63],o+=s[n>>6&63],o+=s[63&n]):2===r?(o+=s[n>>10&63],o+=s[n>>4&63],o+=s[n<<2&63],o+=s[64]):1===r&&(o+=s[n>>2&63],o+=s[n<<4&63],o+=s[64],o+=s[64]),o}}),qa=Object.prototype.hasOwnProperty,Ya=Object.prototype.toString,Kt=new k("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function Ba(t){if(null===t)return!0;var n,i,r,a,s,o=[],c=t;for(n=0,i=c.length;n<i;n+=1){if(s=!1,"[object Object]"!==Ya.call(r=c[n]))return!1;for(a in r)if(qa.call(r,a)){if(s)return!1;s=!0}if(!s)return!1;if(-1!==o.indexOf(a))return!1;o.push(a)}return!0},construct:function ja(t){return null!==t?t:[]}}),Ja=Object.prototype.toString,Wt=new k("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function Qa(t){if(null===t)return!0;var o,n,i,r,a,s=t;for(a=new Array(s.length),o=0,n=s.length;o<n;o+=1){if("[object Object]"!==Ja.call(i=s[o])||1!==(r=Object.keys(i)).length)return!1;a[o]=[r[0],i[r[0]]]}return!0},construct:function Ha(t){if(null===t)return[];var o,n,i,r,a,s=t;for(a=new Array(s.length),o=0,n=s.length;o<n;o+=1)i=s[o],r=Object.keys(i),a[o]=[r[0],i[r[0]]];return a}}),Va=Object.prototype.hasOwnProperty,Xt=new k("tag:yaml.org,2002:set",{kind:"mapping",resolve:function Ga(t){if(null===t)return!0;var o,n=t;for(o in n)if(Va.call(n,o)&&null!==n[o])return!1;return!0},construct:function za(t){return null!==t?t:{}}}),at=Qt.extend({implicit:[Gt,zt],explicit:[$t,Kt,Wt,Xt]}),X=Object.prototype.hasOwnProperty,De=1,ei=2,ti=3,ke=4,st=1,$a=2,ii=3,Ka=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Wa=/[\x85\u2028\u2029]/,Xa=/[,\[\]\{\}]/,ni=/^(?:!|!!|![a-z\-]+!)$/i,ri=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function oi(t){return Object.prototype.toString.call(t)}function z(t){return 10===t||13===t}function oe(t){return 9===t||32===t}function J(t){return 9===t||32===t||10===t||13===t}function ue(t){return 44===t||91===t||93===t||123===t||125===t}function es(t){var o;return 48<=t&&t<=57?t-48:97<=(o=32|t)&&o<=102?o-97+10:-1}function ts(t){return 120===t?2:117===t?4:85===t?8:0}function is(t){return 48<=t&&t<=57?t-48:-1}function ai(t){return 48===t?"\0":97===t?"\x07":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"\x1b":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"\x85":95===t?"\xa0":76===t?"\u2028":80===t?"\u2029":""}function ns(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var si=new Array(256),ci=new Array(256),ge=0;ge<256;ge++)si[ge]=ai(ge)?1:0,ci[ge]=ai(ge);function rs(t,o){this.input=t,this.filename=o.filename||null,this.schema=o.schema||at,this.onWarning=o.onWarning||null,this.legacy=o.legacy||!1,this.json=o.json||!1,this.listener=o.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function li(t,o){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=ca(n),new j(o,n)}function b(t,o){throw li(t,o)}function Ue(t,o){t.onWarning&&t.onWarning.call(null,li(t,o))}var pi={YAML:function(o,n,i){var r,a,s;null!==o.version&&b(o,"duplication of %YAML directive"),1!==i.length&&b(o,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(i[0]))&&b(o,"ill-formed argument of the YAML directive"),a=parseInt(r[1],10),s=parseInt(r[2],10),1!==a&&b(o,"unacceptable YAML version of the document"),o.version=i[0],o.checkLineBreaks=s<2,1!==s&&2!==s&&Ue(o,"unsupported YAML version of the document")},TAG:function(o,n,i){var r,a;2!==i.length&&b(o,"TAG directive accepts exactly two arguments"),a=i[1],ni.test(r=i[0])||b(o,"ill-formed tag handle (first argument) of the TAG directive"),X.call(o.tagMap,r)&&b(o,'there is a previously declared suffix for "'+r+'" tag handle'),ri.test(a)||b(o,"ill-formed tag prefix (second argument) of the TAG directive");try{a=decodeURIComponent(a)}catch{b(o,"tag prefix is malformed: "+a)}o.tagMap[r]=a}};function ee(t,o,n,i){var r,a,s,c;if(o<n){if(c=t.input.slice(o,n),i)for(r=0,a=c.length;r<a;r+=1)9===(s=c.charCodeAt(r))||32<=s&&s<=1114111||b(t,"expected valid JSON character");else Ka.test(c)&&b(t,"the stream contains non-printable characters");t.result+=c}}function ui(t,o,n,i){var r,a,s,c;for(P.isObject(n)||b(t,"cannot merge mappings; the provided source object is unacceptable"),s=0,c=(r=Object.keys(n)).length;s<c;s+=1)X.call(o,a=r[s])||(o[a]=n[a],i[a]=!0)}function me(t,o,n,i,r,a,s,c,p){var g,h;if(Array.isArray(r))for(g=0,h=(r=Array.prototype.slice.call(r)).length;g<h;g+=1)Array.isArray(r[g])&&b(t,"nested arrays are not supported inside keys"),"object"==typeof r&&"[object Object]"===oi(r[g])&&(r[g]="[object Object]");if("object"==typeof r&&"[object Object]"===oi(r)&&(r="[object Object]"),r=String(r),null===o&&(o={}),"tag:yaml.org,2002:merge"===i)if(Array.isArray(a))for(g=0,h=a.length;g<h;g+=1)ui(t,o,a[g],n);else ui(t,o,a,n);else!t.json&&!X.call(n,r)&&X.call(o,r)&&(t.line=s||t.line,t.lineStart=c||t.lineStart,t.position=p||t.position,b(t,"duplicated mapping key")),"__proto__"===r?Object.defineProperty(o,r,{configurable:!0,enumerable:!0,writable:!0,value:a}):o[r]=a,delete n[r];return o}function ct(t){var o;10===(o=t.input.charCodeAt(t.position))?t.position++:13===o?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):b(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Z(t,o,n){for(var i=0,r=t.input.charCodeAt(t.position);0!==r;){for(;oe(r);)9===r&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),r=t.input.charCodeAt(++t.position);if(o&&35===r)do{r=t.input.charCodeAt(++t.position)}while(10!==r&&13!==r&&0!==r);if(!z(r))break;for(ct(t),r=t.input.charCodeAt(t.position),i++,t.lineIndent=0;32===r;)t.lineIndent++,r=t.input.charCodeAt(++t.position)}return-1!==n&&0!==i&&t.lineIndent<n&&Ue(t,"deficient indentation"),i}function Fe(t){var n,o=t.position;return!(45!==(n=t.input.charCodeAt(o))&&46!==n||n!==t.input.charCodeAt(o+1)||n!==t.input.charCodeAt(o+2)||(o+=3,n=t.input.charCodeAt(o),0!==n&&!J(n)))}function lt(t,o){1===o?t.result+=" ":o>1&&(t.result+=P.repeat("\n",o-1))}function gi(t,o){var n,p,i=t.tag,r=t.anchor,a=[],c=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),p=t.input.charCodeAt(t.position);0!==p&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,b(t,"tab characters must not be used in indentation")),45===p&&J(t.input.charCodeAt(t.position+1)));)if(c=!0,t.position++,Z(t,!0,-1)&&t.lineIndent<=o)a.push(null),p=t.input.charCodeAt(t.position);else if(n=t.line,he(t,o,ti,!1,!0),a.push(t.result),Z(t,!0,-1),p=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>o)&&0!==p)b(t,"bad indentation of a sequence entry");else if(t.lineIndent<o)break;return!!c&&(t.tag=i,t.anchor=r,t.kind="sequence",t.result=a,!0)}function us(t){var o,r,a,s,n=!1,i=!1;if(33!==(s=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&b(t,"duplication of a tag property"),60===(s=t.input.charCodeAt(++t.position))?(n=!0,s=t.input.charCodeAt(++t.position)):33===s?(i=!0,r="!!",s=t.input.charCodeAt(++t.position)):r="!",o=t.position,n){do{s=t.input.charCodeAt(++t.position)}while(0!==s&&62!==s);t.position<t.length?(a=t.input.slice(o,t.position),s=t.input.charCodeAt(++t.position)):b(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==s&&!J(s);)33===s&&(i?b(t,"tag suffix cannot contain exclamation marks"):(r=t.input.slice(o-1,t.position+1),ni.test(r)||b(t,"named tag handle cannot contain such characters"),i=!0,o=t.position+1)),s=t.input.charCodeAt(++t.position);a=t.input.slice(o,t.position),Xa.test(a)&&b(t,"tag suffix cannot contain flow indicator characters")}a&&!ri.test(a)&&b(t,"tag name cannot contain such characters: "+a);try{a=decodeURIComponent(a)}catch{b(t,"tag name is malformed: "+a)}return n?t.tag=a:X.call(t.tagMap,r)?t.tag=t.tagMap[r]+a:"!"===r?t.tag="!"+a:"!!"===r?t.tag="tag:yaml.org,2002:"+a:b(t,'undeclared tag handle "'+r+'"'),!0}function gs(t){var o,n;if(38!==(n=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&b(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),o=t.position;0!==n&&!J(n)&&!ue(n);)n=t.input.charCodeAt(++t.position);return t.position===o&&b(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(o,t.position),!0}function he(t,o,n,i,r){var a,s,c,m,d,f,I,O,L,p=1,g=!1,h=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,a=s=c=ke===n||ti===n,i&&Z(t,!0,-1)&&(g=!0,t.lineIndent>o?p=1:t.lineIndent===o?p=0:t.lineIndent<o&&(p=-1)),1===p)for(;us(t)||gs(t);)Z(t,!0,-1)?(g=!0,c=a,t.lineIndent>o?p=1:t.lineIndent===o?p=0:t.lineIndent<o&&(p=-1)):c=!1;if(c&&(c=g||r),(1===p||ke===n)&&(O=De===n||ei===n?o:o+1,L=t.position-t.lineStart,1===p?c&&(gi(t,L)||function ps(t,o,n){var i,r,a,s,c,p,y,g=t.tag,h=t.anchor,m={},d=Object.create(null),f=null,I=null,O=null,L=!1,H=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=m),y=t.input.charCodeAt(t.position);0!==y;){if(!L&&-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,b(t,"tab characters must not be used in indentation")),i=t.input.charCodeAt(t.position+1),a=t.line,63!==y&&58!==y||!J(i)){if(s=t.line,c=t.lineStart,p=t.position,!he(t,n,ei,!1,!0))break;if(t.line===a){for(y=t.input.charCodeAt(t.position);oe(y);)y=t.input.charCodeAt(++t.position);if(58===y)J(y=t.input.charCodeAt(++t.position))||b(t,"a whitespace character is expected after the key-value separator within a block mapping"),L&&(me(t,m,d,f,I,null,s,c,p),f=I=O=null),H=!0,L=!1,r=!1,f=t.tag,I=t.result;else{if(!H)return t.tag=g,t.anchor=h,!0;b(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!H)return t.tag=g,t.anchor=h,!0;b(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===y?(L&&(me(t,m,d,f,I,null,s,c,p),f=I=O=null),H=!0,L=!0,r=!0):L?(L=!1,r=!0):b(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,y=i;if((t.line===a||t.lineIndent>o)&&(L&&(s=t.line,c=t.lineStart,p=t.position),he(t,o,ke,!0,r)&&(L?I=t.result:O=t.result),L||(me(t,m,d,f,I,O,s,c,p),f=I=O=null),Z(t,!0,-1),y=t.input.charCodeAt(t.position)),(t.line===a||t.lineIndent>o)&&0!==y)b(t,"bad indentation of a mapping entry");else if(t.lineIndent<o)break}return L&&me(t,m,d,f,I,null,s,c,p),H&&(t.tag=g,t.anchor=h,t.kind="mapping",t.result=m),H}(t,L,O))||function cs(t,o){var i,r,a,c,h,m,d,f,O,L,H,y,n=!0,s=t.tag,p=t.anchor,I=Object.create(null);if(91===(y=t.input.charCodeAt(t.position)))h=93,f=!1,c=[];else{if(123!==y)return!1;h=125,f=!0,c={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=c),y=t.input.charCodeAt(++t.position);0!==y;){if(Z(t,!0,o),(y=t.input.charCodeAt(t.position))===h)return t.position++,t.tag=s,t.anchor=p,t.kind=f?"mapping":"sequence",t.result=c,!0;n?44===y&&b(t,"expected the node content, but found ','"):b(t,"missed comma between flow collection entries"),H=null,m=d=!1,63===y&&J(t.input.charCodeAt(t.position+1))&&(m=d=!0,t.position++,Z(t,!0,o)),i=t.line,r=t.lineStart,a=t.position,he(t,o,De,!1,!0),L=t.tag,O=t.result,Z(t,!0,o),y=t.input.charCodeAt(t.position),(d||t.line===i)&&58===y&&(m=!0,y=t.input.charCodeAt(++t.position),Z(t,!0,o),he(t,o,De,!1,!0),H=t.result),f?me(t,c,I,L,O,H,i,r,a):c.push(m?me(t,null,I,L,O,H,i,r,a):O),Z(t,!0,o),44===(y=t.input.charCodeAt(t.position))?(n=!0,y=t.input.charCodeAt(++t.position)):n=!1}b(t,"unexpected end of the stream within a flow collection")}(t,O)?h=!0:(s&&function ls(t,o){var n,i,h,m,r=st,a=!1,s=!1,c=o,p=0,g=!1;if(124===(m=t.input.charCodeAt(t.position)))i=!1;else{if(62!==m)return!1;i=!0}for(t.kind="scalar",t.result="";0!==m;)if(43===(m=t.input.charCodeAt(++t.position))||45===m)st===r?r=43===m?ii:$a:b(t,"repeat of a chomping mode identifier");else{if(!((h=is(m))>=0))break;0===h?b(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?b(t,"repeat of an indentation width identifier"):(c=o+h-1,s=!0)}if(oe(m)){do{m=t.input.charCodeAt(++t.position)}while(oe(m));if(35===m)do{m=t.input.charCodeAt(++t.position)}while(!z(m)&&0!==m)}for(;0!==m;){for(ct(t),t.lineIndent=0,m=t.input.charCodeAt(t.position);(!s||t.lineIndent<c)&&32===m;)t.lineIndent++,m=t.input.charCodeAt(++t.position);if(!s&&t.lineIndent>c&&(c=t.lineIndent),z(m))p++;else{if(t.lineIndent<c){r===ii?t.result+=P.repeat("\n",a?1+p:p):r===st&&a&&(t.result+="\n");break}for(i?oe(m)?(g=!0,t.result+=P.repeat("\n",a?1+p:p)):g?(g=!1,t.result+=P.repeat("\n",p+1)):0===p?a&&(t.result+=" "):t.result+=P.repeat("\n",p):t.result+=P.repeat("\n",a?1+p:p),a=!0,s=!0,p=0,n=t.position;!z(m)&&0!==m;)m=t.input.charCodeAt(++t.position);ee(t,n,t.position,!1)}}return!0}(t,O)||function as(t,o){var n,i,r;if(39!==(n=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,i=r=t.position;0!==(n=t.input.charCodeAt(t.position));)if(39===n){if(ee(t,i,t.position,!0),39!==(n=t.input.charCodeAt(++t.position)))return!0;i=t.position,t.position++,r=t.position}else z(n)?(ee(t,i,r,!0),lt(t,Z(t,!1,o)),i=r=t.position):t.position===t.lineStart&&Fe(t)?b(t,"unexpected end of the document within a single quoted scalar"):(t.position++,r=t.position);b(t,"unexpected end of the stream within a single quoted scalar")}(t,O)||function ss(t,o){var n,i,r,a,s,c;if(34!==(c=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,n=i=t.position;0!==(c=t.input.charCodeAt(t.position));){if(34===c)return ee(t,n,t.position,!0),t.position++,!0;if(92===c){if(ee(t,n,t.position,!0),z(c=t.input.charCodeAt(++t.position)))Z(t,!1,o);else if(c<256&&si[c])t.result+=ci[c],t.position++;else if((s=ts(c))>0){for(r=s,a=0;r>0;r--)(s=es(c=t.input.charCodeAt(++t.position)))>=0?a=(a<<4)+s:b(t,"expected hexadecimal character");t.result+=ns(a),t.position++}else b(t,"unknown escape sequence");n=i=t.position}else z(c)?(ee(t,n,i,!0),lt(t,Z(t,!1,o)),n=i=t.position):t.position===t.lineStart&&Fe(t)?b(t,"unexpected end of the document within a double quoted scalar"):(t.position++,i=t.position)}b(t,"unexpected end of the stream within a double quoted scalar")}(t,O)?h=!0:function ms(t){var o,n,i;if(42!==(i=t.input.charCodeAt(t.position)))return!1;for(i=t.input.charCodeAt(++t.position),o=t.position;0!==i&&!J(i)&&!ue(i);)i=t.input.charCodeAt(++t.position);return t.position===o&&b(t,"name of an alias node must contain at least one character"),n=t.input.slice(o,t.position),X.call(t.anchorMap,n)||b(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Z(t,!0,-1),!0}(t)?(h=!0,(null!==t.tag||null!==t.anchor)&&b(t,"alias node should not have any properties")):function os(t,o,n){var r,a,s,c,p,g,h,f,m=t.kind,d=t.result;if(J(f=t.input.charCodeAt(t.position))||ue(f)||35===f||38===f||42===f||33===f||124===f||62===f||39===f||34===f||37===f||64===f||96===f||(63===f||45===f)&&(J(r=t.input.charCodeAt(t.position+1))||n&&ue(r)))return!1;for(t.kind="scalar",t.result="",a=s=t.position,c=!1;0!==f;){if(58===f){if(J(r=t.input.charCodeAt(t.position+1))||n&&ue(r))break}else if(35===f){if(J(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&Fe(t)||n&&ue(f))break;if(z(f)){if(p=t.line,g=t.lineStart,h=t.lineIndent,Z(t,!1,-1),t.lineIndent>=o){c=!0,f=t.input.charCodeAt(t.position);continue}t.position=s,t.line=p,t.lineStart=g,t.lineIndent=h;break}}c&&(ee(t,a,s,!1),lt(t,t.line-p),a=s=t.position,c=!1),oe(f)||(s=t.position+1),f=t.input.charCodeAt(++t.position)}return ee(t,a,s,!1),!!t.result||(t.kind=m,t.result=d,!1)}(t,O,De===n)&&(h=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===p&&(h=c&&gi(t,L))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&b(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),m=0,d=t.implicitTypes.length;m<d;m+=1)if((I=t.implicitTypes[m]).resolve(t.result)){t.result=I.construct(t.result),t.tag=I.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(X.call(t.typeMap[t.kind||"fallback"],t.tag))I=t.typeMap[t.kind||"fallback"][t.tag];else for(I=null,m=0,d=(f=t.typeMap.multi[t.kind||"fallback"]).length;m<d;m+=1)if(t.tag.slice(0,f[m].tag.length)===f[m].tag){I=f[m];break}I||b(t,"unknown tag !<"+t.tag+">"),null!==t.result&&I.kind!==t.kind&&b(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+I.kind+'", not "'+t.kind+'"'),I.resolve(t.result,t.tag)?(t.result=I.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):b(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||h}function hs(t){var n,i,r,s,o=t.position,a=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(s=t.input.charCodeAt(t.position))&&(Z(t,!0,-1),s=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==s));){for(a=!0,s=t.input.charCodeAt(++t.position),n=t.position;0!==s&&!J(s);)s=t.input.charCodeAt(++t.position);for(r=[],(i=t.input.slice(n,t.position)).length<1&&b(t,"directive name must not be less than one character in length");0!==s;){for(;oe(s);)s=t.input.charCodeAt(++t.position);if(35===s){do{s=t.input.charCodeAt(++t.position)}while(0!==s&&!z(s));break}if(z(s))break;for(n=t.position;0!==s&&!J(s);)s=t.input.charCodeAt(++t.position);r.push(t.input.slice(n,t.position))}0!==s&&ct(t),X.call(pi,i)?pi[i](t,i,r):Ue(t,'unknown document directive "'+i+'"')}Z(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,Z(t,!0,-1)):a&&b(t,"directives end mark is expected"),he(t,t.lineIndent-1,ke,!1,!0),Z(t,!0,-1),t.checkLineBreaks&&Wa.test(t.input.slice(o,t.position))&&Ue(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Fe(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,Z(t,!0,-1)):t.position<t.length-1&&b(t,"end of the stream or a document separator is expected")}function mi(t,o){o=o||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var n=new rs(t,o),i=t.indexOf("\0");for(-1!==i&&(n.position=i,b(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)hs(n);return n.documents}function dt(t,o){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+o+" instead, which is now safe by default.")}}var Ri=function fs(t,o){var n=mi(t,o);if(0!==n.length){if(1===n.length)return n[0];throw new j("expected a single document in the stream, but found more")}};dt("safeLoad","load"),dt("safeLoadAll","loadAll"),dt("safeDump","dump");var hc=_(9862);let Le=(()=>{var t;class o{constructor(i){this.http=i}getDetailByLink(i,r,a){return a?this.http.get(i,{observe:"body",responseType:"text"}):r?this.http.get(i,{headers:{"X-Accept-Vulnerabilities":u.eB}}):this.http.get(i)}}return(t=o).\u0275fac=function(i){return new(i||t)(e.LFG(hc.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),o})();var Be=_(4611);function dc(t,o){1&t&&(e.TgZ(0,"div",9)(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"ARTIFACT.SHOW_KV")))}function fc(t,o){1&t&&(e.TgZ(0,"div",9)(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"ARTIFACT.SHOW_YAML")))}function _c(t,o){if(1&t&&(e.TgZ(0,"tr")(1,"td",15),e._uU(2),e.qZA(),e.TgZ(3,"td",15),e._uU(4),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.Oqu(null==n?null:n.key),e.xp6(2),e.Oqu(null==n?null:n.value)}}function bc(t,o){if(1&t&&(e.TgZ(0,"div",12)(1,"table",13)(2,"tbody"),e.YNc(3,_c,5,2,"tr",14),e.ALo(4,"keyvalue"),e.qZA()()()),2&t){const n=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,n.valuesObj))}}function Ac(t,o){if(1&t&&(e.TgZ(0,"div",12),e._UZ(1,"div",16),e.ALo(2,"markdown"),e.ALo(3,"language"),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,1,e.xi3(3,3,n.values,"yaml")),e.oJD)}}function Tc(t,o){if(1&t&&(e.TgZ(0,"div",10),e.YNc(1,bc,5,3,"div",11),e.YNc(2,Ac,4,6,"div",11),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.valueMode),e.xp6(1),e.Q6J("ngIf",!n.valueMode)}}function Cc(t,o){1&t&&(e.TgZ(0,"div",17),e._UZ(1,"span",18),e.qZA())}const Mi=function(t){return{"is-highlight":t}};let xc=(()=>{var t;class o{constructor(i,r){this.errorHandler=i,this.additionsService=r,this.valuesObj={},this.valueMode=!1,this.valueHover=!1,this.yamlHover=!0,this.loading=!1}ngOnInit(){this.valuesLink&&!this.valuesLink.absolute&&this.valuesLink.href&&(this.loading=!0,this.additionsService.getDetailByLink(this.valuesLink.href,!1,!0).pipe((0,w.x)(()=>this.loading=!1)).subscribe(i=>{try{this.format(Ri(i)),this.values=i}catch(r){this.errorHandler.error(r)}},i=>{this.errorHandler.error(i)}))}get isValueMode(){return this.valueMode}isHovering(i){return"value"===i?this.valueHover:this.yamlHover}showYamlFile(i){this.valueMode=!i}mouseEnter(i){"value"===i?this.valueHover=!0:this.yamlHover=!0}mouseLeave(i){"value"===i?this.valueHover=!1:this.yamlHover=!1}format(i){for(let r in i)if(i.hasOwnProperty(r))if((0,u.Kn)(i[r])){for(let a in i[r])i[r].hasOwnProperty(a)&&(i[`${r}.${a}`]=i[r][a]);delete i[r],this.format(i)}else this.valuesObj[r]=i[r]}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(D.q),e.Y36(Le))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hbr-artifact-values"]],inputs:{valuesLink:"valuesLink"},decls:10,vars:10,consts:[[1,"row","flex-items-xs-between","values-header"],["class","title-container",4,"ngIf"],[1,"switch-container"],[1,"card-btn",3,"click","mouseenter","mouseleave"],["size","24","shape","view-list","title","list values",3,"ngClass"],[1,"list-btn",3,"click","mouseenter","mouseleave"],["size","24","shape","file","title","yaml file",3,"ngClass"],["class","row value-container",4,"ngIf"],["class","clr-row mt-1 center",4,"ngIf"],[1,"title-container"],[1,"row","value-container"],["class","col-xs-8",4,"ngIf"],[1,"col-xs-8"],[1,"table"],[4,"ngFor","ngForOf"],[1,"left"],[1,"yaml-container",3,"innerHTML"],[1,"clr-row","mt-1","center"],[1,"spinner","spinner-md"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0),e.YNc(1,dc,4,3,"div",1),e.YNc(2,fc,4,3,"div",1),e.TgZ(3,"div",2)(4,"span",3),e.NdJ("click",function(){return r.showYamlFile(!1)})("mouseenter",function(){return r.mouseEnter("value")})("mouseleave",function(){return r.mouseLeave("value")}),e._UZ(5,"clr-icon",4),e.qZA(),e.TgZ(6,"span",5),e.NdJ("click",function(){return r.showYamlFile(!0)})("mouseenter",function(){return r.mouseEnter("yaml")})("mouseleave",function(){return r.mouseLeave("yaml")}),e._UZ(7,"clr-icon",6),e.qZA()()(),e.YNc(8,Tc,3,2,"div",7),e.YNc(9,Cc,2,0,"div",8)),2&i&&(e.xp6(1),e.Q6J("ngIf",r.valueMode),e.xp6(1),e.Q6J("ngIf",!r.valueMode),e.xp6(3),e.Q6J("ngClass",e.VKq(6,Mi,r.isValueMode||r.isHovering("value"))),e.xp6(2),e.Q6J("ngClass",e.VKq(8,Mi,!r.isValueMode||r.isHovering("yaml"))),e.xp6(1),e.Q6J("ngIf",!r.loading),e.xp6(1),e.Q6J("ngIf",r.loading))},dependencies:[l.qvL,l.MgK,A.mk,A.sg,A.O5,v.X$,A.Nd,Be.Ay,Be.NO],styles:[".value-container[_ngcontent-%COMP%]     pre{min-height:-moz-fit-content;min-height:fit-content;max-height:none!important}.values-header[_ngcontent-%COMP%]{margin-top:12px}pre[_ngcontent-%COMP%]{padding-left:21px}.center[_ngcontent-%COMP%]{justify-content:center;align-items:center}"]}),o})();function vc(t,o){if(1&t&&(e._UZ(0,"div",6),e.ALo(1,"markdown")),2&t){const n=e.oxw(2);e.Q6J("innerHTML",e.lcZ(1,1,n.readme),e.oJD)}}function Sc(t,o){1&t&&(e.TgZ(0,"div"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ARTIFACT.NO_README")))}function Ic(t,o){if(1&t&&(e.TgZ(0,"div",2)(1,"div",3),e.YNc(2,vc,2,3,"div",4),e.YNc(3,Sc,3,3,"div",5),e.qZA()()),2&t){const n=e.oxw();e.xp6(2),e.Q6J("ngIf",n.readme),e.xp6(1),e.Q6J("ngIf",!n.readme)}}function yc(t,o){1&t&&(e.TgZ(0,"div",7),e._UZ(1,"span",8),e.qZA())}let Oc=(()=>{var t;class o{constructor(i,r){this.errorHandler=i,this.additionsService=r,this.loading=!1}ngOnInit(){this.getReadme()}getReadme(){this.summaryLink&&!this.summaryLink.absolute&&this.summaryLink.href&&(this.loading=!0,this.additionsService.getDetailByLink(this.summaryLink.href,!1,!0).pipe((0,w.x)(()=>this.loading=!1)).subscribe(i=>{this.readme=i},i=>{this.errorHandler.error(i)}))}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(D.q),e.Y36(Le))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hbr-artifact-summary"]],inputs:{summaryLink:"summaryLink"},decls:2,vars:2,consts:[["class","row content-wrapper",4,"ngIf"],["class","clr-row mt-3 center",4,"ngIf"],[1,"row","content-wrapper"],[1,"col-md-8","md-container","pl-1"],["class","md-div",3,"innerHTML",4,"ngIf"],[4,"ngIf"],[1,"md-div",3,"innerHTML"],[1,"clr-row","mt-3","center"],[1,"spinner","spinner-md"]],template:function(i,r){1&i&&(e.YNc(0,Ic,4,2,"div",0),e.YNc(1,yc,2,0,"div",1)),2&i&&(e.Q6J("ngIf",!r.loading),e.xp6(1),e.Q6J("ngIf",r.loading))},dependencies:[A.O5,v.X$,Be.NO],styles:[".content-wrapper[_ngcontent-%COMP%]{margin-top:20px;padding:0 0 0 15px}.content-wrapper[_ngcontent-%COMP%]   .md-container[_ngcontent-%COMP%]{border:solid 1px #ddd}.center[_ngcontent-%COMP%]{justify-content:center;align-items:center}"]}),o})();function wc(t,o){if(1&t&&(e.TgZ(0,"clr-dg-row",2)(1,"clr-dg-cell",3),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell",3),e._uU(4),e.qZA(),e.TgZ(5,"clr-dg-cell",3)(6,"a",4),e._uU(7),e.qZA()()()),2&t){const n=o.$implicit;e.Q6J("clrDgItem",n),e.xp6(2),e.Oqu(n.name),e.xp6(2),e.Oqu(n.version),e.xp6(2),e.s9C("href",n.repository,e.LSH),e.xp6(1),e.Oqu(n.repository)}}let Nc=(()=>{var t;class o{constructor(i,r){this.errorHandler=i,this.additionsService=r,this.dependencyList=[],this.loading=!1}ngOnInit(){this.getDependencyList()}getDependencyList(){this.dependenciesLink&&!this.dependenciesLink.absolute&&this.dependenciesLink.href&&(this.loading=!0,this.additionsService.getDetailByLink(this.dependenciesLink.href,!1,!1).pipe((0,w.x)(()=>this.loading=!1)).subscribe(i=>{this.dependencyList=i},i=>{this.errorHandler.error(i)}))}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(D.q),e.Y36(Le))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hbr-artifact-dependencies"]],inputs:{dependenciesLink:"dependenciesLink"},decls:11,vars:11,consts:[[3,"clrDgLoading"],["class","history-item",3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[1,"history-item",3,"clrDgItem"],[1,"left"],[3,"href"]],template:function(i,r){1&i&&(e.TgZ(0,"clr-datagrid",0)(1,"clr-dg-column"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"clr-dg-column"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"clr-dg-column"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.YNc(10,wc,8,5,"clr-dg-row",1),e.qZA()),2&i&&(e.Q6J("clrDgLoading",r.loading),e.xp6(2),e.Oqu(e.lcZ(3,5,"ARTIFACT.NAME")),e.xp6(3),e.Oqu(e.lcZ(6,7,"ARTIFACT.VERSION")),e.xp6(3),e.Oqu(e.lcZ(9,9,"ARTIFACT.REPO")),e.xp6(2),e.Q6J("clrDgItemsOf",r.dependencyList))},dependencies:[l.C9t,l.fv_,l.m4W,l.f6,l.Z4N,l.jND,l.KHL,l.PDs,l.Gcc,l.dml,l.Nh1,l.K8c,v.X$],styles:[".dep-container[_ngcontent-%COMP%]{margin-top:30px}"]}),o})();function Lc(t,o){if(1&t&&(e.TgZ(0,"clr-dg-row",3)(1,"clr-dg-cell"),e._uU(2),e.ALo(3,"harborDatetime"),e.qZA(),e.TgZ(4,"clr-dg-cell"),e._uU(5),e.qZA()()),2&t){const n=o.$implicit;e.Q6J("clrDgItem",n),e.xp6(2),e.Oqu(e.xi3(3,3,n.created,"short")),e.xp6(3),e.Oqu(n.created_by)}}let Zc=(()=>{var t;class o{constructor(i,r){this.errorHandler=i,this.additionsService=r,this.historyList=[],this.loading=!1}ngOnInit(){this.getBuildHistory()}getBuildHistory(){this.buildHistoryLink&&!this.buildHistoryLink.absolute&&this.buildHistoryLink.href&&(this.loading=!0,this.additionsService.getDetailByLink(this.buildHistoryLink.href,!1,!1).pipe((0,w.x)(()=>this.loading=!1)).subscribe(i=>{i&&i.length&&i.forEach(r=>{const a=new Hi;a.created=r.created,a.created_by=void 0!==r.created_by?r.created_by.replace("/bin/sh -c #(nop)","").trimLeft().replace("/bin/sh -c","RUN"):r.comment,this.historyList.push(a)})},i=>{this.errorHandler.error(i)}))}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(D.q),e.Y36(Le))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hbr-artifact-build-history"]],inputs:{buildHistoryLink:"buildHistoryLink"},decls:10,vars:9,consts:[[3,"clrDgLoading"],[1,"history-time"],["class","history-item",3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[1,"history-item",3,"clrDgItem"]],template:function(i,r){1&i&&(e.TgZ(0,"clr-datagrid",0)(1,"clr-dg-column",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"clr-dg-column"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.YNc(7,Lc,6,6,"clr-dg-row",2),e.TgZ(8,"clr-dg-footer"),e._uU(9),e.qZA()()),2&i&&(e.Q6J("clrDgLoading",r.loading),e.xp6(2),e.Oqu(e.lcZ(3,5,"TAG.CREATION")),e.xp6(3),e.Oqu(e.lcZ(6,7,"TAG.COMMAND")),e.xp6(2),e.Q6J("clrDgItemsOf",r.historyList),e.xp6(2),e.hij("",r.historyList.length," commands"))},dependencies:[l.C9t,l.fv_,l.m4W,l.dRQ,l.f6,l.Z4N,l.jND,l.KHL,l.PDs,l.Gcc,l.dml,l.Nh1,l.K8c,v.X$,ce.Z],styles:[".history-time[_ngcontent-%COMP%]{width:160px}"]}),o})();var Ec=_(974),Di=_(1575);function Pc(t,o){1&t&&e._UZ(0,"clr-icon",21)}function Rc(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SBOM.DOWNLOAD")))}function Mc(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SBOM.STATE.OTHER_STATUS")))}function Dc(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"SBOM.CHART.TOOLTIPS_TITLE_ZERO")," ")}function kc(t,o){if(1&t&&(e.TgZ(0,"clr-dg-row")(1,"clr-dg-cell",22),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell",23),e._uU(4),e.qZA(),e.TgZ(5,"clr-dg-cell"),e._uU(6),e.qZA()()),2&t){const n=o.$implicit;let i,r,a;e.xp6(2),e.Oqu(null!==(i=n.name)&&void 0!==i?i:""),e.xp6(2),e.Oqu(null!==(r=n.versionInfo)&&void 0!==r?r:""),e.xp6(2),e.Oqu(null!==(a=n.licenseConcluded)&&void 0!==a?a:"")}}const Uc=function(t){return{scanner:t}};function Fc(t,o){if(1&t&&(e.TgZ(0,"i"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Oqu(e.xi3(2,1,"SBOM.REPORTED_BY",e.VKq(4,Uc,n.getScannerInfo(null==n.artifact||null==n.artifact.sbom_overview?null:n.artifact.sbom_overview.scanner))))}}function qc(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){e.oxw();const n=e.MAs(33);e.xp6(1),e.lnq("",n.firstItem+1," - ",n.lastItem+1," ",e.lcZ(2,3,"SBOM.GRID.FOOT_OF"),"")}}const Yc=function(){return[15,25,50]};let Bc=(()=>{var t;class o{constructor(i,r,a,s,c){this.errorHandler=i,this.artifactService=r,this.userPermissionService=a,this.eventService=s,this.session=c,this.hasScannerSupportSBOM=!1,this.loading=!1,this.downloadSbomBtnState=l.xp5.DEFAULT,this.hasSbomPermission=!1,this.hasShowLoading=!1,this.hasViewInitWithDelay=!1,this.pageSize=(0,u.tb)(u.V2.ARTIFACT_SBOM_COMPONENT,25),this.severityText=re.i4}ngOnInit(){this.getSbom(),this.getSbomPermission(),this.sub||(this.sub=this.eventService.subscribe(S.n.UPDATE_SBOM_INFO,i=>{if(i?.digest===this.artifact?.digest){if(i.sbom_overview){const r=Object.values(i.sbom_overview)?.[0]?.sbom_digest;r&&(this.sbomDigest=r)}this.getSbom()}})),setTimeout(()=>{this.hasViewInitWithDelay=!0},0)}ngOnDestroy(){this.sub&&(this.sub.unsubscribe(),this.sub=null)}getSbom(){if(this.sbomDigest){this.hasShowLoading||(this.loading=!0,this.hasShowLoading=!0);const i={repositoryName:(0,u.gI)(this.repoName),reference:this.sbomDigest,projectName:this.projectName,addition:ne.SZ.SBOM};this.artifactService.getAddition(i).pipe((0,w.x)(()=>{this.loading=!1,this.hasShowLoading=!1})).subscribe(r=>{r?this.artifactSbom=Qi(JSON.parse(r)):(this.loading=!1,this.hasShowLoading=!1)},r=>{this.errorHandler.error(r)})}}getSbomPermission(){this.userPermissionService.hasProjectPermissions(this.projectId,[{resource:x._W.REPOSITORY_TAG_SBOM_JOB.KEY,action:x._W.REPOSITORY_TAG_SBOM_JOB.VALUE.READ}]).subscribe(r=>{this.hasSbomPermission=r[0]},r=>this.errorHandler.error(r))}refresh(){this.getSbom()}hasGeneratedSbom(){return this.hasViewInitWithDelay}isSystemAdmin(){const i=this.session.getCurrentUser();return i&&i.has_admin_role}getScannerInfo(i){if(i){if(i.name&&i.version)return`${i.name}@${i.version}`;if(i.name&&!i.version)return`${i.name}`}return""}isRunningState(){return this.hasViewInitWithDelay&&this.artifact.sbom_overview&&(this.artifact.sbom_overview.scan_status===u.bl.PENDING||this.artifact.sbom_overview.scan_status===u.bl.RUNNING)}downloadSbom(){this.downloadSbomBtnState=l.xp5.LOADING,(this.artifact?.sbom_overview?.scan_status===u.bl.SUCCESS||this.sbomDigest||this.artifactSbom.sbomJsonRaw&&this.artifactSbom.sbomName)&&(0,u.DS)(this.artifactSbom.sbomJsonRaw,`${this.artifactSbom.sbomName}.json`),this.downloadSbomBtnState=l.xp5.DEFAULT}canDownloadSbom(){return this.hasScannerSupportSBOM&&this.sbomDigest&&this.downloadSbomBtnState!==l.xp5.LOADING&&void 0!==this.artifactSbom}artifactSbomPackages(){return this.artifactSbom?.sbomPackage?.packages?.filter(i=>i?.name||i?.versionInfo||i?.licenseConcluded)??[]}load(i){i?.page?.size&&(0,u.Pe)(u.V2.ARTIFACT_SBOM_COMPONENT,i.page.size)}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(D.q),e.Y36(Ec.bk),e.Y36(x.Hx),e.Y36(S.P),e.Y36(Di.m))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hbr-artifact-sbom"]],inputs:{projectName:"projectName",projectId:"projectId",repoName:"repoName",sbomDigest:"sbomDigest",artifact:"artifact",hasScannerSupportSBOM:"hasScannerSupportSBOM"},decls:40,vars:34,consts:[[1,"row","result-row"],[1,"row","flex-items-xs-right","rightPos"],[1,"flex-xs-middle","option-right"],[1,"refresh-btn",3,"click"],["shape","refresh"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"clrDgLoading","clrDgRefresh"],[1,"clr-row","center"],[1,"ml-05"],["id","sbom-btn","type","button",1,"btn","btn-secondary",3,"clrLoading","disabled","click"],["shape","download","size","16",4,"ngIf"],[4,"ngIf"],[1,"package-medium",3,"clrDgSortBy","clrDgField"],[1,"version-medium",3,"clrDgSortBy","clrDgField"],[4,"ngIf","ngIfElse"],["elseBlock",""],[4,"clrDgItems","clrDgItemsOf"],[1,"report"],[3,"clrDgPageSize","clrDgTotalItems"],["pagination",""],[3,"clrPageSizeOptions"],["shape","download","size","16"],[1,"package-medium"],[1,"version-medium"]],template:function(i,r){if(1&i&&(e.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"div",2)(4,"span",3),e.NdJ("click",function(){return r.refresh()}),e._UZ(5,"clr-icon",4),e.qZA()()()(),e.TgZ(6,"div",5)(7,"clr-datagrid",6),e.NdJ("clrDgRefresh",function(s){return r.load(s)}),e.TgZ(8,"clr-dg-action-bar")(9,"div",7)(10,"div",8)(11,"button",9),e.NdJ("click",function(){return r.downloadSbom()}),e.YNc(12,Pc,1,0,"clr-icon",10),e._uU(13,"\xa0 "),e.YNc(14,Rc,3,3,"span",11),e.qZA()()()(),e.TgZ(15,"clr-dg-column",12),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"clr-dg-column",13),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"clr-dg-column"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"clr-dg-placeholder"),e.YNc(25,Mc,3,3,"span",14),e.YNc(26,Dc,2,3,"ng-template",null,15,e.W1O),e.qZA(),e.YNc(28,kc,7,3,"clr-dg-row",16),e.TgZ(29,"clr-dg-footer")(30,"div",17),e.YNc(31,Fc,3,6,"i",11),e.qZA(),e.TgZ(32,"clr-dg-pagination",18,19)(34,"clr-dg-page-size",20),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.YNc(37,qc,3,5,"span",11),e._uU(38),e.ALo(39,"translate"),e.qZA()()()()()),2&i){const a=e.MAs(27);e.xp6(7),e.Q6J("clrDgLoading",r.loading),e.xp6(4),e.Q6J("clrLoading",r.downloadSbomBtnState)("disabled",!r.canDownloadSbom()),e.xp6(1),e.Q6J("ngIf",!r.isRunningState()),e.xp6(2),e.Q6J("ngIf",!r.isRunningState()),e.xp6(1),e.Q6J("clrDgSortBy","name")("clrDgField","name"),e.xp6(1),e.Oqu(e.lcZ(17,23,"SBOM.GRID.COLUMN_PACKAGE")),e.xp6(2),e.Q6J("clrDgSortBy","versionInfo")("clrDgField","versionInfo"),e.xp6(1),e.Oqu(e.lcZ(20,25,"SBOM.GRID.COLUMN_VERSION")),e.xp6(3),e.Oqu(e.lcZ(23,27,"SBOM.GRID.COLUMN_LICENSE")),e.xp6(3),e.Q6J("ngIf",r.hasGeneratedSbom())("ngIfElse",a),e.xp6(3),e.Q6J("clrDgItemsOf",r.artifactSbomPackages()),e.xp6(3),e.Q6J("ngIf",null==r.artifact?null:r.artifact.sbom_overview),e.xp6(1),e.Q6J("clrDgPageSize",r.pageSize)("clrDgTotalItems",r.artifactSbomPackages().length),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(33,Yc)),e.xp6(1),e.Oqu(e.lcZ(36,29,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",r.artifactSbomPackages().length),e.xp6(1),e.AsE(" ",r.artifactSbomPackages().length," ",e.lcZ(39,31,"SBOM.GRID.FOOT_ITEMS")," ")}},dependencies:[l.C9t,l.Gwl,l.fv_,l.m4W,l.dRQ,l.f6,l.YYR,l.Ltv,l.F7K,l.Z4N,l.jND,l.KHL,l.PDs,l.Gcc,l.dml,l.Nh1,l.K8c,l.qvL,l.cCV,l.MPb,A.O5,v.X$],styles:[".result-row[_ngcontent-%COMP%]{position:relative}.rightPos[_ngcontent-%COMP%]{position:absolute;z-index:100;right:0;margin-top:1.25rem}.option-right[_ngcontent-%COMP%]{padding-right:16px;margin-top:5px}.center[_ngcontent-%COMP%]{align-items:center}.label-critical[_ngcontent-%COMP%]{background:#ff4d2e;color:#000}.label-danger[_ngcontent-%COMP%]{background:#ff8f3d!important;color:#000!important}.label-medium[_ngcontent-%COMP%]{background-color:#ffce66;color:#000}.label-low[_ngcontent-%COMP%]{background:#fff1ad;color:#000}.label-none[_ngcontent-%COMP%]{background-color:#2ec0ff;color:#000}.no-border[_ngcontent-%COMP%]{border:none}.ml-05[_ngcontent-%COMP%]{margin-left:.5rem}.report[_ngcontent-%COMP%]{text-align:left}.mt-5px[_ngcontent-%COMP%]{margin-top:5px}.label[_ngcontent-%COMP%]{min-width:3rem}.package-medium[_ngcontent-%COMP%]{max-width:25rem;text-overflow:ellipsis}.version-medium[_ngcontent-%COMP%]{min-width:22rem;text-overflow:ellipsis}"]}),o})();function jc(t,o){1&t&&e._UZ(0,"clr-icon",25)}function Jc(t,o){1&t&&e._UZ(0,"clr-icon",26)}function Qc(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"VULNERABILITY.SCAN_NOW")))}function Hc(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"VULNERABILITY.STOP_NOW")))}function Vc(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"VULNERABILITY.STATE.OTHER_STATUS")))}function Gc(t,o){1&t&&(e._uU(0),e.ALo(1,"translate")),2&t&&e.hij(" ",e.lcZ(1,1,"VULNERABILITY.CHART.TOOLTIPS_TITLE_ZERO")," ")}function zc(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.Oqu(n.id)}}function $c(t,o){if(1&t&&(e.TgZ(0,"a",37),e._uU(1),e.qZA()),2&t){const n=e.oxw().$implicit;e.s9C("href",n.links[0],e.LSH),e.xp6(1),e.Oqu(n.id)}}function Kc(t,o){if(1&t&&(e.TgZ(0,"div",40)(1,"a",37),e._uU(2),e.qZA()()),2&t){const n=o.$implicit;e.xp6(1),e.s9C("href",n,e.LSH),e.xp6(1),e.Oqu(n)}}function Wc(t,o){if(1&t&&(e.TgZ(0,"clr-signpost-content"),e.YNc(1,Kc,3,2,"div",39),e.qZA()),2&t){const n=e.oxw(2).$implicit;e.xp6(1),e.Q6J("ngForOf",n.links)}}function Xc(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.TgZ(2,"clr-signpost"),e.YNc(3,Wc,2,1,"clr-signpost-content",38),e.qZA()()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.hij(" ",n.id," ")}}function el(t,o){if(1&t&&(e.TgZ(0,"span",41),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,i.severityText(n.severity)))}}function tl(t,o){if(1&t&&(e.TgZ(0,"span",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,i.severityText(n.severity)))}}function il(t,o){if(1&t&&(e.TgZ(0,"span",43),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,i.severityText(n.severity)))}}function nl(t,o){if(1&t&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,i.severityText(n.severity)))}}function rl(t,o){if(1&t&&(e.TgZ(0,"span",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,i.severityText(n.severity)))}}function ol(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,i.severityText(n.severity)))}}function al(t,o){if(1&t&&(e.TgZ(0,"div",46)(1,"div",47),e._uU(2),e.qZA(),e.TgZ(3,"div",47),e._uU(4),e.qZA()()),2&t){const n=o.$implicit;e.xp6(2),e.hij("",null==n?null:n.key,":"),e.xp6(2),e.Oqu(null==n||null==n.value?null:n.value.V3Score)}}function sl(t,o){if(1&t&&(e.TgZ(0,"div"),e._UZ(1,"clr-icon",48),e._uU(2,"\xa0"),e.TgZ(3,"span",49),e._uU(4),e.qZA()()),2&t){const n=e.oxw().$implicit;e.xp6(4),e.Oqu(n.fix_version)}}function cl(t,o){if(1&t&&e._uU(0),2&t){const n=e.oxw().$implicit;e.Oqu(n.fix_version)}}function ll(t,o){if(1&t&&(e.TgZ(0,"clr-dg-row-detail"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=e.oxw().$implicit;e.xp6(1),e.AsE(" ",e.lcZ(2,2,"VULNERABILITY.GRID.COLUMN_DESCRIPTION"),": ",n.description," ")}}function pl(t,o){if(1&t&&(e.TgZ(0,"clr-dg-row")(1,"clr-dg-cell"),e.YNc(2,zc,2,1,"span",12),e.YNc(3,$c,2,2,"a",27),e.YNc(4,Xc,4,1,"span",12),e.qZA(),e.TgZ(5,"clr-dg-cell",28),e.YNc(6,el,3,3,"span",29),e.YNc(7,tl,3,3,"span",30),e.YNc(8,il,3,3,"span",31),e.YNc(9,nl,3,3,"span",32),e.YNc(10,rl,3,3,"span",33),e.YNc(11,ol,3,3,"span",34),e.qZA(),e.TgZ(12,"clr-dg-cell"),e.YNc(13,al,5,2,"div",35),e.ALo(14,"keyvalue"),e.qZA(),e.TgZ(15,"clr-dg-cell"),e._uU(16),e.qZA(),e.TgZ(17,"clr-dg-cell"),e._uU(18),e.qZA(),e.TgZ(19,"clr-dg-cell"),e.YNc(20,sl,5,1,"div",18),e.YNc(21,cl,1,1,"ng-template",null,19,e.W1O),e.qZA(),e.TgZ(23,"clr-dg-cell"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.YNc(26,ll,3,4,"clr-dg-row-detail",36),e.qZA()),2&t){const n=o.$implicit,i=e.MAs(22),r=e.oxw();e.xp6(2),e.Q6J("ngIf",!n.links||0===n.links.length),e.xp6(1),e.Q6J("ngIf",n.links&&1===n.links.length),e.xp6(1),e.Q6J("ngIf",n.links&&n.links.length>1),e.xp6(1),e.Q6J("ngSwitch",n.severity),e.xp6(1),e.Q6J("ngSwitchCase","Critical"),e.xp6(1),e.Q6J("ngSwitchCase","High"),e.xp6(1),e.Q6J("ngSwitchCase","Medium"),e.xp6(1),e.Q6J("ngSwitchCase","Low"),e.xp6(1),e.Q6J("ngSwitchCase","None"),e.xp6(3),e.Q6J("ngForOf",e.lcZ(14,15,null==n||null==n.vendor_attributes?null:n.vendor_attributes.CVSS)),e.xp6(3),e.Oqu(n.package),e.xp6(2),e.Oqu(n.version),e.xp6(2),e.Q6J("ngIf",n.fix_version)("ngIfElse",i),e.xp6(4),e.hij(" ",e.lcZ(25,17,r.isInAllowList(n.id)?"TAG_RETENTION.YES":"TAG_RETENTION.NO")," ")}}const ul=function(t){return{scanner:t}};function gl(t,o){if(1&t&&(e.TgZ(0,"i"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Oqu(e.xi3(2,1,"VULNERABILITY.REPORTED_BY",e.VKq(4,ul,n.getScannerInfo(n.scanner))))}}function ml(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){e.oxw();const n=e.MAs(51);e.xp6(1),e.lnq("",n.firstItem+1," - ",n.lastItem+1," ",e.lcZ(2,3,"VULNERABILITY.GRID.FOOT_OF"),"")}}const hl=function(){return[15,25,50]};let dl=(()=>{var t;class o{constructor(i,r,a,s,c,p,g,h){this.errorHandler=i,this.additionsService=r,this.userPermissionService=a,this.scanningService=s,this.eventService=c,this.session=p,this.projectService=g,this.systemInfoService=h,this.scanBtnState=l.xp5.DEFAULT,this.hasEnabledScanner=!1,this.scanningResults=[],this.loading=!1,this.hasScanningPermission=!1,this.onSendingScanCommand=!1,this.onSendingStopCommand=!1,this.hasShowLoading=!1,this.hasViewInitWithDelay=!1,this.currentCVEList=[],this.pageSize=(0,u.tb)(u.V2.ARTIFACT_VUL_COMPONENT,25),this.severityText=re.i4;const m=this;this.severitySort={compare:(d,f)=>m.getLevel(d)-m.getLevel(f)},this.cvssSort={compare:(d,f)=>d&&d.preferred_cvss&&d.preferred_cvss.score_v3&&f&&f.preferred_cvss&&f.preferred_cvss.score_v3?+d.preferred_cvss.score_v3-+f.preferred_cvss.score_v3:0}}ngOnInit(){this.getVulnerabilities(),this.getScanningPermission(),this.sub||(this.sub=this.eventService.subscribe(S.n.UPDATE_VULNERABILITY_INFO,i=>{i?.digest===this.artifact?.digest&&this.getVulnerabilities()})),setTimeout(()=>{this.hasViewInitWithDelay=!0},0),this.getCurrentCVEAllowList()}ngOnDestroy(){this.sub&&(this.sub.unsubscribe(),this.sub=null)}getVulnerabilities(){this.vulnerabilitiesLink&&!this.vulnerabilitiesLink.absolute&&this.vulnerabilitiesLink.href&&(this.hasShowLoading||(this.loading=!0,this.hasShowLoading=!0),this.additionsService.getDetailByLink(this.vulnerabilitiesLink.href,!0,!1).pipe((0,w.x)(()=>{this.loading=!1,this.hasShowLoading=!1})).subscribe(i=>{this.scan_overview=i,this.scan_overview&&Object.values(this.scan_overview)[0]&&(this.scanningResults=Object.values(this.scan_overview)[0].vulnerabilities||[],this.scanningResults&&this.scanningResults.sort((r,a)=>this.getLevel(a)-this.getLevel(r)),this.scanner=Object.values(this.scan_overview)[0].scanner)},i=>{this.errorHandler.error(i)}))}getScanningPermission(){this.userPermissionService.hasProjectPermissions(this.projectId,[{resource:x._W.REPOSITORY_TAG_SCAN_JOB.KEY,action:x._W.REPOSITORY_TAG_SCAN_JOB.VALUE.CREATE}]).subscribe(r=>{this.hasScanningPermission=r[0]},r=>this.errorHandler.error(r))}getLevel(i){return i&&i.severity&&u.CQ[i.severity]?u.CQ[i.severity]:0}refresh(){this.getVulnerabilities()}scanNow(){this.onSendingScanCommand=!0,this.eventService.publish(S.n.START_SCAN_ARTIFACT,this.repoName+"/"+this.digest)}submitFinish(i){this.onSendingScanCommand=i}submitStopFinish(i){this.onSendingStopCommand=i}shouldShowBar(){return this.hasViewInitWithDelay&&this.resultBarChartComponent&&(this.resultBarChartComponent.queued||this.resultBarChartComponent.scanning||this.resultBarChartComponent.error||this.resultBarChartComponent.stopped)}hasScanned(){return this.hasViewInitWithDelay&&this.resultBarChartComponent&&!(this.resultBarChartComponent.completed||this.resultBarChartComponent.error||this.resultBarChartComponent.queued||this.resultBarChartComponent.stopped||this.resultBarChartComponent.scanning)}handleScanOverview(i){return i?Object.values(i)[0]:null}isSystemAdmin(){const i=this.session.getCurrentUser();return i&&i.has_admin_role}getCurrentCVEAllowList(){this.projectService.getProject(this.projectId).subscribe(i=>{i&&i.cve_allowlist&&i.metadata&&"false"===i.metadata.reuse_sys_cve_allowlist?this.currentCVEList=i.cve_allowlist.items:this.systemInfoService.getSystemAllowlist().subscribe(r=>{r&&r.items&&r.items.length&&(this.currentCVEList=r.items)})})}isInAllowList(i){if(this.currentCVEList&&this.currentCVEList.length)for(let r=0;r<this.currentCVEList.length;r++)if(i===this.currentCVEList[r].cve_id)return!0;return!1}getScannerInfo(i){if(i){if(i.name&&i.version)return`${i.name}@${i.version}`;if(i.name&&!i.version)return`${i.name}`}return""}isRunningState(){return this.hasViewInitWithDelay&&this.resultBarChartComponent&&(this.resultBarChartComponent.queued||this.resultBarChartComponent.scanning)}scanOrStop(){this.isRunningState()?this.stopNow():this.scanNow()}stopNow(){this.onSendingStopCommand=!0,this.eventService.publish(S.n.STOP_SCAN_ARTIFACT,this.repoName+"/"+this.digest)}canScan(){return this.hasEnabledScanner&&this.hasScanningPermission&&!this.onSendingScanCommand}load(i){i?.page?.size&&(0,u.Pe)(u.V2.ARTIFACT_VUL_COMPONENT,i.page.size)}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(D.q),e.Y36(Le),e.Y36(x.Hx),e.Y36(x.pg),e.Y36(S.P),e.Y36(Di.m),e.Y36(x.Y4),e.Y36(x.Ob))},t.\u0275cmp=e.Xpm({type:t,selectors:[["hbr-artifact-vulnerabilities"]],viewQuery:function(i,r){if(1&i&&e.Gf(et,5),2&i){let a;e.iGM(a=e.CRH())&&(r.resultBarChartComponent=a.first)}},inputs:{vulnerabilitiesLink:"vulnerabilitiesLink",projectName:"projectName",projectId:"projectId",repoName:"repoName",digest:"digest",artifact:"artifact",scanBtnState:"scanBtnState",hasEnabledScanner:"hasEnabledScanner"},decls:58,vars:56,consts:[[1,"row","result-row"],[1,"row","flex-items-xs-right","rightPos"],[1,"flex-xs-middle","option-right"],[1,"refresh-btn",3,"click"],["shape","refresh"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"clrDgLoading","clrDgRefresh"],[1,"clr-row","center"],[1,"ml-05"],["id","scan-btn","type","button",1,"btn","btn-secondary",3,"clrLoading","disabled","click"],["shape","shield-check","size","16",4,"ngIf"],["shape","stop","size","16",4,"ngIf"],[4,"ngIf"],[1,"ml-1"],[3,"hidden"],[3,"summary","inputScanner","projectName","repoName","artifactDigest","submitStopFinish","submitFinish"],[3,"clrDgField"],[3,"clrDgSortBy"],[4,"ngIf","ngIfElse"],["elseBlock",""],[4,"clrDgItems","clrDgItemsOf"],[1,"report"],[3,"clrDgPageSize","clrDgTotalItems"],["pagination",""],[3,"clrPageSizeOptions"],["shape","shield-check","size","16"],["shape","stop","size","16"],["rel","noopener noreferrer","target","_blank",3,"href",4,"ngIf"],[3,"ngSwitch"],["class","label label-critical no-border",4,"ngSwitchCase"],["class","label label-danger no-border",4,"ngSwitchCase"],["class","label label-medium no-border",4,"ngSwitchCase"],["class","label label-low no-border",4,"ngSwitchCase"],["class","label label-none no-border",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["class","clr-row mr-1",4,"ngFor","ngForOf"],[4,"clrIfExpanded"],["rel","noopener noreferrer","target","_blank",3,"href"],[4,"clrIfOpen"],["class","mt-5px",4,"ngFor","ngForOf"],[1,"mt-5px"],[1,"label","label-critical","no-border"],[1,"label","label-danger","no-border"],[1,"label","label-medium","no-border"],[1,"label","label-low","no-border"],[1,"label","label-none","no-border"],[1,"clr-row","mr-1"],[1,"clr-col"],["shape","wrench","size","20",1,"is-success"],[1,"font-color-green"]],template:function(i,r){if(1&i&&(e.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"div",2)(4,"span",3),e.NdJ("click",function(){return r.refresh()}),e._UZ(5,"clr-icon",4),e.qZA()()()(),e.TgZ(6,"div",5)(7,"clr-datagrid",6),e.NdJ("clrDgRefresh",function(s){return r.load(s)}),e.TgZ(8,"clr-dg-action-bar")(9,"div",7)(10,"div",8)(11,"button",9),e.NdJ("click",function(){return r.scanOrStop()}),e.YNc(12,jc,1,0,"clr-icon",10),e._uU(13,"\xa0 "),e.YNc(14,Jc,1,0,"clr-icon",11),e._uU(15,"\xa0 "),e.YNc(16,Qc,3,3,"span",12),e.YNc(17,Hc,3,3,"span",12),e.qZA()(),e.TgZ(18,"div",13)(19,"div",14)(20,"hbr-vulnerability-bar",15),e.NdJ("submitStopFinish",function(s){return r.submitStopFinish(s)})("submitFinish",function(s){return r.submitFinish(s)}),e.qZA()()()()(),e.TgZ(21,"clr-dg-column",16),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"clr-dg-column",17),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"clr-dg-column",17),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"clr-dg-column",16),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"clr-dg-column",16),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"clr-dg-column",16),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"clr-dg-column"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"clr-dg-placeholder"),e.YNc(43,Vc,3,3,"span",18),e.YNc(44,Gc,2,3,"ng-template",null,19,e.W1O),e.qZA(),e.YNc(46,pl,27,19,"clr-dg-row",20),e.TgZ(47,"clr-dg-footer")(48,"div",21),e.YNc(49,gl,3,6,"i",12),e.qZA(),e.TgZ(50,"clr-dg-pagination",22,23)(52,"clr-dg-page-size",24),e._uU(53),e.ALo(54,"translate"),e.qZA(),e.YNc(55,ml,3,5,"span",12),e._uU(56),e.ALo(57,"translate"),e.qZA()()()()()),2&i){const a=e.MAs(45);e.xp6(7),e.Q6J("clrDgLoading",r.loading),e.xp6(4),e.Q6J("clrLoading",r.scanBtnState)("disabled",!r.canScan()),e.xp6(1),e.Q6J("ngIf",!r.isRunningState()),e.xp6(2),e.Q6J("ngIf",r.isRunningState()),e.xp6(2),e.Q6J("ngIf",!r.isRunningState()),e.xp6(1),e.Q6J("ngIf",r.isRunningState()),e.xp6(2),e.Q6J("hidden",!r.shouldShowBar()),e.xp6(1),e.Q6J("summary",r.handleScanOverview(null==r.artifact?null:r.artifact.scan_overview))("inputScanner",r.scanner)("projectName",r.projectName)("repoName",r.repoName)("artifactDigest",r.digest),e.xp6(1),e.Q6J("clrDgField","id"),e.xp6(1),e.Oqu(e.lcZ(23,37,"VULNERABILITY.GRID.COLUMN_ID")),e.xp6(2),e.Q6J("clrDgSortBy",r.severitySort),e.xp6(1),e.Oqu(e.lcZ(26,39,"VULNERABILITY.GRID.COLUMN_SEVERITY")),e.xp6(2),e.Q6J("clrDgSortBy",r.cvssSort),e.xp6(1),e.Oqu(e.lcZ(29,41,"VULNERABILITY.GRID.CVSS3")),e.xp6(2),e.Q6J("clrDgField","package"),e.xp6(1),e.Oqu(e.lcZ(32,43,"VULNERABILITY.GRID.COLUMN_PACKAGE")),e.xp6(2),e.Q6J("clrDgField","version"),e.xp6(1),e.Oqu(e.lcZ(35,45,"VULNERABILITY.GRID.COLUMN_VERSION")),e.xp6(2),e.Q6J("clrDgField","fix_version"),e.xp6(1),e.Oqu(e.lcZ(38,47,"VULNERABILITY.GRID.COLUMN_FIXED")),e.xp6(3),e.Oqu(e.lcZ(41,49,"VULNERABILITY.GRID.IN_ALLOW_LIST")),e.xp6(3),e.Q6J("ngIf",r.hasScanned())("ngIfElse",a),e.xp6(3),e.Q6J("clrDgItemsOf",r.scanningResults),e.xp6(3),e.Q6J("ngIf",r.scanner),e.xp6(1),e.Q6J("clrDgPageSize",r.pageSize)("clrDgTotalItems",null==r.scanningResults?null:r.scanningResults.length),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(55,hl)),e.xp6(1),e.Oqu(e.lcZ(54,51,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",null==r.scanningResults?null:r.scanningResults.length),e.xp6(1),e.AsE(" ",null==r.scanningResults?null:r.scanningResults.length," ",e.lcZ(57,53,"VULNERABILITY.GRID.FOOT_ITEMS")," ")}},dependencies:[l.C9t,l.Gwl,l.fv_,l.m4W,l.dRQ,l.f6,l.YYR,l.Ltv,l.F7K,l.Z4N,l.O7r,l.Nz$,l.jND,l.KHL,l.PDs,l.Gcc,l.dml,l.Nh1,l.K8c,l.qvL,l.cCV,l.nqY,l.DbV,l.MPb,l.EuU,l.hQ,A.sg,A.O5,A.RF,A.n9,A.ED,et,v.X$,A.Nd],styles:[".result-row[_ngcontent-%COMP%]{position:relative}.rightPos[_ngcontent-%COMP%]{position:absolute;z-index:100;right:0;margin-top:1.25rem}.option-right[_ngcontent-%COMP%]{padding-right:16px;margin-top:5px}.center[_ngcontent-%COMP%]{align-items:center}.label-critical[_ngcontent-%COMP%]{background:#ff4d2e;color:#000}.label-danger[_ngcontent-%COMP%]{background:#ff8f3d!important;color:#000!important}.label-medium[_ngcontent-%COMP%]{background-color:#ffce66;color:#000}.label-low[_ngcontent-%COMP%]{background:#fff1ad;color:#000}.label-none[_ngcontent-%COMP%]{background-color:#2ec0ff;color:#000}.no-border[_ngcontent-%COMP%]{border:none}.ml-05[_ngcontent-%COMP%]{margin-left:.5rem}.report[_ngcontent-%COMP%]{text-align:left}.mt-5px[_ngcontent-%COMP%]{margin-top:5px}.label[_ngcontent-%COMP%]{min-width:3rem}"]}),o})();const fl=["additionsTab"];function _l(t,o){if(1&t&&e._UZ(0,"hbr-artifact-vulnerabilities",8),2&t){const n=e.oxw(4);e.Q6J("artifact",n.artifact)("projectName",n.projectName)("projectId",n.projectId)("repoName",n.repoName)("scanBtnState",n.getScanBtnState())("hasEnabledScanner",n.hasEnabledScanner())("digest",n.digest)("vulnerabilitiesLink",n.getVulnerability())}}function bl(t,o){if(1&t&&(e.TgZ(0,"clr-tab-content",6),e.YNc(1,_l,1,8,"hbr-artifact-vulnerabilities",7),e.qZA()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("ngIf","vulnerability"===n.currentTabLinkId)}}function Al(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-tab")(1,"button",4),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.actionTab("vulnerability"))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,bl,2,1,"ng-template",5),e.qZA()}if(2&t){const n=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"REPOSITORY.VULNERABILITY")," "),e.xp6(2),e.Q6J("clrIfActive","vulnerability"===n.currentTabLinkId)}}function Tl(t,o){if(1&t&&e._UZ(0,"hbr-artifact-sbom",12),2&t){const n=e.oxw(4);e.Q6J("artifact",n.artifact)("projectName",n.projectName)("projectId",n.projectId)("hasScannerSupportSBOM",n.hasScannerSupportSBOM())("repoName",n.repoName)("sbomDigest",n.sbomDigest)}}function Cl(t,o){if(1&t&&(e.TgZ(0,"clr-tab-content",10),e.YNc(1,Tl,1,6,"hbr-artifact-sbom",11),e.qZA()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("ngIf","sbom"===n.currentTabLinkId)}}function xl(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-tab")(1,"button",9),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.actionTab("sbom"))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Cl,2,1,"ng-template",5),e.qZA()}if(2&t){const n=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"REPOSITORY.SBOM")," "),e.xp6(2),e.Q6J("clrIfActive","sbom"===n.currentTabLinkId)}}function vl(t,o){if(1&t&&e._UZ(0,"hbr-artifact-build-history",15),2&t){const n=e.oxw(4);e.Q6J("buildHistoryLink",n.getBuildHistory())}}function Sl(t,o){if(1&t&&(e.TgZ(0,"clr-tab-content"),e.YNc(1,vl,1,1,"hbr-artifact-build-history",14),e.qZA()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("ngIf","build-history"===n.currentTabLinkId)}}function Il(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-tab")(1,"button",13),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.actionTab("build-history"))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Sl,2,1,"ng-template",5),e.qZA()}if(2&t){const n=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"REPOSITORY.BUILD_HISTORY")," "),e.xp6(2),e.Q6J("clrIfActive","build-history"===n.currentTabLinkId)}}function yl(t,o){if(1&t&&e._UZ(0,"hbr-artifact-summary",19),2&t){const n=e.oxw(4);e.Q6J("summaryLink",n.getSummary())}}function Ol(t,o){if(1&t&&(e.TgZ(0,"clr-tab-content",17),e.YNc(1,yl,1,1,"hbr-artifact-summary",18),e.qZA()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("ngIf","summary-link"===n.currentTabLinkId)}}function wl(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-tab")(1,"button",16),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.actionTab("summary-link"))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Ol,2,1,"ng-template",5),e.qZA()}if(2&t){const n=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"ARTIFACT.SUMMARY")," "),e.xp6(2),e.Q6J("clrIfActive","summary-link"===n.currentTabLinkId)}}function Nl(t,o){if(1&t&&e._UZ(0,"hbr-artifact-dependencies",23),2&t){const n=e.oxw(4);e.Q6J("dependenciesLink",n.getDependencies())}}function Ll(t,o){if(1&t&&(e.TgZ(0,"clr-tab-content",21),e.YNc(1,Nl,1,1,"hbr-artifact-dependencies",22),e.qZA()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("ngIf","depend-link"===n.currentTabLinkId)}}function Zl(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-tab")(1,"button",20),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.actionTab("depend-link"))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Ll,2,1,"ng-template",5),e.qZA()}if(2&t){const n=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"ARTIFACT.DEPENDENCIES")," "),e.xp6(2),e.Q6J("clrIfActive","depend-link"===n.currentTabLinkId)}}function El(t,o){if(1&t&&e._UZ(0,"hbr-artifact-values",27),2&t){const n=e.oxw(4);e.Q6J("valuesLink",n.getValues())}}function Pl(t,o){if(1&t&&(e.TgZ(0,"clr-tab-content",25),e.YNc(1,El,1,1,"hbr-artifact-values",26),e.qZA()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("ngIf","value-link"===n.currentTabLinkId)}}function Rl(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"clr-tab")(1,"button",24),e.NdJ("click",function(){e.CHM(n);const r=e.oxw(2);return e.KtG(r.actionTab("value-link"))}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,Pl,2,1,"ng-template",5),e.qZA()}if(2&t){const n=e.oxw(2);e.xp6(2),e.hij(" ",e.lcZ(3,2,"ARTIFACT.VALUES")," "),e.xp6(2),e.Q6J("clrIfActive","value-link"===n.currentTabLinkId)}}function Ml(t,o){if(1&t&&(e.ynx(0),e.TgZ(1,"h4",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"clr-tabs",null,3),e.YNc(7,Al,5,4,"clr-tab",0),e.YNc(8,xl,5,4,"clr-tab",0),e.YNc(9,Il,5,4,"clr-tab",0),e.YNc(10,wl,5,4,"clr-tab",0),e.YNc(11,Zl,5,4,"clr-tab",0),e.YNc(12,Rl,5,4,"clr-tab",0),e.qZA()(),e.BQk()),2&t){const n=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,7,"ARTIFACT.ADDITIONS")),e.xp6(5),e.Q6J("ngIf",n.getVulnerability()),e.xp6(1),e.Q6J("ngIf",n.hasScannerSupportSBOM()),e.xp6(1),e.Q6J("ngIf",n.getBuildHistory()),e.xp6(1),e.Q6J("ngIf",n.getSummary()),e.xp6(1),e.Q6J("ngIf",n.getDependencies()),e.xp6(1),e.Q6J("ngIf",n.getValues())}}let Dl=(()=>{var t;class o{constructor(i,r){this.ref=i,this.artifactListPageService=r,this.currentTabLinkId="",this.activeTab=null}ngOnInit(){this.activeTab=this.tab,this.activeTab||(this.currentTabLinkId="vulnerability"),this.artifactListPageService.init(this.projectId)}ngAfterViewChecked(){this.activeTab&&(this.currentTabLinkId=this.activeTab,this.activeTab=null),this.ref.detectChanges()}hasScannerSupportSBOM(){return!(!this.additionLinks||!this.additionLinks[F.SBOMS])}getVulnerability(){return this.additionLinks&&this.additionLinks[F.VULNERABILITIES]?this.additionLinks[F.VULNERABILITIES]:null}getBuildHistory(){return this.additionLinks&&this.additionLinks[F.BUILD_HISTORY]?this.additionLinks[F.BUILD_HISTORY]:null}getSummary(){return this.additionLinks&&this.additionLinks[F.SUMMARY]?this.additionLinks[F.SUMMARY]:null}getDependencies(){return this.additionLinks&&this.additionLinks[F.DEPENDENCIES]?this.additionLinks[F.DEPENDENCIES]:null}getValues(){return this.additionLinks&&this.additionLinks[F.VALUES]?this.additionLinks[F.VALUES]:null}actionTab(i){this.currentTabLinkId=i}getScanBtnState(){return this.artifactListPageService.getScanBtnState()}hasEnabledScanner(){return this.artifactListPageService.hasEnabledScanner()}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(e.sBO),e.Y36(ae))},t.\u0275cmp=e.Xpm({type:t,selectors:[["artifact-additions"]],viewQuery:function(i,r){if(1&i&&e.Gf(fl,5),2&i){let a;e.iGM(a=e.CRH())&&(r.tabs=a.first)}},inputs:{artifact:"artifact",additionLinks:"additionLinks",projectName:"projectName",projectId:"projectId",repoName:"repoName",digest:"digest",sbomDigest:"sbomDigest",tab:"tab",currentTabLinkId:"currentTabLinkId"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"margin-bottom-025"],[1,"min-15"],["additionsTab",""],["clrTabLink","","id","vulnerability",3,"click"],[3,"clrIfActive"],["id","vulnerability-content"],[3,"artifact","projectName","projectId","repoName","scanBtnState","hasEnabledScanner","digest","vulnerabilitiesLink",4,"ngIf"],[3,"artifact","projectName","projectId","repoName","scanBtnState","hasEnabledScanner","digest","vulnerabilitiesLink"],["clrTabLink","","id","sbom",3,"click"],["id","sbom-content"],[3,"artifact","projectName","projectId","hasScannerSupportSBOM","repoName","sbomDigest",4,"ngIf"],[3,"artifact","projectName","projectId","hasScannerSupportSBOM","repoName","sbomDigest"],["clrTabLink","","id","build-history",3,"click"],[3,"buildHistoryLink",4,"ngIf"],[3,"buildHistoryLink"],["clrTabLink","","id","summary-link",3,"click"],["id","summary-content"],[3,"summaryLink",4,"ngIf"],[3,"summaryLink"],["clrTabLink","","id","depend-link",3,"click"],["id","depend-content"],[3,"dependenciesLink",4,"ngIf"],[3,"dependenciesLink"],["clrTabLink","","id","value-link",3,"click"],["id","value-content"],[3,"valuesLink",4,"ngIf"],[3,"valuesLink"]],template:function(i,r){1&i&&e.YNc(0,Ml,13,9,"ng-container",0),2&i&&e.Q6J("ngIf",r.additionLinks)},dependencies:[l.tam,l.UkA,l.S4y,l.gKI,l.Iq$,l.dl,l.Qs7,A.O5,xc,Oc,Nc,Zc,Bc,dl,v.X$],styles:[".margin-bottom-025[_ngcontent-%COMP%]{margin-bottom:.25rem}.min-15[_ngcontent-%COMP%]{min-height:15rem}"]}),o})();function kl(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"span",3),e._uU(1," <"),e.TgZ(2,"a",4),e.NdJ("click",function(){const a=e.CHM(n).index,s=e.oxw();return e.KtG(s.jumpDigest(a))}),e._uU(3),e.ALo(4,"slice"),e.qZA()()}if(2&t){const n=o.$implicit;e.xp6(3),e.Oqu(e.Dn7(4,1,n,0,15))}}function Ul(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"img",16),e.NdJ("error",function(r){e.CHM(n);const a=e.oxw(2);return e.KtG(a.showDefaultIcon(r))}),e.qZA()}if(2&t){const n=e.oxw(2);e.Q6J("title",n.artifact.type)("src",n.getIcon(n.artifact.icon),e.LSH)}}function Fl(t,o){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,Ul,1,2,"img",15),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.getIcon(n.artifact.icon))}}function ql(t,o){1&t&&e._UZ(0,"clr-icon",17)}function Yl(t,o){if(1&t&&(e.ynx(0),e._UZ(1,"artifact-tag",18)(2,"artifact-common-properties",19)(3,"artifact-additions",20),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("artifactDetails",n.artifact)("projectName",n.projectName)("isProxyCacheProject",n.isProxyCacheProject)("projectId",n.projectId)("repositoryName",n.repositoryName),e.xp6(1),e.Q6J("artifactDetails",n.artifact),e.xp6(1),e.Q6J("artifact",n.artifact)("projectName",n.projectName)("projectId",n.projectId)("repoName",n.repositoryName)("digest",n.artifactDigest)("sbomDigest",n.sbomDigest)("tab",n.activeTab)("additionLinks",null==n.artifact?null:n.artifact.addition_links)}}function Bl(t,o){1&t&&(e.TgZ(0,"div",21),e._UZ(1,"span",22),e.qZA())}let ki=(()=>{var t;class o{constructor(i,r,a,s){this.route=i,this.router=r,this.frontEndArtifactService=a,this.event=s,this.referArtifactNameArray=[],this.backEvt=new e.vpe,this.isProxyCacheProject=!1,this.loading=!1}goBack(){this.router.navigate(["harbor","projects",this.projectId,"repositories",this.repositoryName])}goBackRep(){this.router.navigate(["harbor","projects",this.projectId,"repositories"])}goBackPro(){this.router.navigate(["harbor","projects"])}jumpDigest(i){const r=this.referArtifactNameArray.slice(0,i+1);this.router.navigate(r&&r.length?["harbor","projects",this.projectId,"repositories",this.repositoryName,"artifacts-tab","depth",r.join("-")]:["harbor","projects",this.projectId,"repositories",this.repositoryName])}ngOnInit(){let i=this.route.snapshot.params.depth;if(i&&(this.referArtifactNameArray=i.split("-")),this.repositoryName=this.route.snapshot.params.repo,this.artifactDigest=this.route.snapshot.params.digest,this.projectId=this.route.snapshot.parent.params.id,this.sbomDigest=this.route.snapshot.queryParams.sbomDigest,this.activeTab=this.route.snapshot.queryParams.tab,this.repositoryName&&this.artifactDigest){const r=this.route.snapshot.data;if(r){const a=r.artifactResolver[1];this.projectName=a.name,a.registry_id&&(this.isProxyCacheProject=!0),this.artifact=r.artifactResolver[0],this.getIconFromBackEnd()}}this.event.publish(S.n.SCROLL_TO_POSITION,0)}onBack(){this.backEvt.emit(this.repositoryName)}showDefaultIcon(i){i&&i.target&&(i.target.src=Qe)}getIcon(i){return this.frontEndArtifactService.getIcon(i)}getIconFromBackEnd(){this.artifact&&this.artifact.icon&&this.frontEndArtifactService.getIconsFromBackEnd([this.artifact])}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(N.gz),e.Y36(N.F0),e.Y36(be),e.Y36(S.P))},t.\u0275cmp=e.Xpm({type:t,selectors:[["artifact-summary"]],outputs:{backEvt:"backEvt"},features:[e._Bn([])],decls:25,vars:15,consts:[[1,"arrow-block"],[1,"back-icon","margin-right-5px"],[1,"pl-0",3,"click"],[1,"back-icon"],[3,"click"],["class","back-icon",4,"ngFor","ngForOf"],[1,"title-wrapper"],[1,"title-block"],[1,"custom-h2","center-align-items"],["class","artifact-icon clr-display-inline-block",4,"ngIf"],[1,"margin-left-10px"],["size","25","class","icon-folder margin-left-10px","shape","folder",4,"ngIf"],[4,"ngIf"],["class","clr-row mt-3 center",4,"ngIf"],[1,"artifact-icon","clr-display-inline-block"],["class","artifact-icon",3,"title","src","error",4,"ngIf"],[1,"artifact-icon",3,"title","src","error"],["size","25","shape","folder",1,"icon-folder","margin-left-10px"],[3,"artifactDetails","projectName","isProxyCacheProject","projectId","repositoryName"],[3,"artifactDetails"],[3,"artifact","projectName","projectId","repoName","digest","sbomDigest","tab","additionLinks"],[1,"clr-row","mt-3","center"],[1,"spinner","spinner-md"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"span",1),e._uU(2,"<"),e.qZA(),e.TgZ(3,"a",2),e.NdJ("click",function(){return r.goBackPro()}),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"span",3),e._uU(7,"<"),e.qZA(),e.TgZ(8,"a",4),e.NdJ("click",function(){return r.goBackRep()}),e._uU(9),e.qZA(),e.TgZ(10,"span",3),e._uU(11,"<"),e.qZA(),e.TgZ(12,"a",4),e.NdJ("click",function(){return r.goBack()}),e._uU(13),e.qZA(),e.YNc(14,kl,5,5,"span",5),e.qZA(),e.TgZ(15,"div",6)(16,"div",7)(17,"h2",8),e.YNc(18,Fl,2,1,"div",9),e.TgZ(19,"span",10),e._uU(20),e.ALo(21,"slice"),e.qZA(),e.YNc(22,ql,1,0,"clr-icon",11),e.qZA()()(),e.YNc(23,Yl,4,14,"ng-container",12),e.YNc(24,Bl,2,0,"div",13)),2&i&&(e.xp6(4),e.Oqu(e.lcZ(5,9,"SIDE_NAV.PROJECTS")),e.xp6(5),e.Oqu(r.projectName),e.xp6(4),e.Oqu(r.repositoryName),e.xp6(1),e.Q6J("ngForOf",r.referArtifactNameArray),e.xp6(4),e.Q6J("ngIf",r.artifact.icon),e.xp6(2),e.Oqu(e.Dn7(21,11,null==r.artifact?null:r.artifact.digest,0,15)),e.xp6(2),e.Q6J("ngIf",(null==r.artifact?null:r.artifact.references)&&(null==r.artifact||null==r.artifact.references?null:r.artifact.references.length)),e.xp6(1),e.Q6J("ngIf",!r.loading),e.xp6(1),e.Q6J("ngIf",r.loading))},dependencies:[l.qvL,A.sg,A.O5,Ho,zo,Dl,v.X$,A.OU],styles:[".arrow-block[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;color:#007cbb;font-size:16px;padding:5px;border-radius:2px;margin-right:5px}.back-icon[_ngcontent-%COMP%]{color:#007cbb;font-size:16px}.margin-top-5px[_ngcontent-%COMP%]{margin-top:5px}.center[_ngcontent-%COMP%]{justify-content:center;align-items:center}.center-align-items[_ngcontent-%COMP%]{display:flex;align-items:center}.artifact-icon[_ngcontent-%COMP%]{width:25px}.margin-left-10px[_ngcontent-%COMP%]{margin-left:10px}.margin-right-5px[_ngcontent-%COMP%]{margin-right:5px}"]}),o})();var jl=_(1631);let Ui=(()=>{var t;class o{constructor(i,r,a){this.projectService=i,this.artifactService=r,this.router=a}resolve(i,r){const s=i.params.repo,c=i.params.digest;return this.projectService.getProjectFromCache(i.params.id).pipe((0,jl.z)(p=>(0,te.D)([this.artifactService.getArtifact({repositoryName:(0,u.gI)(s),reference:c,projectName:p.name,withLabel:!0,withScanOverview:!0,withSbomOverview:!0,withTag:!1,withImmutableStatus:!0}),(0,je.of)(p)])),(0,Je.K)(p=>(this.router.navigate(["/harbor","projects"]),null)))}}return(t=o).\u0275fac=function(i){return new(i||t)(e.LFG(x.Y4),e.LFG(ie.b),e.LFG(N.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),o})();var Jl=_(6637);const Ql=["confirmationDialog"];function Hl(t,o){1&t&&(e.TgZ(0,"div",14),e._UZ(1,"span",15),e.qZA())}function Vl(t,o){1&t&&(e.TgZ(0,"div",18)(1,"p"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e._UZ(4,"p"),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"REPOSITORY.NO_INFO")))}function Gl(t,o){if(1&t&&(e.TgZ(0,"div",19),e._UZ(1,"div",20),e.ALo(2,"markdown"),e.qZA()),2&t){const n=e.oxw(3);e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,1,n.imageInfo),e.oJD)}}function zl(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Vl,5,3,"div",16),e.YNc(2,Gl,3,3,"div",17),e.BQk()),2&t){const n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!n.imageInfo),e.xp6(1),e.Q6J("ngIf",n.imageInfo)}}function $l(t,o){if(1&t&&(e.TgZ(0,"div",12),e.YNc(1,Hl,2,0,"div",13),e.YNc(2,zl,3,2,"ng-container",8),e.qZA()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.loading),e.xp6(1),e.Q6J("ngIf",!n.loading)}}function Kl(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div")(1,"textarea",21),e.NdJ("ngModelChange",function(r){e.CHM(n);const a=e.oxw();return e.KtG(a.imageInfo=r)}),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("ngModel",n.imageInfo)}}function Wl(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.saveInfo())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",24),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.cancelInfo())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&t){const n=e.oxw();e.xp6(1),e.Q6J("disabled",!n.hasChanges()),e.xp6(1),e.hij(" ",e.lcZ(3,3,"BUTTON.SAVE")," "),e.xp6(3),e.hij(" ",e.lcZ(6,5,"BUTTON.CANCEL")," ")}}const Xl=[{path:":repo",component:ft,children:[{path:"info-tab",component:(()=>{var t;class o{constructor(i,r,a,s,c){this.errorHandler=i,this.repositoryService=r,this.translate=a,this.activatedRoute=s,this.permissionService=c,this.hasEditPermission=!1,this.onSaving=!1,this.loading=!1,this.editing=!1}ngOnInit(){this.repoName=this.activatedRoute.snapshot?.parent?.params.repo;let i=this.activatedRoute.snapshot?.parent?.parent?.data;i&&(this.projectName=i.projectResolver.name,this.projectId=i.projectResolver.project_id),this.checkPermission(),this.retrieve()}checkPermission(){this.permissionService.getPermission(this.projectId,x._W.REPOSITORY.KEY,x._W.REPOSITORY.VALUE.UPDATE).subscribe(i=>{this.hasEditPermission=i})}retrieve(){let i={projectName:this.projectName,repositoryName:(0,u.gI)(this.repoName)};this.loading=!0,this.repositoryService.getRepository(i).pipe((0,w.x)(()=>this.loading=!1)).subscribe(r=>{this.orgImageInfo=r.description,this.imageInfo=r.description},r=>this.errorHandler.error(r))}refresh(){this.retrieve()}hasChanges(){return this.imageInfo!==this.orgImageInfo}reset(){this.imageInfo=this.orgImageInfo}editInfo(){this.editing=!0}saveInfo(){if(!this.hasChanges())return;this.onSaving=!0;let i={repositoryName:(0,u.gI)(this.repoName),repository:{description:this.imageInfo},projectName:this.projectName};this.repositoryService.updateRepository(i).subscribe(()=>{this.onSaving=!1,this.translate.get("CONFIG.SAVE_SUCCESS").subscribe(r=>{this.errorHandler.info(r)}),this.editing=!1,this.refresh()},r=>{this.onSaving=!1,this.errorHandler.error(r)})}cancelInfo(){let i=new Pe.c("CONFIG.CONFIRM_TITLE","CONFIG.CONFIRM_SUMMARY","",{},10);this.confirmationDlg.open(i)}confirmCancel(i){this.editing=!1,i&&10===i.source&&1===i.state&&this.reset()}}return(t=o).\u0275fac=function(i){return new(i||t)(e.Y36(D.q),e.Y36(Jl.b),e.Y36(v.sK),e.Y36(N.gz),e.Y36(x.Hx))},t.\u0275cmp=e.Xpm({type:t,selectors:[["artifact-info"]],viewQuery:function(i,r){if(1&i&&e.Gf(Ql,5),2&i){let a;e.iGM(a=e.CRH())&&(r.confirmationDlg=a.first)}},decls:18,vars:10,consts:[["id","info","role","tabpanel","aria-labelledby","repo-info"],["repoInfoForm","ngForm"],["id","info-edit-button"],[1,"btn",3,"disabled","click"],["shape","pencil","size","16"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 640 1024","preserveAspectRatio","xMinYMin",1,"markdown"],["d","M950.154 192H73.846C33.127 192 0 225.12699999999995 0 265.846v492.308C0 798.875 33.127 832 73.846 832h876.308c40.721 0 73.846-33.125 73.846-73.846V265.846C1024 225.12699999999995 990.875 192 950.154 192zM576 703.875L448 704V512l-96 123.077L256 512v192H128V320h128l96 128 96-128 128-0.125V703.875zM767.091 735.875L608 512h96V320h128v192h96L767.091 735.875z"],["id","no-editing",4,"ngIf"],[4,"ngIf"],["class","",4,"ngIf"],[3,"confirmAction"],["confirmationDialog",""],["id","no-editing"],["class","loading",4,"ngIf"],[1,"loading"],[1,"spinner","spinner-inline"],["class","no-info-div",4,"ngIf"],["class","info-div",4,"ngIf"],[1,"no-info-div"],[1,"info-div"],[1,"info-pre",3,"innerHTML"],["id","info-edit-textarea","rows","5","name","info-edit-textarea",1,"clr-textarea","w-100",3,"ngModel","ngModelChange"],[1,""],["id","edit-save",1,"btn","btn-primary",3,"disabled","click"],["id","edit-cancel",1,"btn",3,"click"]],template:function(i,r){1&i&&(e.TgZ(0,"section",0)(1,"form",null,1)(3,"div",2)(4,"button",3),e.NdJ("click",function(){return r.editInfo()}),e._UZ(5,"clr-icon",4),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.O4$(),e.TgZ(8,"svg",5),e._UZ(9,"path",6),e.qZA(),e.kcU(),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.YNc(13,$l,3,2,"div",7),e.YNc(14,Kl,2,1,"div",8),e.YNc(15,Wl,7,7,"div",9),e.TgZ(16,"confirmation-dialog",10,11),e.NdJ("confirmAction",function(s){return r.confirmCancel(s)}),e.qZA()()()),2&i&&(e.xp6(4),e.Q6J("disabled",r.editing||!r.hasEditPermission||r.onSaving),e.xp6(2),e.hij("\xa0",e.lcZ(7,6,"BUTTON.EDIT")," "),e.xp6(5),e.Oqu(e.lcZ(12,8,"REPOSITORY.MARKDOWN")),e.xp6(2),e.Q6J("ngIf",!r.editing),e.xp6(1),e.Q6J("ngIf",r.editing),e.xp6(1),e.Q6J("ngIf",r.editing))},dependencies:[T._Y,T.Fj,T.JJ,T.JL,T.On,T.F,l.qvL,A.O5,We.z,v.X$,Be.NO],styles:[".no-info-div[_ngcontent-%COMP%]{background:white;border:1px;border-style:solid;border-color:#ccc;padding:12px}.info-div[_ngcontent-%COMP%]{border:1px;border-style:solid;border-color:#ccc;padding:0 12px 24px}.loading[_ngcontent-%COMP%]{height:3rem;border:1px;border-style:solid;border-color:#ccc;display:flex;align-items:center;justify-content:center}.info-pre[_ngcontent-%COMP%]{border:0;max-height:-moz-fit-content;max-height:fit-content}#info-edit-button[_ngcontent-%COMP%]{margin-top:0;margin-bottom:12px;font-size:12px}#info-edit-button[_ngcontent-%COMP%]   .markdown[_ngcontent-%COMP%]{position:relative;width:20px;height:20px;margin-right:10px;margin-left:10px;top:6px;fill:gray}"]}),o})()},{path:"artifacts-tab",component:Lt},{path:"",redirectTo:"artifacts-tab",pathMatch:"full"}]},{path:":repo",component:ft,children:[{path:"artifacts-tab/depth/:depth",component:Lt}]},{path:":repo/artifacts-tab/artifacts/:digest",component:ki,resolve:{artifactResolver:Ui}},{path:":repo/artifacts-tab/depth/:depth/artifacts/:digest",component:ki,resolve:{artifactResolver:Ui}}];let ep=(()=>{var t;class o{}return(t=o).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[ae,{provide:be,useClass:$i}],imports:[N.Bz.forChild(Xl),C.m]}),o})()},8383:(Fi,Ze,_)=>{_.d(Ze,{q:()=>v});var N=_(27),C=_(5879),e=_(6814),l=_(8280);function x(U,$){1&U&&C._UZ(0,"clr-icon",5)}function D(U,$){1&U&&C._UZ(0,"clr-icon",6)}function ae(U,$){if(1&U&&(C.TgZ(0,"clr-tooltip-content",7)(1,"span"),C._uU(2),C.qZA()()),2&U){const W=C.oxw();C.Q6J("clrPosition","right"),C.xp6(2),C.Oqu(W.label.description)}}const A=function(U,$,W){return{"background-color":U,color:$,border:W}};let v=(()=>{var U;class ${constructor(){this.hasIcon=!0,this.withTooltip=!1}ngOnChanges(){if(this.label){let V=this.label.color;V||(V="#FFFFFF"),this.labelColor=N.oW.find(E=>E.color===V)}}}return(U=$).\u0275fac=function(V){return new(V||U)},U.\u0275cmp=C.Xpm({type:U,selectors:[["hbr-label-piece"]],inputs:{label:"label",labelWidth:"labelWidth",hasIcon:"hasIcon",withTooltip:"withTooltip"},features:[C.TTD],decls:8,vars:12,consts:[["clrTooltipTrigger","",1,"label",3,"title","ngStyle"],["shape","organization",4,"ngIf"],["shape","administrator",4,"ngIf"],[1,"label-name"],[3,"clrPosition",4,"ngIf"],["shape","organization"],["shape","administrator"],[3,"clrPosition"]],template:function(V,E){1&V&&(C.TgZ(0,"clr-tooltip")(1,"label",0)(2,"span"),C.YNc(3,x,1,0,"clr-icon",1),C.YNc(4,D,1,0,"clr-icon",2),C.qZA(),C.TgZ(5,"span",3),C._uU(6),C.qZA()(),C.YNc(7,ae,3,2,"clr-tooltip-content",4),C.qZA()),2&V&&(C.xp6(1),C.Udp("max-width",E.labelWidth,"px"),C.s9C("title",E.label.name),C.Q6J("ngStyle",C.kEZ(8,A,null==E.labelColor?null:E.labelColor.color,null==E.labelColor?null:E.labelColor.textColor,"#FFFFFF"===(null==E.labelColor?null:E.labelColor.color)?"1px solid #A1A1A1":"none")),C.xp6(2),C.Q6J("ngIf",E.hasIcon&&"p"===E.label.scope),C.xp6(1),C.Q6J("ngIf",E.hasIcon&&"g"===E.label.scope),C.xp6(2),C.Oqu(E.label.name),C.xp6(1),C.Q6J("ngIf",E.withTooltip&&E.label.description))},dependencies:[e.O5,e.PC,l.qvL,l.MgK,l.Jmj,l.bMv,l.zDF],styles:[".label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:inherit}.label[_ngcontent-%COMP%]   clr-icon[_ngcontent-%COMP%]{margin-right:3px;margin-top:3px}.label-name[_ngcontent-%COMP%]{min-width:0;overflow:hidden;text-overflow:ellipsis}"]}),$})()}}]);