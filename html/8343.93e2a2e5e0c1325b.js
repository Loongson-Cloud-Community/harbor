"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[8343],{8343:(Ge,M,a)=>{a.r(M),a.d(M,{WebhookModule:()=>Ye});var f=a(2787),D=a(4554),m=a(4716),e=a(5879),R=a(3620),J=a(3997),F=a(2181),H=a(4664);const I={REPLICATION:"Replication status changed",PUSH_ARTIFACT:"Artifact pushed",PULL_ARTIFACT:"Artifact pulled",DELETE_ARTIFACT:"Artifact deleted",DOWNLOAD_CHART:"Chart downloaded",UPLOAD_CHART:"Chart uploaded",DELETE_CHART:"Chart deleted",QUOTA_EXCEED:"Quota exceed",QUOTA_WARNING:"Quota near threshold",SCANNING_FAILED:"Scanning failed",SCANNING_STOPPED:"Scanning stopped",SCANNING_COMPLETED:"Scanning finished",TAG_RETENTION:"Tag retention finished"},x=["Default","CloudEvents"],T={[x[0]]:"SCANNER.DEFAULT",[x[1]]:"WEBHOOK.CLOUD_EVENT"};var P=function(o){return o.HTTP="http",o.SLACK="slack",o}(P||{}),y=function(o){return o.WEBHOOK="WEBHOOK",o.SLACK="SLACK",o}(y||{});let C=(()=>{var o;class l{constructor(){}eventTypeToText(t){return I[t]?I[t]:t}}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),l})();var p=a(1691),N=a(208),Q=a(8645),k=a(6379),u=a(6223),r=a(8280),_=a(6814),O=a(9515);const j=["webhookForm"];function K(o,l){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SCANNER.NAME_EXISTS")))}function B(o,l){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"WEBHOOK.NAME_REQUIRED")))}function Y(o,l){if(1&o&&(e.TgZ(0,"clr-control-error",35),e.YNc(1,K,3,3,"span",23),e.YNc(2,B,3,3,"span",23),e.qZA()),2&o){const i=e.oxw(),t=e.MAs(12);e.xp6(1),e.Q6J("ngIf",!(t.errors&&t.errors.required&&(t.dirty||t.touched))&&i.isNameExisting),e.xp6(1),e.Q6J("ngIf",t.errors&&t.errors.required&&(t.dirty||t.touched))}}function z(o,l){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.qZA()),2&o){const i=l.$implicit;e.s9C("value",i),e.xp6(1),e.hij(" ",i," ")}}function G(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WEBHOOK.SLACK_RATE_LIMIT")," "))}function $(o,l){if(1&o&&(e.TgZ(0,"option",36),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const i=l.$implicit,t=e.oxw(2);e.s9C("value",i),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.getI18nKey(i))," ")}}function V(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"clr-select-container")(1,"label"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"select",38),e.NdJ("ngModelChange",function(n){e.CHM(i);const s=e.oxw();return e.KtG(s.webhook.targets[0].payload_format=n)}),e.YNc(5,$,3,4,"option",19),e.qZA()()}if(2&o){const i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,4,"WEBHOOK.PAYLOAD_FORMAT")),e.xp6(2),e.Q6J("ngModel",i.webhook.targets[0].payload_format)("disabled",i.checking),e.xp6(1),e.Q6J("ngForOf",i.getPayLoadFormats())}}function X(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"div",39)(1,"input",40),e.NdJ("change",function(){const s=e.CHM(i).$implicit,c=e.oxw();return e.KtG(c.setEventType(s))}),e.qZA(),e.TgZ(2,"label",41),e._uU(3),e.qZA()()}if(2&o){const i=l.$implicit,t=e.oxw();e.xp6(1),e.s9C("id",i),e.s9C("value",i),e.Q6J("checked",t.getEventType(i)),e.xp6(1),e.s9C("for",i),e.xp6(1),e.Oqu(t.eventTypeToText(i))}}function ee(o,l){1&o&&(e.TgZ(0,"div",42),e._UZ(1,"clr-icon",11),e.TgZ(2,"span",43),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.EVENT_TYPE_REQUIRED")))}function te(o,l){1&o&&(e.TgZ(0,"clr-control-error",35),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WEBHOOK.URL_IS_REQUIRED")," "))}function ne(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"div",5)(1,"label",44),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",7)(5,"div",8)(6,"input",45),e.NdJ("ngModelChange",function(n){e.CHM(i);const s=e.oxw();return e.KtG(s.webhook.targets[0].auth_header=n)}),e.qZA()()()()}if(2&o){const i=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"WEBHOOK.AUTH_HEADER")),e.xp6(4),e.Q6J("disabled",i.checking)("ngModel",i.webhook.targets[0].auth_header)}}function oe(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",37),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WEBHOOK.VERIFY_REMOTE_CERT_TOOLTIP")," "))}function ie(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"div",46)(1,"button",47),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.onCancel())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",48),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.add())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&o){const i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!i.isValid||i.checkNameOnGoing||i.isNameExisting),e.xp6(1),e.hij(" ",e.lcZ(6,5,"BUTTON.ADD")," ")}}function re(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"div",46)(1,"button",49),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.onCancel())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",50),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.save())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&o){const i=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!i.isValid||!i.hasChange()||i.checkNameOnGoing||i.isNameExisting),e.xp6(1),e.hij(" ",e.lcZ(6,5,"BUTTON.SAVE")," ")}}let v=(()=>{var o;class l{constructor(t,n){this.webhookService=t,this.projectWebhookService=n,this.closable=!0,this.checking=!1,this.submitting=!1,this.webhook={enabled:!0,event_types:[],targets:[{type:"http",address:"",skip_cert_verify:!0,payload_format:x[0]}]},this.close=new e.vpe,this.notify=new e.vpe,this.checkNameOnGoing=!1,this.isNameExisting=!1,this._nameSubject=new Q.x}ngOnInit(){this.subscribeName()}ngOnDestroy(){this._nameSubscription&&(this._nameSubscription.unsubscribe(),this._nameSubscription=null)}reset(){this.isNameExisting=!1,this._nameSubject.next("")}subscribeName(){this._nameSubscription||(this._nameSubscription=this._nameSubject.pipe((0,R.b)(500),(0,J.x)(),(0,F.h)(t=>(!this.isModify||!this.originValue||this.originValue.name!==t)&&t?.length>0),(0,H.w)(t=>(this.isNameExisting=!1,this.checkNameOnGoing=!0,this.webhookService.ListWebhookPoliciesOfProject({projectNameOrId:this.projectId.toString(),q:encodeURIComponent(`name=${t}`)}).pipe((0,m.x)(()=>this.checkNameOnGoing=!1))))).subscribe(t=>{t&&t.length>0&&(this.isNameExisting=!0)}))}inputName(){this._nameSubject.next(this.webhook.name)}onCancel(){this.reset(),this.close.emit(!1),this.currentForm.reset(),this.inlineAlert.close()}add(){this.submitting=!0,this.webhook?.targets[0]?.type===P.SLACK&&delete this.webhook?.targets[0]?.payload_format,this.webhookService.CreateWebhookPolicyOfProject({projectNameOrId:this.projectId.toString(),policy:this.webhook}).pipe((0,m.x)(()=>this.submitting=!1)).subscribe(t=>{this.reset(),this.notify.emit(),this.inlineAlert.close()},t=>{this.inlineAlert.showInlineError(t)})}save(){this.submitting=!0,this.webhook?.targets[0]?.type===P.SLACK&&delete this.webhook?.targets[0]?.payload_format,this.webhookService.UpdateWebhookPolicyOfProject({projectNameOrId:this.projectId.toString(),webhookPolicyId:this.webhook.id,policy:this.webhook}).pipe((0,m.x)(()=>this.submitting=!1)).subscribe(t=>{this.reset(),this.inlineAlert.close(),this.notify.emit()},t=>{this.inlineAlert.showInlineError(t)})}setCertValue(t){this.webhook.targets[0].skip_cert_verify=!t}get isValid(){return this.currentForm&&this.currentForm.valid&&!this.submitting&&!this.checking&&this.hasEventType()}hasChange(){return!(0,p.jy)(this.originValue,this.webhook)}setEventType(t){-1===this.webhook.event_types.indexOf(t)?this.webhook.event_types.push(t):this.webhook.event_types.splice(this.webhook.event_types.findIndex(n=>n===t),1)}getEventType(t){return t&&-1!==this.webhook.event_types.indexOf(t)}hasEventType(){return this.metadata&&this.metadata.event_type&&this.metadata.event_type.length>0&&this.webhook.event_types&&this.webhook.event_types.length>0}eventTypeToText(t){return this.projectWebhookService.eventTypeToText(t)}getPayLoadFormats(){if(this.metadata?.payload_formats?.length&&this.webhook.targets[0].type)for(let t=0;t<this.metadata.payload_formats.length;t++)if(this.metadata.payload_formats[t].notify_type===this.webhook.targets[0].type)return this.metadata.payload_formats[t].formats;return[]}getI18nKey(t){return t&&T[t]?T[t]:t}}return(o=l).\u0275fac=function(t){return new(t||o)(e.Y36(k.U),e.Y36(C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["add-webhook-form"]],viewQuery:function(t,n){if(1&t&&(e.Gf(j,7),e.Gf(N.l,5)),2&t){let s;e.iGM(s=e.CRH())&&(n.currentForm=s.first),e.iGM(s=e.CRH())&&(n.inlineAlert=s.first)}},inputs:{projectId:"projectId",isOpen:"isOpen",metadata:"metadata"},outputs:{close:"close",notify:"notify"},decls:63,vars:46,consts:[[1,"align-center"],[1,"modal-title"],[1,"clr-form","clr-form-horizontal"],["webhookForm","ngForm"],[1,"form-block","webhook-section"],[1,"clr-form-control"],["for","edit_endpoint_url",1,"clr-control-label","required"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["autocomplete","off","type","text","id","name","size","30","name","notify-type","required","",1,"clr-input",3,"disabled","ngModel","input","ngModelChange"],["name","ngModel"],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"spinner","spinner-inline",3,"hidden"],["class","tooltip-content",4,"ngIf"],["for","edit_endpoint_url",1,"clr-control-label"],["autocomplete","off","type","text","id","description","name","description",1,"clr-textarea","width-238",3,"disabled","ngModel","ngModelChange"],[1,"required","clr-control-label"],[1,"clr-select-wrapper"],["name","notifyType","id","notify_type",1,"width-238","clr-select",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"hidden"],["clrTooltipTrigger","","shape","info-circle","size","24"],["clrPosition","top-right","clrSize","lg",4,"clrIfOpen"],[4,"ngIf"],[1,"clr-control-label","required"],[1,"clr-control-container","clr-control-inline"],["class","clr-checkbox-wrapper width-8rem",4,"ngFor","ngForOf"],["class","clr-subtext-wrapper",4,"ngIf"],["autocomplete","off","type","text","id","edit_endpoint_url","size","30","name","edit_endpoint_url","required","",1,"clr-input",3,"disabled","ngModel","placeholder","ngModelChange"],["enpointURL","ngModel"],["class","clr-form-control",4,"ngIf"],["for","verify_remote_cert",1,"clr-control-label"],[1,"clr-control-container","padding-top-3"],["type","checkbox","clrCheckbox","","name","verify_remote_cert","id","verify_remote_cert",3,"disabled","ngModel","ngModelChange"],["class","mt-1 bottom-btn",4,"ngIf"],[1,"tooltip-content"],[3,"value"],["clrPosition","top-right","clrSize","lg"],["clrSelect","","name","payloadFormat","id","payload-format",1,"width-238",3,"ngModel","disabled","ngModelChange"],[1,"clr-checkbox-wrapper","width-8rem"],["type","checkbox","name","eventTypes",1,"clr-checkbox",3,"id","value","checked","change"],[1,"clr-control-label",3,"for"],[1,"clr-subtext-wrapper"],[1,"clr-subtext"],["for","auth_header",1,"clr-control-label"],["autocomplete","off","type","text","id","auth_header","size","30","name","auth_header",1,"clr-input",3,"disabled","ngModel","ngModelChange"],[1,"mt-1","bottom-btn"],["type","button","id","add-webhook-cancel",1,"btn","btn-outline",3,"click"],["type","button","id","new-webhook-continue",1,"btn","btn-primary",3,"disabled","click"],["type","button","id","edit-webhook-cancel",1,"btn","btn-outline",3,"click"],["type","button","id","edit-webhook-save",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"inline-alert",1),e.TgZ(2,"form",2,3)(4,"section",4)(5,"div",5)(6,"label",6),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",7)(10,"div",8)(11,"input",9,10),e.NdJ("input",function(){return n.inputName()})("ngModelChange",function(c){return n.webhook.name=c}),e.qZA(),e._UZ(13,"clr-icon",11)(14,"span",12),e.qZA(),e.YNc(15,Y,3,2,"clr-control-error",13),e.qZA()(),e.TgZ(16,"div",5)(17,"label",14),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",7)(21,"textarea",15),e.NdJ("ngModelChange",function(c){return n.webhook.description=c}),e.qZA()()(),e.TgZ(22,"div",5)(23,"label",16),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"div",7)(27,"div",17)(28,"select",18),e.NdJ("ngModelChange",function(c){return n.webhook.targets[0].type=c}),e.YNc(29,z,2,2,"option",19),e.qZA()(),e.TgZ(30,"clr-tooltip",20),e._UZ(31,"clr-icon",21),e.YNc(32,G,3,3,"clr-tooltip-content",22),e.qZA()()(),e.YNc(33,V,6,6,"clr-select-container",23),e.TgZ(34,"div",5)(35,"label",24),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"div",25),e.YNc(39,X,4,5,"div",26),e.YNc(40,ee,5,3,"div",27),e.qZA()(),e.TgZ(41,"div",5)(42,"label",6),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"div",7)(46,"div",8)(47,"input",28,29),e.NdJ("ngModelChange",function(c){return n.webhook.targets[0].address=c}),e.qZA(),e._UZ(49,"clr-icon",11),e.qZA(),e.YNc(50,te,3,3,"clr-control-error",13),e.qZA()(),e.YNc(51,ne,7,5,"div",30),e.TgZ(52,"div",5)(53,"label",31),e._uU(54),e.ALo(55,"translate"),e.TgZ(56,"clr-tooltip"),e._UZ(57,"clr-icon",21),e.YNc(58,oe,3,3,"clr-tooltip-content",22),e.qZA()(),e.TgZ(59,"div",32)(60,"input",33),e.NdJ("ngModelChange",function(c){return n.setCertValue(c)}),e.qZA()()()()(),e.YNc(61,ie,7,7,"div",34),e.YNc(62,re,7,7,"div",34),e.qZA()),2&t){const s=e.MAs(12),c=e.MAs(48);e.xp6(7),e.Oqu(e.lcZ(8,34,"WEBHOOK.NAME")),e.xp6(2),e.ekj("clr-error",s.errors&&s.errors.required&&(s.dirty||s.touched)||n.isNameExisting),e.xp6(2),e.Q6J("disabled",n.checking)("ngModel",n.webhook.name),e.xp6(3),e.Q6J("hidden",!n.checkNameOnGoing),e.xp6(1),e.Q6J("ngIf",s.errors&&s.errors.required&&(s.dirty||s.touched)||n.isNameExisting),e.xp6(3),e.Oqu(e.lcZ(19,36,"WEBHOOK.DESCRIPTION")),e.xp6(3),e.Q6J("disabled",n.checking)("ngModel",n.webhook.description),e.xp6(3),e.Oqu(e.lcZ(25,38,"WEBHOOK.NOTIFY_TYPE")),e.xp6(4),e.Q6J("ngModel",n.webhook.targets[0].type)("disabled",n.checking),e.xp6(1),e.Q6J("ngForOf",null==n.metadata?null:n.metadata.notify_type),e.xp6(1),e.Q6J("hidden","slack"!==n.webhook.targets[0].type),e.xp6(3),e.Q6J("ngIf","http"===n.webhook.targets[0].type),e.xp6(3),e.Oqu(e.lcZ(37,40,"WEBHOOK.EVENT_TYPE")),e.xp6(2),e.ekj("clr-error",!n.hasEventType()),e.xp6(1),e.Q6J("ngForOf",null==n.metadata?null:n.metadata.event_type),e.xp6(1),e.Q6J("ngIf",!n.hasEventType()),e.xp6(3),e.Oqu(e.lcZ(44,42,"WEBHOOK.ENDPOINT_URL")),e.xp6(2),e.ekj("clr-error",c.errors&&c.errors.required&&(c.dirty||c.touched)),e.xp6(2),e.Q6J("disabled",n.checking)("ngModel",n.webhook.targets[0].address)("placeholder","http"===n.webhook.targets[0].type?"http(s)://192.168.1.1":""),e.xp6(3),e.Q6J("ngIf",c.errors&&c.errors.required&&(c.dirty||c.touched)),e.xp6(1),e.Q6J("ngIf","http"===(null==n.webhook||null==n.webhook.targets[0]?null:n.webhook.targets[0].type)),e.xp6(3),e.hij(" ",e.lcZ(55,44,"WEBHOOK.VERIFY_REMOTE_CERT")," "),e.xp6(6),e.Q6J("disabled",n.checking)("ngModel",!(null!=n.webhook&&null!=n.webhook.targets[0]&&n.webhook.targets[0].skip_cert_verify)),e.xp6(1),e.Q6J("ngIf",!n.isModify),e.xp6(1),e.Q6J("ngIf",n.isModify)}},dependencies:[u._Y,u.YN,u.Kr,u.Fj,u.Wl,u.EJ,u.JJ,u.JL,u.Q7,u.On,u.F,r.qvL,r.nqY,r.MgK,r.VqA,r.KKC,r.otW,r.dTv,r.Jmj,r.bMv,r.zDF,_.sg,_.O5,N.l,O.X$],styles:[".icon-tooltip[_ngcontent-%COMP%]{margin-top:4px}.padding-top-3[_ngcontent-%COMP%]{padding-top:3px}.bottom-btn[_ngcontent-%COMP%]{text-align:right}.width-238[_ngcontent-%COMP%]{width:238px}.width-8rem[_ngcontent-%COMP%]{width:8rem}.clr-control-label[_ngcontent-%COMP%]{width:10rem!important}"]}),l})();function se(o,l){1&o&&(e.TgZ(0,"h3",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WEBHOOK.EDIT_WEBHOOK")," "))}function le(o,l){1&o&&(e.TgZ(0,"h3",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WEBHOOK.ADD_WEBHOOK")," "))}let S=(()=>{var o;class l{constructor(){this.isOpen=!1,this.closable=!1,this.staticBackdrop=!0,this.notify=new e.vpe}openAddWebhookModal(){this.isOpen=!0}onCancel(){this.isOpen=!1}notifySuccess(){this.isOpen=!1,this.notify.emit()}closeModal(){this.isOpen=!1}}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["add-webhook"]],viewQuery:function(t,n){if(1&t&&e.Gf(v,5),2&t){let s;e.iGM(s=e.CRH())&&(n.addWebhookFormComponent=s.first)}},inputs:{projectId:"projectId",metadata:"metadata"},outputs:{notify:"notify"},decls:8,vars:11,consts:[[3,"clrModalOpen","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],["class","modal-title",4,"ngIf"],[1,"modal-body"],[3,"metadata","projectId","isOpen","close","notify"],[1,"modal-title"]],template:function(t,n){1&t&&(e.TgZ(0,"clr-modal",0),e.NdJ("clrModalOpenChange",function(c){return n.isOpen=c}),e.YNc(1,se,3,3,"h3",1),e.YNc(2,le,3,3,"h3",1),e.TgZ(3,"div",2)(4,"div"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"add-webhook-form",3),e.NdJ("close",function(){return n.closeModal()})("notify",function(){return n.notifySuccess()}),e.qZA()()()),2&t&&(e.Q6J("clrModalOpen",n.isOpen)("clrModalStaticBackdrop",n.staticBackdrop)("clrModalClosable",n.closable),e.xp6(1),e.Q6J("ngIf",n.isEdit),e.xp6(1),e.Q6J("ngIf",!n.isEdit),e.xp6(3),e.Oqu(e.lcZ(6,9,"WEBHOOK.EDIT_WEBHOOK_DESC")),e.xp6(2),e.Q6J("metadata",n.metadata)("projectId",n.projectId)("isOpen",n.isOpen))},dependencies:[r.qAN,r.VLi,_.O5,v,O.X$],styles:["[_nghost-%COMP%]  .modal-dialog{width:31rem;height:35rem}"]}),l})();var ce=a(9315),b=a(2141),L=a(6266),d=a(6921),E=a(3419),ae=a(1183),w=a(4410);function pe(o,l){1&o&&e._UZ(0,"clr-icon",22)}function de(o,l){if(1&o&&(e.TgZ(0,"clr-tooltip-content",23)(1,"span"),e._uU(2),e.qZA()()),2&o){const i=e.oxw().$implicit;e.Q6J("clrPosition","left"),e.xp6(2),e.Oqu(i.status_message)}}function ge(o,l){if(1&o&&(e.TgZ(0,"span",24),e._uU(1),e.qZA()),2&o){const i=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.hij(" ",t.eventTypeToText(null==i||null==i.extra_attrs?null:i.extra_attrs.event_type)," ")}}function _e(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const i=e.oxw().$implicit,t=e.oxw();e.xp6(1),e.hij(" ",t.toString(t.toJson(null==i||null==i.extra_attrs?null:i.extra_attrs.payload))," ")}}function ue(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const i=e.oxw().$implicit;e.xp6(1),e.hij(" ",null==i||null==i.extra_attrs?null:i.extra_attrs.payload," ")}}function he(o,l){if(1&o&&(e.TgZ(0,"pre"),e._uU(1),e.qZA()),2&o){const i=e.oxw(2).$implicit;e.xp6(1),e.Oqu(null==i||null==i.extra_attrs?null:i.extra_attrs.payload)}}function me(o,l){if(1&o&&(e._UZ(0,"pre",28),e.ALo(1,"json")),2&o){const i=e.oxw(2).$implicit,t=e.oxw();e.Q6J("innerHTML",e.lcZ(1,1,t.toJson(null==i||null==i.extra_attrs?null:i.extra_attrs.payload)),e.oJD)}}function fe(o,l){if(1&o&&(e.TgZ(0,"clr-signpost-content",25),e._UZ(1,"hbr-copy-input",26),e.YNc(2,he,2,1,"pre",13),e.YNc(3,me,2,3,"pre",27),e.qZA()),2&o){const i=e.oxw().$implicit,t=e.oxw();e.Q6J("clrPosition","top-middle"),e.xp6(1),e.Q6J("iconMode",!0)("defaultValue",t.toString(null==i||null==i.extra_attrs?null:i.extra_attrs.payload)),e.xp6(1),e.Q6J("ngIf",!t.useJsonFormat(null==i?null:i.vendor_type)),e.xp6(1),e.Q6J("ngIf",t.useJsonFormat(null==i?null:i.vendor_type))}}function Oe(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"clr-dg-row",14)(1,"clr-dg-cell")(2,"a",15),e.NdJ("click",function(){const s=e.CHM(i).$implicit,c=e.oxw();return e.KtG(c.goToLink(s.id))}),e._uU(3),e.qZA()(),e.TgZ(4,"clr-dg-cell"),e._uU(5),e.qZA(),e.TgZ(6,"clr-dg-cell"),e._uU(7),e.TgZ(8,"clr-tooltip"),e.YNc(9,pe,1,0,"clr-icon",16),e.YNc(10,de,3,2,"clr-tooltip-content",17),e.qZA()(),e.TgZ(11,"clr-dg-cell"),e.YNc(12,ge,2,1,"span",18),e.qZA(),e.TgZ(13,"clr-dg-cell",19)(14,"clr-signpost")(15,"a",20),e.YNc(16,_e,2,1,"span",13),e.YNc(17,ue,2,1,"span",13),e.qZA(),e.YNc(18,fe,4,5,"clr-signpost-content",21),e.qZA()(),e.TgZ(19,"clr-dg-cell"),e._uU(20),e.ALo(21,"harborDatetime"),e.qZA(),e.TgZ(22,"clr-dg-cell"),e._uU(23),e.ALo(24,"harborDatetime"),e.qZA()()}if(2&o){const i=l.$implicit,t=e.oxw();e.Q6J("clrDgItem",i),e.xp6(3),e.Oqu(i.id),e.xp6(2),e.hij(" ",i.vendor_type," "),e.xp6(2),e.hij("",i.status," "),e.xp6(2),e.Q6J("ngIf",i.status_message),e.xp6(3),e.Q6J("ngIf",null==i||null==i.extra_attrs?null:i.extra_attrs.event_type),e.xp6(4),e.Q6J("ngIf",t.useJsonFormat(null==i?null:i.vendor_type)),e.xp6(1),e.Q6J("ngIf",!t.useJsonFormat(null==i?null:i.vendor_type)),e.xp6(3),e.Oqu(e.xi3(21,10,i.start_time,"short")),e.xp6(3),e.Oqu(e.xi3(24,13,i.end_time,"short"))}}function xe(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){e.oxw();const i=e.MAs(36);e.xp6(1),e.lnq("",i.firstItem+1," - ",i.lastItem+1," ",e.lcZ(2,3,"REPLICATION.OF"),"")}}const be=function(){return[15,25,50]};let W=(()=>{var o;class l{constructor(t,n,s,c){this.webhookService=t,this.messageHandlerService=n,this.router=s,this.projectWebhookService=c,this.executions=[],this.loading=!0,this.currentPage=1,this.pageSize=(0,p.tb)(p.V2.WEBHOOK_EXECUTIONS_COMPONENT),this.total=0}ngOnDestroy(){this.clearLoop()}clrLoadExecutions(t,n,s){let c,g;t&&(this.state=t),t&&t.page&&(this.pageSize=t.page.size,(0,p.Pe)(p.V2.WEBHOOK_EXECUTIONS_COMPONENT,this.pageSize)),t&&t.filters&&t.filters.length&&(c=encodeURIComponent(`${t.filters[0].property}=~${t.filters[0].value}`)),g=t&&t.sort&&t.sort.by?(0,p.td)(t):"-start_time",n&&(this.loading=!0),this.webhookService.ListExecutionsOfWebhookPolicyResponse({webhookPolicyId:s||this.selectedWebhook.id,projectNameOrId:this.selectedWebhook.project_id.toString(),pageSize:this.pageSize,page:this.currentPage,sort:g,q:c}).pipe((0,m.x)(()=>{this.loading=!1})).subscribe({next:h=>{if(h.headers){let Z=h.headers.get("X-Total-Count");Z&&(this.total=parseInt(Z,0))}this.executions=h.body||[],this.setLoop()},error:h=>{this.messageHandlerService.error(h)}})}goToLink(t){this.router.navigate(["harbor","projects",`${this.selectedWebhook.project_id}`,"webhook",`${this.selectedWebhook.id}`,"executions",`${t}`,"tasks"])}toString(t){return t?JSON.stringify(t):""}toJson(t){return t?JSON.parse(t):null}refreshExecutions(t,n){t&&(this.executions=[],this.currentPage=1),this.clrLoadExecutions(this.state,!0,n)}clearLoop(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}setLoop(){if(this.clearLoop(),this.executions&&this.executions.length)for(let t=0;t<this.executions.length;t++)this.willChangStatus(this.executions[t].status)&&(this.timeout||(this.timeout=setTimeout(()=>{this.clrLoadExecutions(this.state,!1,null)},d.X8)))}willChangStatus(t){return t===d.r9.PENDING||t===d.r9.RUNNING||t===d.r9.SCHEDULED}eventTypeToText(t){return this.projectWebhookService.eventTypeToText(t)}useJsonFormat(t){return t===y.WEBHOOK}}return(o=l).\u0275fac=function(t){return new(t||o)(e.Y36(k.U),e.Y36(E.d),e.Y36(f.F0),e.Y36(C))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-executions"]],inputs:{selectedWebhook:"selectedWebhook"},decls:43,vars:48,consts:[[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"clrDgLoading","clrDgRefresh"],[1,"mt-2"],[1,"flex-end"],[1,"mt-0"],[1,"refresh-btn"],["shape","refresh",3,"hidden","click"],[3,"clrDgField"],[3,"clrDgSortBy"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgPage","clrDgPageSize","clrDgTotalItems","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],[3,"clrDgItem"],["href","javascript:void(0)",3,"click"],["clrTooltipTrigger","","shape","info-circle","size","20",4,"ngIf"],["clrSize","md",3,"clrPosition",4,"clrIfOpen"],["class","label-flex",4,"ngIf"],[1,"flex"],["clrSignpostTrigger","",1,"btn","btn-link","link-normal"],["class","pre",3,"clrPosition",4,"clrIfOpen"],["clrTooltipTrigger","","shape","info-circle","size","20"],["clrSize","md",3,"clrPosition"],[1,"label-flex"],[1,"pre",3,"clrPosition"],[3,"iconMode","defaultValue"],["class","abc",3,"innerHTML",4,"ngIf"],[1,"abc",3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"clr-datagrid",1),e.NdJ("clrDgRefresh",function(c){return n.clrLoadExecutions(c,!0,null)}),e.TgZ(2,"clr-dg-action-bar",2)(3,"div",3)(4,"h4",4),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"span",5)(8,"clr-icon",6),e.NdJ("click",function(){return n.refreshExecutions(!0,null)}),e.qZA()()()(),e.TgZ(9,"clr-dg-column",7),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"clr-dg-column"),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"clr-dg-column",8),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"clr-dg-column",8),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"clr-dg-column"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"clr-dg-column",8),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"clr-dg-column",8),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"clr-dg-placeholder"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.YNc(33,Oe,25,16,"clr-dg-row",9),e.TgZ(34,"clr-dg-footer")(35,"clr-dg-pagination",10,11),e.NdJ("clrDgPageChange",function(c){return n.currentPage=c}),e.TgZ(37,"clr-dg-page-size",12),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.YNc(40,xe,3,5,"span",13),e._uU(41),e.ALo(42,"translate"),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("clrDgLoading",n.loading),e.xp6(4),e.hij(" ",e.lcZ(6,25,"P2P_PROVIDER.EXECUTIONS")," "),e.xp6(3),e.Q6J("hidden",n.loading),e.xp6(1),e.Q6J("clrDgField","id"),e.xp6(1),e.Oqu(e.lcZ(11,27,"REPLICATION.ID")),e.xp6(3),e.Oqu(e.lcZ(14,29,"JOB_SERVICE_DASHBOARD.VENDOR_TYPE")),e.xp6(2),e.Q6J("clrDgSortBy","status"),e.xp6(1),e.Oqu(e.lcZ(17,31,"DESTINATION.STATUS")),e.xp6(2),e.Q6J("clrDgSortBy","status"),e.xp6(1),e.Oqu(e.lcZ(20,33,"WEBHOOK.EVENT_TYPE")),e.xp6(3),e.Oqu(e.lcZ(23,35,"WEBHOOK.PAYLOAD_DATA")),e.xp6(2),e.Q6J("clrDgSortBy","start_time"),e.xp6(1),e.Oqu(e.lcZ(26,37,"REPLICATION.CREATION_TIME")),e.xp6(2),e.Q6J("clrDgSortBy","end_time"),e.xp6(1),e.Oqu(e.lcZ(29,39,"REPLICATION.END_TIME")),e.xp6(3),e.Oqu(e.lcZ(32,41,"P2P_PROVIDER.JOB_PLACEHOLDER")),e.xp6(2),e.Q6J("ngForOf",n.executions),e.xp6(2),e.Q6J("clrDgPage",n.currentPage)("clrDgPageSize",n.pageSize)("clrDgTotalItems",n.total),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(47,be)),e.xp6(1),e.Oqu(e.lcZ(39,43,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",n.total),e.xp6(1),e.AsE(" ",n.total," ",e.lcZ(42,45,"REPLICATION.ITEMS")," "))},dependencies:[r.C9t,r.Gwl,r.fv_,r.m4W,r.dRQ,r.YYR,r.Ltv,r.F7K,r.Z4N,r.jND,r.KHL,r.PDs,r.Gcc,r.dml,r.Nh1,r.K8c,r.qvL,r.nqY,r.EuU,r.hQ,r.QH5,r.Jmj,r.bMv,r.zDF,_.sg,_.O5,ae.s,O.X$,_.Ts,w.Z],styles:[".link-normal[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;max-width:10rem;text-transform:unset}.flex[_ngcontent-%COMP%]{display:flex}.pre[_ngcontent-%COMP%]{min-width:25rem;max-width:40rem}.flex-end[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.refresh-btn[_ngcontent-%COMP%]{margin-right:1rem;margin-bottom:.5rem;cursor:pointer}.refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}pre[_ngcontent-%COMP%]{border:none}.label-flex[_ngcontent-%COMP%]{width:9.5rem;letter-spacing:0;display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;border:1px solid;border-radius:9px;padding:0 7px 0 10px;text-align:center}"]}),l})();var A=a(3555),Te=a(7625);const Ce=["confirmationDialogComponent"];function ke(o,l){1&o&&(e.TgZ(0,"span"),e._UZ(1,"clr-icon",36),e.TgZ(2,"span",37),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.ENABLED_BUTTON")))}function Ae(o,l){1&o&&(e.TgZ(0,"span"),e._UZ(1,"clr-icon",38),e.TgZ(2,"span",37),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.DISABLED_BUTTON")))}function Ze(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"clr-dropdown-menu")(1,"button",28),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.switchWebhookStatus())}),e.TgZ(2,"span",29),e.YNc(3,ke,5,3,"span",23),e.YNc(4,Ae,5,3,"span",23),e.qZA()(),e.TgZ(5,"button",30),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.editWebhook())}),e._UZ(6,"clr-icon",31),e.TgZ(7,"span",32),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e._UZ(10,"div",33),e.TgZ(11,"button",30),e.NdJ("click",function(){e.CHM(i);const n=e.oxw();return e.KtG(n.deleteWebhook())}),e._UZ(12,"clr-icon",34),e.TgZ(13,"span",35),e._uU(14),e.ALo(15,"translate"),e.qZA()()()}if(2&o){const i=e.oxw();e.xp6(1),e.Q6J("disabled",!i.selectedRow||!i.hasUpdatePermission),e.xp6(2),e.Q6J("ngIf",i.selectedRow&&!i.selectedRow.enabled),e.xp6(1),e.Q6J("ngIf",!(i.selectedRow&&!i.selectedRow.enabled)),e.xp6(1),e.Q6J("disabled",!i.selectedRow||!i.hasUpdatePermission),e.xp6(3),e.Oqu(e.lcZ(9,7,"BUTTON.EDIT")),e.xp6(3),e.Q6J("disabled",!i.selectedRow||!i.hasUpdatePermission),e.xp6(3),e.Oqu(e.lcZ(15,9,"BUTTON.DELETE"))}}function Pe(o,l){1&o&&(e.TgZ(0,"div",44),e._UZ(1,"clr-icon",45),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.ENABLED")))}function ve(o,l){1&o&&(e.TgZ(0,"div",44),e._UZ(1,"clr-icon",46),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.DISABLED")))}function Ee(o,l){if(1&o&&(e.TgZ(0,"span",54),e._uU(1),e.qZA()),2&o){const i=e.oxw(2).$implicit,t=e.oxw();e.xp6(1),e.Oqu(t.eventTypeToText(null==i?null:i.event_types[0]))}}function we(o,l){if(1&o&&(e.TgZ(0,"div",48)(1,"span",57),e._uU(2),e.qZA()()),2&o){const i=l.$implicit,t=e.oxw(4);e.xp6(2),e.Oqu(t.eventTypeToText(i))}}function Me(o,l){if(1&o&&(e.TgZ(0,"clr-signpost-content",55)(1,"div"),e.YNc(2,we,3,1,"div",56),e.qZA()()),2&o){const i=e.oxw(2).$implicit;e.Q6J("clrPosition","top-middle"),e.xp6(2),e.Q6J("ngForOf",null==i?null:i.event_types)}}function Ie(o,l){if(1&o&&(e.TgZ(0,"div",47)(1,"div",48),e.YNc(2,Ee,2,1,"span",49),e.qZA(),e.TgZ(3,"div",50)(4,"div",51)(5,"clr-signpost")(6,"button",52),e._uU(7," ... "),e.qZA(),e.YNc(8,Me,3,2,"clr-signpost-content",53),e.qZA()()()()),2&o){const i=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",null==i?null:i.event_types[0]),e.xp6(1),e.Q6J("hidden",(null==i||null==i.event_types?null:i.event_types.length)<=1)}}function ye(o,l){if(1&o&&(e.TgZ(0,"clr-dg-row",39)(1,"clr-dg-cell"),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell",40),e.YNc(4,Pe,5,3,"div",41),e.YNc(5,ve,5,3,"div",41),e.qZA(),e.TgZ(6,"clr-dg-cell"),e._uU(7),e.qZA(),e.TgZ(8,"clr-dg-cell"),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"clr-dg-cell"),e._uU(12),e.qZA(),e.TgZ(13,"clr-dg-cell",42),e.YNc(14,Ie,9,2,"div",43),e.qZA(),e.TgZ(15,"clr-dg-cell"),e._uU(16),e.ALo(17,"harborDatetime"),e.qZA(),e.TgZ(18,"clr-dg-cell"),e._uU(19),e.qZA()()),2&o){const i=l.$implicit,t=e.oxw();e.Q6J("clrDgItem",i),e.xp6(2),e.Oqu(i.name),e.xp6(1),e.Q6J("ngSwitch",i.enabled),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngSwitchCase",!1),e.xp6(2),e.Oqu(null==i?null:i.targets[0].type),e.xp6(2),e.Oqu(e.lcZ(10,11,t.getI18nKey(null==i?null:i.targets[0].payload_format))),e.xp6(3),e.Oqu(null==i?null:i.targets[0].address),e.xp6(2),e.Q6J("ngIf",null==i||null==i.event_types?null:i.event_types.length),e.xp6(2),e.Oqu(e.xi3(17,13,i.creation_time,"short")),e.xp6(3),e.Oqu(i.description)}}function Ne(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){e.oxw();const i=e.MAs(52);e.xp6(1),e.lnq("",i.firstItem+1," - ",i.lastItem+1," ",e.lcZ(2,3,"WEBHOOK.OF"),"")}}function Se(o,l){if(1&o&&e._UZ(0,"app-executions",58),2&o){const i=e.oxw();e.Q6J("selectedWebhook",i.selectedRow)}}const Le=function(){return[15,25,50]},q=/^\/harbor\/projects\/(\d+)\/webhook$/;let We=(()=>{var o;class l{constructor(t,n,s,c,g,h,Z,ze){this.route=t,this.translate=n,this.webhookService=s,this.projectWebhookService=c,this.messageHandlerService=g,this.userPermissionService=h,this.router=Z,this.event=ze,this.webhookList=[],this.loadingMetadata=!0,this.loadingWebhookList=!0,this.hasCreatPermission=!1,this.hasUpdatePermission=!1,this.page=1,this.pageSize=(0,p.tb)(p.V2.WEBHOOK_COMPONENT),this.total=0}ngOnInit(){this.scrollSub||(this.scrollSub=this.event.subscribe(A.n.SCROLL,n=>{n&&q.test(n.url)&&(this.scrollTop=n.scrollTop)})),this.routerSub||(this.routerSub=this.router.events.subscribe(n=>{n instanceof f.m2&&(n&&q.test(n.url)?this.event.publish(A.n.SCROLL_TO_POSITION,this.scrollTop):this.event.publish(A.n.SCROLL_TO_POSITION,0))})),this.projectId=+this.route.snapshot.parent.parent.params.id;let t=this.route.snapshot.parent.parent.data;t&&(this.projectName=t.projectResolver.name),this.getData(),this.getPermissions()}ngOnDestroy(){this.routerSub&&(this.routerSub.unsubscribe(),this.routerSub=null),this.scrollSub&&(this.scrollSub.unsubscribe(),this.scrollSub=null)}getPermissions(){const t=[];t.push(this.userPermissionService.getPermission(this.projectId,b._W.WEBHOOK.KEY,b._W.WEBHOOK.VALUE.CREATE)),t.push(this.userPermissionService.getPermission(this.projectId,b._W.WEBHOOK.KEY,b._W.WEBHOOK.VALUE.UPDATE)),(0,ce.D)(...t).subscribe(n=>{[this.hasCreatPermission,this.hasUpdatePermission]=n},n=>{this.messageHandlerService.error(n)})}refresh(){this.page=1,this.total=0,this.selectedRow=null,this.getWebhooks(this.state),this.getData()}getData(){this.getMetadata(),this.selectedRow=null}getMetadata(){this.loadingMetadata=!0,this.webhookService.GetSupportedEventTypes({projectNameOrId:this.projectId.toString()}).pipe((0,m.x)(()=>this.loadingMetadata=!1)).subscribe(t=>{this.metadata=t,this.metadata&&this.metadata.event_type&&this.metadata.event_type.sort((n,s)=>this.eventTypeToText(n)===this.eventTypeToText(s)?0:this.eventTypeToText(n)>this.eventTypeToText(s)?1:-1)},t=>{this.messageHandlerService.handleError(t)})}getWebhooks(t){let n,s;t&&(this.state=t),t&&t.page&&(this.pageSize=t.page.size,(0,p.Pe)(p.V2.WEBHOOK_COMPONENT,this.pageSize)),t&&t.filters&&t.filters.length&&(n=encodeURIComponent(`${t.filters[0].property}=~${t.filters[0].value}`)),s=t&&t.sort&&t.sort.by?(0,p.td)(t):"-creation_time",this.loadingWebhookList=!0,this.webhookService.ListWebhookPoliciesOfProjectResponse({projectNameOrId:this.projectId.toString(),page:this.page,pageSize:this.pageSize,sort:s,q:n}).pipe((0,m.x)(()=>this.loadingWebhookList=!1)).subscribe(c=>{if(c.headers){let g=c.headers.get("X-Total-Count");g&&(this.total=parseInt(g,0))}this.webhookList=c.body||[]},c=>{this.messageHandlerService.handleError(c)})}switchWebhookStatus(){let t="";this.translate.get(this.selectedRow.enabled?"WEBHOOK.DISABLED_WEBHOOK_SUMMARY":"WEBHOOK.ENABLED_WEBHOOK_SUMMARY",{name:this.selectedRow.name}).subscribe(n=>{t=n;let s=new L.c(this.selectedRow.enabled?"WEBHOOK.DISABLED_WEBHOOK_TITLE":"WEBHOOK.ENABLED_WEBHOOK_TITLE",t,"",{},24,this.selectedRow.enabled?5:4);this.confirmationDialogComponent.open(s)})}confirmSwitch(t){t&&24===t.source&&1===t.state&&("{}"===JSON.stringify(t.data)?this.webhookService.UpdateWebhookPolicyOfProject({projectNameOrId:this.projectId.toString(),webhookPolicyId:this.selectedRow.id,policy:Object.assign({},this.selectedRow,{enabled:!this.selectedRow.enabled})}).subscribe(n=>{this.refresh()},n=>{this.messageHandlerService.handleError(n)}):this.webhookService.DeleteWebhookPolicyOfProject({projectNameOrId:this.projectId.toString(),webhookPolicyId:t.data.id}).subscribe({next:n=>{this.refresh()},error:n=>{this.messageHandlerService.handleError(n)}}))}editWebhook(){this.metadata&&(this.addWebhookComponent.isOpen=!0,this.addWebhookComponent.isEdit=!0,this.addWebhookComponent.addWebhookFormComponent.isModify=!0,this.addWebhookComponent.addWebhookFormComponent.webhook=(0,p.d9)(this.selectedRow),this.addWebhookComponent.addWebhookFormComponent.originValue=(0,p.d9)(this.selectedRow),this.addWebhookComponent.addWebhookFormComponent.webhook.event_types=(0,p.d9)(this.selectedRow.event_types))}openAddWebhookModal(){this.addWebhookComponent.openAddWebhookModal()}newWebhook(){this.metadata&&(this.addWebhookComponent.isOpen=!0,this.addWebhookComponent.isEdit=!1,this.addWebhookComponent.addWebhookFormComponent.isModify=!1,this.addWebhookComponent.addWebhookFormComponent.currentForm.reset({notifyType:this.metadata.notify_type[0],payloadFormat:x[0]}),this.addWebhookComponent.addWebhookFormComponent.webhook={enabled:!0,event_types:[],targets:[{type:"http",address:"",skip_cert_verify:!0,payload_format:x[0]}]},this.addWebhookComponent.addWebhookFormComponent.webhook.event_types=(0,p.d9)(this.metadata.event_type))}success(){this.refresh()}deleteWebhook(){const t=[];t.push(this.selectedRow.name);let n="";this.translate.get("WEBHOOK.DELETE_WEBHOOK_SUMMARY",{names:t.join(",")}).subscribe(c=>n=c);const s=new L.c("SCANNER.CONFIRM_DELETION",n,t.join(","),this.selectedRow,24,2);this.confirmationDialogComponent.open(s)}eventTypeToText(t){return this.projectWebhookService.eventTypeToText(t)}refreshExecutions(t){t&&this.executionsComponent?.refreshExecutions(!0,t.id)}getI18nKey(t){return t&&T[t]?T[t]:t}}return(o=l).\u0275fac=function(t){return new(t||o)(e.Y36(f.gz),e.Y36(O.sK),e.Y36(k.U),e.Y36(C),e.Y36(E.d),e.Y36(b.Hx),e.Y36(f.F0),e.Y36(A.P))},o.\u0275cmp=e.Xpm({type:o,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&(e.Gf(S,5),e.Gf(v,5),e.Gf(Ce,5),e.Gf(W,5)),2&t){let s;e.iGM(s=e.CRH())&&(n.addWebhookComponent=s.first),e.iGM(s=e.CRH())&&(n.addWebhookFormComponent=s.first),e.iGM(s=e.CRH())&&(n.confirmationDialogComponent=s.first),e.iGM(s=e.CRH())&&(n.executionsComponent=s.first)}},decls:63,vars:61,consts:[[1,"row"],[1,"mt-1"],[3,"clrDgLoading","clrDgSingleSelected","clrDgRefresh","clrDgSingleSelectedChange"],[1,"clr-row"],[1,"clr-col-7"],["id","new-webhook","type","button",1,"btn","btn-secondary",3,"disabled","clrLoading","click"],["shape","plus","size","16"],["clrDropdownTrigger","",1,"btn","btn-link",3,"clrCloseMenuOnItemClick"],["id","action-webhook"],["shape","caret down",1,"clr-icon"],[4,"clrIfOpen"],[1,"clr-col-5"],[1,"action-head-pos"],[1,"refresh-btn"],["shape","refresh",3,"hidden","click"],[3,"clrDgField"],[1,"width-120"],[1,"min-width-340"],[3,"clrDgSortBy"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgPageSize","clrDgPage","clrDgTotalItems","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],[3,"selectedWebhook",4,"ngIf"],[3,"metadata","projectId","notify"],[3,"confirmAction"],["confirmationDialogComponent",""],["clrDropdownItem","",3,"disabled","click"],["id","toggle-webhook"],["clrDropdownItem","",1,"btn","btn-secondary",3,"disabled","click"],["size","16","shape","pencil",1,"margin-top-0"],["id","edit-webhook",1,"margin-left-10"],[1,"dropdown-divider"],["size","16","shape","times",1,"margin-top-0"],["id","delete-webhook",1,"margin-left-10"],["size","16","shape","success-standard",1,"margin-top-2"],[1,"margin-left-10"],["size","16","shape","ban",1,"margin-top-2"],[3,"clrDgItem"],[3,"ngSwitch"],["class","icon-wrap",4,"ngSwitchCase"],[1,"event-types"],["class","cell",4,"ngIf"],[1,"icon-wrap"],["shape","check-circle","size","20",1,"is-success","enabled-icon"],["shape","exclamation-triangle","size","20",1,"is-warning"],[1,"cell"],[1,"bar-state"],["class","label-flex",4,"ngIf"],[1,"signpost-item",3,"hidden"],[1,"trigger-item"],["clrSignpostTrigger","",1,"btn","btn-link","ellipsis-btn","font-size-20"],[3,"clrPosition",4,"clrIfOpen"],[1,"label-flex"],[3,"clrPosition"],["class","bar-state",4,"ngFor","ngForOf"],[1,"label","not-scan"],[3,"selectedWebhook"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"clr-datagrid",2),e.NdJ("clrDgRefresh",function(c){return n.getWebhooks(c)})("clrDgSingleSelectedChange",function(c){return n.selectedRow=c})("clrDgSingleSelectedChange",function(c){return n.refreshExecutions(c)}),e.TgZ(5,"clr-dg-action-bar")(6,"div",3)(7,"div",4)(8,"button",5),e.NdJ("click",function(){return n.newWebhook()}),e._UZ(9,"clr-icon",6),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"clr-dropdown",7)(13,"span",8),e._uU(14),e.ALo(15,"translate"),e._UZ(16,"clr-icon",9),e.qZA(),e.YNc(17,Ze,16,11,"clr-dropdown-menu",10),e.qZA()(),e.TgZ(18,"div",11)(19,"div",12)(20,"span",13)(21,"clr-icon",14),e.NdJ("click",function(){return n.refresh()}),e.qZA()()()()()(),e.TgZ(22,"clr-dg-column",15),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"clr-dg-column",16),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"clr-dg-column"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"clr-dg-column"),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"clr-dg-column",17),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"clr-dg-column"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"clr-dg-column",18),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"clr-dg-column"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"clr-dg-placeholder"),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.YNc(49,ye,20,16,"clr-dg-row",19),e.TgZ(50,"clr-dg-footer")(51,"clr-dg-pagination",20,21),e.NdJ("clrDgPageChange",function(c){return n.page=c}),e.TgZ(53,"clr-dg-page-size",22),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.YNc(56,Ne,3,5,"span",23),e._uU(57),e.ALo(58,"translate"),e.qZA()()()(),e.YNc(59,Se,1,1,"app-executions",24),e.TgZ(60,"add-webhook",25),e.NdJ("notify",function(){return n.success()}),e.qZA(),e.TgZ(61,"confirmation-dialog",26,27),e.NdJ("confirmAction",function(c){return n.confirmSwitch(c)}),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,32,"WEBHOOK.WEBHOOKS")),e.xp6(2),e.Q6J("clrDgLoading",n.loadingWebhookList)("clrDgSingleSelected",n.selectedRow),e.xp6(4),e.Q6J("disabled",n.loadingMetadata||!n.hasCreatPermission)("clrLoading",n.loadingMetadata),e.xp6(2),e.hij(" ",e.lcZ(11,34,"WEBHOOK.NEW_WEBHOOK")," "),e.xp6(2),e.Q6J("clrCloseMenuOnItemClick",!1),e.xp6(2),e.hij("",e.lcZ(15,36,"MEMBER.ACTION")," "),e.xp6(7),e.Q6J("hidden",n.loadingWebhookList||n.loadingMetadata),e.xp6(1),e.Q6J("clrDgField","name"),e.xp6(1),e.Oqu(e.lcZ(24,38,"WEBHOOK.NAME")),e.xp6(3),e.Oqu(e.lcZ(27,40,"WEBHOOK.ENABLED")),e.xp6(3),e.Oqu(e.lcZ(30,42,"WEBHOOK.NOTIFY_TYPE")),e.xp6(3),e.Oqu(e.lcZ(33,44,"WEBHOOK.PAYLOAD_FORMAT")),e.xp6(3),e.Oqu(e.lcZ(36,46,"WEBHOOK.TARGET")),e.xp6(3),e.Oqu(e.lcZ(39,48,"WEBHOOK.EVENT_TYPES")),e.xp6(2),e.Q6J("clrDgSortBy","creation_time"),e.xp6(1),e.Oqu(e.lcZ(42,50,"WEBHOOK.CREATED")),e.xp6(3),e.Oqu(e.lcZ(45,52,"WEBHOOK.DESCRIPTION")),e.xp6(3),e.hij(" ",e.lcZ(48,54,"WEBHOOK.NO_WEBHOOK")," "),e.xp6(2),e.Q6J("ngForOf",n.webhookList),e.xp6(2),e.Q6J("clrDgPageSize",n.pageSize)("clrDgPage",n.page)("clrDgTotalItems",n.total),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(60,Le)),e.xp6(1),e.Oqu(e.lcZ(55,56,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",n.total),e.xp6(1),e.AsE(" ",n.total," ",e.lcZ(58,58,"WEBHOOK.ITEMS")," "),e.xp6(2),e.Q6J("ngIf",n.selectedRow),e.xp6(1),e.Q6J("metadata",n.metadata)("projectId",n.projectId))},dependencies:[r.C9t,r.Gwl,r.fv_,r.m4W,r.dRQ,r.YYR,r.Ltv,r.F7K,r.Z4N,r.jND,r.KHL,r.PDs,r.Gcc,r.dml,r.Nh1,r.K8c,r.qvL,r.cCV,r.nqY,r.MPb,r.f_W,r.zwp,r.ZUS,r.lU3,r.EuU,r.hQ,r.QH5,_.sg,_.O5,_.RF,_.n9,Te.z,S,W,O.X$,w.Z],styles:[".label-top[_ngcontent-%COMP%]{top:12px}.icon-wrap[_ngcontent-%COMP%]{height:14px}.webhook-form-wrap[_ngcontent-%COMP%]{width:19rem;margin:0}.create-text[_ngcontent-%COMP%]{margin:0;width:19rem}.create-text-title[_ngcontent-%COMP%]{margin-top:1rem}.endpoint-label[_ngcontent-%COMP%]{font-weight:700}.disabled-btn[_ngcontent-%COMP%]{color:#e12200}.disabled-btn[_ngcontent-%COMP%]:hover{color:#c92100}.enabled-icon[_ngcontent-%COMP%]{margin:-2px 5px 0 0}.center[_ngcontent-%COMP%]{justify-content:center;align-items:center}.cell[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%}.font-size-20[_ngcontent-%COMP%]{font-size:20px}.action-head-pos[_ngcontent-%COMP%]{padding-right:18px;height:100%;display:flex;justify-content:flex-end;align-items:center}.min-width-340[_ngcontent-%COMP%]{min-width:340px!important}.margin-left-10[_ngcontent-%COMP%]{margin-left:10px}.event-types[_ngcontent-%COMP%]{padding-right:14px}.bar-state[_ngcontent-%COMP%]{width:100%}.label-flex[_ngcontent-%COMP%]{width:100%;letter-spacing:0;display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;border:1px solid;border-radius:9px;padding:0 7px 0 10px;text-align:center}.ellipsis-btn[_ngcontent-%COMP%]{min-width:20px;letter-spacing:0;margin:0;margin-top:-.4rem}.width-120[_ngcontent-%COMP%]{width:120px}.refresh-btn[_ngcontent-%COMP%]{cursor:pointer}.refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}"]}),l})();function qe(o,l){1&o&&(e.TgZ(0,"div",34),e._UZ(1,"span",35),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"REPLICATION.IN_PROGRESS")))}function Ue(o,l){1&o&&(e.TgZ(0,"div",36),e._UZ(1,"clr-icon",37),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"REPLICATION.SUCCESS")))}function De(o,l){1&o&&(e.TgZ(0,"div",38),e._UZ(1,"clr-icon",39),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"REPLICATION.FAILURE")))}function Re(o,l){1&o&&e._UZ(0,"clr-icon",44)}function Je(o,l){if(1&o&&(e.TgZ(0,"clr-tooltip-content",45)(1,"span"),e._uU(2),e.qZA()()),2&o){const i=e.oxw().$implicit;e.Q6J("clrPosition","left"),e.xp6(2),e.Oqu(i.status_message)}}function Fe(o,l){if(1&o&&(e.TgZ(0,"a",46),e._UZ(1,"clr-icon",47),e.qZA()),2&o){const i=e.oxw().$implicit,t=e.oxw();e.Q6J("href",t.viewLog(i.id),e.LSH)}}function He(o,l){if(1&o&&(e.TgZ(0,"clr-dg-row",40)(1,"clr-dg-cell"),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell"),e._uU(4),e.qZA(),e.TgZ(5,"clr-dg-cell"),e._uU(6),e.TgZ(7,"clr-tooltip"),e.YNc(8,Re,1,0,"clr-icon",41),e.YNc(9,Je,3,2,"clr-tooltip-content",42),e.qZA()(),e.TgZ(10,"clr-dg-cell"),e._uU(11),e.ALo(12,"harborDatetime"),e.qZA(),e.TgZ(13,"clr-dg-cell"),e.YNc(14,Fe,2,1,"a",43),e.qZA()()),2&o){const i=l.$implicit;e.Q6J("clrDgItem",i),e.xp6(2),e.Oqu(i.id),e.xp6(2),e.Oqu(i.execution_id),e.xp6(2),e.Oqu(i.status),e.xp6(2),e.Q6J("ngIf",i.status_message),e.xp6(3),e.Oqu(e.xi3(12,7,i.creation_time,"short")),e.xp6(3),e.Q6J("ngIf","Initialized"!==i.status)}}function Qe(o,l){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){e.oxw();const i=e.MAs(85);e.xp6(1),e.lnq("",i.firstItem+1," - ",i.lastItem+1," ",e.lcZ(2,3,"REPLICATION.OF"),"")}}const je=function(){return[15,25,50]};let Ke=(()=>{var o;class l{constructor(t,n,s,c){this.route=t,this.router=n,this.webhookService=s,this.messageHandlerService=c,this.tasks=[],this.loading=!0,this.inProgress=!1,this.currentPage=1,this.pageSize=(0,p.tb)(p.V2.WEBHOOK_TASKS_COMPONENT)}ngOnInit(){this.projectId=+this.route.snapshot.parent.parent.params.id,this.policyId=+this.route.snapshot.params.policyId,this.executionId=+this.route.snapshot.params.executionId,this.executionId&&this.getExecutionDetail(!0)}ngOnDestroy(){this.executionTimeout&&(clearTimeout(this.executionTimeout),this.executionTimeout=null),this.timeoutForTaskList&&(clearTimeout(this.timeoutForTaskList),this.timeoutForTaskList=null)}getExecutionDetail(t){t&&(this.inProgress=!0),this.executionId&&this.webhookService.ListExecutionsOfWebhookPolicy({webhookPolicyId:this.policyId,projectNameOrId:this.projectId.toString(),q:encodeURIComponent(`id=${this.executionId}`)}).pipe((0,m.x)(()=>this.inProgress=!1)).subscribe({next:n=>{n?.length&&(this.execution=n[0],(!this.execution||this.execution.status===d.r9.PENDING||this.execution.status===d.r9.RUNNING||this.execution.status===d.r9.SCHEDULED)&&(this.executionTimeout&&(clearTimeout(this.executionTimeout),this.executionTimeout=null),this.executionTimeout||(this.executionTimeout=setTimeout(()=>{this.getExecutionDetail(!1)},d.X8))))},error:n=>{this.messageHandlerService.error(n)}})}clrLoadTasks(t,n){let s,c;t&&(this.state=t),t&&t.page&&(this.pageSize=t.page.size,(0,p.Pe)(p.V2.P2P_TASKS_COMPONENT,this.pageSize)),n&&(this.loading=!0),t&&t.filters&&t.filters.length&&(s=encodeURIComponent(`${t.filters[0].property}=~${t.filters[0].value}`)),c=t&&t.sort&&t.sort.by?(0,p.td)(t):"-creation_time",n&&(this.loading=!0),this.webhookService.ListTasksOfWebhookExecutionResponse({projectNameOrId:this.projectId.toString(),webhookPolicyId:this.policyId,executionId:+this.executionId,page:this.currentPage,pageSize:this.pageSize,sort:c,q:s}).pipe((0,m.x)(()=>{this.loading=!1})).subscribe({next:g=>{if(g.headers){let h=g.headers.get("x-total-count");h&&(this.totalCount=parseInt(h,0))}this.tasks=g.body,this.setLoop()},error:g=>{this.messageHandlerService.error(g)}})}setLoop(){if(this.timeoutForTaskList&&(clearTimeout(this.timeoutForTaskList),this.timeoutForTaskList=null),this.tasks&&this.tasks.length)for(let t=0;t<this.tasks.length;t++)this.willChangStatus(this.tasks[t].status)&&(this.timeoutForTaskList||(this.timeoutForTaskList=setTimeout(()=>{this.clrLoadTasks(this.state,!1)},d.X8)))}willChangStatus(t){return t===d.r9.PENDING||t===d.r9.RUNNING||t===d.r9.SCHEDULED}refreshTasks(){this.clrLoadTasks(this.state,!0)}viewLog(t){return`/api/v2.0/projects/${this.projectId}/webhook/policies/${this.policyId}/executions/${this.executionId}/tasks/${t}/log`}isInProgress(){return this.execution&&this.willChangStatus(this.execution.status)}isSuccess(){return this.execution&&this.execution.status===d.r9.SUCCESS}isFailed(){return this.execution&&(this.execution.status===d.r9.ERROR||this.execution.status===d.r9.STOPPED)}trigger(){return this.execution&&this.execution.trigger?this.execution.trigger:""}startTime(){return this.execution&&this.execution.start_time?this.execution.start_time:null}successNum(){return this.execution&&this.execution.metrics&&this.execution.metrics.success_task_count?this.execution.metrics.success_task_count:0}failedNum(){return this.execution&&this.execution.metrics&&this.execution.metrics.error_task_count?this.execution.metrics.error_task_count:0}progressNum(){return this.execution&&this.execution.metrics&&(this.execution.metrics.pending_task_count?this.execution.metrics.pending_task_count:0)+(this.execution.metrics.running_task_count?this.execution.metrics.running_task_count:0)+(this.execution.metrics.scheduled_task_count?this.execution.metrics.scheduled_task_count:0)||0}stoppedNum(){return this.execution&&this.execution.metrics&&this.execution.metrics.stopped_task_count?this.execution.metrics.stopped_task_count:0}toString(t){return t?JSON.stringify(t):""}}return(o=l).\u0275fac=function(t){return new(t||o)(e.Y36(f.gz),e.Y36(f.F0),e.Y36(k.U),e.Y36(E.d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-tasks"]],decls:92,vars:70,consts:[[1,"replication-tasks","mt-3"],[1,"overview-section"],[1,"title-wrapper"],[1,"title-block"],[1,"first-item"],[1,"custom-h2","h2-style","mt-0"],[1,"id-divider"],["class","status-progress",4,"ngIf"],["class","status-success",4,"ngIf"],["class","status-failed",4,"ngIf"],[1,"execution-block"],[1,"executions-detail"],[1,"flex-block"],[1,"execution-detail-label"],[1,"detail-row"],[1,"num-success","common-style"],[1,"detail-span"],[1,"execution-details"],[1,"num-failed","common-style"],[1,"num-progress","common-style"],[1,"num-stopped","common-style"],[1,"tasks-detail"],[3,"clrDgLoading","clrDgRefresh"],[1,"flex-end"],[1,"modal-title","mt-0"],[1,"refresh-btn"],["shape","refresh",3,"hidden","click"],[3,"clrDgField"],[3,"clrDgSortBy"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgPage","clrDgPageSize","clrDgTotalItems","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],[1,"status-progress"],[1,"spinner","spinner-inline"],[1,"status-success"],["size","18","shape","success-standard",1,"color-green"],[1,"status-failed"],["size","18","shape","error-standard",1,"color-red"],[3,"clrDgItem"],["clrTooltipTrigger","","shape","info-circle","size","20",4,"ngIf"],["clrSize","md",3,"clrPosition",4,"clrIfOpen"],["rel","noopener noreferrer","target","_blank",3,"href",4,"ngIf"],["clrTooltipTrigger","","shape","info-circle","size","20"],["clrSize","md",3,"clrPosition"],["rel","noopener noreferrer","target","_blank",3,"href"],["shape","list"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"h2",5),e._uU(7),e.ALo(8,"translate"),e.qZA(),e._UZ(9,"span",6),e.TgZ(10,"h2",5),e._uU(11),e.qZA()(),e.TgZ(12,"div"),e.YNc(13,qe,5,3,"div",7),e.YNc(14,Ue,5,3,"div",8),e.YNc(15,De,5,3,"div",9),e.qZA()()()(),e.TgZ(16,"div",10)(17,"div",11)(18,"div")(19,"label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"span"),e._uU(23),e.ALo(24,"harborDatetime"),e.qZA()()(),e.TgZ(25,"div",12)(26,"section",13)(27,"section",14),e._UZ(28,"div",15),e.TgZ(29,"label",16),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"div",17),e._uU(33),e.qZA()(),e.TgZ(34,"section",14),e._UZ(35,"div",18),e.TgZ(36,"label",16),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"div",17),e._uU(40),e.qZA()(),e.TgZ(41,"section",14),e._UZ(42,"div",19),e.TgZ(43,"label",16),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.TgZ(46,"div",17),e._uU(47),e.qZA()(),e.TgZ(48,"section",14),e._UZ(49,"div",20),e.TgZ(50,"label",16),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.TgZ(53,"div",17),e._uU(54),e.qZA()()()()()(),e.TgZ(55,"div",21)(56,"clr-datagrid",22),e.NdJ("clrDgRefresh",function(c){return n.clrLoadTasks(c,!0)}),e.TgZ(57,"clr-dg-action-bar")(58,"div",23)(59,"h3",24),e._uU(60),e.ALo(61,"translate"),e.qZA(),e.TgZ(62,"span",25)(63,"clr-icon",26),e.NdJ("click",function(){return n.refreshTasks()}),e.qZA()()()(),e.TgZ(64,"clr-dg-column",27),e._uU(65),e.ALo(66,"translate"),e.qZA(),e.TgZ(67,"clr-dg-column"),e._uU(68),e.ALo(69,"translate"),e.qZA(),e.TgZ(70,"clr-dg-column",28),e._uU(71),e.ALo(72,"translate"),e.qZA(),e.TgZ(73,"clr-dg-column",28),e._uU(74),e.ALo(75,"translate"),e.qZA(),e.TgZ(76,"clr-dg-column"),e._uU(77),e.ALo(78,"translate"),e.qZA(),e.TgZ(79,"clr-dg-placeholder"),e._uU(80),e.ALo(81,"translate"),e.qZA(),e.YNc(82,He,15,10,"clr-dg-row",29),e.TgZ(83,"clr-dg-footer")(84,"clr-dg-pagination",30,31),e.NdJ("clrDgPageChange",function(c){return n.currentPage=c}),e.TgZ(86,"clr-dg-page-size",32),e._uU(87),e.ALo(88,"translate"),e.qZA(),e.YNc(89,Qe,3,5,"span",33),e._uU(90),e.ALo(91,"translate"),e.qZA()()()()()),2&t&&(e.xp6(7),e.hij(" ",e.lcZ(8,36,"P2P_PROVIDER.EXECUTIONS")," "),e.xp6(4),e.hij(" ",n.executionId," "),e.xp6(2),e.Q6J("ngIf",n.execution&&n.isInProgress()),e.xp6(1),e.Q6J("ngIf",n.execution&&n.isSuccess()),e.xp6(1),e.Q6J("ngIf",n.execution&&n.isFailed()),e.xp6(5),e.hij("",e.lcZ(21,38,"REPLICATION.CREATION_TIME")," :"),e.xp6(3),e.Oqu(e.xi3(24,40,n.startTime(),"short")),e.xp6(7),e.Oqu(e.lcZ(31,43,"REPLICATION.SUCCESS")),e.xp6(3),e.Oqu(n.successNum()),e.xp6(4),e.Oqu(e.lcZ(38,45,"REPLICATION.FAILURE")),e.xp6(3),e.Oqu(n.failedNum()),e.xp6(4),e.Oqu(e.lcZ(45,47,"REPLICATION.IN_PROGRESS")),e.xp6(3),e.Oqu(n.progressNum()),e.xp6(4),e.Oqu(e.lcZ(52,49,"REPLICATION.STOPPED")),e.xp6(3),e.Oqu(n.stoppedNum()),e.xp6(2),e.Q6J("clrDgLoading",n.loading),e.xp6(4),e.hij(" ",e.lcZ(61,51,"P2P_PROVIDER.TASKS")," "),e.xp6(3),e.Q6J("hidden",n.loading),e.xp6(1),e.Q6J("clrDgField","id"),e.xp6(1),e.Oqu(e.lcZ(66,53,"REPLICATION.TASK_ID")),e.xp6(3),e.Oqu(e.lcZ(69,55,"P2P_PROVIDER.ID")),e.xp6(2),e.Q6J("clrDgSortBy","status"),e.xp6(1),e.Oqu(e.lcZ(72,57,"DESTINATION.STATUS")),e.xp6(2),e.Q6J("clrDgSortBy","creation_time"),e.xp6(1),e.Oqu(e.lcZ(75,59,"DESTINATION.CREATION_TIME")),e.xp6(3),e.Oqu(e.lcZ(78,61,"REPLICATION.LOGS")),e.xp6(3),e.Oqu(e.lcZ(81,63,"P2P_PROVIDER.TASKS_PLACEHOLDER")),e.xp6(2),e.Q6J("ngForOf",n.tasks),e.xp6(2),e.Q6J("clrDgPage",n.currentPage)("clrDgPageSize",n.pageSize)("clrDgTotalItems",n.totalCount),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(69,je)),e.xp6(1),e.Oqu(e.lcZ(88,65,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",n.totalCount),e.xp6(1),e.AsE(" ",n.totalCount," ",e.lcZ(91,67,"REPLICATION.ITEMS")," "))},dependencies:[r.C9t,r.Gwl,r.fv_,r.m4W,r.dRQ,r.YYR,r.Ltv,r.F7K,r.Z4N,r.jND,r.KHL,r.PDs,r.Gcc,r.dml,r.Nh1,r.K8c,r.qvL,r.nqY,r.MgK,r.Jmj,r.bMv,r.zDF,_.sg,_.O5,O.X$,w.Z],styles:[".replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .onBack[_ngcontent-%COMP%]{color:#007cbb;font-size:14px;cursor:pointer}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%]{display:flex;align-items:center}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{min-width:384px;margin-right:5px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:140px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   span[_ngcontent-%COMP%]{color:#007cbb;font-size:12px;margin-left:10px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%]   .id-divider[_ngcontent-%COMP%]{display:inline-block;height:25px;width:2px;background-color:#ccc;margin:0 20px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%]   .h2-style[_ngcontent-%COMP%]{display:inline-block}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]{margin-top:24px;display:flex;flex-wrap:wrap}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]{margin-right:10px;text-align:left}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;height:27px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .common-style[_ngcontent-%COMP%]{width:12px;height:12px;margin-top:16px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-success[_ngcontent-%COMP%]{background-color:#308700}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-failed[_ngcontent-%COMP%]{background-color:#c92101}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-progress[_ngcontent-%COMP%]{background-color:#1c5898}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-stopped[_ngcontent-%COMP%]{background-color:#a1a1a1}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-span[_ngcontent-%COMP%]{flex:0 0 100px;margin:10px 0 0 10px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .execution-details[_ngcontent-%COMP%]{width:200px;margin:8px 35px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .executions-detail[_ngcontent-%COMP%]{width:391px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .executions-detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;width:120px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .executions-detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:10px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]{margin-top:65px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]{padding-right:18px;height:24px;display:flex;justify-content:flex-end}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]   .filter-tag[_ngcontent-%COMP%]{float:left;margin-top:8px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{cursor:pointer;margin-top:7px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   clr-datagrid[_ngcontent-%COMP%]   .resource-width[_ngcontent-%COMP%]{width:150px}.margin-top-16px[_ngcontent-%COMP%]{margin-top:16px}.flex-end[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.refresh-btn[_ngcontent-%COMP%]{margin-top:6px;cursor:pointer}.filter-tag[_ngcontent-%COMP%]{margin-top:7px}.button-stop[_ngcontent-%COMP%]{margin-top:16px;margin-left:-5px}.refresh-btn[_ngcontent-%COMP%]{margin-right:1rem;margin-bottom:.5rem;cursor:pointer}.flex[_ngcontent-%COMP%]{display:flex}.pre[_ngcontent-%COMP%]{min-width:25rem;max-width:100%}"]}),l})();var U=a(8778);const Be=[{path:":policyId/executions/:executionId/tasks",component:Ke,data:{routeConfigId:U.j.WEBHOOK_TASKS_PAGE}},{path:"",component:We,data:{reuse:!0,routeConfigId:U.j.WEBHOOK_POLICIES_PAGE}}];let Ye=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[C],imports:[f.Bz.forChild(Be),D.m]}),l})()}}]);