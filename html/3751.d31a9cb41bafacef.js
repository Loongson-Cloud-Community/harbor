"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[3751],{6791:(P,v,u)=>{u.d(v,{p:()=>x});var f=u(9862),e=u(3586),b=u(2181),C=u(7398),p=u(5879),M=u(9462);let x=(()=>{var m;class L extends e.b{constructor(g,d){super(g,d)}getInternalconfigResponse(g){let d=this.newParams(),h=new f.WM;null!=g&&(h=h.set("X-Request-Id",g.toString()));let O=new f.aW("GET",this.rootUrl+"/internalconfig",null,{headers:h,params:d,responseType:"json"});return this.http.request(O).pipe((0,b.h)(_=>_ instanceof f.Zn),(0,C.U)(_=>_))}getInternalconfig(g){return this.getInternalconfigResponse(g).pipe((0,C.U)(d=>d.body))}getConfigurationsResponse(g){let d=this.newParams(),h=new f.WM;null!=g&&(h=h.set("X-Request-Id",g.toString()));let O=new f.aW("GET",this.rootUrl+"/configurations",null,{headers:h,params:d,responseType:"json"});return this.http.request(O).pipe((0,b.h)(_=>_ instanceof f.Zn),(0,C.U)(_=>_))}getConfigurations(g){return this.getConfigurationsResponse(g).pipe((0,C.U)(d=>d.body))}updateConfigurationsResponse(g){let d=this.newParams(),h=new f.WM,A=null;A=g.configurations,null!=g.XRequestId&&(h=h.set("X-Request-Id",g.XRequestId.toString()));let O=new f.aW("PUT",this.rootUrl+"/configurations",A,{headers:h,params:d,responseType:"json"});return this.http.request(O).pipe((0,b.h)(_=>_ instanceof f.Zn),(0,C.U)(_=>_))}updateConfigurations(g){return this.updateConfigurationsResponse(g).pipe((0,C.U)(d=>d.body))}}return(m=L).getInternalconfigPath="/internalconfig",m.getConfigurationsPath="/configurations",m.updateConfigurationsPath="/configurations",m.\u0275fac=function(g){return new(g||m)(p.LFG(M.p),p.LFG(f.eN))},m.\u0275prov=p.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),L})()},3751:(P,v,u)=>{u.r(v),u.d(v,{ConfigurationModule:()=>Qe});var f=u(4554),e=u(5879),b=u(6266),C=u(5205),p=u(1691),M=u(4716),x=u(3555),m=u(3612),L=u(6791),I=u(3419);const g="aWpLOSYkIzJTTU4wMDkx";let d=(()=>{var o;class l{constructor(n,t,r,a){this.confirmService=n,this.configureService=t,this.msgHandler=r,this.event=a,this._loadingConfig=!1,this._currentConfig=new C.VK,this._confirmSub=this.confirmService.confirmationConfirm$.subscribe(T=>{T&&1===T.state&&this.resetConfig()})}getConfig(){return this._currentConfig}setConfig(n){this._currentConfig=n}getOriginalConfig(){return this._originalConfig}setOriginalConfig(n){this._originalConfig=n}getLoadingConfigStatus(){return this._loadingConfig}updateConfig(){this._loadingConfig=!0,this.configureService.getConfigurations().pipe((0,M.x)(()=>this._loadingConfig=!1)).subscribe(n=>{this._currentConfig=n,this.event.publish(x.n.REFRESH_BANNER_MESSAGE),this._currentConfig.email_password=new C.ee(g,!0),this._currentConfig.ldap_search_password=new C.ee(g,!0),this._currentConfig.uaa_client_secret=new C.ee(g,!0),this._currentConfig.oidc_client_secret=new C.ee(g,!0),this._originalConfig=(0,p.d9)(this._currentConfig)},n=>{this.msgHandler.handleError(n)})}resetConfig(){this._originalConfig&&(this._currentConfig=(0,p.d9)(this._originalConfig))}confirmUnsavedChanges(n){let t=new b.c("CONFIG.CONFIRM_TITLE","CONFIG.CONFIRM_SUMMARY","",n,10);this.confirmService.openComfirmDialog(t)}saveConfiguration(n){return this.configureService.updateConfigurations({configurations:n})}}return(o=l).\u0275fac=function(n){return new(n||o)(e.LFG(m.O),e.LFG(L.p),e.LFG(I.d),e.LFG(x.P))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac}),l})();var h=u(2787),A=u(9515);let O=(()=>{var o;class l{get inProgress(){return this.conf.getLoadingConfigStatus()}constructor(n){this.conf=n}ngOnInit(){this.conf.updateConfig()}}return(o=l).\u0275fac=function(n){return new(n||o)(e.Y36(d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["config"]],decls:20,vars:13,consts:[[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"custom-h2","config-title"],[1,"spinner","spinner-inline","ml-1","v-mid",3,"hidden"],["role","tablist",1,"nav"],["role","presentation",1,"nav-item"],["id","config-auth","type","button","routerLink","auth","routerLinkActive","active",1,"btn","btn-link","nav-link"],["id","config-security","type","button","routerLink","security","routerLinkActive","active",1,"btn","btn-link","nav-link"],["id","config-system","type","button","routerLink","setting","routerLinkActive","active",1,"btn","btn-link","nav-link"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e._UZ(5,"span",3),e.qZA(),e.TgZ(6,"ul",4)(7,"li",5)(8,"button",6),e._uU(9),e.ALo(10,"translate"),e.qZA()(),e.TgZ(11,"li",5)(12,"button",7),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"li",5)(16,"button",8),e._uU(17),e.ALo(18,"translate"),e.qZA()()()()(),e._UZ(19,"router-outlet")),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,5,"CONFIG.TITLE"),""),e.xp6(2),e.Q6J("hidden",!1===t.inProgress),e.xp6(4),e.hij(" ",e.lcZ(10,7,"CONFIG.AUTH")," "),e.xp6(4),e.hij(" ",e.lcZ(14,9,"CONFIG.SECURITY")," "),e.xp6(4),e.hij(" ",e.lcZ(18,11,"CONFIG.SYSTEM")," "))},dependencies:[h.lC,h.rH,h.Od,A.X$],styles:[".config-title[_ngcontent-%COMP%]{display:inline-block}.tooltip-position[_ngcontent-%COMP%]{top:-7px}.clr-form-control-disabled[_ngcontent-%COMP%]{opacity:1}.v-mid[_ngcontent-%COMP%]{vertical-align:middle}"]}),l})();var _=u(27),q=u(3924),D=u(7342),S=u(6682),U=u(2141),s=u(6223),c=u(8280),Z=u(6814);const G=["authConfigFrom"];function w(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.AUTH_MODE")))}function F(o,l){1&o&&(e.TgZ(0,"option",21),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CONFIG.AUTH_MODE_HTTP")," "))}function R(o,l){1&o&&(e.TgZ(0,"a",22),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"BUTTON.MORE_INFO")))}function J(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.PRIMARY_AUTH_MODE")))}function k(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"section")(1,"clr-checkbox-container")(2,"label",23),e._uU(3),e.ALo(4,"translate"),e.TgZ(5,"clr-tooltip"),e._UZ(6,"clr-icon",4),e.YNc(7,J,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(8,"clr-checkbox-wrapper")(9,"input",24),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.primary_auth_mode.value=t)}),e.qZA()()()()}if(2&o){const i=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,3,"CONFIG.PRIMARY_AUTH_MODE")," "),e.xp6(6),e.Q6J("ngModel",i.currentConfig.primary_auth_mode.value)("disabled",!i.currentConfig.primary_auth_mode.editable)}}function H(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"section")(1,"clr-input-container")(2,"label",25),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",26),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.uaa_endpoint.value=t)}),e.qZA()(),e.TgZ(6,"clr-input-container")(7,"label",27),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"input",28),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.uaa_client_id.value=t)}),e.qZA()(),e.TgZ(11,"clr-input-container")(12,"label",29),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"input",30),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.uaa_client_secret.value=t)}),e.qZA()(),e.TgZ(16,"clr-checkbox-container")(17,"label",31),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"clr-checkbox-wrapper")(21,"input",32),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.uaa_verify_cert.value=t)}),e.qZA()()()()}if(2&o){const i=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,12,"CONFIG.UAA.ENDPOINT")),e.xp6(2),e.Q6J("ngModel",i.currentConfig.uaa_endpoint.value)("disabled",!i.currentConfig.uaa_verify_cert.editable),e.xp6(3),e.Oqu(e.lcZ(9,14,"CONFIG.UAA.CLIENT_ID")),e.xp6(2),e.Q6J("ngModel",i.currentConfig.uaa_client_id.value)("disabled",!i.currentConfig.uaa_verify_cert.editable),e.xp6(3),e.Oqu(e.lcZ(14,16,"CONFIG.UAA.CLIENT_SECRET")),e.xp6(2),e.Q6J("ngModel",i.currentConfig.uaa_client_secret.value)("disabled",!i.currentConfig.uaa_verify_cert.editable),e.xp6(3),e.Oqu(e.lcZ(19,18,"CONFIG.UAA.VERIFY_CERT")),e.xp6(3),e.Q6J("ngModel",i.currentConfig.uaa_verify_cert.value)("disabled",!i.currentConfig.uaa_verify_cert.editable)}}function Q(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.LDAP_SEARCH_DN")))}function Y(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.LDAP_BASE_DN")))}function j(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.LDAP_UID")))}function K(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.LDAP_SCOPE")))}function B(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.LDAP.LDAP_GROUP_BASE_DN_INFO")))}function V(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.LDAP.LDAP_GROUP_FILTER_INFO")))}function z(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.LDAP.LDAP_GROUP_GID_INFO")))}function W(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.LDAP.LDAP_GROUP_ADMIN_DN_INFO")))}function X(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.LDAP.LDAP_GROUP_MEMBERSHIP_INFO")))}function $(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.LDAP.GROUP_SCOPE_INFO")))}function ee(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"section")(1,"clr-input-container")(2,"label",33),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",34,35),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_url.value=t)}),e.qZA(),e.TgZ(7,"clr-control-error"),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"clr-input-container")(11,"label",36),e._uU(12),e.ALo(13,"translate"),e.TgZ(14,"clr-tooltip"),e._UZ(15,"clr-icon",4),e.YNc(16,Q,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(17,"input",37,38),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_search_dn.value=t)}),e.qZA()(),e.TgZ(19,"clr-input-container")(20,"label",39),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"input",40,41),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_search_password.value=t)}),e.qZA()(),e.TgZ(25,"clr-input-container")(26,"label",42),e._uU(27),e.ALo(28,"translate"),e.TgZ(29,"clr-tooltip"),e._UZ(30,"clr-icon",4),e.YNc(31,Y,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(32,"input",43,44),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_base_dn.value=t)}),e.qZA(),e.TgZ(34,"clr-control-error"),e._uU(35),e.ALo(36,"translate"),e.qZA()(),e.TgZ(37,"clr-input-container")(38,"label",45),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"input",46,47),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_filter.value=t)}),e.qZA()(),e.TgZ(43,"clr-input-container")(44,"label",48),e._uU(45),e.ALo(46,"translate"),e.TgZ(47,"clr-tooltip"),e._UZ(48,"clr-icon",4),e.YNc(49,j,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(50,"input",49,50),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_uid.value=t)}),e.qZA(),e.TgZ(52,"clr-control-error"),e._uU(53),e.ALo(54,"translate"),e.qZA()(),e.TgZ(55,"clr-select-container")(56,"label",51),e._uU(57),e.ALo(58,"translate"),e.TgZ(59,"clr-tooltip"),e._UZ(60,"clr-icon",4),e.YNc(61,K,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(62,"select",52),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_scope.value=t)}),e.TgZ(63,"option",53),e._uU(64),e.ALo(65,"translate"),e.qZA(),e.TgZ(66,"option",54),e._uU(67),e.ALo(68,"translate"),e.qZA(),e.TgZ(69,"option",55),e._uU(70),e.ALo(71,"translate"),e.qZA()()(),e.TgZ(72,"clr-input-container")(73,"label",56),e._uU(74),e.ALo(75,"translate"),e.TgZ(76,"clr-tooltip"),e._UZ(77,"clr-icon",4),e.YNc(78,B,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(79,"input",57,58),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_group_base_dn.value=t)}),e.qZA()(),e.TgZ(81,"clr-input-container")(82,"label",59),e._uU(83),e.ALo(84,"translate"),e.TgZ(85,"clr-tooltip"),e._UZ(86,"clr-icon",4),e.YNc(87,V,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(88,"input",60,61),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_group_search_filter.value=t)}),e.qZA()(),e.TgZ(90,"clr-input-container")(91,"label",62),e._uU(92),e.ALo(93,"translate"),e.TgZ(94,"clr-tooltip"),e._UZ(95,"clr-icon",4),e.YNc(96,z,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(97,"input",63,58),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_group_attribute_name.value=t)}),e.qZA()(),e.TgZ(99,"clr-input-container")(100,"label",64),e._uU(101),e.ALo(102,"translate"),e.TgZ(103,"clr-tooltip"),e._UZ(104,"clr-icon",4),e.YNc(105,W,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(106,"input",65,61),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_group_admin_dn.value=t)}),e.qZA()(),e.TgZ(108,"clr-input-container")(109,"label",64),e._uU(110),e.ALo(111,"translate"),e.TgZ(112,"clr-tooltip"),e._UZ(113,"clr-icon",4),e.YNc(114,X,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(115,"input",66,61),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_group_membership_attribute.value=t)}),e.qZA()(),e.TgZ(117,"clr-select-container")(118,"label",67),e._uU(119),e.ALo(120,"translate"),e.TgZ(121,"clr-tooltip"),e._UZ(122,"clr-icon",4),e.YNc(123,$,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(124,"select",68),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.ldap_group_search_scope.value=t)}),e.TgZ(125,"option",53),e._uU(126),e.ALo(127,"translate"),e.qZA(),e.TgZ(128,"option",54),e._uU(129),e.ALo(130,"translate"),e.qZA(),e.TgZ(131,"option",55),e._uU(132),e.ALo(133,"translate"),e.qZA()()()()}if(2&o){const i=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,48,"CONFIG.LDAP.URL")," "),e.xp6(2),e.Q6J("ngModel",i.currentConfig.ldap_url.value)("disabled",i.disabled(i.currentConfig.ldap_url)),e.xp6(3),e.Oqu(e.lcZ(9,50,"TOOLTIP.ITEM_REQUIRED")),e.xp6(4),e.hij("",e.lcZ(13,52,"CONFIG.LDAP.SEARCH_DN")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.ldap_search_dn.value)("disabled",i.disabled(i.currentConfig.ldap_search_dn)),e.xp6(4),e.Oqu(e.lcZ(22,54,"CONFIG.LDAP.SEARCH_PWD")),e.xp6(2),e.Q6J("ngModel",i.currentConfig.ldap_search_password.value)("disabled",i.disabled(i.currentConfig.ldap_search_dn)),e.xp6(4),e.hij("",e.lcZ(28,56,"CONFIG.LDAP.BASE_DN")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.ldap_base_dn.value)("disabled",i.disabled(i.currentConfig.ldap_base_dn)),e.xp6(3),e.Oqu(e.lcZ(36,58,"TOOLTIP.ITEM_REQUIRED")),e.xp6(4),e.Oqu(e.lcZ(40,60,"CONFIG.LDAP.FILTER")),e.xp6(2),e.Q6J("ngModel",i.currentConfig.ldap_filter.value)("disabled",i.disabled(i.currentConfig.ldap_filter)),e.xp6(4),e.hij("",e.lcZ(46,62,"CONFIG.LDAP.UID")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.ldap_uid.value)("disabled",i.disabled(i.currentConfig.ldap_uid)),e.xp6(3),e.Oqu(e.lcZ(54,64,"TOOLTIP.ITEM_REQUIRED")),e.xp6(4),e.hij("",e.lcZ(58,66,"CONFIG.LDAP.SCOPE")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.ldap_scope.value)("disabled",i.disabled(i.currentConfig.ldap_scope)),e.xp6(2),e.Oqu(e.lcZ(65,68,"CONFIG.SCOPE_BASE")),e.xp6(3),e.hij(" ",e.lcZ(68,70,"CONFIG.SCOPE_ONE_LEVEL")," "),e.xp6(3),e.hij(" ",e.lcZ(71,72,"CONFIG.SCOPE_SUBTREE")," "),e.xp6(4),e.hij("",e.lcZ(75,74,"CONFIG.LDAP.LDAP_GROUP_BASE_DN")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.ldap_group_base_dn.value)("disabled",i.disabled(i.currentConfig.ldap_group_base_dn)),e.xp6(4),e.hij("",e.lcZ(84,76,"CONFIG.LDAP.LDAP_GROUP_FILTER")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.ldap_group_search_filter.value)("disabled",i.disabled(i.currentConfig.ldap_group_search_filter)),e.xp6(4),e.hij("",e.lcZ(93,78,"CONFIG.LDAP.LDAP_GROUP_GID")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.ldap_group_attribute_name.value)("disabled",i.disabled(i.currentConfig.ldap_group_attribute_name)),e.xp6(4),e.hij("",e.lcZ(102,80,"CONFIG.LDAP.LDAP_GROUP_ADMIN_DN")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.ldap_group_admin_dn.value)("disabled",i.disabled(i.currentConfig.ldap_group_admin_dn)),e.xp6(4),e.hij("",e.lcZ(111,82,"CONFIG.LDAP.LDAP_GROUP_MEMBERSHIP")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.ldap_group_membership_attribute.value)("disabled",i.disabled(i.currentConfig.ldap_group_membership_attribute)),e.xp6(4),e.hij("",e.lcZ(120,84,"CONFIG.LDAP.GROUP_SCOPE")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.ldap_group_search_scope.value)("disabled",i.disabled(i.currentConfig.ldap_group_search_scope)),e.xp6(2),e.Oqu(e.lcZ(127,86,"CONFIG.SCOPE_BASE")),e.xp6(3),e.hij(" ",e.lcZ(130,88,"CONFIG.SCOPE_ONE_LEVEL")," "),e.xp6(3),e.hij(" ",e.lcZ(133,90,"CONFIG.SCOPE_SUBTREE")," ")}}function te(o,l){1&o&&(e.TgZ(0,"span",73),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CONFIG.TOOLTIP.SELF_REGISTRATION_ENABLE")))}function ne(o,l){1&o&&(e.TgZ(0,"span",73),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CONFIG.TOOLTIP.SELF_REGISTRATION_DISABLE")))}function oe(o,l){if(1&o&&(e.TgZ(0,"clr-tooltip-content",20),e.YNc(1,te,3,3,"span",71),e.YNc(2,ne,3,3,"ng-template",null,72,e.W1O),e.qZA()),2&o){const i=e.MAs(3),n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.checkable)("ngIfElse",i)}}function ie(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"clr-checkbox-container")(1,"label",69),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"clr-tooltip"),e._UZ(5,"clr-icon",4),e.YNc(6,oe,4,2,"clr-tooltip-content",5),e.qZA()(),e.TgZ(7,"clr-checkbox-wrapper")(8,"input",70),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.self_registration.value=t)}),e.qZA()()()}if(2&o){const i=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,3,"CONFIG.SELF_REGISTRATION")," "),e.xp6(6),e.Q6J("ngModel",i.currentConfig.self_registration.value)("disabled",i.disabled(i.currentConfig.self_registration))}}function re(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.VERIFY_CERT")))}function le(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"section")(1,"clr-checkbox-container")(2,"label",74),e._uU(3),e.ALo(4,"translate"),e.TgZ(5,"clr-tooltip"),e._UZ(6,"clr-icon",4),e.YNc(7,re,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(8,"clr-checkbox-wrapper")(9,"input",75),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.setVerifyCertValue(t))}),e.qZA()()()()}if(2&o){const i=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,3,"CONFIG.LDAP.VERIFY_CERT")," "),e.xp6(6),e.Q6J("ngModel",i.currentConfig.ldap_verify_cert.value)("disabled",i.disabled(i.currentConfig.ldap_scope))}}function ae(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"section")(1,"clr-input-container")(2,"label",76),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",77,78),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.http_authproxy_endpoint.value=t)}),e.qZA(),e.TgZ(7,"clr-control-error"),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"clr-input-container")(11,"label",79),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"input",80,81),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.http_authproxy_tokenreview_endpoint.value=t)}),e.qZA(),e.TgZ(16,"clr-control-error"),e._uU(17),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"clr-input-container")(20,"label",82),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"input",83,84),e.NdJ("blur",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.trimSpace(t))})("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.http_authproxy_admin_groups.value=t)}),e.qZA()(),e.TgZ(25,"clr-checkbox-container",85)(26,"label",86),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"clr-checkbox-wrapper")(30,"input",87),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.http_authproxy_verify_cert.value=t)}),e.qZA()()(),e.TgZ(31,"clr-checkbox-container",85)(32,"label",88),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"clr-checkbox-wrapper")(36,"input",89),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.http_authproxy_skip_search.value=t)}),e.qZA()()()()}if(2&o){const i=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,17,"CONFIG.HTTP_AUTH.ENDPOINT")),e.xp6(2),e.Q6J("ngModel",i.currentConfig.http_authproxy_endpoint.value)("disabled",!i.currentConfig.http_authproxy_endpoint.editable),e.xp6(3),e.Oqu(e.lcZ(9,19,"TOOLTIP.ENDPOINT_FORMAT")),e.xp6(4),e.Oqu(e.lcZ(13,21,"CONFIG.HTTP_AUTH.TOKEN_REVIEW")),e.xp6(2),e.Q6J("ngModel",i.currentConfig.http_authproxy_tokenreview_endpoint.value)("disabled",!i.currentConfig.http_authproxy_tokenreview_endpoint.editable),e.xp6(3),e.Oqu(e.lcZ(18,23,"TOOLTIP.ENDPOINT_FORMAT")),e.xp6(4),e.Oqu(e.lcZ(22,25,"CONFIG.HTTP_AUTH.ADMIN_GROUPS")),e.xp6(2),e.Q6J("ngModel",i.currentConfig.http_authproxy_admin_groups.value)("disabled",i.disabled(i.currentConfig.http_authproxy_admin_groups)),e.xp6(4),e.Oqu(e.lcZ(28,27,"CONFIG.HTTP_AUTH.VERIFY_CERT")),e.xp6(3),e.Q6J("ngModel",i.currentConfig.http_authproxy_verify_cert.value)("disabled",!i.currentConfig.http_authproxy_verify_cert.editable),e.xp6(3),e.Oqu(e.lcZ(34,29,"CONFIG.HTTP_AUTH.SKIP_SEARCH")),e.xp6(3),e.Q6J("disabled",!i.currentConfig.http_authproxy_skip_search.editable)("ngModel",i.currentConfig.http_authproxy_skip_search.value)}}function ce(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.OIDC_NAME")))}function se(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.OIDC_ENDPOINT")))}function ue(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.OIDC.OIDC_GROUP_FILTER_INFO")))}function _e(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.OIDC.GROUP_CLAIM_NAME_INFO")))}function ge(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.OIDC.OIDC_ADMIN_GROUP_INFO")))}function pe(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.OIDC_SCOPE")))}function de(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.OIDC_VERIFYCERT")))}function Ce(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.OIDC_AUTOONBOARD")))}function he(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",20)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.OIDC_USER_CLAIM")))}function fe(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"section")(1,"clr-input-container")(2,"label",90),e._uU(3),e.ALo(4,"translate"),e.TgZ(5,"clr-tooltip"),e._UZ(6,"clr-icon",4),e.YNc(7,ce,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(8,"input",91,92),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.oidc_name.value=t)}),e.qZA(),e.TgZ(10,"clr-control-error"),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.TgZ(13,"clr-input-container")(14,"label",93),e._uU(15),e.ALo(16,"translate"),e.TgZ(17,"clr-tooltip"),e._UZ(18,"clr-icon",4),e.YNc(19,se,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(20,"input",94,95),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.oidc_endpoint.value=t)}),e.qZA(),e.TgZ(22,"clr-control-error"),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"clr-input-container")(26,"label",96),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"input",97,98),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.oidc_client_id.value=t)}),e.qZA(),e.TgZ(31,"clr-control-error"),e._uU(32),e.ALo(33,"translate"),e.qZA()(),e.TgZ(34,"clr-input-container")(35,"label",99),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"input",100,101),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.oidc_client_secret.value=t)}),e.qZA(),e.TgZ(40,"clr-control-error"),e._uU(41),e.ALo(42,"translate"),e.qZA()(),e.TgZ(43,"clr-input-container")(44,"label",102),e._uU(45),e.ALo(46,"translate"),e.TgZ(47,"clr-tooltip"),e._UZ(48,"clr-icon",4),e.YNc(49,ue,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(50,"input",103,104),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.oidc_group_filter.value=t)}),e.qZA()(),e.TgZ(52,"clr-input-container")(53,"label",105),e._uU(54),e.ALo(55,"translate"),e.TgZ(56,"clr-tooltip"),e._UZ(57,"clr-icon",4),e.YNc(58,_e,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(59,"input",106,107),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.oidc_groups_claim.value=t)}),e.qZA()(),e.TgZ(61,"clr-input-container")(62,"label",108),e._uU(63),e.ALo(64,"translate"),e.TgZ(65,"clr-tooltip"),e._UZ(66,"clr-icon",4),e.YNc(67,ge,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(68,"input",109,110),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.oidc_admin_group.value=t)}),e.qZA()(),e.TgZ(70,"clr-input-container")(71,"label",111),e._uU(72),e.ALo(73,"translate"),e.TgZ(74,"clr-tooltip"),e._UZ(75,"clr-icon",4),e.YNc(76,pe,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(77,"input",112,113),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.oidc_scope.value=t)}),e.qZA(),e.TgZ(79,"clr-control-error"),e._uU(80),e.ALo(81,"translate"),e.qZA()(),e.TgZ(82,"clr-checkbox-container")(83,"label",114),e._uU(84),e.ALo(85,"translate"),e.TgZ(86,"clr-tooltip"),e._UZ(87,"clr-icon",4),e.YNc(88,de,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(89,"clr-checkbox-wrapper")(90,"input",115),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.oidc_verify_cert.value=t)}),e.qZA()()(),e.TgZ(91,"clr-checkbox-container")(92,"label",116),e._uU(93),e.ALo(94,"translate"),e.TgZ(95,"clr-tooltip"),e._UZ(96,"clr-icon",4),e.YNc(97,Ce,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(98,"clr-checkbox-wrapper")(99,"input",117),e.NdJ("change",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.changeAutoOnBoard())})("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.oidc_auto_onboard.value=t)}),e.qZA()()(),e.TgZ(100,"clr-input-container")(101,"label",118),e._uU(102),e.ALo(103,"translate"),e.TgZ(104,"clr-tooltip"),e._UZ(105,"clr-icon",4),e.YNc(106,he,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(107,"input",119,120),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.currentConfig.oidc_user_claim.value=t)}),e.qZA()(),e.TgZ(109,"div",121),e._uU(110),e.ALo(111,"translate"),e.TgZ(112,"span"),e._uU(113),e.qZA()()()}if(2&o){const i=e.oxw();e.xp6(3),e.hij("",e.lcZ(4,40,"CONFIG.OIDC.OIDC_PROVIDER")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.oidc_name.value)("disabled",i.disabled(i.currentConfig.oidc_name)),e.xp6(3),e.Oqu(e.lcZ(12,42,"TOOLTIP.ITEM_REQUIRED")),e.xp6(4),e.hij("",e.lcZ(16,44,"CONFIG.OIDC.ENDPOINT")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.oidc_endpoint.value)("disabled",i.disabled(i.currentConfig.oidc_endpoint)),e.xp6(3),e.Oqu(e.lcZ(24,46,"TOOLTIP.OIDC_ENDPOINT_FORMAT")),e.xp6(4),e.Oqu(e.lcZ(28,48,"CONFIG.OIDC.CLIENT_ID")),e.xp6(2),e.Q6J("ngModel",i.currentConfig.oidc_client_id.value)("disabled",i.disabled(i.currentConfig.oidc_client_id)),e.xp6(3),e.Oqu(e.lcZ(33,50,"TOOLTIP.ITEM_REQUIRED")),e.xp6(4),e.Oqu(e.lcZ(37,52,"CONFIG.OIDC.CLIENTSECRET")),e.xp6(2),e.Q6J("ngModel",i.currentConfig.oidc_client_secret.value)("disabled",i.disabled(i.currentConfig.oidc_client_secret)),e.xp6(3),e.Oqu(e.lcZ(42,54,"TOOLTIP.ITEM_REQUIRED")),e.xp6(4),e.hij("",e.lcZ(46,56,"CONFIG.OIDC.OIDC_GROUP_FILTER")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.oidc_group_filter.value)("disabled",i.disabled(i.currentConfig.oidc_group_filter)),e.xp6(4),e.hij("",e.lcZ(55,58,"CONFIG.OIDC.GROUP_CLAIM_NAME")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.oidc_groups_claim.value)("disabled",i.disabled(i.currentConfig.oidc_groups_claim)),e.xp6(4),e.hij("",e.lcZ(64,60,"CONFIG.OIDC.OIDC_ADMIN_GROUP")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.oidc_admin_group.value)("disabled",i.disabled(i.currentConfig.oidc_admin_group)),e.xp6(4),e.hij("",e.lcZ(73,62,"CONFIG.OIDC.SCOPE")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.oidc_scope.value)("disabled",i.disabled(i.currentConfig.oidc_scope)),e.xp6(3),e.Oqu(e.lcZ(81,64,"TOOLTIP.SCOPE_REQUIRED")),e.xp6(4),e.hij("",e.lcZ(85,66,"CONFIG.OIDC.OIDC_VERIFYCERT")," "),e.xp6(6),e.Q6J("disabled",i.disabled(i.currentConfig.oidc_verify_cert))("ngModel",i.currentConfig.oidc_verify_cert.value),e.xp6(3),e.hij("",e.lcZ(94,68,"CONFIG.OIDC.OIDC_AUTOONBOARD")," "),e.xp6(6),e.Q6J("disabled",i.disabled(i.currentConfig.oidc_auto_onboard))("ngModel",i.currentConfig.oidc_auto_onboard.value),e.xp6(3),e.hij("",e.lcZ(103,70,"CONFIG.OIDC.USER_CLAIM")," "),e.xp6(5),e.Q6J("ngModel",i.currentConfig.oidc_user_claim.value)("disabled",!i.currentConfig.oidc_auto_onboard.value||i.disabled(i.currentConfig.oidc_user_claim)),e.xp6(3),e.hij(" ",e.lcZ(111,72,"CONFIG.OIDC.OIDC_REDIREC_URL")," "),e.xp6(3),e.hij("",i.redirectUrl,"/c/oidc/callback")}}function me(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"button",122),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.pingTestServer())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const i=e.oxw();e.Q6J("disabled",!i.isConfigValidForTesting()),e.xp6(1),e.hij(" ",e.lcZ(2,2,i.showLdap?"BUTTON.TEST_LDAP":"BUTTON.TEST_OIDC")," ")}}let Ae=(()=>{var o;class l{get currentConfig(){return this.conf.getConfig()}set currentConfig(n){this.conf.setConfig(n)}constructor(n,t,r,a,T){this.msgHandler=n,this.configService=t,this.appConfigService=r,this.conf=a,this.systemInfo=T,this.testingOnGoing=!1,this.onGoing=!1}ngOnInit(){this.conf.resetConfig(),this.getSystemInfo()}getSystemInfo(){this.systemInfo.getSystemInfo().subscribe(n=>this.redirectUrl=n.external_url,n=>this.msgHandler.error(n))}get checkable(){return this.currentConfig&&this.currentConfig.self_registration&&!0===this.currentConfig.self_registration.value}get showLdap(){return this.currentConfig&&this.currentConfig.auth_mode&&this.currentConfig.auth_mode.value===_.Au.LDAP_AUTH}get showUAA(){return this.currentConfig&&this.currentConfig.auth_mode&&this.currentConfig.auth_mode.value===_.Au.UAA_AUTH}get showOIDC(){return this.currentConfig&&this.currentConfig.auth_mode&&this.currentConfig.auth_mode.value===_.Au.OIDC_AUTH}get showHttpAuth(){return this.currentConfig&&this.currentConfig.auth_mode&&this.currentConfig.auth_mode.value===_.Au.HTTP_AUTH}get showSelfReg(){return!this.currentConfig||!this.currentConfig.auth_mode||this.currentConfig.auth_mode.value!==_.Au.LDAP_AUTH&&this.currentConfig.auth_mode.value!==_.Au.UAA_AUTH&&this.currentConfig.auth_mode.value!==_.Au.HTTP_AUTH&&this.currentConfig.auth_mode.value!==_.Au.OIDC_AUTH}isValid(){return this.authForm&&this.authForm.valid}inProcess(){return this.onGoing||this.conf.getLoadingConfigStatus()}hasChanges(){return!(0,p.xb)(this.getChanges())}setVerifyCertValue(n){this.currentConfig.ldap_verify_cert.value=n}pingTestServer(){if(this.testingOnGoing)return;let n={};if(this.currentConfig.auth_mode.value===_.Au.LDAP_AUTH){for(let a in this.currentConfig)a.startsWith("ldap_")&&(n[a]=this.currentConfig[a].value);let t=this.getChanges();this.testingOnGoing=!0;let r=t.ldap_search_password;r?n.ldap_search_password=r:delete n.ldap_search_password,n.ldap_scope=+n.ldap_scope,this.configService.testLDAPServer(n).pipe((0,M.x)(()=>this.testingOnGoing=!1)).subscribe(a=>{a&&a.success?this.msgHandler.showSuccess("CONFIG.TEST_LDAP_SUCCESS"):a&&a.message&&this.msgHandler.showError("CONFIG.TEST_LDAP_FAILED",{param:a.message})},a=>{let T=(0,q.Po)(a);(!T||!T.trim())&&(T="UNKNOWN"),this.msgHandler.showError("CONFIG.TEST_LDAP_FAILED",{param:T})})}else{for(let t in this.currentConfig)"oidc_endpoint"===t?n.url=this.currentConfig[t].value:"oidc_verify_cert"===t&&(n.verify_cert=this.currentConfig[t].value);this.testingOnGoing=!0,this.configService.testOIDCServer(n).subscribe(t=>{this.testingOnGoing=!1,this.msgHandler.showSuccess("CONFIG.TEST_OIDC_SUCCESS")},t=>{this.testingOnGoing=!1,this.msgHandler.error(t)})}}get showTestingServerBtn(){return this.currentConfig.auth_mode&&(this.currentConfig.auth_mode.value===_.Au.LDAP_AUTH||this.currentConfig.auth_mode.value===_.Au.OIDC_AUTH)}isConfigValidForTesting(){return!this.authForm||!this.currentConfig||this.isValid()&&!this.testingOnGoing&&!this.inProcess()}getChanges(){let n=(0,p.My)(this.conf.getOriginalConfig(),this.currentConfig),t={};for(let r in n)(r.startsWith("ldap_")||r.startsWith("uaa_")||r.startsWith("oidc_")||"auth_mode"===r||"project_creattion_restriction"===r||"primary_auth_mode"===r||"self_registration"===r||r.startsWith("http_"))&&(t[r]=n[r]);return t}get hideTestingSpinner(){return!this.testingOnGoing||!this.showTestingServerBtn}disabled(n){return!(n&&n.editable)}handleOnChange(n){if(n&&n.target&&n.target.value){let t=n.target.value;(t===_.Au.LDAP_AUTH||t===_.Au.UAA_AUTH||t===_.Au.HTTP_AUTH||t===_.Au.OIDC_AUTH)&&this.currentConfig.self_registration.value&&(this.currentConfig.self_registration.value=!1)}}save(){let n=this.getChanges();(0,p.xb)(n)?console.error("Save abort because nothing changed"):(this.onGoing=!0,this.configService.saveConfiguration(n).subscribe(t=>{this.onGoing=!1,this.conf.updateConfig(),this.appConfigService.load().subscribe(()=>{},r=>console.error("Failed to reload bootstrap option with error: ",r)),this.msgHandler.showSuccess("CONFIG.SAVE_SUCCESS")},t=>{this.onGoing=!1,this.msgHandler.handleError(t)}))}cancel(){let n=this.getChanges();(0,p.xb)(n)?console.error("Nothing changed"):this.conf.confirmUnsavedChanges(n)}changeAutoOnBoard(){this.currentConfig.oidc_auto_onboard.value||(this.currentConfig.oidc_user_claim.value="")}trimSpace(n){n&&n.target&&(n.target.value=n.target.value?n.target.value.trim():"")}}return(o=l).\u0275fac=function(n){return new(n||o)(e.Y36(I.d),e.Y36(D.e),e.Y36(S._),e.Y36(d),e.Y36(U.Ob))},o.\u0275cmp=e.Xpm({type:o,selectors:[["config-auth"]],viewQuery:function(n,t){if(1&n&&e.Gf(G,5),2&n){let r;e.iGM(r=e.CRH())&&(t.authForm=r.first)}},decls:42,vars:36,consts:[[1,"clr-form","clr-form-horizontal"],["authConfigFrom","ngForm"],[1,"clr-form-control"],["for","authMode",1,"clr-control-label"],["clrTooltipTrigger","","shape","info-circle","size","24"],["clrPosition","top-right","clrSize","lg",4,"clrIfOpen"],[1,"clr-control-container"],[1,"clr-select-wrapper"],["id","authMode","name","authMode",1,"clr-select",3,"disabled","ngModel","change","ngModelChange"],["value","db_auth"],["value","ldap_auth"],["value","uaa_auth"],["value","http_auth",4,"ngIf"],["value","oidc_auth"],["rel","noopener noreferrer","href","https://openid.net/connect/","target","_blank","class","more-info-link",4,"ngIf"],[4,"ngIf"],["type","button","id","config_auth_save",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-outline",3,"disabled","click"],["type","button","id","ping-test","class","btn btn-outline",3,"disabled","click",4,"ngIf"],["id","forTestingLDAP",1,"spinner","spinner-inline",3,"hidden"],["clrPosition","top-right","clrSize","lg"],["value","http_auth"],["rel","noopener noreferrer","href","https://openid.net/connect/","target","_blank",1,"more-info-link"],["for","primaryAuthMode"],["type","checkbox","clrCheckbox","","name","primaryAuthMode","id","primaryAuthMode",3,"ngModel","disabled","ngModelChange"],["for","uaa-endpoint",1,"required"],["type","text","id","uaa-endpoint","clrInput","","name","uaa-endpoint","size","35",3,"ngModel","disabled","ngModelChange"],["for","uaa-id",1,"required"],["clrInput","","type","text","id","uaa-id","name","uaa-client-id","size","35",3,"ngModel","disabled","ngModelChange"],["for","uaa-secret",1,"required"],["clrInput","","id","uaa-secret","name","uaa-client-secret","type","password","size","35",3,"ngModel","disabled","ngModelChange"],["for","uaa-cert"],["type","checkbox","clrCheckbox","","name","uaa-cert","id","uaa-cert",3,"ngModel","disabled","ngModelChange"],["for","ldapUrl",1,"required"],["clrInput","","name","ldapUrl","type","text","required","","id","ldapUrl","size","40",3,"ngModel","disabled","ngModelChange"],["ldapUrlInput","ngModel"],["for","ldapSearchDN",1,"required"],["clrInput","","name","ldapSearchDN","type","text","id","ldapSearchDN","size","40",3,"ngModel","disabled","ngModelChange"],["ldapSearchDNInput","ngModel"],["for","ldapSearchPwd"],["clrInput","","name","ldapSearchPwd","type","password","id","ldapSearchPwd","size","40",3,"ngModel","disabled","ngModelChange"],["ldapSearchPwdInput","ngModel"],["for","ldapBaseDN",1,"required"],["clrInput","","name","ldapBaseDN","type","text","required","","id","ldapBaseDN","size","40",3,"ngModel","disabled","ngModelChange"],["ldapBaseDNInput","ngModel"],["for","ldapFilter"],["clrInput","","name","ldapFilter","type","text","id","ldapFilter","size","40",3,"ngModel","disabled","ngModelChange"],["ldapFilterInput","ngModel"],["for","ldapUid",1,"required"],["clrInput","","name","ldapUid","type","text","required","","id","ldapUid","size","40",3,"ngModel","disabled","ngModelChange"],["ldapUidInput","ngModel"],["for","ldapScope"],["clrSelect","","id","ldapScope","name","ldapScope",3,"ngModel","disabled","ngModelChange"],["value","0"],["value","1"],["value","2"],["for","ldapGroupBaseDN"],["clrInput","","name","ldapGroupBaseDN","type","text","id","ldapGroupBaseDN","size","40",3,"ngModel","disabled","ngModelChange"],["ldapGroupDNInput","ngModel"],["for","ldapGroupFilter"],["clrInput","","name","ldapGroupFilter","type","text","id","ldapGroupFilter","size","40",3,"ngModel","disabled","ngModelChange"],["ldapGroupFilterInput","ngModel"],["for","ldapGroupGID"],["clrInput","","name","ldapGroupGID","type","text","id","ldapGroupGID","size","40",3,"ngModel","disabled","ngModelChange"],["for","ldapGroupAdminDN"],["clrInput","","name","ldapGroupAdminDN","type","text","id","ldapGroupAdminDN","size","40",3,"ngModel","disabled","ngModelChange"],["clrInput","","name","ldapGroupMembership","type","text","id","ldapGroupMembership","size","40",3,"ngModel","disabled","ngModelChange"],["for","ldapGroupScope"],["clrSelect","","id","ldapGroupScope","name","ldapGroupScope",3,"ngModel","disabled","ngModelChange"],["for","selfReg"],["type","checkbox","clrCheckbox","","name","selfReg","id","selfReg",3,"ngModel","disabled","ngModelChange"],["class","tooltip-content",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"tooltip-content"],["for","ldapVerifyCert"],["type","checkbox","clrCheckbox","","name","ldapVerifyCert","id","ldapVerifyCert",3,"ngModel","disabled","ngModelChange"],["for","http_authproxy_endpoint",1,"required"],["clrInput","","type","text","pattern","^([hH][tT]{2}[pP]:\\/\\/|[hH][tT]{2}[pP][sS]:\\/\\/)(.*?)*$","required","","id","http_authproxy_endpoint","name","http_authproxy_endpoint","size","35",3,"ngModel","disabled","ngModelChange"],["httpAuthproxyEndpointInput","ngModel"],["for","http_authproxy_tokenreview_endpoint",1,"required"],["clrInput","","type","text","pattern","^([hH][tT]{2}[pP]:\\/\\/|[hH][tT]{2}[pP][sS]:\\/\\/)(.*?)*$","required","","id","http_authproxy_tokenreview_endpoint","name","http_authproxy_tokenreview_endpoint","size","35",3,"ngModel","disabled","ngModelChange"],["httpAuthproxyTokenReviewInput","ngModel"],["for","HttpAdminGroup"],["autocomplete","off","clrInput","","name","HttpAdminGroup","type","text","id","HttpAdminGroup","size","35",3,"ngModel","disabled","blur","ngModelChange"],["ngHttpAdminGroup","ngModel"],["clrInline",""],["for","http_authproxy_verify_cert",1,"required"],["type","checkbox","clrCheckbox","","name","http_authproxy_verify_cert","id","http_authproxy_verify_cert",3,"ngModel","disabled","ngModelChange"],["for","http_authproxy_skip_search",1,"required"],["type","checkbox","clrCheckbox","","name","http_authproxy_skip_search","id","http_authproxy_skip_search",3,"disabled","ngModel","ngModelChange"],["for","oidcName",1,"required"],["clrInput","","name","oidcName","required","","type","text","id","oidcName","size","40",3,"ngModel","disabled","ngModelChange"],["oidcNameInput","ngModel"],["for","oidcEndpoint",1,"required"],["clrInput","","name","oidcEndpoint","type","text","required","","id","oidcEndpoint","size","40","pattern","^([hH][tT]{2}[pP][sS]:\\/\\/)(.*?)*$",3,"ngModel","disabled","ngModelChange"],["oidcEndpointInput","ngModel"],["for","oidcClientId",1,"required"],["clrInput","","name","oidcClientId","type","text","required","","id","oidcClientId","size","40",3,"ngModel","disabled","ngModelChange"],["oidcClientIdInput","ngModel"],["for","oidcClientSecret",1,"required"],["clrInput","","name","oidcClientSecret","type","password","required","","id","oidcClientSecret","size","40",3,"ngModel","disabled","ngModelChange"],["oidcClientSecretInput","ngModel"],["for","OIDCGroupFilter"],["clrInput","","name","OIDCGroupFilter","type","text","id","OIDCGroupFilter","size","40",3,"ngModel","disabled","ngModelChange"],["ngOIDCGroupFilter","ngModel"],["for","oidcGroupClaim"],["clrInput","","name","oidcGroupClaim","type","text","id","oidcGroupClaim","size","40",3,"ngModel","disabled","ngModelChange"],["ngOIDCGroupClaim","ngModel"],["for","OIDCAdminGroup"],["clrInput","","name","OIDCAdminGroup","type","text","id","OIDCAdminGroup","size","40",3,"ngModel","disabled","ngModelChange"],["ngOIDCAdminGroup","ngModel"],["for","oidcScope",1,"required"],["clrInput","","name","oidcScope","type","text","id","oidcScope","size","40","required","","pattern","^([\\w.]+,){0,}openid(,[\\w.]+){0,}$",3,"ngModel","disabled","ngModelChange"],["oidcScopeInput","ngModel"],["for","oidc_verify_cert"],["type","checkbox","clrCheckbox","","name","oidc_verify_cert","id","oidc_verify_cert",3,"disabled","ngModel","ngModelChange"],["for","oidcAutoOnboard"],["type","checkbox","clrCheckbox","","name","oidcAutoOnboard","id","oidcAutoOnboard",3,"disabled","ngModel","change","ngModelChange"],["for","oidcUserClaim"],["autocomplete","off","clrInput","","name","oidcUserClaim","type","text","id","oidcUserClaim","size","40",3,"ngModel","disabled","ngModelChange"],["oidcUserClaimInput","ngModel"],[1,"oidc-tip"],["type","button","id","ping-test",1,"btn","btn-outline",3,"disabled","click"]],template:function(n,t){1&n&&(e.TgZ(0,"form",0,1)(2,"div",2)(3,"label",3),e._uU(4),e.ALo(5,"translate"),e.TgZ(6,"clr-tooltip"),e._UZ(7,"clr-icon",4),e.YNc(8,w,4,3,"clr-tooltip-content",5),e.qZA()(),e.TgZ(9,"div",6)(10,"div",7)(11,"select",8),e.NdJ("change",function(a){return t.handleOnChange(a)})("ngModelChange",function(a){return t.currentConfig.auth_mode.value=a}),e.TgZ(12,"option",9),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"option",10),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"option",11),e._uU(19),e.ALo(20,"translate"),e.qZA(),e.YNc(21,F,3,3,"option",12),e.TgZ(22,"option",13),e._uU(23),e.ALo(24,"translate"),e.qZA()()(),e.YNc(25,R,3,3,"a",14),e.qZA()(),e.YNc(26,k,10,5,"section",15),e.YNc(27,H,22,20,"section",15),e.YNc(28,ee,134,92,"section",15),e.YNc(29,ie,9,5,"clr-checkbox-container",15),e.YNc(30,le,10,5,"section",15),e.YNc(31,ae,37,31,"section",15),e.YNc(32,fe,114,74,"section",15),e.qZA(),e.TgZ(33,"div")(34,"button",16),e.NdJ("click",function(){return t.save()}),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"button",17),e.NdJ("click",function(){return t.cancel()}),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.YNc(40,me,3,4,"button",18),e._UZ(41,"span",19),e.qZA()),2&n&&(e.xp6(4),e.hij(" ",e.lcZ(5,22,"CONFIG.AUTH_MODE")," "),e.xp6(7),e.Q6J("disabled",t.disabled(t.currentConfig.auth_mode))("ngModel",t.currentConfig.auth_mode.value),e.xp6(2),e.hij(" ",e.lcZ(14,24,"CONFIG.AUTH_MODE_DB")," "),e.xp6(3),e.hij(" ",e.lcZ(17,26,"CONFIG.AUTH_MODE_LDAP")," "),e.xp6(3),e.hij(" ",e.lcZ(20,28,"CONFIG.AUTH_MODE_UAA")," "),e.xp6(2),e.Q6J("ngIf",t.showHttpAuth),e.xp6(2),e.hij(" ",e.lcZ(24,30,"CONFIG.AUTH_MODE_OIDC")," "),e.xp6(2),e.Q6J("ngIf","oidc_auth"===(null==t.currentConfig||null==t.currentConfig.auth_mode?null:t.currentConfig.auth_mode.value)),e.xp6(1),e.Q6J("ngIf","db_auth"!==(null==t.currentConfig||null==t.currentConfig.auth_mode?null:t.currentConfig.auth_mode.value)),e.xp6(1),e.Q6J("ngIf",t.showUAA),e.xp6(1),e.Q6J("ngIf",t.showLdap),e.xp6(1),e.Q6J("ngIf",t.showSelfReg),e.xp6(1),e.Q6J("ngIf",t.showLdap),e.xp6(1),e.Q6J("ngIf",t.showHttpAuth),e.xp6(1),e.Q6J("ngIf",t.showOIDC),e.xp6(2),e.Q6J("disabled",!t.isValid()||!t.hasChanges()||t.inProcess()),e.xp6(1),e.hij(" ",e.lcZ(36,32,"BUTTON.SAVE")," "),e.xp6(2),e.Q6J("disabled",!t.isValid()||!t.hasChanges()||t.inProcess()),e.xp6(1),e.hij(" ",e.lcZ(39,34,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("ngIf",t.showTestingServerBtn),e.xp6(1),e.Q6J("hidden",t.hideTestingSpinner))},dependencies:[s._Y,s.YN,s.Kr,s.Fj,s.Wl,s.EJ,s.JJ,s.JL,s.Q7,s.c5,s.On,s.F,c.qvL,c.nqY,c.MgK,c.VqA,c.KKC,c.Y_4,c.PEh,c.xRP,c.G55,c.otW,c.dTv,c.Jmj,c.bMv,c.zDF,Z.O5,A.X$],styles:[".oidc-tip[_ngcontent-%COMP%]{color:#0a0a0a;margin-top:1rem}.more-info-link[_ngcontent-%COMP%]{padding-left:1rem}.ml-04[_ngcontent-%COMP%]{margin-left:.4rem}.clr-control-label[_ngcontent-%COMP%]{width:10.6rem!important}",".config-title[_ngcontent-%COMP%]{display:inline-block}.tooltip-position[_ngcontent-%COMP%]{top:-7px}.clr-form-control-disabled[_ngcontent-%COMP%]{opacity:1}.v-mid[_ngcontent-%COMP%]{vertical-align:middle}"]}),l})();const Te=["systemConfigFrom"];function Oe(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.PRO_CREATION_RESTRICTION")))}function Ze(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.TOKEN_EXPIRATION")))}function be(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.SESSION_TIMEOUT_INFO")))}function Me(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.ROBOT_NAME_PREFIX")))}function xe(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.ROBOT_TOKEN_EXPIRATION")))}function Ie(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.ROOT_CERT_DOWNLOAD")))}function Ne(o,l){if(1&o&&(e.TgZ(0,"div",31)(1,"label",32),e._uU(2),e.ALo(3,"translate"),e.TgZ(4,"clr-tooltip"),e._UZ(5,"clr-icon",3),e.YNc(6,Ie,4,3,"clr-tooltip-content",4),e.qZA()(),e.TgZ(7,"div",52)(8,"a",53),e._uU(9),e.ALo(10,"translate"),e.qZA()()()),2&o){const i=e.oxw();e.xp6(2),e.hij("",e.lcZ(3,3,"CONFIG.ROOT_CERT")," "),e.xp6(6),e.Q6J("href",i.downloadLink,e.LSH),e.xp6(1),e.Oqu(e.lcZ(10,5,"CONFIG.ROOT_CERT_LINK"))}}function ve(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.REPO_TOOLTIP")))}function Le(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.WEBHOOK_TOOLTIP")))}function Ee(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CONFIG.TOOLTIP.SKIP_SCANNER_PULL_TIME_TOOLTIP")))}function ye(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CLEARANCES.FORWARD_ENDPOINT_TOOLTIP")))}function Se(o,l){1&o&&(e.TgZ(0,"clr-tooltip-content",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CLEARANCES.SKIP_DATABASE_TOOLTIP")))}function Ue(o,l){if(1&o&&(e.TgZ(0,"option",54),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const i=l.$implicit,n=e.oxw();e.s9C("value",i),e.xp6(1),e.hij(" ",e.lcZ(2,2,n.translateMessageType(i))," ")}}const N=function(){return{standalone:!0}},E=function(o){return{"clr-form-control-disable":o}};let Pe=(()=>{var o;class l{get currentConfig(){return this.conf.getConfig()}set currentConfig(n){this.conf.setConfig(n)}constructor(n,t,r,a){this.appConfigService=n,this.errorHandler=t,this.conf=r,this.event=a,this.bannerMessageTypes=Object.values(C.yt),this.onGoing=!1,this.currentDate=new Date,this.downloadLink=p.S$+"/systeminfo/getcert"}ngOnInit(){this.conf.resetConfig(),this.bannerRefreshSub||(this.bannerRefreshSub=this.event.subscribe(x.n.REFRESH_BANNER_MESSAGE,()=>{this.setValueForBannerMessage()})),this.currentConfig.banner_message&&this.setValueForBannerMessage()}ngOnDestroy(){this.bannerRefreshSub&&(this.bannerRefreshSub.unsubscribe(),this.bannerRefreshSub=null)}setValueForBannerMessage(){this.currentConfig.banner_message.value?(this.messageText=JSON.parse(this.currentConfig.banner_message.value).message,this.messageType=JSON.parse(this.currentConfig.banner_message.value).type,this.messageClosable=JSON.parse(this.currentConfig.banner_message.value).closable,this.messageFromDate=JSON.parse(this.currentConfig.banner_message.value).fromDate,this.messageToDate=JSON.parse(this.currentConfig.banner_message.value).toDate):(this.messageText=null,this.messageType=C.yt.WARNING,this.messageClosable=!1),this.messageTextCopy=this.messageText,this.messageTypeCopy=this.messageType,this.messageClosableCopy=this.messageClosable,this.messageFromDateCopy=this.messageFromDate,this.messageToDateCopy=this.messageToDate}get editable(){return this.currentConfig&&this.currentConfig.token_expiration&&this.currentConfig.token_expiration.editable}get robotExpirationEditable(){return this.currentConfig&&this.currentConfig.robot_token_duration&&this.currentConfig.robot_token_duration.editable}robotNamePrefixEditable(){return this.currentConfig&&this.currentConfig.robot_name_prefix&&this.currentConfig.robot_name_prefix.editable}isValid(){return this.systemSettingsForm&&this.systemSettingsForm.valid}hasChanges(){return!(0,p.xb)(this.getChanges())||this.hasBannerMessageChanged()}hasBannerMessageChanged(){return this.messageTextCopy!=this.messageText||this.messageTypeCopy!=this.messageType||this.messageClosableCopy!=this.messageClosable||this.messageFromDateCopy!=this.messageFromDate||this.messageToDateCopy!=this.messageToDate}getChanges(){let n=(0,p.My)(this.conf.getOriginalConfig(),this.currentConfig);return n?this.getSystemChanges(n):null}getSystemChanges(n){let t={};for(let r in n)("token_expiration"===r||"read_only"===r||"project_creation_restriction"===r||"robot_token_duration"===r||"notification_enable"===r||"robot_name_prefix"===r||"audit_log_forward_endpoint"===r||"skip_audit_log_database"===r||"session_timeout"===r||"scanner_skip_update_pulltime"===r||"banner_message"===r)&&(t[r]=n[r]);return t}setRepoReadOnlyValue(n){this.currentConfig.read_only.value=n}setWebhookNotificationEnabledValue(n){this.currentConfig.notification_enable.value=n}disabled(n){return!(n&&n.editable)}get canDownloadCert(){return this.appConfigService.getConfig().has_ca_root}save(){let n=this.getChanges();if(this.hasBannerMessageChanged()){const t=new C.RH;t.message=this.messageText,t.type=this.messageType,t.closable=this.messageClosable,t.fromDate=this.messageFromDate,t.toDate=this.messageToDate,n.banner_message=t.message?JSON.stringify(t):""}(0,p.xb)(n)?console.error("Save abort because nothing changed"):(this.onGoing=!0,this.conf.saveConfiguration(n).pipe((0,M.x)(()=>this.onGoing=!1)).subscribe({next:t=>{this.conf.updateConfig(),this.appConfigService.load().subscribe(()=>{},r=>console.error("Failed to reload bootstrap option with error: ",r)),this.errorHandler.info("CONFIG.SAVE_SUCCESS")},error:t=>{this.errorHandler.error(t)}}))}get inProgress(){return this.onGoing||this.conf.getLoadingConfigStatus()}cancel(){let n=this.getChanges();(0,p.xb)(n)?console.error("Nothing changed"):this.conf.confirmUnsavedChanges(n)}checkAuditLogForwardEndpoint(n){n?.target?.value||(this.currentConfig.skip_audit_log_database.value=!1)}translateMessageType(n){return C.wm[n]||n}minDateForEndDay(){return this.messageFromDate?this.messageFromDate:this.currentDate}}return(o=l).\u0275fac=function(n){return new(n||o)(e.Y36(S._),e.Y36(I.d),e.Y36(d),e.Y36(x.P))},o.\u0275cmp=e.Xpm({type:o,selectors:[["system-settings"]],viewQuery:function(n,t){if(1&n&&e.Gf(Te,5),2&n){let r;e.iGM(r=e.CRH())&&(t.systemSettingsForm=r.first)}},decls:158,vars:143,consts:[[1,"clr-form","clr-form-horizontal"],["systemConfigFrom","ngForm"],["for","proCreation"],["clrTooltipTrigger","","shape","info-circle","size","24"],["clrPosition","top-right","clrSize","lg",4,"clrIfOpen"],["clrSelect","","id","proCreation","name","proCreation",1,"pro-creation",3,"ngModel","disabled","ngModelChange"],["value","everyone"],["value","adminonly"],["for","tokenExpiration",1,"required"],["clrInput","","name","tokenExpiration","type","number","required","","pattern","^[1-9]{1}[0-9]*$","id","tokenExpiration","max","9999999999",3,"ngModel","disabled","ngModelChange"],["tokenExpirationInput","ngModel"],["for","sessionTimeout",1,"required"],["clrInput","","name","sessionTimeout","type","number","required","","pattern","^[1-9]{1}[0-9]*$","id","sessionTimeout","max","9999999999",3,"ngModel","disabled","ngModelChange"],["ngSessionTimeout","ngModel"],["for","robotNamePrefix",1,"required"],["clrInput","","name","robotNamePrefix","type","text","required","","autocomplete","off","id","robotNamePrefix","size","20",3,"ngModel","disabled","ngModelChange"],["for","robotTokenExpiration",1,"required"],["clrInput","","name","robotTokenExpiration","type","number","required","","pattern","^[1-9]{1}[0-9]*$","id","robotTokenExpiration","max","9999999999",3,"ngModel","disabled","ngModelChange"],["robotTokenExpirationInput","ngModel"],["class","clr-form-control",4,"ngIf"],[1,"center"],["id","repo_read_only_lbl","for","repoReadOnly"],["type","checkbox","clrCheckbox","","name","repoReadOnly","id","repoReadOnly",3,"disabled","ngModel","ngModelChange"],["for","webhookNotificationEnabled"],["type","checkbox","clrCheckbox","","name","webhookNotificationEnabled","id","webhookNotificationEnabled",3,"ngModel","disabled","ngModelChange"],["for","scannerSkipUpdatePullTime"],["type","checkbox","clrCheckbox","","name","scannerSkipUpdatePullTime","id","scannerSkipUpdatePullTime",3,"ngModel","disabled","ngModelChange"],["for","auditLogForwardEndpoint"],["clrInput","","name","auditLogForwardEndpoint","type","text","id","auditLogForwardEndpoint","size","20",3,"ngModel","disabled","ngModelChange","input"],["for","skipAuditLogDatabase"],["type","checkbox","clrCheckbox","","name","skipAuditLogDatabase","id","skipAuditLogDatabase",3,"ngModel","disabled","ngModelChange"],[1,"clr-form-control"],[1,"clr-control-label"],[1,"clr-control-container","flex-baseline"],[1,"clr-textarea-wrapper"],["id","banner-message","autocomplete","off","maxlength","800",1,"clr-textarea",3,"placeholder","ngModel","ngModelOptions","disabled","ngModelChange"],[1,"message-type"],[1,"clr-select-wrapper",3,"ngClass"],[1,"message-label"],["id","banner-message-type",1,"clr-select","message-select",3,"ngModel","ngModelOptions","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"clr-checkbox-wrapper","ml-1",3,"ngClass"],["type","checkbox","id","banner-message-closable",1,"clr-checkbox-inline",3,"ngModel","ngModelOptions","disabled","ngModelChange"],["for","banner-message-closable",1,"clr-control-label"],[1,"clr-textarea-wrapper","duration"],[1,"clr-input-wrapper","flex","message-type",3,"ngClass"],["type","date","id","from","autocomplete","off","clrDate","","readonly","",1,"date",3,"min","max","ngModel","ngModelOptions","disabled","ngModelChange"],[1,"clr-checkbox-wrapper","flex","ml-1",3,"ngClass"],["clrDate","","readonly","","type","date","id","to","autocomplete","off",1,"date",3,"min","ngModel","disabled","ngModelOptions","ngModelChange"],["type","button","id","config_system_save",1,"btn","btn-primary",3,"disabled","click"],["type","button","id","config_system_cancel",1,"btn","btn-outline",3,"disabled","click"],["clrPosition","top-right","clrSize","lg"],[1,"clr-control-container","cert-down"],["rel","noopener noreferrer","target","_blank",3,"href"],[3,"value"]],template:function(n,t){1&n&&(e.TgZ(0,"form",0,1)(2,"section")(3,"clr-select-container")(4,"label",2),e._uU(5),e.ALo(6,"translate"),e.TgZ(7,"clr-tooltip"),e._UZ(8,"clr-icon",3),e.YNc(9,Oe,4,3,"clr-tooltip-content",4),e.qZA()(),e.TgZ(10,"select",5),e.NdJ("ngModelChange",function(a){return t.currentConfig.project_creation_restriction.value=a}),e.TgZ(11,"option",6),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"option",7),e._uU(15),e.ALo(16,"translate"),e.qZA()()(),e.TgZ(17,"clr-input-container")(18,"label",8),e._uU(19),e.ALo(20,"translate"),e.TgZ(21,"clr-tooltip"),e._UZ(22,"clr-icon",3),e.YNc(23,Ze,4,3,"clr-tooltip-content",4),e.qZA()(),e.TgZ(24,"input",9,10),e.NdJ("ngModelChange",function(a){return t.currentConfig.token_expiration.value=a}),e.qZA(),e.TgZ(26,"clr-control-error"),e._uU(27),e.ALo(28,"translate"),e.qZA()(),e.TgZ(29,"clr-input-container")(30,"label",11),e._uU(31),e.ALo(32,"translate"),e.TgZ(33,"clr-tooltip"),e._UZ(34,"clr-icon",3),e.YNc(35,be,4,3,"clr-tooltip-content",4),e.qZA()(),e.TgZ(36,"input",12,13),e.NdJ("ngModelChange",function(a){return t.currentConfig.session_timeout.value=a}),e.qZA(),e.TgZ(38,"clr-control-error"),e._uU(39),e.ALo(40,"translate"),e.qZA()(),e.TgZ(41,"clr-input-container")(42,"label",14),e._uU(43),e.ALo(44,"translate"),e.TgZ(45,"clr-tooltip"),e._UZ(46,"clr-icon",3),e.YNc(47,Me,4,3,"clr-tooltip-content",4),e.qZA()(),e.TgZ(48,"input",15),e.NdJ("ngModelChange",function(a){return t.currentConfig.robot_name_prefix.value=a}),e.qZA(),e.TgZ(49,"clr-control-error"),e._uU(50),e.ALo(51,"translate"),e.qZA()(),e.TgZ(52,"clr-input-container")(53,"label",16),e._uU(54),e.ALo(55,"translate"),e.TgZ(56,"clr-tooltip"),e._UZ(57,"clr-icon",3),e.YNc(58,xe,4,3,"clr-tooltip-content",4),e.qZA()(),e.TgZ(59,"input",17,18),e.NdJ("ngModelChange",function(a){return t.currentConfig.robot_token_duration.value=a}),e.qZA(),e.TgZ(61,"clr-control-error"),e._uU(62),e.ALo(63,"translate"),e.qZA()(),e.YNc(64,Ne,11,7,"div",19),e.TgZ(65,"clr-checkbox-container",20)(66,"label",21),e._uU(67),e.ALo(68,"translate"),e.TgZ(69,"clr-tooltip"),e._UZ(70,"clr-icon",3),e.YNc(71,ve,4,3,"clr-tooltip-content",4),e.qZA()(),e.TgZ(72,"clr-checkbox-wrapper")(73,"input",22),e.NdJ("ngModelChange",function(a){return t.setRepoReadOnlyValue(a)}),e.qZA()()(),e.TgZ(74,"clr-checkbox-container",20)(75,"label",23),e._uU(76),e.ALo(77,"translate"),e.TgZ(78,"clr-tooltip"),e._UZ(79,"clr-icon",3),e.YNc(80,Le,4,3,"clr-tooltip-content",4),e.qZA()(),e.TgZ(81,"clr-checkbox-wrapper")(82,"input",24),e.NdJ("ngModelChange",function(a){return t.setWebhookNotificationEnabledValue(a)}),e.qZA()()(),e.TgZ(83,"clr-checkbox-container",20)(84,"label",25),e._uU(85),e.ALo(86,"translate"),e.TgZ(87,"clr-tooltip"),e._UZ(88,"clr-icon",3),e.YNc(89,Ee,4,3,"clr-tooltip-content",4),e.qZA()(),e.TgZ(90,"clr-checkbox-wrapper")(91,"input",26),e.NdJ("ngModelChange",function(a){return t.currentConfig.scanner_skip_update_pulltime.value=a}),e.qZA()()(),e.TgZ(92,"clr-input-container")(93,"label",27),e._uU(94),e.ALo(95,"translate"),e.TgZ(96,"clr-tooltip"),e._UZ(97,"clr-icon",3),e.YNc(98,ye,4,3,"clr-tooltip-content",4),e.qZA()(),e.TgZ(99,"input",28),e.NdJ("ngModelChange",function(a){return t.currentConfig.audit_log_forward_endpoint.value=a})("input",function(a){return t.checkAuditLogForwardEndpoint(a)}),e.qZA()(),e.TgZ(100,"clr-checkbox-container",20)(101,"label",29),e._uU(102),e.ALo(103,"translate"),e.TgZ(104,"clr-tooltip"),e._UZ(105,"clr-icon",3),e.YNc(106,Se,4,3,"clr-tooltip-content",4),e.qZA()(),e.TgZ(107,"clr-checkbox-wrapper")(108,"input",30),e.NdJ("ngModelChange",function(a){return t.currentConfig.skip_audit_log_database.value=a}),e.qZA()()(),e.TgZ(109,"div",31)(110,"label",32),e._uU(111),e.ALo(112,"translate"),e.qZA(),e.TgZ(113,"div",33)(114,"div",34)(115,"textarea",35),e.NdJ("ngModelChange",function(a){return t.messageText=a}),e.ALo(116,"translate"),e.qZA()(),e.TgZ(117,"div",36)(118,"div",37)(119,"label",38),e._uU(120),e.ALo(121,"translate"),e.qZA(),e.TgZ(122,"select",39),e.NdJ("ngModelChange",function(a){return t.messageType=a}),e.YNc(123,Ue,3,4,"option",40),e.qZA()()(),e.TgZ(124,"div",41)(125,"input",42),e.NdJ("ngModelChange",function(a){return t.messageClosable=a}),e.qZA(),e.TgZ(126,"label",43),e._uU(127),e.ALo(128,"translate"),e.qZA()()()(),e.TgZ(129,"div",31),e._UZ(130,"label",32),e.TgZ(131,"div",33)(132,"div",44)(133,"label"),e._uU(134),e.ALo(135,"translate"),e.qZA()(),e.TgZ(136,"div",45)(137,"label"),e._uU(138),e.ALo(139,"translate"),e.qZA(),e.TgZ(140,"clr-date-container")(141,"input",46),e.NdJ("ngModelChange",function(a){return t.messageFromDate=a}),e.ALo(142,"date"),e.ALo(143,"date"),e.qZA()()(),e.TgZ(144,"div",47)(145,"label"),e._uU(146),e.ALo(147,"translate"),e.qZA(),e.TgZ(148,"clr-date-container")(149,"input",48),e.NdJ("ngModelChange",function(a){return t.messageToDate=a}),e.ALo(150,"date"),e.qZA()()()()()()(),e.TgZ(151,"div")(152,"button",49),e.NdJ("click",function(){return t.save()}),e._uU(153),e.ALo(154,"translate"),e.qZA(),e.TgZ(155,"button",50),e.NdJ("click",function(){return t.cancel()}),e._uU(156),e.ALo(157,"translate"),e.qZA()()),2&n&&(e.xp6(5),e.hij("",e.lcZ(6,71,"CONFIG.PRO_CREATION_RESTRICTION")," "),e.xp6(5),e.Q6J("ngModel",t.currentConfig.project_creation_restriction.value)("disabled",t.disabled(t.currentConfig.project_creation_restriction)),e.xp6(2),e.hij(" ",e.lcZ(13,73,"CONFIG.PRO_CREATION_EVERYONE")," "),e.xp6(3),e.hij(" ",e.lcZ(16,75,"CONFIG.PRO_CREATION_ADMIN")," "),e.xp6(4),e.hij("",e.lcZ(20,77,"CONFIG.TOKEN_EXPIRATION")," "),e.xp6(5),e.Q6J("ngModel",t.currentConfig.token_expiration.value)("disabled",!t.editable),e.xp6(3),e.Oqu(e.lcZ(28,79,"TOOLTIP.NUMBER_REQUIRED")),e.xp6(4),e.hij("",e.lcZ(32,81,"CONFIG.SESSION_TIMEOUT")," "),e.xp6(5),e.Q6J("ngModel",t.currentConfig.session_timeout.value)("disabled",!t.editable),e.xp6(3),e.Oqu(e.lcZ(40,83,"TOOLTIP.NUMBER_REQUIRED")),e.xp6(4),e.hij("",e.lcZ(44,85,"ROBOT_ACCOUNT.NAME_PREFIX")," "),e.xp6(5),e.Q6J("ngModel",t.currentConfig.robot_name_prefix.value)("disabled",!t.robotNamePrefixEditable()),e.xp6(2),e.Oqu(e.lcZ(51,87,"ROBOT_ACCOUNT.NAME_PREFIX_REQUIRED")),e.xp6(4),e.hij("",e.lcZ(55,89,"ROBOT_ACCOUNT.TOKEN_EXPIRATION")," "),e.xp6(5),e.Q6J("ngModel",t.currentConfig.robot_token_duration.value)("disabled",!t.robotExpirationEditable),e.xp6(3),e.Oqu(e.lcZ(63,91,"ROBOT_ACCOUNT.NUMBER_REQUIRED")),e.xp6(2),e.Q6J("ngIf",t.canDownloadCert),e.xp6(3),e.hij("",e.lcZ(68,93,"CONFIG.REPO_READ_ONLY")," "),e.xp6(6),e.Q6J("disabled",!t.currentConfig.read_only.editable)("ngModel",t.currentConfig.read_only.value),e.xp6(3),e.hij("",e.lcZ(77,95,"CONFIG.WEBHOOK_NOTIFICATION_ENABLED")," "),e.xp6(6),e.Q6J("ngModel",t.currentConfig.notification_enable.value)("disabled",!t.currentConfig.notification_enable.editable),e.xp6(3),e.hij("",e.lcZ(86,97,"CONFIG.SKIP_SCANNER_PULL_TIME")," "),e.xp6(6),e.Q6J("ngModel",t.currentConfig.scanner_skip_update_pulltime.value)("disabled",!t.currentConfig.scanner_skip_update_pulltime.editable),e.xp6(3),e.hij(" ",e.lcZ(95,99,"CLEARANCES.FORWARD_ENDPOINT")," "),e.xp6(5),e.Q6J("ngModel",t.currentConfig.audit_log_forward_endpoint.value)("disabled",!(null!=t.currentConfig&&null!=t.currentConfig.audit_log_forward_endpoint&&t.currentConfig.audit_log_forward_endpoint.editable)),e.xp6(3),e.hij("",e.lcZ(103,101,"CLEARANCES.SKIP_DATABASE")," "),e.xp6(6),e.Q6J("ngModel",t.currentConfig.skip_audit_log_database.value)("disabled",!(null!=t.currentConfig.skip_audit_log_database&&t.currentConfig.skip_audit_log_database.editable&&null!=t.currentConfig.audit_log_forward_endpoint&&t.currentConfig.audit_log_forward_endpoint.value)),e.xp6(3),e.Oqu(e.lcZ(112,103,"BANNER_MESSAGE.BANNER_MESSAGE")),e.xp6(4),e.s9C("placeholder",e.lcZ(116,105,"BANNER_MESSAGE.ENTER_MESSAGE")),e.Q6J("ngModel",t.messageText)("ngModelOptions",e.DdM(130,N))("disabled",!t.currentConfig.banner_message.editable),e.xp6(3),e.Q6J("ngClass",e.VKq(131,E,!t.currentConfig.banner_message.editable||!t.messageText)),e.xp6(2),e.Oqu(e.lcZ(121,107,"BANNER_MESSAGE.MESSAGE_TYPE")),e.xp6(2),e.Q6J("ngModel",t.messageType)("ngModelOptions",e.DdM(133,N))("disabled",!t.currentConfig.banner_message.editable||!t.messageText),e.xp6(1),e.Q6J("ngForOf",t.bannerMessageTypes),e.xp6(1),e.Q6J("ngClass",e.VKq(134,E,!t.currentConfig.banner_message.editable||!t.messageText)),e.xp6(1),e.Q6J("ngModel",t.messageClosable)("ngModelOptions",e.DdM(136,N))("disabled",!t.currentConfig.banner_message.editable||!t.messageText),e.xp6(2),e.Oqu(e.lcZ(128,109,"BANNER_MESSAGE.CLOSABLE")),e.xp6(7),e.Oqu(e.lcZ(135,111,"REPLICATION.DURATION")),e.xp6(2),e.Q6J("ngClass",e.VKq(137,E,!t.currentConfig.banner_message.editable||!t.messageText)),e.xp6(2),e.Oqu(e.lcZ(139,113,"BANNER_MESSAGE.FROM")),e.xp6(3),e.s9C("min",e.xi3(142,115,t.currentDate,"yyyy-MM-dd")),e.s9C("max",e.xi3(143,118,t.messageToDate,"yyyy-MM-dd")),e.Q6J("ngModel",t.messageFromDate)("ngModelOptions",e.DdM(139,N))("disabled",!t.currentConfig.banner_message.editable||!t.messageText),e.xp6(3),e.Q6J("ngClass",e.VKq(140,E,!t.currentConfig.banner_message.editable||!t.messageText)),e.xp6(2),e.Oqu(e.lcZ(147,121,"BANNER_MESSAGE.TO")),e.xp6(3),e.s9C("min",e.xi3(150,123,t.minDateForEndDay(),"yyyy-MM-dd")),e.Q6J("ngModel",t.messageToDate)("disabled",!t.currentConfig.banner_message.editable||!t.messageText)("ngModelOptions",e.DdM(142,N)),e.xp6(3),e.Q6J("disabled",!t.isValid()||!t.hasChanges()||t.inProgress),e.xp6(1),e.hij(" ",e.lcZ(154,126,"BUTTON.SAVE")," "),e.xp6(2),e.Q6J("disabled",!t.isValid()||!t.hasChanges()||t.inProgress),e.xp6(1),e.hij(" ",e.lcZ(157,128,"BUTTON.CANCEL")," "))},dependencies:[s._Y,s.YN,s.Kr,s.Fj,s.wV,s.Wl,s.EJ,s.JJ,s.JL,s.Q7,s.nD,s.c5,s.Fd,s.On,s.F,c.qvL,c.nqY,c.MgK,c.VqA,c.KKC,c.Y_4,c.PEh,c.Swc,c.Tsp,c.ZJg,c.xRP,c.G55,c.otW,c.dTv,c.Jmj,c.bMv,c.zDF,Z.mk,Z.sg,Z.O5,A.X$,Z.uU],styles:[".subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.clr-form-horizontal[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%] > .clr-control-label[_ngcontent-%COMP%]{width:15rem}.clr-form-horizontal[_ngcontent-%COMP%]   .flex-direction-column[_ngcontent-%COMP%]{flex-direction:column}.bottom-line[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse}.expire-data[_ngcontent-%COMP%]{min-width:12.5rem;margin-top:-1rem}.position-relative[_ngcontent-%COMP%]{position:relative}.pl-05[_ngcontent-%COMP%]{padding-left:.5rem}.mt-1[_ngcontent-%COMP%]{margin-top:1rem}.d-f[_ngcontent-%COMP%]{display:flex}.font-size-13[_ngcontent-%COMP%]{font-size:13px}.mt-05[_ngcontent-%COMP%]{margin-bottom:.5rem}.title[_ngcontent-%COMP%]{font-weight:700}.margin-top-4[_ngcontent-%COMP%]{margin-top:4px}.allowlist-window[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:3px;padding:12px;height:224px;width:222px;overflow-y:auto}.allowlist-window[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:24px;line-height:24px;list-style-type:none}.width-90per[_ngcontent-%COMP%]{width:90%}.none[_ngcontent-%COMP%]{color:#ccc}.color-0079bb[_ngcontent-%COMP%]{color:#0079bb}.padding-top-8[_ngcontent-%COMP%]{padding-top:8px}.padding-left-80[_ngcontent-%COMP%]{padding-left:80px}.add-modal[_ngcontent-%COMP%]{position:absolute;padding:0 8px;background-color:#eee}.add-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid}.add-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.hand[_ngcontent-%COMP%]{cursor:pointer;margin:0}.cert-down[_ngcontent-%COMP%]{margin-top:.15rem}.info-tips-icon[_ngcontent-%COMP%]{color:gray}.info-tips-icon[_ngcontent-%COMP%]:hover{color:#007cbb}.replication-config[_ngcontent-%COMP%]{margin-top:0;margin-bottom:0}.replication-text[_ngcontent-%COMP%]{font-size:14px;font-weight:600}.replication-tooltip[_ngcontent-%COMP%]{top:-8px}.margin-top-3px[_ngcontent-%COMP%]{margin-top:3px}.center[_ngcontent-%COMP%]{display:flex;align-items:center}.clr-input[_ngcontent-%COMP%], .pro-creation[_ngcontent-%COMP%]{width:12rem}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-webkit-appearance:textfield;appearance:textfield}.clr-textarea[_ngcontent-%COMP%]{max-width:none;width:12rem}.flex-baseline[_ngcontent-%COMP%]{display:flex;align-items:baseline}.message-type[_ngcontent-%COMP%]{margin-left:2rem;width:12rem}.message-label[_ngcontent-%COMP%]{margin-right:.25rem}.duration[_ngcontent-%COMP%]{width:12rem;display:flex;justify-content:right}.flex[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]  clr-date-container{margin-top:0;margin-left:.5rem}.message-select[_ngcontent-%COMP%]{width:6.75rem}.date[_ngcontent-%COMP%]{width:6rem}"]}),l})();var qe=u(7655);const De=["dateInput"];function Ge(o,l){1&o&&(e.TgZ(0,"div",5)(1,"span",25),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&o&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"CVE_ALLOWLIST.WARNING_SYS")))}function we(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"div",26)(1,"clr-icon",27),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.showAddModal=!1)}),e.qZA(),e.TgZ(2,"div")(3,"clr-textarea-container",28)(4,"label"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"textarea",29),e.NdJ("ngModelChange",function(t){e.CHM(i);const r=e.oxw();return e.KtG(r.cveIds=t)}),e.qZA(),e.TgZ(8,"clr-control-helper"),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div")(12,"button",30),e.NdJ("click",function(){e.CHM(i);const t=e.oxw();return e.KtG(t.addToSystemAllowlist())}),e._uU(13),e.ALo(14,"translate"),e.qZA()()()}if(2&o){const i=e.oxw();e.xp6(5),e.Oqu(e.lcZ(6,5,"CVE_ALLOWLIST.ENTER")),e.xp6(2),e.Q6J("ngModel",i.cveIds),e.xp6(2),e.Oqu(e.lcZ(10,7,"CVE_ALLOWLIST.HELP")),e.xp6(3),e.Q6J("disabled",i.isDisabled()),e.xp6(1),e.hij(" ",e.lcZ(14,9,"CVE_ALLOWLIST.ADD")," ")}}function Fe(o,l){1&o&&(e.TgZ(0,"li",31),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CVE_ALLOWLIST.NONE")," "))}function Re(o,l){if(1&o){const i=e.EpF();e.TgZ(0,"li")(1,"a",32),e.NdJ("click",function(){const r=e.CHM(i).$implicit,a=e.oxw();return e.KtG(a.goToDetail(r.cve_id))}),e._uU(2),e.qZA(),e.TgZ(3,"a",33),e.NdJ("click",function(){const r=e.CHM(i).index,a=e.oxw();return e.KtG(a.deleteItem(r))}),e._UZ(4,"clr-icon",34),e.qZA()()}if(2&o){const i=l.$implicit;e.xp6(2),e.Oqu(i.cve_id)}}const y=1e3,He=[{path:"",component:O,children:[{path:"auth",component:Ae},{path:"security",component:(()=>{var o;class l{constructor(n,t,r){this.errorHandler=n,this.systemInfoService=t,this.confirmService=r,this.onGoing=!1,this.showAddModal=!1}ngOnInit(){this.getSystemAllowlist(),this.subscribeConfirmation()}ngOnDestroy(){this._confirmSub&&(this._confirmSub.unsubscribe(),this._confirmSub=null)}save(){(0,p.jy)(this.systemAllowlistOrigin,this.systemAllowlist)?console.error("Save abort because nothing changed"):(this.onGoing=!0,this.systemInfoService.updateSystemAllowlist(this.systemAllowlist).pipe((0,M.x)(()=>this.onGoing=!1)).subscribe({next:n=>{this.systemAllowlistOrigin=(0,p.d9)(this.systemAllowlist),this.errorHandler.info("CONFIG.SAVE_SUCCESS")},error:n=>{this.errorHandler.error(n)}}))}get inProgress(){return this.onGoing}cancel(){if((0,p.jy)(this.systemAllowlistOrigin,this.systemAllowlist))console.error("Nothing changed");else{const n=new b.c("CONFIG.CONFIRM_TITLE","CONFIG.CONFIRM_SUMMARY","",null,10);this.confirmService.openComfirmDialog(n)}}subscribeConfirmation(){this._confirmSub=this.confirmService.confirmationConfirm$.subscribe(n=>{n&&1===n.state&&((0,p.jy)(this.systemAllowlistOrigin,this.systemAllowlist)||(this.systemAllowlist=(0,p.d9)(this.systemAllowlistOrigin)))})}getSystemAllowlist(){this.onGoing=!0,this.systemInfoService.getSystemAllowlist().subscribe(n=>{this.onGoing=!1,n||(n={}),n.items||(n.items=[]),n.expires_at||(n.expires_at=null),this.systemAllowlist=n,this.systemAllowlistOrigin=(0,p.d9)(n)},n=>{this.onGoing=!1,console.error("An error occurred during getting systemAllowlist")})}deleteItem(n){this.systemAllowlist.items.splice(n,1)}addToSystemAllowlist(){let n={};this.systemAllowlist.items.forEach(t=>{n[t.cve_id]=!0}),this.cveIds.split(/[\n,]+/).forEach(t=>{let r={};r.cve_id=t.trim(),n[r.cve_id]||(n[r.cve_id]=!0,this.systemAllowlist.items.push(r))}),this.cveIds=null,this.showAddModal=!1}get hasAllowlistChanged(){return!(0,p.jy)(this.systemAllowlistOrigin,this.systemAllowlist)}isDisabled(){let n=this.cveIds;return!(n&&n.trim())}get expiresDate(){return this.systemAllowlist&&this.systemAllowlist.expires_at?new Date(this.systemAllowlist.expires_at*y):null}set expiresDate(n){this.systemAllowlist&&n&&(this.systemAllowlist.expires_at=Math.floor(n.getTime()/y))}get neverExpires(){return!(this.systemAllowlist&&this.systemAllowlist.expires_at)}set neverExpires(n){n?(this.systemAllowlist.expires_at=null,this.systemInfoService.resetDateInput(this.dateInput)):this.systemAllowlist.expires_at=Math.floor((new Date).getTime()/y)}get hasExpired(){return!(!this.systemAllowlistOrigin||!this.systemAllowlistOrigin.expires_at)&&(new Date).getTime()>this.systemAllowlistOrigin.expires_at*y}goToDetail(n){window.open(`https://nvd.nist.gov/vuln/detail/${n}`,"_blank")}}return(o=l).\u0275fac=function(n){return new(n||o)(e.Y36(qe.q),e.Y36(U.Ob),e.Y36(m.O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-security"]],viewQuery:function(n,t){if(1&n&&e.Gf(De,5),2&n){let r;e.iGM(r=e.CRH())&&(t.dateInput=r.first)}},features:[e._Bn([{provide:e.soG,useValue:localStorage.getItem(_.R4)}])],decls:54,vars:39,consts:[[1,"clr-form","clr-form-horizontal"],[1,"clr-form-control","d-f"],[1,"clr-control-label"],[1,"form-content","w-100"],[1,"font-size-13"],[1,"mt-05"],[1,"title","font-size-13"],["class","mt-05",4,"ngIf"],[1,"clr-row","width-90per"],[1,"position-relative","pl-05"],["id","show-add-modal-button",1,"btn","btn-link",3,"click"],["class","add-modal add-modal-dark",4,"ngIf"],[1,"allowlist-window"],["class","none",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"clr-col","padding-top-8","ml-1"],[1,"clr-row","expire-data"],[1,"bottom-line","clr-col-2"],["readonly","","type","date","newFormLayout","true",3,"placeholder","clrDate","clrDateChange"],["dateInput",""],[1,"clr-row"],[1,"clr-col-2"],["type","checkbox","clrCheckbox","","name","neverExpires","id","neverExpires",3,"checked","ngModel","ngModelChange"],["type","button","id","security_save",1,"btn","btn-primary",3,"disabled","click"],["type","button","id","security_cancel",1,"btn","btn-outline",3,"disabled","click"],[1,"label","label-warning"],[1,"add-modal","add-modal-dark"],["shape","window-close",1,"float-lg-right","margin-top-4",3,"click"],[1,"flex-direction-column"],["id","allowlist-textarea","clrTextarea","","name","cveIds",1,"w-100","font-italic",3,"ngModel","ngModelChange"],["id","add-to-system",1,"btn","btn-link",3,"disabled","click"],[1,"none"],["href","javascript:void(0)",3,"click"],["href","javascript:void(0)",1,"float-lg-right",3,"click"],["shape","times-circle"]],template:function(n,t){1&n&&(e.TgZ(0,"form",0)(1,"section")(2,"div",1)(3,"label",2),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"span",6),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"div",5)(13,"span"),e._uU(14),e.ALo(15,"translate"),e.qZA()(),e.TgZ(16,"div",5)(17,"span"),e._uU(18),e.ALo(19,"translate"),e.qZA()(),e.YNc(20,Ge,4,3,"div",7),e.qZA(),e.TgZ(21,"div",8)(22,"div",9)(23,"div")(24,"button",10),e.NdJ("click",function(){return t.showAddModal=!t.showAddModal}),e._uU(25),e.ALo(26,"translate"),e.qZA()(),e.YNc(27,we,15,11,"div",11),e.TgZ(28,"ul",12),e.YNc(29,Fe,3,3,"li",13),e.YNc(30,Re,5,1,"li",14),e.qZA()(),e.TgZ(31,"div",15)(32,"div",16)(33,"label",17),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"div")(37,"input",18,19),e.NdJ("clrDateChange",function(a){return t.expiresDate=a}),e.ALo(39,"translate"),e.qZA()()(),e.TgZ(40,"div",20),e._UZ(41,"label",21),e.TgZ(42,"clr-checkbox-wrapper")(43,"input",22),e.NdJ("ngModelChange",function(a){return t.neverExpires=a}),e.qZA(),e.TgZ(44,"label"),e._uU(45),e.ALo(46,"translate"),e.qZA()()()()()()()()(),e.TgZ(47,"div")(48,"button",23),e.NdJ("click",function(){return t.save()}),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"button",24),e.NdJ("click",function(){return t.cancel()}),e._uU(52),e.ALo(53,"translate"),e.qZA()()),2&n&&(e.xp6(4),e.Oqu(e.lcZ(5,19,"CVE_ALLOWLIST.DEPLOYMENT_SECURITY")),e.xp6(6),e.Oqu(e.lcZ(11,21,"CVE_ALLOWLIST.CVE_ALLOWLIST")),e.xp6(4),e.Oqu(e.lcZ(15,23,"CVE_ALLOWLIST.SYS_ALLOWLIST_EXPLAIN")),e.xp6(4),e.Oqu(e.lcZ(19,25,"CVE_ALLOWLIST.ADD_SYS")),e.xp6(2),e.Q6J("ngIf",t.hasExpired),e.xp6(5),e.hij(" ",e.lcZ(26,27,"CVE_ALLOWLIST.ADD")," "),e.xp6(2),e.Q6J("ngIf",t.showAddModal),e.xp6(2),e.Q6J("ngIf",(null==t.systemAllowlist||null==t.systemAllowlist.items?null:t.systemAllowlist.items.length)<1),e.xp6(1),e.Q6J("ngForOf",null==t.systemAllowlist?null:t.systemAllowlist.items),e.xp6(4),e.Oqu(e.lcZ(35,29,"CVE_ALLOWLIST.EXPIRES_AT")),e.xp6(3),e.s9C("placeholder",e.lcZ(39,31,"CVE_ALLOWLIST.NEVER_EXPIRES")),e.Q6J("clrDate",t.expiresDate),e.xp6(6),e.Q6J("checked",t.neverExpires)("ngModel",t.neverExpires),e.xp6(2),e.hij(" ",e.lcZ(46,33,"CVE_ALLOWLIST.NEVER_EXPIRES")," "),e.xp6(3),e.Q6J("disabled",!t.hasAllowlistChanged||t.inProgress),e.xp6(1),e.hij(" ",e.lcZ(50,35,"BUTTON.SAVE")," "),e.xp6(2),e.Q6J("disabled",!t.hasAllowlistChanged||t.inProgress),e.xp6(1),e.hij(" ",e.lcZ(53,37,"BUTTON.CANCEL")," "))},dependencies:[s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.On,s.F,c.qvL,c.MgK,c.CM6,c.KKC,c.PEh,c.Tsp,c.ZJg,c.XE5,c.LAP,Z.sg,Z.O5,A.X$],styles:[".clr-form-horizontal[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%] > .clr-control-label[_ngcontent-%COMP%]{width:14rem}.clr-form-horizontal[_ngcontent-%COMP%]   .flex-direction-column[_ngcontent-%COMP%]{flex-direction:column}.bottom-line[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse}.expire-data[_ngcontent-%COMP%]{min-width:12.5rem;margin-top:-1rem}.position-relative[_ngcontent-%COMP%]{position:relative}.pl-05[_ngcontent-%COMP%]{padding-left:.5rem}.mt-1[_ngcontent-%COMP%]{margin-top:1rem}.d-f[_ngcontent-%COMP%]{display:flex}.font-size-13[_ngcontent-%COMP%]{font-size:13px}.mt-05[_ngcontent-%COMP%]{margin-bottom:.5rem}.title[_ngcontent-%COMP%]{font-weight:700}.margin-top-4[_ngcontent-%COMP%]{margin-top:4px}.allowlist-window[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:3px;padding:12px;height:224px;width:222px;overflow-y:auto}.allowlist-window[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:24px;line-height:24px;list-style-type:none}.width-90per[_ngcontent-%COMP%]{width:90%}.none[_ngcontent-%COMP%]{color:#ccc}.color-0079bb[_ngcontent-%COMP%]{color:#0079bb}.padding-top-8[_ngcontent-%COMP%]{padding-top:8px}.padding-left-80[_ngcontent-%COMP%]{padding-left:80px}.add-modal[_ngcontent-%COMP%]{position:absolute;padding:0 8px;background-color:#eee}.add-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid}.add-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}"]}),l})()},{path:"setting",component:Pe},{path:"",redirectTo:"auth",pathMatch:"full"}]}];let Qe=(()=>{var o;class l{}return(o=l).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[d],imports:[f.m,h.Bz.forChild(He)]}),l})()}}]);