"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[8787],{3235:(Y,N,p)=>{p.d(N,{$D:()=>d,Cw:()=>A,O4:()=>Z,eA:()=>e,oT:()=>r,zk:()=>E});var r=function(T){return T.ALL_WORKERS="all",T}(r||{}),d=function(T){return T.PAUSE="pause",T.RESUME="resume",T.STOP="stop",T}(d||{});const E=1e4;var A=function(T){return T.PAUSED="JOB_SERVICE_DASHBOARD.PAUSED",T.RUNNING="JOB_SERVICE_DASHBOARD.RUNNING_STATUS",T}(A||{}),e=function(T){return T.RESUME_ALL="JOB_SERVICE_DASHBOARD.RESUME_ALL_BTN_TEXT",T.PAUSE_ALL="JOB_SERVICE_DASHBOARD.PAUSE_ALL_BTN_TEXT",T}(e||{}),Z=function(T){return T.SCHEDULER="scheduler",T.ALL="all",T}(Z||{})},8787:(Y,N,p)=>{p.r(N),p.d(N,{ReplicationModule:()=>cn});var r=p(6223),d=p(4554),E=p(2787),A=p(3555),e=p(5879),Z=p(1575),L=p(6682),T=p(3620),q=p(3997),C=p(4664),R=p(7398),P=p(6306),f=p(4716),m=p(4825),I=p(9315),D=p(8504),g=p(1691),O=p(6126),k=p(3924),Q=p(6266),U=function(i){return i[i.NO_FLATTING=0]="NO_FLATTING",i[i.FLATTEN_LEVEl_1=1]="FLATTEN_LEVEl_1",i[i.FLATTEN_LEVEl_2=2]="FLATTEN_LEVEl_2",i[i.FLATTEN_LEVEl_3=3]="FLATTEN_LEVEl_3",i[i.FLATTEN_ALL=-1]="FLATTEN_ALL",i}(U||{});const K={[U.NO_FLATTING]:"REPLICATION.NO_FLATTING",[U.FLATTEN_LEVEl_1]:"REPLICATION.FLATTEN_LEVEL_1",[U.FLATTEN_LEVEl_2]:"REPLICATION.FLATTEN_LEVEL_2",[U.FLATTEN_LEVEl_3]:"REPLICATION.FLATTEN_LEVEL_3",[U.FLATTEN_ALL]:"REPLICATION.FLATTEN_ALL"};var J=function(i){return i.MATCHES="matches",i.EXCLUDES="excludes",i}(J||{}),v=function(i){return i.MB="Mbps",i.KB="Kbps",i}(v||{}),V=function(i){return i.TRIGGER="trigger",i.STATUS="status",i}(V||{}),ge=p(8645),te=p(208),b=p(27),ne=p(2141),_e=p(4296),j=p(7655),M=p(9515),W=p(974),he=p(5210),a=p(8280),x=p(6814),me=p(8078),fe=p(8383);function Te(i,c){if(1&i&&(e.TgZ(0,"clr-control-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const o=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,o.ruleNameTooltip))}}function Ce(i,c){1&i&&(e.TgZ(0,"clr-tooltip-content",73)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.PUSH_BASED")))}function Oe(i,c){1&i&&(e.TgZ(0,"clr-tooltip-content",73)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.PULL_BASED")))}function Ae(i,c){if(1&i&&(e.TgZ(0,"option",82),e._uU(1),e.qZA()),2&i){const o=c.$implicit;e.Q6J("ngValue",o),e.xp6(1),e.AsE(" ",o.name,"-",o.url," ")}}function Ee(i,c){if(1&i&&(e.TgZ(0,"span",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,o.noEndpointInfo))}}function Re(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"span",84),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(2);return e.KtG(n.goRegistry())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"REPLICATION.ENDPOINTS")))}function Pe(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"div",5)(1,"label",74),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",7)(5,"div",75)(6,"select",76),e.NdJ("change",function(n){e.CHM(o);const l=e.oxw();return e.KtG(l.sourceChange(n))}),e._UZ(7,"option",77),e.YNc(8,Ae,2,3,"option",78),e.qZA()(),e.TgZ(9,"div",79),e.YNc(10,Ee,3,3,"span",80),e.YNc(11,Re,3,3,"span",81),e.qZA()()()}if(2&i){const o=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"REPLICATION.SOURCE_REGISTRY")),e.xp6(4),e.Q6J("compareWith",o.equals),e.xp6(2),e.Q6J("ngForOf",o.sourceList),e.xp6(2),e.Q6J("ngIf",0!==o.noEndpointInfo.length),e.xp6(1),e.Q6J("ngIf",0!==o.noEndpointInfo.length)}}function be(i,c){1&i&&(e.TgZ(0,"div",95)(1,"select",96)(2,"option",97),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"option",98),e._uU(6),e.ALo(7,"translate"),e.qZA()()()),2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"TAG_RETENTION.MAT")," "),e.xp6(3),e.hij(" ",e.lcZ(7,4,"TAG_RETENTION.EXC")," "))}const Ie=function(i,c){return{"width-name-resource":i,"width-tag-label":c}};function xe(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"div",91),e.YNc(1,be,8,6,"div",92),e.TgZ(2,"div",8)(3,"input",93,94),e.NdJ("input",function(n){e.CHM(o);const l=e.oxw(2);return e.KtG(l.trimText(n))}),e.qZA()()()}if(2&i){const o=e.oxw().index,t=e.oxw();e.xp6(1),e.Q6J("ngIf","tag"===(null==t.supportedFilters[o]?null:t.supportedFilters[o].type)),e.xp6(2),e.s9C("id","filter_"+(null==t.supportedFilters[o]?null:t.supportedFilters[o].type)),e.Q6J("ngClass",e.WLB(3,Ie,"tag"!==(null==t.supportedFilters[o]?null:t.supportedFilters[o].type),"tag"===(null==t.supportedFilters[o]?null:t.supportedFilters[o].type)))}}function Ze(i,c){if(1&i&&(e.TgZ(0,"option",103),e._uU(1),e.qZA()),2&i){const o=c.$implicit;e.s9C("value",o),e.xp6(1),e.hij(" ",o," ")}}function Le(i,c){if(1&i&&(e.TgZ(0,"div",99)(1,"select",100,101)(3,"option",102),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,Ze,2,2,"option",39),e.qZA()()),2&i){const o=e.oxw().index,t=e.oxw();e.xp6(1),e.s9C("id","select_"+(null==t.supportedFilters[o]?null:t.supportedFilters[o].type)),e.s9C("name",null==t.supportedFilters[o]?null:t.supportedFilters[o].type),e.xp6(3),e.hij(" ",e.lcZ(5,4,"REPLICATION.ALL")," "),e.xp6(2),e.Q6J("ngForOf",null==t.supportedFilters[o]?null:t.supportedFilters[o].values)}}function ve(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"button",112),e.NdJ("click",function(){const l=e.CHM(o).$implicit,s=e.oxw(4);return e.KtG(s.stickLabel(l.name))}),e._UZ(1,"clr-icon",113)(2,"hbr-label-piece",114),e.qZA()}if(2&i){const o=c.$implicit,t=e.oxw(4);e.xp6(1),e.Udp("visibility",t.isSelect(o.name)?"visible":"hidden"),e.xp6(1),e.Q6J("label",o)("labelWidth",130)}}function Ne(i,c){1&i&&(e.TgZ(0,"button",115)(1,"span",83),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",116),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"REPLICATION.NO_LABEL_INFO")),e.xp6(3),e.Oqu(e.lcZ(6,4,"CONFIG.LABEL")))}const Me=function(){return{"max-height.px":230}};function Se(i,c){if(1&i&&(e.TgZ(0,"clr-dropdown-menu",109),e.YNc(1,ve,3,4,"button",110),e.YNc(2,Ne,7,6,"button",111),e.qZA()),2&i){const o=e.oxw(3);e.Q6J("ngStyle",e.DdM(3,Me)),e.xp6(1),e.Q6J("ngForOf",o.supportedFilterLabels),e.xp6(1),e.Q6J("ngIf",!(null!=o.supportedFilterLabels&&o.supportedFilterLabels.length))}}const G=function(){return{standalone:!0}};function ye(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"div",104)(1,"div",95)(2,"select",96)(3,"option",97),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"option",98),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",105)(10,"input",106),e.NdJ("ngModelChange",function(n){e.CHM(o);const l=e.oxw(2);return e.KtG(l.stringForLabelFilter=n)}),e.qZA(),e.TgZ(11,"clr-dropdown"),e._UZ(12,"clr-icon",107),e.YNc(13,Se,3,4,"clr-dropdown-menu",108),e.qZA()()()}if(2&i){const o=e.oxw(2);e.xp6(4),e.hij(" ",e.lcZ(5,4,"TAG_RETENTION.MAT")," "),e.xp6(3),e.hij(" ",e.lcZ(8,6,"TAG_RETENTION.EXC")," "),e.xp6(3),e.Q6J("ngModel",o.stringForLabelFilter)("ngModelOptions",e.DdM(8,G))}}function Ue(i,c){if(1&i&&(e.TgZ(0,"div",117)(1,"span"),e._uU(2),e.qZA()()),2&i){const o=e.oxw().index,t=e.oxw();e.xp6(2),e.Oqu(null==t.supportedFilters[o]?null:t.supportedFilters[o].values)}}function Fe(i,c){1&i&&(e.TgZ(0,"span",118),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TOOLTIP.NAME_FILTER")))}function we(i,c){1&i&&(e.TgZ(0,"span",118),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TOOLTIP.TAG_FILTER")))}function qe(i,c){1&i&&(e.TgZ(0,"span",118),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TOOLTIP.LABEL_FILTER")))}function De(i,c){1&i&&(e.TgZ(0,"span",118),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TOOLTIP.RESOURCE_FILTER")))}function ke(i,c){if(1&i&&(e.TgZ(0,"clr-tooltip-content",73),e.YNc(1,Fe,3,3,"span",59),e.YNc(2,we,3,3,"span",59),e.YNc(3,qe,3,3,"span",59),e.YNc(4,De,3,3,"span",59),e.qZA()),2&i){const o=e.oxw().index,t=e.oxw();e.xp6(1),e.Q6J("ngIf","name"===(null==t.supportedFilters[o]?null:t.supportedFilters[o].type)),e.xp6(1),e.Q6J("ngIf","tag"===(null==t.supportedFilters[o]?null:t.supportedFilters[o].type)),e.xp6(1),e.Q6J("ngIf","label"===(null==t.supportedFilters[o]?null:t.supportedFilters[o].type)),e.xp6(1),e.Q6J("ngIf","resource"===(null==t.supportedFilters[o]?null:t.supportedFilters[o].type))}}function Je(i,c){if(1&i&&(e.TgZ(0,"div",85)(1,"div",86)(2,"label",30),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,xe,5,6,"div",87),e.YNc(6,Le,7,6,"div",88),e.YNc(7,ye,14,9,"div",89),e.YNc(8,Ue,3,1,"div",90),e.TgZ(9,"clr-tooltip"),e._UZ(10,"clr-icon",19),e.YNc(11,ke,5,4,"clr-tooltip-content",20),e.qZA()()()),2&i){const o=c.index,t=e.oxw();e.xp6(1),e.Q6J("formGroupName",o),e.xp6(2),e.hij("",e.lcZ(4,6,"REPLICATION."+(null==t.supportedFilters[o]?null:t.supportedFilters[o].type.toUpperCase())),":"),e.xp6(2),e.Q6J("ngIf","input"===(null==t.supportedFilters[o]?null:t.supportedFilters[o].style)),e.xp6(1),e.Q6J("ngIf","radio"===(null==t.supportedFilters[o]?null:t.supportedFilters[o].style)&&(null==t.supportedFilters[o]?null:t.supportedFilters[o].values.length)>1),e.xp6(1),e.Q6J("ngIf","label"===(null==t.supportedFilters[o]?null:t.supportedFilters[o].type)&&"list"===(null==t.supportedFilters[o]?null:t.supportedFilters[o].style)),e.xp6(1),e.Q6J("ngIf","radio"===(null==t.supportedFilters[o]?null:t.supportedFilters[o].style)&&(null==t.supportedFilters[o]?null:t.supportedFilters[o].values.length)<=1)}}function Ye(i,c){if(1&i&&(e.TgZ(0,"option",82),e._uU(1),e.qZA()),2&i){const o=c.$implicit;e.Q6J("ngValue",o),e.xp6(1),e.AsE(" ",o.name,"-",o.url," ")}}function Qe(i,c){if(1&i&&(e.TgZ(0,"label",83),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,o.noEndpointInfo))}}function je(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"span",84),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(2);return e.KtG(n.goRegistry())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"REPLICATION.ENDPOINTS")))}function Ge(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"div",5)(1,"label",6),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",119)(5,"div",75)(6,"select",120),e.NdJ("change",function(n){e.CHM(o);const l=e.oxw();return e.KtG(l.targetChange(n))}),e._UZ(7,"option",77),e.YNc(8,Ye,2,3,"option",78),e.qZA()(),e.TgZ(9,"div",79),e.YNc(10,Qe,3,3,"label",80),e.YNc(11,je,3,3,"span",81),e.qZA()()()}if(2&i){const o=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"REPLICATION.DEST_REGISTRY")),e.xp6(4),e.Q6J("compareWith",o.equals),e.xp6(2),e.Q6J("ngForOf",o.targetList),e.xp6(2),e.Q6J("ngIf",0!==o.noEndpointInfo.length),e.xp6(1),e.Q6J("ngIf",0!==o.noEndpointInfo.length)}}function He(i,c){1&i&&(e.TgZ(0,"clr-tooltip-content",121)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.DESTINATION_NAMESPACE")))}function Be(i,c){1&i&&(e.TgZ(0,"clr-control-error",122),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"REPLICATION.NAMESPACE_TOOLTIP")," "))}function ze(i,c){if(1&i&&(e.TgZ(0,"option",103),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const o=c.$implicit;e.Q6J("value",o.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,o.value)," ")}}function Ke(i,c){1&i&&(e.TgZ(0,"clr-tooltip-content",123)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"div"),e._uU(17),e.ALo(18,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,6,"REPLICATION.FLATTEN_LEVEL_TIP")," "),e.xp6(3),e.hij(" ",e.lcZ(6,8,"REPLICATION.FLATTEN_LEVEL_TIP_ALL")," "),e.xp6(3),e.hij(" ",e.lcZ(9,10,"REPLICATION.FLATTEN_LEVEL_TIP_NO")," "),e.xp6(3),e.hij(" ",e.lcZ(12,12,"REPLICATION.FLATTEN_LEVEL_TIP_1")," "),e.xp6(3),e.hij(" ",e.lcZ(15,14,"REPLICATION.FLATTEN_LEVEL_TIP_2")," "),e.xp6(3),e.hij(" ",e.lcZ(18,16,"REPLICATION.FLATTEN_LEVEL_TIP_3")," "))}function Ve(i,c){if(1&i&&(e.TgZ(0,"option",103),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const o=c.$implicit;e.Q6J("value",o),e.xp6(1),e.hij(" ",e.lcZ(2,2,"REPLICATION."+o.toUpperCase())," ")}}function We(i,c){1&i&&(e.TgZ(0,"clr-tooltip-content",123),e._UZ(1,"cron-tooltip"),e.qZA())}function $e(i,c){1&i&&(e.TgZ(0,"clr-control-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"REPLICATION.CRON_ERROR_TIP")," "))}function Xe(i,c){1&i&&(e.TgZ(0,"clr-tooltip-content",121)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"REPLICATION.PUSH_BASED_ONLY")," "))}function et(i,c){if(1&i&&(e.TgZ(0,"option",103),e._uU(1),e.qZA()),2&i){const o=c.$implicit;e.Q6J("value",o.UNIT),e.xp6(1),e.hij(" ",o.UNIT," ")}}const tt=function(i){return{max_job_workers:i}};function nt(i,c){if(1&i&&(e.TgZ(0,"clr-tooltip-content",121)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i){const o=e.oxw();e.xp6(2),e.Oqu(e.xi3(3,1,"REPLICATION.BANDWIDTH_TOOLTIP",e.VKq(4,tt,o.maxJobWorkers)))}}function it(i,c){1&i&&(e.TgZ(0,"clr-control-error",118),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"REPLICATION.BANDWIDTH_ERROR_TIP")," "))}function ot(i,c){1&i&&(e.TgZ(0,"clr-tooltip-content",73)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.OVERRIDE")))}function rt(i,c){1&i&&(e.TgZ(0,"clr-tooltip-content",73)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"REPLICATION.COPY_BY_CHUNK_TIP")))}const H="0 ",y=100,F=1024;let ie=(()=>{var i;class c{constructor(t,n,l,s,u,_,h){this.fb=t,this.repService=n,this.endpointService=l,this.errorHandler=s,this.translateService=u,this.jobServiceService=_,this.labelService=h,this.sourceList=[],this.targetList=[],this.noEndpointInfo="",this.isPushMode=!0,this.noSelectedEndpoint=!0,this.TRIGGER_TYPES={MANUAL:"manual",SCHEDULED:"scheduled",EVENT_BASED:"event_based"},this.ruleNameTooltip="REPLICATION.NAME_TOOLTIP",this.headerTitle="REPLICATION.ADD_POLICY",this.maxJobWorkers=10,this.inProgress=!1,this.onGoing=!1,this.inNameChecking=!1,this.isRuleNameValid=!0,this.nameChecker=new ge.x,this.supportedFilterLabels=[],this.goToRegistry=new e.vpe,this.reload=new e.vpe,this.flattenLevelMap=K,this.speedUnits=[{UNIT:v.KB},{UNIT:v.MB}],this.selectedUnit=v.KB,this.copySpeedUnit=v.KB,this.showChunkOption=!1,this.stringForLabelFilter="",this.copyStringForLabelFilter="",this.createForm()}initRegistryInfo(t){this.inProgress=!0,this.endpointService.getRegistryInfo({id:t}).pipe((0,f.x)(()=>this.inProgress=!1)).subscribe({next:n=>{(this.isPushMode&&!t||!this.isPushMode)&&this.setFilterAndTrigger(n),t&&this.checkChunkOption(t,n)},error:n=>{this.inlineAlert.showInlineError(n)}})}getAllRegistries(){this.endpointService.listRegistriesResponse({page:1,pageSize:y}).subscribe(t=>{if(t.headers){const n=t.headers.get("X-Total-Count"),l=parseInt(n,0);let s=t.body||[];if(l<=y)this.targetList=t.body||[],this.sourceList=t.body||[];else{const u=Math.ceil(l/y),_=[];for(let h=2;h<=u;h++)_.push(this.endpointService.listRegistries({page:h,pageSize:y}));(0,I.D)(_).subscribe(h=>{h&&h.length&&(h.forEach(w=>{s=s.concat(w)}),this.sourceList=s,this.targetList=s)})}}},t=>{this.errorHandler.error(t)})}ngOnInit(){this.getAllLabels(),this.getAllRegistries(),this.nameChecker.pipe((0,T.b)(300)).pipe((0,q.x)()).subscribe(t=>{let n=this.ruleForm.controls.name;n&&(this.isRuleNameValid=n.valid,this.isRuleNameValid?(this.inNameChecking=!0,this.repService.getReplicationRules(0,t).subscribe(l=>{l.some(s=>s.name===t&&s.id!==this.policyId)&&(this.ruleNameTooltip="TOOLTIP.RULE_USER_EXISTING",this.isRuleNameValid=!1),this.inNameChecking=!1},()=>{this.inNameChecking=!1})):this.ruleNameTooltip="REPLICATION.NAME_TOOLTIP")}),this.initMaxJobWorkers()}trimText(t){t.target.value&&(t.target.value=t.target.value.replace(/\s+/g,""))}equals(t,n){return t&&n?t.id===n.id:t===n}pushModeChange(){this.setFilter([]),this.initRegistryInfo(0),this.checkChunkOption(this.ruleForm?.get("dest_registry")?.value?.id)}pullModeChange(){let t=this.ruleForm.get("src_registry").value;t?(this.setFilter([]),this.initRegistryInfo(t.id)):this.checkChunkOption(0)}sourceChange(t){this.noSelectedEndpoint=!1;let n=this.ruleForm.get("src_registry").value;this.setFilter([]),this.initRegistryInfo(n.id)}ngOnDestroy(){this.confirmSub&&this.confirmSub.unsubscribe(),this.nameChecker&&this.nameChecker.unsubscribe()}get isValid(){if(this.ruleForm.controls.dest_namespace.value&&this.ruleForm.controls.dest_namespace.invalid||this.ruleForm.controls.speed.invalid)return!1;let u=!!this.ruleForm.value.trigger.trigger_settings.cron;return!(!this.ruleForm.controls.name.value||!this.ruleForm.controls.trigger.value.type||!this.isRuleNameValid||!this.isPushMode&&!this.ruleForm.controls.src_registry.value||this.isPushMode&&!this.ruleForm.controls.dest_registry.value||!(!this.isNotSchedule()&&u&&(0,g.n6)(this.ruleForm.value.trigger.trigger_settings.cron||"")||this.isNotSchedule()))}createForm(){this.ruleForm=this.fb.group({name:["",r.kI.required],description:"",src_registry:new r.p4,dest_registry:new r.p4,dest_namespace:"",dest_namespace_replace_count:-1,trigger:this.fb.group({type:"",trigger_settings:this.fb.group({cron:""})}),filters:this.fb.array([]),enabled:!0,deletion:!1,override:!0,speed:-1,copy_by_chunk:!1})}isNotSchedule(){return this.ruleForm.get("trigger").get("type").value!==this.TRIGGER_TYPES.SCHEDULED}isNotEventBased(){return this.ruleForm.get("trigger").get("type").value!==this.TRIGGER_TYPES.EVENT_BASED}formReset(){this.ruleForm.reset({name:"",description:"",trigger:{type:"",trigger_settings:{cron:""}},deletion:!1,enabled:!0,override:!0,dest_namespace_replace_count:U.FLATTEN_LEVEl_1,speed:-1,copy_by_chunk:!1}),this.isPushMode=!0,this.selectedUnit=v.KB,this.stringForLabelFilter="",this.copyStringForLabelFilter=""}updateRuleFormAndCopyUpdateForm(t){t?.filters?.length&&(this.stringForLabelFilter="",this.copyStringForLabelFilter="",t.filters.forEach(n=>{n.type===b.vA.LABEL&&(this.stringForLabelFilter=n.value.join(","),this.copyStringForLabelFilter=this.stringForLabelFilter)})),this.isPushMode=0!==t.dest_registry.id,this.checkChunkOption(t.dest_registry.id||t.src_registry.id),setTimeout(()=>{let n=this.convertToInputValue(t.speed);t.trigger.trigger_settings=t.trigger.trigger_settings?t.trigger.trigger_settings:{cron:""},this.ruleForm.reset({name:t.name,description:t.description,dest_namespace:t.dest_namespace,dest_namespace_replace_count:t.dest_namespace_replace_count,src_registry:t.src_registry,dest_registry:t.dest_registry,trigger:t.trigger,deletion:t.deletion,enabled:t.enabled,override:t.override,speed:n,copy_by_chunk:t.copy_by_chunk});let l=this.getFilterArray(t);this.noSelectedEndpoint=!1,this.setFilter(l),this.copyUpdateForm=(0,g.d9)(this.ruleForm.value),this.copySpeedUnit=this.selectedUnit,this.copyUpdateForm.trigger=(0,g.d9)(t.trigger),this.copyUpdateForm.filters=null===this.copyUpdateForm.filters?[]:this.copyUpdateForm.filters},100)}get filters(){return this.ruleForm.get("filters")}setFilter(t){const n=t.map(s=>{if(s.type===b.vA.LABEL){let u=this.fb.group({type:b.vA.LABEL,decoration:s.decoration||J.MATCHES}),_=this.fb.array(s.value);return u.setControl("value",_),u}return this.fb.group(s.type===b.vA.TAG?{type:b.vA.TAG,decoration:s.decoration||J.MATCHES,value:s.value}:s)}),l=this.fb.array(n);this.ruleForm.setControl("filters",l)}initFilter(t){if(t===b.vA.LABEL){const n=this.fb.array([]),l=this.fb.group({type:t,decoration:J.MATCHES});return l.setControl("value",n),l}return this.fb.group(t===b.vA.TAG?{type:t,decoration:J.MATCHES,value:""}:{type:t,value:""})}targetChange(t){if(t&&t.target){if("-1"===t.target.value)return void(this.noSelectedEndpoint=!0);this.noSelectedEndpoint=!1,this.initRegistryInfo(this.ruleForm.get("dest_registry").value.id)}}checkRuleName(){let t=this.ruleForm.controls.name.value;t?this.nameChecker.next(t):this.ruleNameTooltip="REPLICATION.NAME_TOOLTIP"}hasFormChange(){return this.copySpeedUnit!==this.selectedUnit||this.copyStringForLabelFilter!==this.stringForLabelFilter||!(0,g.Qr)(this.hasChanges())}onSubmit(){"scheduled"!==this.ruleForm.value.trigger.type&&this.ruleForm.get("trigger").get("trigger_settings").get("cron").setValue(""),this.inProgress=!0;let t=this.ruleForm.value;t.speed=this.convertToKB(t.speed),t.dest_namespace_replace_count=t.dest_namespace_replace_count?parseInt(t.dest_namespace_replace_count.toString(),10):0,this.isPushMode?t.src_registry=null:t.dest_registry=null;let n=t.filters;(this.stringForLabelFilter||this.copyStringForLabelFilter)&&t.filters.forEach(l=>{l.type===b.vA.LABEL&&(l.value=this.stringForLabelFilter.split(",").filter(s=>s))});for(let l=n.length-1;l>=0;l--)(!n[l].value||n[l].value instanceof Array&&0===n[l].value.length)&&t.filters.splice(l,1);this.showChunkOption||(delete t?.copy_by_chunk,delete this.ruleForm?.value?.copy_by_chunk),this.policyId<0?this.repService.createReplicationRule(t).subscribe(()=>{this.translateService.get("REPLICATION.CREATED_SUCCESS").subscribe(l=>this.errorHandler.info(l)),this.inProgress=!1,this.reload.emit(!0),this.createForm(),this.close()},l=>{this.inProgress=!1,this.inlineAlert.showInlineError(l)}):this.repService.updateReplicationRule(this.policyId,this.ruleForm.value).subscribe(()=>{this.translateService.get("REPLICATION.UPDATED_SUCCESS").subscribe(l=>this.errorHandler.info(l)),this.inProgress=!1,this.reload.emit(!0),this.close()},l=>{this.inProgress=!1,this.inlineAlert.showInlineError(l)})}openCreateEditRule(t){this.formReset(),this.copyUpdateForm=(0,g.d9)(this.ruleForm.value),this.inlineAlert.close(),this.noSelectedEndpoint=!0,this.isRuleNameValid=!0,this.policyId=-1,this.createEditRuleOpened=!0,this.noEndpointInfo="",this.showChunkOption=!1,0===this.targetList.length&&(this.noEndpointInfo="REPLICATION.NO_ENDPOINT_INFO"),t?(this.onGoing=!0,this.policyId=+t.id,this.headerTitle="REPLICATION.EDIT_POLICY_TITLE",this.repService.getRegistryInfo(t.src_registry.id).pipe((0,f.x)(()=>this.onGoing=!1)).subscribe({next:n=>{this.setFilterAndTrigger(n),this.updateRuleFormAndCopyUpdateForm(t)},error:n=>{this.repService.getRegistryInfo(0).subscribe(l=>{this.setFilterAndTrigger(l),this.updateRuleFormAndCopyUpdateForm(t)}),this.translateService.get("REPLICATION.UNREACHABLE_SOURCE_REGISTRY",{error:(0,k.Po)(n)}).subscribe(l=>{this.inlineAlert.showInlineError(l)})}})):(this.onGoing=!0,this.repService.getRegistryInfo(0).pipe((0,f.x)(()=>this.onGoing=!1)).subscribe(l=>{this.setFilterAndTrigger(l),this.copyUpdateForm=(0,g.d9)(this.ruleForm.value)},l=>{this.inlineAlert.showInlineError(l)}),this.headerTitle="REPLICATION.ADD_POLICY",this.copyUpdateForm=(0,g.d9)(this.ruleForm.value))}setFilterAndTrigger(t){this.supportedFilters=t.supported_resource_filters,this.filters.clear(),this.supportedFilters.forEach(n=>{this.filters.push(this.initFilter(n.type))}),this.supportedTriggers=t.supported_triggers,this.ruleForm.get("trigger").get("type").setValue(this.supportedTriggers[0])}close(){this.createEditRuleOpened=!1}confirmCancel(t){this.inlineAlert.close(),this.createForm(),this.close()}onCancel(){this.hasFormChange()?this.inlineAlert.showInlineConfirmation({message:"ALERT.FORM_CHANGE_CONFIRMATION"}):(this.createForm(),this.close())}goRegistry(){this.goToRegistry.emit()}hasChanges(){const t=(0,g.d9)(this.ruleForm.value),n=(0,g.d9)(this.copyUpdateForm);return!(0,g.Iq)(t,n)}getFilterArray(t){let n=[];for(let l=0;l<this.supportedFilters.length;l++){let s=!1;t.filters&&t.filters.forEach(u=>{this.supportedFilters[l].type===u.type&&(n.push(u),s=!0)}),s||n.push(this.supportedFilters[l].type===b.vA.LABEL?{type:this.supportedFilters[l].type,value:[]}:{type:this.supportedFilters[l].type,value:""})}return n}cronInputShouldShowError(){return!(!this.ruleForm?.get("trigger")?.get("trigger_settings")?.get("cron")?.touched&&!this.ruleForm?.get("trigger")?.get("trigger_settings")?.get("cron")?.dirty)&&(!this.ruleForm?.get("trigger")?.get("trigger_settings")?.get("cron")?.value?.startsWith(H)||this.ruleForm?.get("trigger")?.get("trigger_settings")?.get("cron")?.invalid||!(0,g.n6)(this.ruleForm.get("trigger").get("trigger_settings").get("cron").value))}stickLabel(t){if(this.isSelect(t)){let n=this.stringForLabelFilter.split(",");n=n.filter(l=>l!==t),this.stringForLabelFilter=n.join(",")}else this.stringForLabelFilter+=this.stringForLabelFilter?`,${t}`:`${t}`}inputInvalid(t){"REPLICATION.ADD_POLICY"===this.headerTitle&&t&&t.target&&((!t.target.value||0!==(t.target.value&&t.target.value.indexOf(H)))&&(t.target.value=H),t.target.value=t.target.value.replace(/\s+/g," "),t.target.value&&t.target.value.split(/\s+/g).length>6&&(t.target.value=t.target.value.trim()))}changeTrigger(t){"REPLICATION.ADD_POLICY"===this.headerTitle&&t&&t.target&&t.target.value===this.TRIGGER_TYPES.SCHEDULED&&this.ruleForm.get("trigger").get("trigger_settings").get("cron").setValue(H)}getAllLabels(){this.labelService.ListLabelsResponse({pageSize:y,page:1,scope:"g"}).subscribe(t=>{if(t.headers){const n=t.headers.get("X-Total-Count"),l=parseInt(n,0);let s=t.body||[];if(l<=y)s&&s.length&&s.forEach(u=>{this.supportedFilterLabels.push({name:u.name,color:u.color?u.color:"#FFFFFF",scope:"g"})});else{const u=Math.ceil(l/y),_=[];for(let h=2;h<=u;h++)_.push(this.labelService.ListLabels({page:h,pageSize:y,scope:"g"}));(0,I.D)(_).subscribe(h=>{h&&h.length&&(h.forEach(w=>{s=s.concat(w)}),s.forEach(w=>{this.supportedFilterLabels.push({name:w.name,color:w.color?w.color:"#FFFFFF",scope:"g"})}))})}}})}convertToKB(t){return t?this.selectedUnit===v.KB?+t:t*F:-1}convertToInputValue(t){return t>=F&&t%F==0?(this.selectedUnit=v.MB,Math.ceil(t/F)):(this.selectedUnit=v.KB,t||-1)}checkChunkOption(t,n){this.showChunkOption=!1,this.ruleForm.get("copy_by_chunk").reset(!1),n?this.showChunkOption=n.supported_copy_by_chunk:t&&this.endpointService.getRegistryInfo({id:t}).subscribe(l=>{l&&(this.showChunkOption=l.supported_copy_by_chunk)})}isSelect(t){return!(!t||!this.stringForLabelFilter)&&-1!==this.stringForLabelFilter.indexOf(t)}initMaxJobWorkers(){this.jobServiceService.getWorkerPools().subscribe({next:t=>{(t??[]).length>0&&(this.maxJobWorkers=t[0].concurrency)}})}}return(i=c).\u0275fac=function(t){return new(t||i)(e.Y36(r.QS),e.Y36(ne.xZ),e.Y36(_e.k),e.Y36(j.q),e.Y36(M.sK),e.Y36(W.af),e.Y36(he.Q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hbr-create-edit-rule"]],viewQuery:function(t,n){if(1&t&&e.Gf(te.l,7),2&t){let l;e.iGM(l=e.CRH())&&(n.inlineAlert=l.first)}},inputs:{withAdmiral:"withAdmiral"},outputs:{goToRegistry:"goToRegistry",reload:"reload"},decls:154,vars:106,consts:[[3,"clrModalOpen","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body","modal-body-height"],[3,"confirmEvt"],["novalidate","",1,"clr-form","clr-form-horizontal",3,"formGroup"],[1,"clr-form-control"],[1,"clr-control-label","required"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["type","text","id","ruleName","size","35","pattern","^[a-z0-9]+(?:[._-][a-z0-9]+)*$","required","","maxlength","255","formControlName","name","autocomplete","off",1,"clr-input","width-input",3,"keyup"],["ruleName",""],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"spinner","spinner-inline","spinner-pos",3,"hidden"],[4,"ngIf"],["clrTextarea","","type","text","id","ruleDescription","row","3","formControlName","description",1,"width-input"],["clrInline",""],["clrRadio","","type","radio","id","push_base","name","replicationMode",3,"value","disabled","ngModel","ngModelOptions","ngModelChange","change"],["for","push_base"],[1,"mode-tooltip"],["clrTooltipTrigger","","shape","info-circle","size","24"],["clrPosition","top-left","clrSize","md",4,"clrIfOpen"],["clrRadio","","type","radio","id","pull_base","name","replicationMode",3,"value","disabled","ngModel","ngModelOptions","ngModelChange","change"],["for","pull_base"],["class","clr-form-control",4,"ngIf"],[1,"clr-control-label"],[1,"spinner","spinner-inline","spinner-position",3,"hidden"],["formArrayName","filters",1,"clr-control-container"],["class","filterSelect",4,"ngFor","ngForOf"],["for","dest_namespace",1,"clr-control-label"],[1,"clr-input-wrapper","flex"],[1,"sub-label"],["autocomplete","off","formControlName","dest_namespace","type","text","id","dest_namespace","pattern","^[a-z0-9]+(?:[/._-][a-z0-9]+)*$","maxlength","255",1,"clr-input","width-name-resource"],[1,"des-tooltip"],["clrPosition","top-left","clrSize","lg",4,"clrIfOpen"],["class","margin-left-90px",4,"ngIf"],[1,"clr-form-control","flattening"],["for","dest_namespace_replace_count",1,"clr-control-label"],[1,"clr-select-wrapper","flex"],["id","dest_namespace_replace_count","formControlName","dest_namespace_replace_count",1,"clr-select","width-name-resource"],[3,"value",4,"ngFor","ngForOf"],["class","flatten","clrPosition","top-left","clrSize","lg",4,"clrIfOpen"],["formGroupName","trigger"],[1,"select","clr-select-wrapper"],["id","ruleTrigger","formControlName","type",1,"clr-select","width-input",3,"change"],["formGroupName","trigger_settings",1,"clr-form-control"],[1,"flex",3,"hidden"],["for","targetCron",1,"required","sub-label"],[1,"clr-control-container","no-extend"],["autocomplete","off","type","text","name","targetCron","id","targetCron","required","","pattern","^0\\s(?!(\\*\\s)).+$","formControlName","cron",1,"form-control","cron-input","clr-input",3,"input"],[1,"clr-checkbox-wrapper","mt-0",3,"hidden"],["type","checkbox","id","ruleDeletion","formControlName","deletion",1,"clr-checkbox",3,"checked"],["for","ruleDeletion",1,"clr-control-label","event-label"],[1,"clr-form-control","bandwidth"],["for","speed",1,"required","clr-control-label"],[1,"clr-checkbox-wrapper","speed"],["type","text","id","speed","name","speed","formControlName","speed","autocomplete","off","required","","pattern","(^-1$)|(^([1-9]+)([0-9]+)*$)","maxlength","5",1,"clr-input"],[1,"clr-select-wrapper","unit-select"],["id","speed_unit","name","speed_unit",1,"clr-select","unit-select",3,"ngModelOptions","ngModel","ngModelChange"],[1,"ml-10px"],["class","tooltip-content",4,"ngIf"],[1,"clr-control-container","clr-control-inline"],[1,"clr-checkbox-wrapper"],["type","checkbox","id","overridePolicy","formControlName","override",1,"clr-checkbox",3,"checked"],["for","overridePolicy",1,"clr-control-label"],[1,"override-tooltip"],[1,"clr-checkbox-wrapper",3,"hidden"],["type","checkbox","id","by-chunk","formControlName","copy_by_chunk",1,"clr-checkbox"],["for","by-chunk",1,"clr-control-label"],["type","checkbox","id","enablePolicy","formControlName","enabled",1,"clr-checkbox",3,"checked"],["for","enablePolicy",1,"clr-control-label"],[1,"modal-footer"],["type","button","id","ruleBtnCancel",1,"btn","btn-outline",3,"disabled","click"],["type","submit","id","ruleBtnOk",1,"btn","btn-primary",3,"clrLoading","disabled","click"],["clrPosition","top-left","clrSize","md"],[1,"required","clr-control-label"],[1,"clr-select-wrapper"],["id","src_registry_id","formControlName","src_registry",1,"clr-select","width-input",3,"compareWith","change"],[1,"display-none"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"space-between"],["class","alert-label",4,"ngIf"],["class","alert-label go-link",3,"click",4,"ngIf"],[3,"ngValue"],[1,"alert-label"],[1,"alert-label","go-link",3,"click"],[1,"filterSelect"],[1,"flex",3,"formGroupName"],["class","flex",4,"ngIf"],["class","select resource-box clr-select-wrapper",4,"ngIf"],["class","select flex",4,"ngIf"],["class","resource-box",4,"ngIf"],[1,"flex"],["class","clr-select-wrapper mr-1",4,"ngIf"],["autocomplete","off","type","text","size","14","formControlName","value",1,"clr-input",3,"ngClass","id","input"],["filterValue",""],[1,"clr-select-wrapper","mr-1"],["formControlName","decoration",1,"clr-select","width-match-exclude"],["value","matches"],["value","excludes"],[1,"select","resource-box","clr-select-wrapper"],["formControlName","value",1,"clr-select","width-name-resource",3,"id","name"],["selectedValue",""],["value",""],[3,"value"],[1,"select","flex"],[1,"clr-input-wrapper","position-relative","width-tag-label"],["autocomplete","off","type","text","id","labelFilter",1,"clr-input","width-tag-label","label-input",3,"ngModel","ngModelOptions","ngModelChange"],["clrDropdownTrigger","","shape","caret","dir","down",1,"down"],["class","right-align","clrPosition","bottom-left",3,"ngStyle",4,"clrIfOpen"],["clrPosition","bottom-left",1,"right-align",3,"ngStyle"],["type","button","class","dropdown-item flex",3,"click",4,"ngFor","ngForOf"],["type","button","class","dropdown-item space-between no-labels",4,"ngIf"],["type","button",1,"dropdown-item","flex",3,"click"],["shape","check"],[3,"label","labelWidth"],["type","button",1,"dropdown-item","space-between","no-labels"],["routerLink","/harbor/labels",1,"alert-label","go-link"],[1,"resource-box"],[1,"tooltip-content"],[1,"form-select","clr-control-container"],["id","dest_registry","formControlName","dest_registry",1,"clr-select","width-input",3,"compareWith","change"],["clrPosition","top-left","clrSize","lg"],[1,"margin-left-90px"],["clrPosition","top-left","clrSize","lg",1,"flatten"]],template:function(t,n){1&t&&(e.TgZ(0,"clr-modal",0),e.NdJ("clrModalOpenChange",function(s){return n.createEditRuleOpened=s}),e.TgZ(1,"h3",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"inline-alert",3),e.NdJ("confirmEvt",function(s){return n.confirmCancel(s)}),e.qZA(),e.TgZ(6,"form",4)(7,"div",5)(8,"label",6),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",7)(12,"div",8)(13,"input",9,10),e.NdJ("keyup",function(){return n.checkRuleName()}),e.qZA(),e._UZ(15,"clr-icon",11)(16,"span",12),e.qZA(),e.YNc(17,Te,3,3,"clr-control-error",13),e.qZA()(),e.TgZ(18,"clr-textarea-container")(19,"label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"textarea",14),e.qZA(),e.TgZ(23,"clr-radio-container",15)(24,"label"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"clr-radio-wrapper")(28,"input",16),e.NdJ("ngModelChange",function(s){return n.isPushMode=s})("change",function(){return n.pushModeChange()}),e.qZA(),e.TgZ(29,"label",17),e._uU(30,"Push-based "),e.TgZ(31,"clr-tooltip",18),e._UZ(32,"clr-icon",19),e.YNc(33,Ce,4,3,"clr-tooltip-content",20),e.qZA()()(),e.TgZ(34,"clr-radio-wrapper")(35,"input",21),e.NdJ("ngModelChange",function(s){return n.isPushMode=s})("change",function(){return n.pullModeChange()}),e.qZA(),e.TgZ(36,"label",22),e._uU(37,"Pull-based "),e.TgZ(38,"clr-tooltip",18),e._UZ(39,"clr-icon",19),e.YNc(40,Oe,4,3,"clr-tooltip-content",20),e.qZA()()()(),e.YNc(41,Pe,12,7,"div",23),e.TgZ(42,"div",5)(43,"label",24),e._uU(44),e.ALo(45,"translate"),e.qZA(),e._UZ(46,"span",25),e.TgZ(47,"div",26),e.YNc(48,Je,12,8,"div",27),e.qZA()(),e.YNc(49,Ge,12,7,"div",23),e.TgZ(50,"div",5)(51,"label",28),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"div",7)(55,"div",29)(56,"label",30),e._uU(57),e.ALo(58,"translate"),e.qZA(),e._UZ(59,"input",31),e.TgZ(60,"clr-tooltip",32),e._UZ(61,"clr-icon",19),e.YNc(62,He,4,3,"clr-tooltip-content",33),e.qZA()(),e.YNc(63,Be,3,3,"clr-control-error",34),e.qZA()(),e.TgZ(64,"div",35),e._UZ(65,"label",36),e.TgZ(66,"div",7)(67,"div",37)(68,"label",30),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.TgZ(71,"select",38),e.YNc(72,ze,3,4,"option",39),e.ALo(73,"keyvalue"),e.qZA(),e.TgZ(74,"clr-tooltip",32),e._UZ(75,"clr-icon",19),e.YNc(76,Ke,19,18,"clr-tooltip-content",40),e.qZA()()()(),e.TgZ(77,"div",5)(78,"label",6),e._uU(79),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"div",7)(82,"div",41)(83,"div",42)(84,"select",43),e.NdJ("change",function(s){return n.changeTrigger(s)}),e.YNc(85,Ve,3,4,"option",39),e.qZA()(),e.TgZ(86,"div",44)(87,"div",45)(88,"label",46),e._uU(89),e.ALo(90,"translate"),e.qZA(),e.TgZ(91,"div",47)(92,"div",8)(93,"input",48),e.NdJ("input",function(s){return n.inputInvalid(s)}),e.qZA(),e.TgZ(94,"clr-tooltip",32),e._UZ(95,"clr-icon",19),e.YNc(96,We,2,0,"clr-tooltip-content",40),e.qZA()(),e.YNc(97,$e,3,3,"clr-control-error",13),e.qZA()()()(),e.TgZ(98,"div",49),e._UZ(99,"input",50),e.TgZ(100,"label",51),e._uU(101),e.ALo(102,"translate"),e.TgZ(103,"clr-tooltip"),e._UZ(104,"clr-icon",19),e.YNc(105,Xe,4,3,"clr-tooltip-content",33),e.qZA()()()()(),e.TgZ(106,"div",52)(107,"label",53),e._uU(108),e.ALo(109,"translate"),e.qZA(),e.TgZ(110,"div",7)(111,"div",54),e._UZ(112,"input",55)(113,"clr-icon",11),e.qZA(),e.TgZ(114,"div",56)(115,"select",57),e.NdJ("ngModelChange",function(s){return n.selectedUnit=s}),e.YNc(116,et,2,2,"option",39),e.qZA(),e.TgZ(117,"clr-tooltip",58),e._UZ(118,"clr-icon",19),e.YNc(119,nt,4,6,"clr-tooltip-content",33),e.qZA()(),e.YNc(120,it,3,3,"clr-control-error",59),e.qZA()(),e.TgZ(121,"div",5)(122,"label",24),e._uU(123),e.ALo(124,"translate"),e.qZA(),e.TgZ(125,"div",60)(126,"div",61),e._UZ(127,"input",62),e.TgZ(128,"label",63),e._uU(129),e.ALo(130,"translate"),e.TgZ(131,"clr-tooltip",64),e._UZ(132,"clr-icon",19),e.YNc(133,ot,4,3,"clr-tooltip-content",20),e.qZA()()(),e.TgZ(134,"div",65),e._UZ(135,"input",66),e.TgZ(136,"label",67),e._uU(137),e.ALo(138,"translate"),e.TgZ(139,"clr-tooltip",64),e._UZ(140,"clr-icon",19),e.YNc(141,rt,4,3,"clr-tooltip-content",20),e.qZA()()(),e.TgZ(142,"div",65),e._UZ(143,"input",68),e.TgZ(144,"label",69),e._uU(145),e.ALo(146,"translate"),e.qZA()()()()()(),e.TgZ(147,"div",70)(148,"button",71),e.NdJ("click",function(){return n.onCancel()}),e._uU(149),e.ALo(150,"translate"),e.qZA(),e.TgZ(151,"button",72),e.NdJ("click",function(){return n.onSubmit()}),e._uU(152),e.ALo(153,"translate"),e.qZA()()()),2&t&&(e.Q6J("clrModalOpen",n.createEditRuleOpened)("clrModalStaticBackdrop",!0)("clrModalClosable",!1),e.xp6(2),e.Oqu(e.lcZ(3,65,n.headerTitle)),e.xp6(4),e.Q6J("formGroup",n.ruleForm),e.xp6(1),e.ekj("clr-error",n.ruleForm.controls.name.touched&&n.ruleForm.controls.name.invalid||!n.isRuleNameValid),e.xp6(2),e.Oqu(e.lcZ(10,67,"REPLICATION.NAME")),e.xp6(7),e.Q6J("hidden",!n.inNameChecking),e.xp6(1),e.Q6J("ngIf",n.ruleForm.controls.name.touched&&n.ruleForm.controls.name.invalid||!n.isRuleNameValid),e.xp6(3),e.Oqu(e.lcZ(21,69,"REPLICATION.DESCRIPTION")),e.xp6(5),e.Oqu(e.lcZ(26,71,"REPLICATION.REPLI_MODE")),e.xp6(3),e.Q6J("value",!0)("disabled",n.policyId>=0||n.onGoing)("ngModel",n.isPushMode)("ngModelOptions",e.DdM(103,G)),e.xp6(7),e.Q6J("value",!1)("disabled",n.policyId>=0||n.onGoing)("ngModel",n.isPushMode)("ngModelOptions",e.DdM(104,G)),e.xp6(6),e.Q6J("ngIf",!n.isPushMode),e.xp6(3),e.Oqu(e.lcZ(45,73,"REPLICATION.SOURCE_RESOURCE_FILTER")),e.xp6(2),e.Q6J("hidden",!1===n.onGoing),e.xp6(2),e.Q6J("ngForOf",n.filters.controls),e.xp6(1),e.Q6J("ngIf",n.isPushMode),e.xp6(3),e.Oqu(e.lcZ(53,75,"REPLICATION.DESTINATION")),e.xp6(2),e.ekj("clr-error",(n.ruleForm.controls.dest_namespace.dirty||n.ruleForm.controls.dest_namespace.touched)&&n.ruleForm.controls.dest_namespace.invalid),e.xp6(3),e.hij("",e.lcZ(58,77,"REPLICATION.NAMESPACE"),":"),e.xp6(6),e.Q6J("ngIf",(n.ruleForm.controls.dest_namespace.dirty||n.ruleForm.controls.dest_namespace.touched)&&n.ruleForm.controls.dest_namespace.invalid),e.xp6(6),e.hij("",e.lcZ(70,79,"REPLICATION.REPO_FLATTENING"),":"),e.xp6(2),e.uIk("disabled",n.ruleForm.controls.dest_namespace.invalid||!n.ruleForm.controls.dest_namespace.value?"disabled":null),e.xp6(1),e.Q6J("ngForOf",e.lcZ(73,81,n.flattenLevelMap)),e.xp6(7),e.Oqu(e.lcZ(80,83,"REPLICATION.TRIGGER_MODE")),e.xp6(6),e.Q6J("ngForOf",n.supportedTriggers),e.xp6(2),e.Q6J("hidden",n.isNotSchedule()),e.xp6(2),e.Oqu(e.lcZ(90,85,"REPLICATION.CRON_STR")),e.xp6(2),e.ekj("clr-error",n.cronInputShouldShowError()),e.xp6(6),e.Q6J("ngIf",n.cronInputShouldShowError()),e.xp6(1),e.Q6J("hidden",n.isNotEventBased()),e.xp6(1),e.Q6J("checked",!1),e.xp6(2),e.hij("",e.lcZ(102,87,"REPLICATION.DELETE_REMOTE_IMAGES")," "),e.xp6(7),e.hij("",e.lcZ(109,89,"REPLICATION.BANDWIDTH")," "),e.xp6(2),e.ekj("clr-error",n.ruleForm.controls.speed.invalid&&(n.ruleForm.controls.speed.dirty||n.ruleForm.controls.speed.touched)),e.xp6(4),e.ekj("unit",n.ruleForm.controls.speed.invalid&&(n.ruleForm.controls.speed.dirty||n.ruleForm.controls.speed.touched)),e.xp6(1),e.Q6J("ngModelOptions",e.DdM(105,G))("ngModel",n.selectedUnit),e.xp6(1),e.Q6J("ngForOf",n.speedUnits),e.xp6(4),e.Q6J("ngIf",n.ruleForm.controls.speed.invalid&&(n.ruleForm.controls.speed.dirty||n.ruleForm.controls.speed.touched)),e.xp6(3),e.Oqu(e.lcZ(124,91,"SCANNER.OPTIONS")),e.xp6(4),e.Q6J("checked",!0),e.xp6(2),e.hij("",e.lcZ(130,93,"REPLICATION.OVERRIDE_INFO")," "),e.xp6(5),e.Q6J("hidden",!n.showChunkOption),e.xp6(3),e.hij("",e.lcZ(138,95,"REPLICATION.COPY_BY_CHUNK")," "),e.xp6(5),e.Q6J("hidden",n.policyId<0),e.xp6(1),e.Q6J("checked",!0),e.xp6(2),e.Oqu(e.lcZ(146,97,"REPLICATION.ENABLED_RULE")),e.xp6(3),e.Q6J("disabled",n.inProgress),e.xp6(1),e.hij(" ",e.lcZ(150,99,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("clrLoading",n.inProgress)("disabled",n.inProgress||!n.isValid||!n.hasFormChange()),e.xp6(1),e.hij(" ",e.lcZ(153,101,"BUTTON.SAVE")," "))},dependencies:[r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r._,r.JJ,r.JL,r.Q7,r.nD,r.c5,r.On,r.sg,r.u,r.x0,r.CE,a.qvL,a.qAN,a.VLi,a.cCV,a.nqY,a.MPb,a.MgK,a.VqA,a.asN,a.DAq,a.EeQ,a.XE5,a.LAP,a.f_W,a.zwp,a.ZUS,a.Jmj,a.bMv,a.zDF,x.mk,x.sg,x.O5,x.PC,te.l,me._,fe.q,E.rH,M.X$,x.Nd],styles:[".select[_ngcontent-%COMP%]   .optionMore[_ngcontent-%COMP%]{background-color:#bfbaba;height:1.6em;font-size:1.2em;cursor:pointer;text-align:center}.hideFilter[_ngcontent-%COMP%]{display:none}h4[_ngcontent-%COMP%]{color:#666}.alert-label[_ngcontent-%COMP%]{color:red;font-size:12px}.endpointSelect[_ngcontent-%COMP%]{width:270px;margin-right:10px}.filterSelect[_ngcontent-%COMP%]{position:relative;width:315px;margin-bottom:.25rem}.filterSelect[_ngcontent-%COMP%]   clr-icon[_ngcontent-%COMP%]{margin-left:10px;margin-top:5px;margin-right:15px}.padLeft0[_ngcontent-%COMP%]{padding-left:0}.schedule-style[_ngcontent-%COMP%]{display:inline-block}.floatSet[_ngcontent-%COMP%]{display:inline-block;width:82px;margin-right:4px}.projectInput[_ngcontent-%COMP%]{float:left;position:relative}.switchIcon[_ngcontent-%COMP%]{width:20px;height:20px;margin-top:10px;margin-left:10px;cursor:pointer}.addEndpoint[_ngcontent-%COMP%]{margin-top:.25em!important;padding-left:2px;padding-right:2px;min-width:58px;margin-right:0}.shadow[_ngcontent-%COMP%]{position:absolute;top:8px}.selectBox[_ngcontent-%COMP%]{position:absolute;width:100%;height:auto;margin-top:-.25rem;border:1px solid #ccc;background-color:#fff;border:1px solid rgba(0,0,0,.15);border-right-width:2px;border-bottom-width:2px;border-radius:6px;box-shadow:0 5px 10px #0003;z-index:100}.selectBox[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:3px 20px;cursor:pointer}.selectBox[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#262626;background-image:linear-gradient(180deg,#f5f5f5 0,#e8e8e8);background-repeat:repeat-x}.form-group-override[_ngcontent-%COMP%]{padding-left:200px}.form-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]:first-child{font-size:14px;width:7rem}.form-group[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.form-select[_ngcontent-%COMP%]{margin-right:120px}.go-link[_ngcontent-%COMP%]{line-height:1rem;cursor:pointer}.arrowSet[_ngcontent-%COMP%]{display:inline-block;position:absolute;right:50px;top:8px;transform:rotate(180deg)}clr-modal[_ngcontent-%COMP%]     div.modal-dialog{width:32rem}.deletedDiv[_ngcontent-%COMP%]{text-align:left;line-height:14px;color:red}.deletedDiv[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:10px;text-decoration:underline;cursor:pointer;color:#00f}.modal-body-height[_ngcontent-%COMP%]{max-height:85vh}.filterSelect[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{margin-left:-15px}.mr-t-11[_ngcontent-%COMP%]{margin-top:11px}.weekday-width[_ngcontent-%COMP%]{width:104px}.rule-width[_ngcontent-%COMP%]{width:100%}.form-cron[_ngcontent-%COMP%]{padding-left:3.8rem}.mode-tooltip[_ngcontent-%COMP%]{margin-left:5px}.override-box[_ngcontent-%COMP%]{flex-direction:row}.override-box[_ngcontent-%COMP%]   .override-tooltip[_ngcontent-%COMP%]{margin:3px 0 0 5px}.spinner-position[_ngcontent-%COMP%]{left:25%}.cron-tooltip[_ngcontent-%COMP%]{color:gray;cursor:default}.cron-tooltip[_ngcontent-%COMP%]   .table-box[_ngcontent-%COMP%]{width:20rem}.display-none[_ngcontent-%COMP%]{display:none}.width-100[_ngcontent-%COMP%]{width:100%}.label-text[_ngcontent-%COMP%]{position:relative;height:1.2rem;display:flex;align-items:center;justify-content:left;border-bottom:.05rem solid}.ellipsis[_ngcontent-%COMP%]{margin-left:.2rem;font-size:16px;font-weight:700}.space-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.flex[_ngcontent-%COMP%]{display:flex}.sub-label[_ngcontent-%COMP%]{flex:0 0 5rem}.clr-control-label[_ngcontent-%COMP%]{width:8.6rem}.des-tooltip[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]  .flatten{width:23rem!important}.width-input[_ngcontent-%COMP%]{width:17rem}.width-name-resource[_ngcontent-%COMP%]{flex:0 0 12rem;width:12rem}.width-match-exclude[_ngcontent-%COMP%]{width:5rem}.width-tag-label[_ngcontent-%COMP%]{width:6rem}.right-align[_ngcontent-%COMP%]{min-width:204px;overflow-y:auto;transform:translate(-9rem) translateY(1.25rem)!important}.dropdown-item[_ngcontent-%COMP%]{min-height:26px}.no-labels[_ngcontent-%COMP%]{cursor:default;padding:0 .5rem}.unit[_ngcontent-%COMP%]{width:4.18rem!important}.speed[_ngcontent-%COMP%]{width:14rem;display:inline-block}.speed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:12rem}.unit-select[_ngcontent-%COMP%]{width:3rem}.ml-10px[_ngcontent-%COMP%]{margin-left:10px}.label-piece[_ngcontent-%COMP%]{display:flex;left:.25rem}.label-container[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center}.clr-form-control[_ngcontent-%COMP%]{margin-top:1rem}.flattening[_ngcontent-%COMP%]{margin-top:.5rem}.bandwidth[_ngcontent-%COMP%]{margin-top:.25rem}.down[_ngcontent-%COMP%]{height:25px;width:25px;right:.2rem;color:#a4a4a4!important;cursor:pointer}.dropdown[_ngcontent-%COMP%]{left:-1.2rem;position:relative!important}.label-input[_ngcontent-%COMP%]{padding-right:1.2rem}.no-extend[_ngcontent-%COMP%]{flex:1}.cron-input[_ngcontent-%COMP%]{width:12rem}.event-label[_ngcontent-%COMP%]{width:unset}"]}),c})();var B=p(6921),lt=p(3235),oe=p(2941),re=p(7546),st=p(2553),le=p(7625);const ct=["toggleConfirmDialog"],at=["deletionConfirmDialog"],pt=["datagrid"];function ut(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.openModal())}),e._UZ(1,"clr-icon",23),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.hij("\xa0",e.lcZ(3,1,"REPLICATION.NEW_REPLICATION_RULE")," "))}function dt(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.replicateRule(n.selectedRow))}),e._UZ(1,"clr-icon",25),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&i){const o=e.oxw();e.Q6J("disabled",!o.selectedRow||!o.selectedRow.enabled),e.xp6(2),e.hij("\xa0",e.lcZ(3,2,"REPLICATION.REPLICATE")," ")}}function gt(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(2);return e.KtG(n.operateRule("enable",n.selectedRow))}),e._UZ(1,"clr-icon",33),e._uU(2,"\xa0 "),e.TgZ(3,"span",34),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&i){const o=e.oxw(2);e.Q6J("disabled",!(o.selectedRow&&!o.selectedRow.enabled)),e.xp6(4),e.Oqu(e.lcZ(5,2,"WEBHOOK.ENABLED_BUTTON"))}}function _t(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"button",26),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(2);return e.KtG(n.operateRule("disable",n.selectedRow))}),e._UZ(1,"clr-icon",35),e._uU(2,"\xa0 "),e.TgZ(3,"span",36),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&i){const o=e.oxw(2);e.Q6J("disabled",!(o.selectedRow&&o.selectedRow.enabled)),e.xp6(4),e.Oqu(e.lcZ(5,2,"WEBHOOK.DISABLED_BUTTON"))}}function ht(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"clr-dropdown-menu")(1,"clr-dropdown")(2,"button",26),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.editRule(n.selectedRow))}),e._UZ(3,"clr-icon",27),e._uU(4,"\xa0 "),e.TgZ(5,"span",28),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,gt,6,4,"button",29),e.YNc(9,_t,6,4,"button",29),e._UZ(10,"div",30),e.TgZ(11,"button",26),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.deleteRule(n.selectedRow))}),e._UZ(12,"clr-icon",31),e._uU(13,"\xa0 "),e.TgZ(14,"span",32),e._uU(15),e.ALo(16,"translate"),e.qZA()()()()}if(2&i){const o=e.oxw();e.xp6(2),e.Q6J("disabled",!o.selectedRow),e.xp6(4),e.Oqu(e.lcZ(7,6,"BUTTON.EDIT")),e.xp6(2),e.Q6J("ngIf",o.selectedRow&&!o.selectedRow.enabled),e.xp6(1),e.Q6J("ngIf",!o.selectedRow||o.selectedRow&&o.selectedRow.enabled),e.xp6(2),e.Q6J("disabled",!o.selectedRow),e.xp6(4),e.Oqu(e.lcZ(16,8,"BUTTON.DELETE"))}}function mt(i,c){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"REPLICATION.NAME")," ")}function ft(i,c){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"REPLICATION.STATUS")," ")}function Tt(i,c){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"REPLICATION.SRC_REGISTRY")," ")}function Ct(i,c){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"REPLICATION.REPLICATION_MODE")," ")}function Ot(i,c){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"REPLICATION.DESTINATION_NAMESPACE")," ")}function At(i,c){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"REPLICATION.DES_REPO_FLATTENING")," ")}function Et(i,c){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"REPLICATION.REPLICATION_TRIGGER")," ")}function Rt(i,c){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"REPLICATION.BANDWIDTH")," ")}function Pt(i,c){1&i&&(e._uU(0),e.ALo(1,"translate")),2&i&&e.hij(" ",e.lcZ(1,1,"REPLICATION.DESCRIPTION")," ")}function bt(i,c){1&i&&(e.TgZ(0,"div"),e._UZ(1,"clr-icon",42),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"WEBHOOK.DISABLED")," "))}function It(i,c){1&i&&(e.TgZ(0,"div"),e._UZ(1,"clr-icon",43),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"WEBHOOK.ENABLED")," "))}function xt(i,c){if(1&i&&(e.TgZ(0,"clr-signpost-content"),e._uU(1),e.qZA()),2&i){const o=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",null==o||null==o.trigger||null==o.trigger.trigger_settings?null:o.trigger.trigger_settings.cron," ")}}function Zt(i,c){1&i&&(e.TgZ(0,"clr-signpost"),e.YNc(1,xt,2,1,"clr-signpost-content",8),e.qZA())}function Lt(i,c){1&i&&e._UZ(0,"clr-icon",44)}function vt(i,c){if(1&i&&(e.TgZ(0,"clr-tooltip-content",45)(1,"span"),e._uU(2),e.qZA()()),2&i){const o=e.oxw().$implicit;e.xp6(2),e.Oqu(o.description)}}function Nt(i,c){if(1&i&&(e.TgZ(0,"clr-dg-row",37)(1,"clr-dg-cell"),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell",10)(4,"div"),e.YNc(5,bt,4,3,"div",19),e.YNc(6,It,4,3,"div",19),e.qZA()(),e.TgZ(7,"clr-dg-cell",11)(8,"span",38),e._uU(9),e.qZA()(),e.TgZ(10,"clr-dg-cell",11),e._uU(11),e.qZA(),e.TgZ(12,"clr-dg-cell",12),e._uU(13),e.qZA(),e.TgZ(14,"clr-dg-cell"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"clr-dg-cell",39),e._uU(18),e.ALo(19,"translate"),e.YNc(20,Zt,2,0,"clr-signpost",19),e.qZA(),e.TgZ(21,"clr-dg-cell"),e._uU(22),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"clr-dg-cell"),e._uU(25),e.TgZ(26,"clr-tooltip"),e.YNc(27,Lt,1,0,"clr-icon",40),e.YNc(28,vt,3,1,"clr-tooltip-content",41),e.qZA()()()),2&i){const o=c.$implicit,t=e.oxw();e.Q6J("clrDgItem",o),e.xp6(2),e.Oqu(o.name),e.xp6(3),e.Q6J("ngIf",!(null!=o&&o.enabled)),e.xp6(1),e.Q6J("ngIf",null==o?null:o.enabled),e.xp6(3),e.Oqu(o.src_registry?o.src_registry.name:""),e.xp6(2),e.hij(" ",o.src_registry&&o.src_registry.id>0?"pull-based":"push-based"," "),e.xp6(2),e.AsE(" ",o.dest_registry?o.dest_registry.name:""," : ",o.dest_namespace?o.dest_namespace:"-"," "),e.xp6(2),e.Oqu(e.lcZ(16,14,t.getFlattenLevelString(o.dest_namespace_replace_count))),e.xp6(3),e.hij(" ",e.lcZ(19,16,t.getTriggerTypeI18n(o.trigger))," "),e.xp6(2),e.Q6J("ngIf",null==o||null==o.trigger||null==o.trigger.trigger_settings?null:o.trigger.trigger_settings.cron),e.xp6(2),e.Oqu(e.lcZ(23,18,t.getBandwidthStr(o.speed))),e.xp6(3),e.hij(" ",o.description?t.trancatedDescription(o.description):"-"," "),e.xp6(2),e.Q6J("ngIf",o.description&&o.description.length>35)}}function Mt(i,c){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){e.oxw();const o=e.MAs(36);e.xp6(1),e.lnq("",o.firstItem+1," - ",o.lastItem+1," ",e.lcZ(2,3,"REPLICATION.OF")," ")}}const S=function(i){return{hidden:i}},St=function(){return[5,15,30]};let se=(()=>{var i;class c{constructor(t,n,l,s,u){this.replicationService=t,this.translateService=n,this.errorHandlerEntity=l,this.operationService=s,this.scheduleService=u,this.selectOne=new e.vpe,this.editOne=new e.vpe,this.toggleOne=new e.vpe,this.hideJobs=new e.vpe,this.redirect=new e.vpe,this.openNewRule=new e.vpe,this.replicateManual=new e.vpe,this.rules=[],this.page=1,this.pageSize=(0,g.tb)(g.V2.LIST_REPLICATION_RULE_COMPONENT,5),this.totalCount=0,this.loading=!0,this.paused=!1,this.hiddenArray=(0,g.Ql)(g.V2.LIST_REPLICATION_RULE_COMPONENT,[!1,!1,!1,!1,!1,!1,!1,!0,!0])}ngOnInit(){this.scheduleService.getSchedulePaused({jobType:lt.O4.ALL}).subscribe(t=>{this.paused=t?.paused})}ngOnDestroy(){this.datagrid.columnsService?.columns?.forEach((t,n)=>{this.hiddenArray[n]=!!t?._value?.hidden}),(0,g.ox)(g.V2.LIST_REPLICATION_RULE_COMPONENT,this.hiddenArray)}getTriggerTypeI18n(t){return t?this.paused&&t?.type===B.pA.SCHEDULED?B.E3[B.pA.SCHEDULED_PAUSED]:B.E3[t?.type]:null}trancatedDescription(t){return t.length>35?t.substr(0,35):t}replicateRule(t){this.replicateManual.emit(t)}deletionConfirm(t){if(t&&5===t.source&&1===t.state&&this.deleteOpe(t.data),t&&15===t.source&&1===t.state){const n=(0,g.d9)(t.data);n.enabled=!t.data.enabled;const l=new O.gB;l.name=n.enabled?"REPLICATION.ENABLE_TITLE":"REPLICATION.DISABLE_TITLE",l.data.id=n.id,l.state=O.yb.progressing,l.data.name=n.name,this.operationService.publishInfo(l),this.replicationService.updateReplicationPolicy({id:n.id,policy:n}).subscribe({next:()=>{this.translateService.get(n.enabled?"REPLICATION.ENABLE_SUCCESS":"REPLICATION.DISABLE_SUCCESS").subscribe(s=>{(0,O.hm)(l,O.yb.success),this.errorHandlerEntity.info(s),this.refreshRule()})},error:s=>{const u=(0,k.Po)(s);this.translateService.get(n.enabled?"REPLICATION.ENABLE_FAILED":"REPLICATION.DISABLE_FAILED").subscribe(_=>{(0,O.hm)(l,O.yb.failure,_),this.errorHandlerEntity.error(u)})}})}}selectRule(t){t&&(this.selectedId=t.id||"",this.selectOne.emit(t))}redirectTo(t){this.redirect.emit(t)}openModal(){this.openNewRule.emit()}editRule(t){this.editOne.emit(t)}deleteRule(t){if(t){let n=new Q.c("REPLICATION.DELETION_TITLE","REPLICATION.DELETION_SUMMARY",t.name,t,5,2);this.deletionConfirmDialog.open(n)}}deleteOpe(t){if(t){let n=[];n.push(this.delOperate(t)),(0,I.D)(...n).subscribe(l=>{this.selectedRow=null,this.refreshRule()},l=>{this.errorHandlerEntity.error(l)})}}delOperate(t){let n=new O.gB;return n.name="OPERATION.DELETE_REPLICATION",n.data.id=+t.id,n.state=O.yb.progressing,n.data.name=t.name,this.operationService.publishInfo(n),this.replicationService.deleteReplicationPolicy({id:t.id}).pipe((0,R.U)(()=>{this.translateService.get("BATCH.DELETED_SUCCESS").subscribe(l=>(0,O.hm)(n,O.yb.success))}),(0,P.K)(l=>{const s=(0,k.Po)(l);return this.translateService.get(s).subscribe(u=>(0,O.hm)(n,O.yb.failure,u)),(0,D._)(l)}))}operateRule(t,n){let l,s,u;switch(t){case"enable":l="REPLICATION.ENABLE_TITLE",s="REPLICATION.ENABLE_SUMMARY",u=4;break;case"disable":l="REPLICATION.DISABLE_TITLE",s="REPLICATION.DISABLE_SUMMARY",u=5;break;default:return}const _=new Q.c(l,s,n.name,n,15,u);this.deletionConfirmDialog.open(_)}clrLoad(t){t&&t.page&&(this.pageSize=t.page.size,(0,g.Pe)(g.V2.LIST_REPLICATION_RULE_COMPONENT,this.pageSize)),this.loading=!0;const n={page:this.page,pageSize:this.pageSize,sort:(0,g.td)(t)};n.q=this.searchString?encodeURIComponent(`name=~${this.searchString}`):(0,g.Wz)(t),this.replicationService.listReplicationPoliciesResponse(n).pipe((0,f.x)(()=>this.loading=!1)).subscribe({next:l=>{if(this.hideJobs.emit(),l.headers){let s=l.headers.get("x-total-count");s&&(this.totalCount=parseInt(s,0))}this.rules=l.body},error:l=>{this.errorHandlerEntity.error(l)}})}refreshRule(){this.page=1,this.totalCount=0,this.selectedRow=null,this.searchString=null,this.clrLoad()}getFlattenLevelString(t){return null!==t&&K[t]?K[t]:t}getBandwidthStr(t){return t>=F?""+(t/F).toFixed(2)+v.MB:t>0&&t<F?""+t+v.KB:"REPLICATION.UNLIMITED"}}return(i=c).\u0275fac=function(t){return new(t||i)(e.Y36(oe.x),e.Y36(M.sK),e.Y36(j.q),e.Y36(re.f9),e.Y36(st.u))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hbr-list-replication-rule"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ct,5),e.Gf(at,5),e.Gf(pt,5)),2&t){let l;e.iGM(l=e.CRH())&&(n.toggleConfirmDialog=l.first),e.iGM(l=e.CRH())&&(n.deletionConfirmDialog=l.first),e.iGM(l=e.CRH())&&(n.datagrid=l.first)}},inputs:{selectedId:"selectedId",withReplicationJob:"withReplicationJob",hasCreateReplicationPermission:"hasCreateReplicationPermission",hasUpdateReplicationPermission:"hasUpdateReplicationPermission",hasDeleteReplicationPermission:"hasDeleteReplicationPermission",hasExecuteReplicationPermission:"hasExecuteReplicationPermission",searchString:"searchString"},outputs:{selectOne:"selectOne",editOne:"editOne",toggleOne:"toggleOne",hideJobs:"hideJobs",redirect:"redirect",openNewRule:"openNewRule",replicateManual:"replicateManual"},decls:45,vars:54,consts:[[1,"list-rule"],[3,"clrDgLoading","clrDgSingleSelected","clrDgRefresh","clrDgSingleSelectedChange"],["datagrid",""],["type","button","id","new_replication_rule_id","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button","id","replication_exe_id","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],["clrDropdownTrigger","",1,"btn","btn-link",3,"clrCloseMenuOnItemClick"],["id","rule-action"],["shape","caret down"],[4,"clrIfOpen"],[3,"clrDgHideableColumn"],[1,"status-width"],[1,"col-width"],[1,"min-width"],[3,"clrDgSortBy"],[3,"clrDgField"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgPage","clrDgPageSize","clrDgTotalItems","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],[3,"confirmAction"],["deletionConfirmDialog",""],["type","button","id","new_replication_rule_id",1,"btn","btn-secondary",3,"click"],["shape","plus","size","16"],["type","button","id","replication_exe_id",1,"btn","btn-secondary",3,"disabled","click"],["shape","export","size","16"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["shape","edit","size","16"],["id","edit_replication_rule_id"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],[1,"dropdown-divider"],["shape","window-close","size","16"],["id","delete_replication_rule_id"],["size","16","shape","success-standard"],["id","rule-enable"],["size","16","shape","ban"],["id","rule-disable"],[3,"clrDgItem"],[1,"margin-right-2px"],[1,"trigger"],["clrTooltipTrigger","","shape","ellipsis-horizontal","size","18",4,"ngIf"],["clrPosition","bottom-right","clrSize","md",4,"clrIfOpen"],["shape","exclamation-triangle","size","18",1,"is-warning","text-alignment"],["shape","success-standard","size","18",1,"is-success","text-alignment"],["clrTooltipTrigger","","shape","ellipsis-horizontal","size","18"],["clrPosition","bottom-right","clrSize","md"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"clr-datagrid",1,2),e.NdJ("clrDgRefresh",function(s){return n.clrLoad(s)})("clrDgSingleSelectedChange",function(s){return n.selectedRow=s})("clrDgSingleSelectedChange",function(s){return n.selectRule(s)}),e.TgZ(3,"clr-dg-action-bar"),e.YNc(4,ut,4,3,"button",3),e.YNc(5,dt,4,4,"button",4),e.TgZ(6,"clr-dropdown",5)(7,"span",6),e._uU(8),e.ALo(9,"translate"),e._UZ(10,"clr-icon",7),e.qZA(),e.YNc(11,ht,17,10,"clr-dropdown-menu",8),e.qZA()(),e.TgZ(12,"clr-dg-column"),e.YNc(13,mt,2,3,"ng-template",9),e.qZA(),e.TgZ(14,"clr-dg-column",10),e.YNc(15,ft,2,3,"ng-template",9),e.qZA(),e.TgZ(16,"clr-dg-column",11),e.YNc(17,Tt,2,3,"ng-template",9),e.qZA(),e.TgZ(18,"clr-dg-column",11),e.YNc(19,Ct,2,3,"ng-template",9),e.qZA(),e.TgZ(20,"clr-dg-column",12),e.YNc(21,Ot,2,3,"ng-template",9),e.qZA(),e.TgZ(22,"clr-dg-column"),e.YNc(23,At,2,3,"ng-template",9),e.qZA(),e.TgZ(24,"clr-dg-column"),e.YNc(25,Et,2,3,"ng-template",9),e.qZA(),e.TgZ(26,"clr-dg-column",13),e.YNc(27,Rt,2,3,"ng-template",9),e.qZA(),e.TgZ(28,"clr-dg-column",14),e.YNc(29,Pt,2,3,"ng-template",9),e.qZA(),e.TgZ(30,"clr-dg-placeholder"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.YNc(33,Nt,29,20,"clr-dg-row",15),e.TgZ(34,"clr-dg-footer")(35,"clr-dg-pagination",16,17),e.NdJ("clrDgPageChange",function(s){return n.page=s}),e.TgZ(37,"clr-dg-page-size",18),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.YNc(40,Mt,3,5,"span",19),e._uU(41),e.ALo(42,"translate"),e.qZA()()(),e.TgZ(43,"confirmation-dialog",20,21),e.NdJ("confirmAction",function(s){return n.deletionConfirm(s)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("clrDgLoading",n.loading)("clrDgSingleSelected",n.selectedRow),e.xp6(3),e.Q6J("ngIf",n.hasCreateReplicationPermission),e.xp6(1),e.Q6J("ngIf",n.hasExecuteReplicationPermission),e.xp6(1),e.Q6J("clrCloseMenuOnItemClick",!1),e.xp6(2),e.Oqu(e.lcZ(9,27,"BUTTON.ACTIONS")),e.xp6(5),e.Q6J("clrDgHideableColumn",e.VKq(35,S,n.hiddenArray[0])),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(37,S,n.hiddenArray[1])),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(39,S,n.hiddenArray[2])),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(41,S,n.hiddenArray[3])),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(43,S,n.hiddenArray[4])),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(45,S,n.hiddenArray[5])),e.xp6(2),e.Q6J("clrDgHideableColumn",e.VKq(47,S,n.hiddenArray[6])),e.xp6(1),e.Q6J("clrDgSortBy","speed"),e.xp6(1),e.Q6J("clrDgHideableColumn",e.VKq(49,S,n.hiddenArray[7])),e.xp6(1),e.Q6J("clrDgField","description"),e.xp6(1),e.Q6J("clrDgHideableColumn",e.VKq(51,S,n.hiddenArray[8])),e.xp6(2),e.Oqu(e.lcZ(32,29,"REPLICATION.PLACEHOLDER")),e.xp6(2),e.Q6J("ngForOf",n.rules),e.xp6(2),e.Q6J("clrDgPage",n.page)("clrDgPageSize",n.pageSize)("clrDgTotalItems",n.totalCount),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(53,St)),e.xp6(1),e.Oqu(e.lcZ(39,31,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",n.totalCount),e.xp6(1),e.AsE("",n.totalCount," ",e.lcZ(42,33,"REPLICATION.ITEMS")," "))},dependencies:[a.C9t,a.Gwl,a.fv_,a.m4W,a.dRQ,a._6O,a.YYR,a.Ltv,a.F7K,a.Z4N,a.jND,a.KHL,a.PDs,a.Gcc,a.dml,a.Nh1,a.K8c,a.qvL,a.nqY,a.f_W,a.zwp,a.ZUS,a.EuU,a.hQ,a.Jmj,a.bMv,a.zDF,x.sg,x.O5,le.z,M.X$],styles:[".list-rule[_ngcontent-%COMP%]{padding-bottom:15px}.text-alignment[_ngcontent-%COMP%]{vertical-align:text-bottom}.min-width[_ngcontent-%COMP%]{min-width:236px}.col-width[_ngcontent-%COMP%]{min-width:140px}.status-width[_ngcontent-%COMP%]{min-width:130px}.icon-style[_ngcontent-%COMP%]{color:#c92100}.margin-right-2px[_ngcontent-%COMP%]{margin-right:2px}.trigger[_ngcontent-%COMP%]{width:180px}"]}),c})();var $=p(927),ce=p(4410);const yt=["replicationConfirmDialog"],Ut=["StopConfirmDialog"];function Ft(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"div",6)(1,"div",15)(2,"h5",16),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",17)(6,"div",18)(7,"div",19)(8,"clr-select-container")(9,"select",20),e.NdJ("change",function(n){e.CHM(o);const l=e.oxw();return e.KtG(l.doFilterJob(n))}),e.TgZ(10,"option",21),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"option",22),e._uU(14),e.ALo(15,"translate"),e.qZA()()()(),e.TgZ(16,"hbr-filter",23),e.NdJ("openFlag",function(n){e.CHM(o);const l=e.oxw();return e.KtG(l.openFilter(n))})("filterEvt",function(n){e.CHM(o);const l=e.oxw();return e.KtG(l.doSearchExecutions(n))}),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"span",24)(19,"clr-icon",25),e.NdJ("click",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.refreshJobs())}),e.qZA()()()()()()}if(2&i){const o=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,7,"REPLICATION.REPLICATION_EXECUTIONS")," "),e.xp6(4),e.Q6J("hidden",!o.isOpenFilterTag),e.xp6(4),e.hij(" ",e.lcZ(12,9,"REPLICATION.REPLICATION_TRIGGER")," "),e.xp6(3),e.hij(" ",e.lcZ(15,11,"REPLICATION.STATUS")," "),e.xp6(2),e.s9C("filterPlaceholder",e.lcZ(17,13,"REPLICATION.FILTER_EXECUTIONS_PLACEHOLDER")),e.Q6J("withDivider",!0)("currentValue",o.currentTerm)}}function wt(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(o);const n=e.oxw(2);return e.KtG(n.openStopExecutionsDialog(n.selectedRow))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const o=e.oxw(2);e.Q6J("disabled",!o.canStop()||!(o.jobs&&o.jobs.length>0)||o.isStopOnGoing||!o.selectedRow.length),e.xp6(1),e.hij(" ",e.lcZ(2,2,"REPLICATION.STOPJOB")," ")}}function qt(i,c){1&i&&e._UZ(0,"clr-icon",41)}function Dt(i,c){if(1&i&&(e.TgZ(0,"clr-tooltip-content",42)(1,"span"),e._uU(2),e.qZA()()),2&i){const o=e.oxw().$implicit;e.Q6J("clrPosition","left"),e.xp6(2),e.Oqu(o.status_text)}}function kt(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"clr-dg-row",37)(1,"clr-dg-cell")(2,"a",38),e.NdJ("click",function(){const l=e.CHM(o).$implicit,s=e.oxw(2);return e.KtG(s.goToLink(l.id))}),e._uU(3),e.qZA()(),e.TgZ(4,"clr-dg-cell"),e._uU(5),e.TgZ(6,"clr-tooltip"),e.YNc(7,qt,1,0,"clr-icon",39),e.YNc(8,Dt,3,2,"clr-tooltip-content",40),e.qZA()(),e.TgZ(9,"clr-dg-cell"),e._uU(10),e.qZA(),e.TgZ(11,"clr-dg-cell"),e._uU(12),e.ALo(13,"harborDatetime"),e.qZA(),e.TgZ(14,"clr-dg-cell"),e._uU(15),e.qZA(),e.TgZ(16,"clr-dg-cell"),e._uU(17),e.ALo(18,"percent"),e.qZA(),e.TgZ(19,"clr-dg-cell"),e._uU(20),e.qZA()()}if(2&i){const o=c.$implicit,t=e.oxw(2);e.Q6J("clrDgItem",o),e.xp6(3),e.Oqu(o.id),e.xp6(2),e.hij(" ",t.getStatusStr(o.status)," "),e.xp6(2),e.Q6J("ngIf",o.status_text),e.xp6(3),e.Oqu(o.trigger),e.xp6(2),e.Oqu(e.xi3(13,9,o.start_time,"short")),e.xp6(3),e.Oqu(t.getDuration(o)),e.xp6(2),e.hij(" ",e.lcZ(18,12,"InProgress"===o.status||"Failed"===o.status?o.total>0?o.succeed/o.total:0:o.total>0?o.succeed/o.total:1)," "),e.xp6(3),e.Oqu(o.total)}}function Jt(i,c){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){e.oxw();const o=e.MAs(32);e.xp6(1),e.lnq("",o.firstItem+1," - ",o.lastItem+1," ",e.lcZ(2,3,"REPLICATION.OF"),"")}}const Yt=function(){return[15,25,50]};function Qt(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"div",6)(1,"clr-datagrid",26),e.NdJ("clrDgSelectedChange",function(n){e.CHM(o);const l=e.oxw();return e.KtG(l.selectedRow=n)})("clrDgRefresh",function(n){e.CHM(o);const l=e.oxw();return e.KtG(l.clrLoadJobs(!0,n))}),e.TgZ(2,"clr-dg-action-bar")(3,"div",27),e.YNc(4,wt,3,4,"button",28),e.qZA()(),e.TgZ(5,"clr-dg-column",29),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"clr-dg-column",30),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"clr-dg-column",30),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"clr-dg-column",29),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"clr-dg-column"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"clr-dg-column"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"clr-dg-column"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"clr-dg-placeholder"),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.YNc(29,kt,21,14,"clr-dg-row",31),e.TgZ(30,"clr-dg-footer")(31,"clr-dg-pagination",32,33),e.NdJ("clrDgPageChange",function(n){e.CHM(o);const l=e.oxw();return e.KtG(l.currentPage=n)}),e.TgZ(33,"clr-dg-page-size",34),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.YNc(36,Jt,3,5,"span",35),e._uU(37),e.ALo(38,"translate"),e.qZA()()()()}if(2&i){const o=e.oxw();e.xp6(1),e.Q6J("clrDgSelected",o.selectedRow)("clrDgLoading",o.jobsLoading),e.xp6(3),e.Q6J("ngIf",o.isSystemAdmin),e.xp6(1),e.Q6J("clrDgSortBy","id"),e.xp6(1),e.Oqu(e.lcZ(7,24,"REPLICATION.ID")),e.xp6(2),e.Q6J("clrDgField","status"),e.xp6(1),e.Oqu(e.lcZ(10,26,"REPLICATION.STATUS")),e.xp6(2),e.Q6J("clrDgField","trigger"),e.xp6(1),e.Oqu(e.lcZ(13,28,"REPLICATION.REPLICATION_TRIGGER")),e.xp6(2),e.Q6J("clrDgSortBy",o.creationTimeComparator),e.xp6(1),e.Oqu(e.lcZ(16,30,"REPLICATION.CREATION_TIME")),e.xp6(3),e.Oqu(e.lcZ(19,32,"REPLICATION.DURATION")),e.xp6(3),e.Oqu(e.lcZ(22,34,"REPLICATION.SUCCESS_RATE")),e.xp6(3),e.Oqu(e.lcZ(25,36,"REPLICATION.TOTAL")),e.xp6(3),e.Oqu(e.lcZ(28,38,"REPLICATION.JOB_PLACEHOLDER")),e.xp6(2),e.Q6J("ngForOf",o.jobs),e.xp6(2),e.Q6J("clrDgPage",o.currentPage)("clrDgPageSize",o.pageSize)("clrDgTotalItems",o.totalCount),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(44,Yt)),e.xp6(1),e.Oqu(e.lcZ(35,40,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",o.showPaginationIndex),e.xp6(1),e.AsE(" ",o.totalCount," ",e.lcZ(38,42,"REPLICATION.ITEMS")," ")}}function jt(i,c){if(1&i){const o=e.EpF();e.TgZ(0,"hbr-create-edit-rule",43),e.NdJ("goToRegistry",function(){e.CHM(o);const n=e.oxw();return e.KtG(n.goRegistry())})("reload",function(n){e.CHM(o);const l=e.oxw();return e.KtG(l.reloadRules(n))}),e.qZA()}}const pe="InProgress",Ht=[{key:"all",description:"REPLICATION.ALL_STATUS"},{key:"1",description:"REPLICATION.ENABLED"},{key:"0",description:"REPLICATION.DISABLED"}];class Bt{constructor(){this.ruleName="",this.trigger="",this.status="",this.page=1}}const X={Succeed:"Succeeded"};let zt=(()=>{var i;class c{constructor(t,n,l,s,u){this.router=t,this.errorHandlerEntity=n,this.replicationService=l,this.operationService=s,this.translateService=u,this.openCreateRule=new e.vpe,this.openEdit=new e.vpe,this.goToRegistry=new e.vpe,this.search=new Bt,this.ruleStatus=Ht,this.defaultFilter="trigger",this.selectedRow=[],this.hiddenJobList=!0,this.creationTimeComparator=new g.sH("start_time","date"),this.updateTimeComparator=new g.sH("end_time","date"),this.currentPage=1,this.totalCount=0,this.pageSize=(0,g.tb)(g.V2.LIST_REPLICATION_RULE_COMPONENT_EXECUTIONS),this.jobsLoading=!1}get showPaginationIndex(){return this.totalCount>0}ngOnInit(){this.searchSub||(this.searchSub=this.filterComponent.filterTerms.pipe((0,T.b)(500),(0,q.x)(),(0,C.w)(t=>(this.listReplicationRule.loading=!0,this.listReplicationRule.page=1,this.replicationService.listReplicationPoliciesResponse({page:this.listReplicationRule.page,pageSize:this.listReplicationRule.pageSize,q:t?encodeURIComponent(`name=~${t}`):null})))).subscribe({next:t=>{if(this.hideJobs(),t.headers){let n=t.headers.get("x-total-count");n&&(this.listReplicationRule.totalCount=parseInt(n,0))}this.listReplicationRule.selectedRow=null,this.listReplicationRule.rules=t.body,this.listReplicationRule.loading=!1},error:t=>{this.errorHandlerEntity.error(t),this.listReplicationRule.loading=!1}})),this.currentRuleStatus=this.ruleStatus[0]}ngOnDestroy(){this.timerDelay&&this.timerDelay.unsubscribe(),this.searchSub&&(this.searchSub.unsubscribe(),this.searchSub=null)}openModal(){this.createEditPolicyComponent.openCreateEditRule()}openEditRule(t){t&&this.createEditPolicyComponent.openCreateEditRule(t)}goRegistry(){this.goToRegistry.emit()}goToLink(t){this.router.navigate(["harbor","replications",t,"tasks"])}clrLoadJobs(t,n){if(!n||!n.page||!this.search.ruleId)return;this.pageSize=n.page.size,(0,g.Pe)(g.V2.LIST_REPLICATION_RULE_COMPONENT_EXECUTIONS,this.pageSize),this.currentState=n;let l=(0,g.wy)(n);l<=0&&(l=1);const s={policyId:+this.search.ruleId,page:l,pageSize:this.pageSize,sort:(0,g.td)(n)};this.defaultFilter===V.TRIGGER&&this.currentTerm&&(s.trigger=this.currentTerm),this.defaultFilter===V.STATUS&&this.currentTerm&&(s.status=this.currentTerm),t&&(this.jobsLoading=!0),this.replicationService.listReplicationExecutionsResponse(s).subscribe(u=>{this.totalCount=Number.parseInt(u.headers.get("x-total-count"),10),t?this.jobs=u.body:this.jobs?.forEach(_=>{u.body?.forEach(h=>{_.id===h.id&&(_.status=h.status,_.status_text=h.status_text,_.failed=h.failed,_.in_progress=h.in_progress,_.stopped=h.stopped,_.succeed=h.succeed,_.total=h.total,_.start_time=h.start_time,_.end_time=h.end_time)})}),this.timerDelay||(this.timerDelay=(0,m.H)(b.ib,b.ib).subscribe(()=>{let _=0;this.jobs.forEach(h=>{h.status===pe&&_++}),_>0?this.clrLoadJobs(!1,this.currentState):(this.timerDelay.unsubscribe(),this.timerDelay=null)})),this.jobs=(0,g.Dd)(this.jobs,n),this.jobs=(0,g.Pq)(this.jobs,n),this.jobsLoading=!1},u=>{this.jobsLoading=!1,this.errorHandlerEntity.error(u)})}doSearchExecutions(t){this.currentTerm=t.trim(),this.jobsLoading=!0,this.currentPage=1,this.jobsLoading=!0,this.loadFirstPage()}loadFirstPage(){let t=this.currentState;t||(t={page:{}}),t.page.size=this.pageSize,t.page.from=0,t.page.to=this.pageSize-1,this.clrLoadJobs(!0,t)}selectOneRule(t){t&&t.id&&(this.hiddenJobList=!1,this.search.ruleId=t.id||"",this.loadFirstPage())}replicateManualRule(t){if(t){let n=new Q.c("REPLICATION.REPLICATION_TITLE","REPLICATION.REPLICATION_SUMMARY",t.name,t,7,6);this.replicationConfirmDialog.open(n)}}confirmReplication(t){if(t&&7===t.source&&1===t.state){let n=t.data;n&&(0,I.D)(this.replicationOperate(n)).subscribe(l=>{this.selectOneRule(n)},l=>{this.errorHandlerEntity.error(l)})}}replicationOperate(t){let n=new O.gB;return n.name="OPERATION.REPLICATION",n.data.id=t.id,n.state=O.yb.progressing,n.data.name=t.name,this.operationService.publishInfo(n),this.replicationService.startReplication({execution:{policy_id:t.id}}).pipe((0,R.U)(l=>{this.translateService.get("BATCH.REPLICATE_SUCCESS").subscribe(s=>(0,O.hm)(n,O.yb.success))}),(0,P.K)(l=>{const s=(0,k.Po)(l);return this.translateService.get(s).subscribe(u=>(0,O.hm)(n,O.yb.failure,u)),(0,D._)(l)}))}doFilterJob(t){this.defaultFilter=t.target.value,this.doSearchJobs(this.currentTerm)}doSearchJobs(t){t&&(this.currentTerm=t.trim(),this.currentPage=1,this.loadFirstPage())}hideJobs(){this.search.ruleId=0,this.jobs=[],this.hiddenJobList=!0}openStopExecutionsDialog(t){let n=t.map(s=>s.id).join(","),l=new Q.c("REPLICATION.STOP_TITLE","REPLICATION.STOP_SUMMARY",n,t,13,7);this.StopConfirmDialog.open(l)}canStop(){if(this.selectedRow?.length){let t=!0;return this.selectedRow.forEach(n=>{n.status!==pe&&(t=!1)}),t}return!1}confirmStop(t){t&&1===t.state&&13===t.source&&this.StopExecutions(t.data)}StopExecutions(t){if(!(t&&t.length<1)&&(this.isStopOnGoing=!0,this.jobs&&this.jobs.length)){let n=t.map(l=>this.StopOperate(l));(0,I.D)(n).pipe((0,f.x)(()=>{this.refreshJobs(),this.isStopOnGoing=!1})).subscribe({next:l=>{this.errorHandlerEntity.info("REPLICATION.TRIGGER_STOP_SUCCESS")},error:l=>{this.errorHandlerEntity.error(l)}})}}StopOperate(t){let n=new O.gB;return n.name="OPERATION.STOP_EXECUTIONS",n.data.id=t.id,n.state=O.yb.progressing,n.data.name=t.id,this.operationService.publishInfo(n),this.replicationService.stopReplication({id:t.id}).pipe((0,R.U)(l=>{(0,O.hm)(n,O.yb.success)}),(0,P.K)(l=>{const s=(0,k.Po)(l);return this.translateService.get(s).subscribe(u=>(0,O.hm)(n,O.yb.failure,u)),(0,D._)(l)}))}reloadRules(t){t&&(this.search.ruleName="",this.filterComponent.currentValue="",this.listReplicationRule.refreshRule())}refreshRules(){this.search.ruleName="",this.filterComponent.currentValue?(this.filterComponent.currentValue="",this.filterComponent.filterTerms.next("")):this.listReplicationRule.refreshRule()}refreshJobs(){this.selectedRow=[],this.currentTerm="",this.currentPage=1,this.clrLoadJobs(!0,{page:{from:0,to:this.pageSize-1,size:this.pageSize}})}openFilter(t){this.isOpenFilterTag=t}getDuration(t){if(!t)return;let n=new Date(t.start_time).getTime(),s=new Date(t.end_time).getTime()-n,u=s/1e3,_=Math.floor(u/60),h=Math.floor(u%60);return _>0?0===h?_+"m":_+"m"+h+"s":h>0?h+"s":h<=0&&s>0?s+"ms":"-"}getStatusStr(t){return X&&X[t]?X[t]:t}}return(i=c).\u0275fac=function(t){return new(t||i)(e.Y36(E.F0),e.Y36(j.q),e.Y36(oe.x),e.Y36(re.f9),e.Y36(M.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hbr-replication"]],viewQuery:function(t,n){if(1&t&&(e.Gf(se,5),e.Gf(ie,5),e.Gf(yt,5),e.Gf(Ut,5),e.Gf($.z,7)),2&t){let l;e.iGM(l=e.CRH())&&(n.listReplicationRule=l.first),e.iGM(l=e.CRH())&&(n.createEditPolicyComponent=l.first),e.iGM(l=e.CRH())&&(n.replicationConfirmDialog=l.first),e.iGM(l=e.CRH())&&(n.StopConfirmDialog=l.first),e.iGM(l=e.CRH())&&(n.filterComponent=l.first)}},inputs:{projectId:"projectId",projectName:"projectName",isSystemAdmin:"isSystemAdmin",withReplicationJob:"withReplicationJob",hasCreateReplicationPermission:"hasCreateReplicationPermission",hasUpdateReplicationPermission:"hasUpdateReplicationPermission",hasDeleteReplicationPermission:"hasDeleteReplicationPermission",hasExecuteReplicationPermission:"hasExecuteReplicationPermission"},outputs:{openCreateRule:"openCreateRule",openEdit:"openEdit",goToRegistry:"goToRegistry"},decls:19,vars:15,consts:[[1,"replication-row"],[1,"row","flex-items-xs-between","rightPos"],[1,"flex-xs-middle","option-right"],["id","filter-rules",3,"withDivider","filterPlaceholder","currentValue"],[1,"refresh-btn",3,"click"],["shape","refresh"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"withReplicationJob","hasCreateReplicationPermission","hasUpdateReplicationPermission","hasDeleteReplicationPermission","hasExecuteReplicationPermission","searchString","replicateManual","selectOne","hideJobs","openNewRule","editOne"],["listReplicationRule",""],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","jobList",3,"hidden"],["class","col-lg-12 col-md-12 col-sm-12 col-xs-12",4,"ngIf"],[3,"goToRegistry","reload",4,"ngIf"],[3,"confirmAction"],["replicationConfirmDialog",""],["StopConfirmDialog",""],[1,"row","flex-items-xs-between","jobsRow"],[1,"flex-items-xs-bottom","option-left-down"],[1,"row","flex-items-xs-between","flex-items-xs-bottom","fiter-task"],[1,"execution-select"],[1,"select","filter-tag",3,"hidden"],["clrSelect","",3,"change"],["value","trigger"],["value","status"],["id","filter-executions",3,"withDivider","filterPlaceholder","currentValue","openFlag","filterEvt"],[1,"refresh-btn"],["shape","refresh",3,"click"],[3,"clrDgSelected","clrDgLoading","clrDgSelectedChange","clrDgRefresh"],[1,"btn-group"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],[3,"clrDgSortBy"],[3,"clrDgField"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgPage","clrDgPageSize","clrDgTotalItems","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],[3,"clrDgItem"],["href","javascript:void(0)",3,"click"],["clrTooltipTrigger","","shape","info-circle","size","20",4,"ngIf"],["clrSize","md",3,"clrPosition",4,"clrIfOpen"],["clrTooltipTrigger","","shape","info-circle","size","20"],["clrSize","md",3,"clrPosition"],[3,"goToRegistry","reload"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"div",2),e._UZ(4,"hbr-filter",3),e.ALo(5,"translate"),e.TgZ(6,"span",4),e.NdJ("click",function(){return n.refreshRules()}),e._UZ(7,"clr-icon",5),e.qZA()()()(),e.TgZ(8,"div",6)(9,"hbr-list-replication-rule",7,8),e.NdJ("replicateManual",function(s){return n.replicateManualRule(s)})("selectOne",function(s){return n.selectOneRule(s)})("hideJobs",function(){return n.hideJobs()})("openNewRule",function(){return n.openModal()})("editOne",function(s){return n.openEditRule(s)}),e.qZA()(),e.TgZ(11,"div",9),e.YNc(12,Ft,20,15,"div",10),e.YNc(13,Qt,39,45,"div",10),e.qZA(),e.YNc(14,jt,1,0,"hbr-create-edit-rule",11),e.TgZ(15,"confirmation-dialog",12,13),e.NdJ("confirmAction",function(s){return n.confirmReplication(s)}),e.qZA(),e.TgZ(17,"confirmation-dialog",12,14),e.NdJ("confirmAction",function(s){return n.confirmStop(s)}),e.qZA()()),2&t&&(e.xp6(4),e.s9C("filterPlaceholder",e.lcZ(5,13,"REPLICATION.FILTER_POLICIES_PLACEHOLDER")),e.Q6J("withDivider",!0)("currentValue",n.search.ruleName),e.xp6(5),e.Q6J("withReplicationJob",n.withReplicationJob)("hasCreateReplicationPermission",n.hasCreateReplicationPermission)("hasUpdateReplicationPermission",n.hasUpdateReplicationPermission)("hasDeleteReplicationPermission",n.hasDeleteReplicationPermission)("hasExecuteReplicationPermission",n.hasExecuteReplicationPermission)("searchString",null==n.filterComponent?null:n.filterComponent.currentValue),e.xp6(2),e.Q6J("hidden",n.hiddenJobList),e.xp6(1),e.Q6J("ngIf",n.withReplicationJob),e.xp6(1),e.Q6J("ngIf",n.withReplicationJob),e.xp6(1),e.Q6J("ngIf",n.isSystemAdmin))},dependencies:[r.YN,r.Kr,a.C9t,a.Gwl,a.fv_,a.m4W,a.dRQ,a.YYR,a.Ltv,a.F7K,a.Z4N,a.jND,a.KHL,a.PDs,a.Gcc,a.dml,a.Nh1,a.K8c,a.qvL,a.nqY,a.otW,a.dTv,a.Jmj,a.bMv,a.zDF,x.sg,x.O5,$.z,le.z,se,ie,M.X$,x.Zx,ce.Z],styles:[".refresh-btn[_ngcontent-%COMP%]{cursor:pointer}.refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.option-left[_ngcontent-%COMP%]{padding-left:16px}.option-right[_ngcontent-%COMP%]{padding-right:16px}.execution-select[_ngcontent-%COMP%]{padding-right:50px;height:24px;display:flex;justify-content:flex-end;padding-top:25px}.execution-select[_ngcontent-%COMP%]   .filter-tag[_ngcontent-%COMP%]{float:left;margin-top:8px}.execution-select[_ngcontent-%COMP%]   .filter-tag[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]{margin-top:0}.execution-select[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{cursor:pointer;margin-top:7px}.execution-select[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.rightPos[_ngcontent-%COMP%]{position:absolute;right:35px;margin-top:20px;z-index:100;height:32px}.select-status[_ngcontent-%COMP%]{float:left;margin-top:6px;margin-right:5px}.row-right[_ngcontent-%COMP%]{margin-left:564px}.fiter-task[_ngcontent-%COMP%]{margin-left:.4rem;margin-top:.05rem}.replication-row[_ngcontent-%COMP%]{position:relative}.jobList[_ngcontent-%COMP%]{padding-left:0}.jobList[_ngcontent-%COMP%]   .jobsRow[_ngcontent-%COMP%]{height:60px;display:flex}.jobList[_ngcontent-%COMP%]   .jobsRow[_ngcontent-%COMP%]   .option-left-down[_ngcontent-%COMP%]{margin-top:36px}.jobList[_ngcontent-%COMP%]   .jobsRow[_ngcontent-%COMP%]   .option-right-down[_ngcontent-%COMP%]{padding-right:16px;margin-top:24px}clr-datagrid[_ngcontent-%COMP%]     .datagrid-table{position:static}.flex-items-xs-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),c})();const ue="/harbor/replications";let Kt=(()=>{var i;class c{constructor(t,n,l,s,u){this.router=t,this.session=n,this.appConfigService=l,this.activeRoute=s,this.event=u}ngOnInit(){this.scrollSub||(this.scrollSub=this.event.subscribe(A.n.SCROLL,t=>{t&&ue===t.url&&(this.scrollTop=t.scrollTop)})),this.routerSub||(this.routerSub=this.router.events.subscribe(t=>{t instanceof E.m2&&this.event.publish(A.n.SCROLL_TO_POSITION,t&&ue===t.url?this.scrollTop:0)}))}ngOnDestroy(){this.routerSub&&(this.routerSub.unsubscribe(),this.routerSub=null),this.scrollSub&&(this.scrollSub.unsubscribe(),this.scrollSub=null)}goRegistry(){this.router.navigate(["harbor","registries"])}get isSystemAdmin(){let t=this.session.getCurrentUser();return null!=t&&t.has_admin_role}}return(i=c).\u0275fac=function(t){return new(t||i)(e.Y36(E.F0),e.Y36(Z.m),e.Y36(L._),e.Y36(E.gz),e.Y36(A.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["total-replication"]],decls:5,vars:9,consts:[[1,"custom-h2"],[1,"content-top"],[3,"withReplicationJob","isSystemAdmin","hasCreateReplicationPermission","hasUpdateReplicationPermission","hasDeleteReplicationPermission","hasExecuteReplicationPermission","goToRegistry"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1)(4,"hbr-replication",2),e.NdJ("goToRegistry",function(){return n.goRegistry()}),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,7,"SIDE_NAV.SYSTEM_MGMT.REPLICATION")),e.xp6(3),e.Q6J("withReplicationJob",!0)("isSystemAdmin",n.isSystemAdmin)("hasCreateReplicationPermission",!0)("hasUpdateReplicationPermission",!0)("hasDeleteReplicationPermission",!0)("hasExecuteReplicationPermission",!0))},dependencies:[zt,M.X$],styles:[".option-right[_ngcontent-%COMP%]{padding-right:16px;margin-top:36px;margin-bottom:11px}.content-top[_ngcontent-%COMP%]{margin-top:4px}"]}),c})();function Vt(i,c){1&i&&(e.TgZ(0,"div",45),e._UZ(1,"span",46),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"REPLICATION.IN_PROGRESS")))}function Wt(i,c){1&i&&(e.TgZ(0,"div",47),e._UZ(1,"clr-icon",48),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"REPLICATION.SUCCESS")))}function $t(i,c){1&i&&(e.TgZ(0,"div",49),e._UZ(1,"clr-icon",50),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"REPLICATION.FAILURE")))}function Xt(i,c){if(1&i&&(e.TgZ(0,"a",52),e._UZ(1,"clr-icon",53),e.qZA()),2&i){const o=e.oxw().$implicit,t=e.oxw();e.Q6J("href",t.viewLog(o.id),e.LSH)}}function en(i,c){if(1&i&&(e.TgZ(0,"clr-dg-row")(1,"clr-dg-cell"),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell",37),e._uU(4),e.qZA(),e.TgZ(5,"clr-dg-cell"),e._uU(6),e.qZA(),e.TgZ(7,"clr-dg-cell"),e._uU(8),e.qZA(),e.TgZ(9,"clr-dg-cell"),e._uU(10),e.qZA(),e.TgZ(11,"clr-dg-cell"),e._uU(12),e.qZA(),e.TgZ(13,"clr-dg-cell"),e._uU(14),e.ALo(15,"harborDatetime"),e.qZA(),e.TgZ(16,"clr-dg-cell"),e._uU(17),e.ALo(18,"harborDatetime"),e.qZA(),e.TgZ(19,"clr-dg-cell"),e.YNc(20,Xt,2,1,"a",51),e.qZA()()),2&i){const o=c.$implicit,t=e.oxw();e.xp6(2),e.Oqu(o.id),e.xp6(2),e.Oqu(o.resource_type),e.xp6(2),e.Oqu(o.src_resource),e.xp6(2),e.Oqu(o.dst_resource),e.xp6(2),e.Oqu(o.operation),e.xp6(2),e.Oqu(t.getStatusStr(o.status)),e.xp6(2),e.Oqu(e.xi3(15,9,o.start_time,"short")),e.xp6(3),e.Oqu(e.xi3(18,12,o.end_time,"short")),e.xp6(3),e.Q6J("ngIf","Initialized"!==o.status)}}function tn(i,c){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){e.oxw();const o=e.MAs(122);e.xp6(1),e.lnq("",o.firstItem+1," - ",o.lastItem+1," ",e.lcZ(2,3,"REPLICATION.OF")," ")}}const nn=function(){return[15,25,50]},ee="InProgress",z={Succeed:"Succeeded"};let rn=(()=>{var i;class c{constructor(t,n,l,s,u){this.translate=t,this.router=n,this.replicationService=l,this.errorHandler=s,this.route=u,this.inProgress=!1,this.currentPage=1,this.pageSize=(0,g.tb)(g.V2.REPLICATION_TASKS_COMPONENT),this.loading=!0,this.defaultFilter="resourceType",this.taskItem=[],this.tasksCopy=[],this.startTimeComparator=new g.sH("start_time","date"),this.endTimeComparator=new g.sH("end_time","date")}ngOnInit(){this.searchTask="",this.executionId=this.route.snapshot.params.id;const t=this.route.snapshot.data;t&&(this.execution=t.replicationTasksRoutingResolver,this.clrLoadPage())}getExecutionDetail(){this.inProgress=!0,this.executionId&&this.replicationService.getReplicationExecution({id:+this.executionId}).pipe((0,f.x)(()=>this.inProgress=!1)).subscribe(t=>{this.execution=t,this.clrLoadPage()},t=>{this.errorHandler.error(t)})}clrLoadPage(){this.timerDelay||(this.timerDelay=(0,m.H)(b.ib,b.ib).subscribe(()=>{this.execution.status===ee?this.getExecutionDetail():(this.timerDelay.unsubscribe(),this.timerDelay=null)}))}get trigger(){return this.execution&&this.execution.trigger?this.execution.trigger:""}get startTime(){return this.execution&&this.execution.start_time?this.execution.start_time:null}get successNum(){return this.execution&&this.execution.succeed}get failedNum(){return this.execution&&this.execution.failed}get progressNum(){return this.execution&&this.execution.in_progress}get stoppedNum(){return this.execution&&this.execution.stopped}stopJob(){this.stopOnGoing=!0,this.replicationService.stopReplication({id:+this.executionId}).subscribe(t=>{this.stopOnGoing=!1,this.getExecutionDetail(),this.translate.get("REPLICATION.STOP_SUCCESS",{param:this.executionId}).subscribe(n=>{this.errorHandler.info(n)})},t=>{this.errorHandler.error(t)})}viewLog(t){return g.S$+"/replication/executions/"+this.executionId+"/tasks/"+t+"/log"}ngOnDestroy(){this.timerDelay&&this.timerDelay.unsubscribe(),this.tasksTimeout&&(clearTimeout(this.tasksTimeout),this.tasksTimeout=null)}clrLoadTasks(t,n){if(!n||!n.page||!this.executionId)return;n&&n.page&&n.page.size&&(this.pageSize=n.page.size,(0,g.Pe)(g.V2.REPLICATION_TASKS_COMPONENT,this.pageSize));const l={id:+this.executionId,page:this.currentPage,pageSize:this.pageSize,sort:(0,g.td)(n)};this.searchTask&&""!==this.searchTask&&(l[this.defaultFilter]=this.searchTask===z.Succeed&&"status"===this.defaultFilter?"Succeed":this.searchTask),t&&(this.loading=!0),this.replicationService.listReplicationTasksResponse(l).pipe((0,f.x)(()=>{this.loading=!1})).subscribe(s=>{if(s.headers){let _=s.headers.get("X-Total-Count");_&&(this.totalCount=parseInt(_,0))}this.tasks=s.body,this.tasks=(0,g.Dd)(this.tasks,n),this.tasks=(0,g.Pq)(this.tasks,n);let u=0;this.tasks?.length&&this.tasks.forEach(_=>{_.status===ee&&u++}),(u>0||this.execution?.status===ee)&&(this.tasksTimeout=setTimeout(()=>{this.clrLoadTasks(!1,{page:{}})},b.ib))},s=>{this.errorHandler.error(s)})}onBack(){this.router.navigate(["harbor","replications"])}selectFilter(t){this.defaultFilter=t.target.value,this.doSearch(this.searchTask)}refreshTasks(){this.currentPage=1,this.clrLoadTasks(!0,{page:{}})}doSearch(t){this.currentPage=1,this.searchTask=t.trim(),this.clrLoadTasks(!0,{page:{}})}openFilter(t){this.isOpenFilterTag=t}getStatusStr(t){return z&&z[t]?z[t]:t}canStop(){return this.execution&&"InProgress"===this.execution.status}}return(i=c).\u0275fac=function(t){return new(t||i)(e.Y36(M.sK),e.Y36(E.F0),e.Y36(W.xZ),e.Y36(j.q),e.Y36(E.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["replication-tasks"]],decls:129,vars:109,consts:[[1,"replication-tasks"],[1,"overview-section"],[1,"title-wrapper"],[1,"onback",3,"click"],[1,"title-block"],[1,"custom-h2","h2-style"],[1,"id-divider"],[1,"margin-top-16px"],["class","status-progress",4,"ngIf"],["class","status-success",4,"ngIf"],["class","status-failed",4,"ngIf"],[1,"button-stop"],[1,"btn","btn-primary",3,"disabled","click"],[1,"spinner","spinner-inline",3,"hidden"],[1,"execution-block"],[1,"executions-detail"],[1,"flex-block"],[1,"execution-detail-label"],[1,"detail-row"],[1,"num-success","common-style"],[1,"detail-span"],[1,"execution-details"],[1,"num-failed","common-style"],[1,"num-progress","common-style"],[1,"num-stopped","common-style"],[1,"tasks-detail"],[1,"modal-title"],[1,"row","flex-items-xs-between","flex-items-xs-bottom"],[1,"action-select"],[1,"select","filter-tag","clr-select-wrapper",3,"hidden"],[1,"clr-select",3,"change"],["value","resourceType"],["value","status"],[3,"withDivider","filterPlaceholder","currentValue","openFlag","filterEvt"],[1,"refresh-btn"],["shape","refresh",3,"click"],[3,"clrDgLoading","clrDgRefresh"],[1,"resource-width"],[3,"clrDgField"],[3,"clrDgSortBy"],[4,"ngFor","ngForOf"],[3,"clrDgPage","clrDgTotalItems","clrDgPageSize","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],[1,"status-progress"],[1,"spinner","spinner-inline"],[1,"status-success"],["size","18","shape","success-standard",1,"color-green"],[1,"status-failed"],["size","18","shape","error-standard",1,"color-red"],["rel","noopener noreferrer","target","_blank",3,"href",4,"ngIf"],["rel","noopener noreferrer","target","_blank",3,"href"],["shape","list"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"div")(4,"a",3),e.NdJ("click",function(){return n.onBack()}),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",4)(8,"div")(9,"h2",5),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"span",6),e.TgZ(13,"h2",5),e._uU(14),e.qZA()(),e.TgZ(15,"div",7),e.YNc(16,Vt,5,3,"div",8),e.YNc(17,Wt,5,3,"div",9),e.YNc(18,$t,5,3,"div",10),e.qZA(),e.TgZ(19,"div",11)(20,"button",12),e.NdJ("click",function(){return n.stopJob()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"span",13),e.qZA()()(),e.TgZ(24,"div",14)(25,"div",15)(26,"div")(27,"label"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"span"),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e.TgZ(33,"div")(34,"label"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"span"),e._uU(38),e.ALo(39,"harborDatetime"),e.qZA()()(),e.TgZ(40,"div",16)(41,"section",17)(42,"section",18),e._UZ(43,"div",19),e.TgZ(44,"label",20),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"div",21),e._uU(48),e.qZA()(),e.TgZ(49,"section",18),e._UZ(50,"div",22),e.TgZ(51,"label",20),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"div",21),e._uU(55),e.qZA()(),e.TgZ(56,"section",18),e._UZ(57,"div",23),e.TgZ(58,"label",20),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"div",21),e._uU(62),e.qZA()(),e.TgZ(63,"section",18),e._UZ(64,"div",24),e.TgZ(65,"label",20),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"div",21),e._uU(69),e.qZA()()()()()(),e.TgZ(70,"div",25)(71,"h3",26),e._uU(72),e.ALo(73,"translate"),e.qZA(),e.TgZ(74,"div",27)(75,"div",28)(76,"div",29)(77,"select",30),e.NdJ("change",function(s){return n.selectFilter(s)}),e.TgZ(78,"option",31),e._uU(79),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"option",32),e._uU(82),e.ALo(83,"translate"),e.qZA()()(),e.TgZ(84,"hbr-filter",33),e.NdJ("openFlag",function(s){return n.openFilter(s)})("filterEvt",function(s){return n.doSearch(s)}),e.ALo(85,"translate"),e.qZA(),e.TgZ(86,"span",34)(87,"clr-icon",35),e.NdJ("click",function(){return n.refreshTasks()}),e.qZA()()()(),e.TgZ(88,"clr-datagrid",36),e.NdJ("clrDgRefresh",function(s){return n.clrLoadTasks(!0,s)}),e.TgZ(89,"clr-dg-column"),e._uU(90),e.ALo(91,"translate"),e.qZA(),e.TgZ(92,"clr-dg-column",37),e._uU(93),e.ALo(94,"translate"),e.qZA(),e.TgZ(95,"clr-dg-column",38),e._uU(96),e.ALo(97,"translate"),e.qZA(),e.TgZ(98,"clr-dg-column",38),e._uU(99),e.ALo(100,"translate"),e.qZA(),e.TgZ(101,"clr-dg-column",38),e._uU(102),e.ALo(103,"translate"),e.qZA(),e.TgZ(104,"clr-dg-column"),e._uU(105),e.ALo(106,"translate"),e.qZA(),e.TgZ(107,"clr-dg-column",39),e._uU(108),e.ALo(109,"translate"),e.qZA(),e.TgZ(110,"clr-dg-column",39),e._uU(111),e.ALo(112,"translate"),e.qZA(),e.TgZ(113,"clr-dg-column"),e._uU(114),e.ALo(115,"translate"),e.qZA(),e.TgZ(116,"clr-dg-placeholder"),e._uU(117),e.ALo(118,"translate"),e.qZA(),e.YNc(119,en,21,15,"clr-dg-row",40),e.TgZ(120,"clr-dg-footer")(121,"clr-dg-pagination",41,42),e.NdJ("clrDgPageChange",function(s){return n.currentPage=s}),e.TgZ(123,"clr-dg-page-size",43),e._uU(124),e.ALo(125,"translate"),e.qZA(),e.YNc(126,tn,3,5,"span",44),e._uU(127),e.ALo(128,"translate"),e.qZA()()()()()),2&t&&(e.xp6(5),e.hij("<",e.lcZ(6,53,"PROJECT_DETAIL.REPLICATION"),""),e.xp6(5),e.hij(" ",e.lcZ(11,55,"REPLICATION.REPLICATION_EXECUTION")," "),e.xp6(4),e.Oqu(n.executionId),e.xp6(2),e.Q6J("ngIf",n.execution&&"InProgress"===n.execution.status),e.xp6(1),e.Q6J("ngIf",n.execution&&"Succeed"===n.execution.status),e.xp6(1),e.Q6J("ngIf",n.execution&&"Failed"===n.execution.status),e.xp6(2),e.Q6J("disabled",n.stopOnGoing||!n.canStop()),e.xp6(1),e.hij(" ",e.lcZ(22,57,"REPLICATION.STOPJOB")," "),e.xp6(2),e.Q6J("hidden",!1===n.inProgress),e.xp6(5),e.hij("",e.lcZ(29,59,"REPLICATION.TRIGGER_MODE")," :"),e.xp6(3),e.Oqu(e.lcZ(32,61,n.trigger)),e.xp6(4),e.hij("",e.lcZ(36,63,"REPLICATION.CREATION_TIME")," :"),e.xp6(3),e.Oqu(e.xi3(39,65,n.startTime,"short")),e.xp6(7),e.Oqu(e.lcZ(46,68,"REPLICATION.SUCCESS")),e.xp6(3),e.Oqu(n.successNum),e.xp6(4),e.Oqu(e.lcZ(53,70,"REPLICATION.FAILURE")),e.xp6(3),e.Oqu(n.failedNum),e.xp6(4),e.Oqu(e.lcZ(60,72,"REPLICATION.IN_PROGRESS")),e.xp6(3),e.Oqu(n.progressNum),e.xp6(4),e.Oqu(e.lcZ(67,74,"REPLICATION.STOPPED")),e.xp6(3),e.Oqu(n.stoppedNum),e.xp6(3),e.Oqu(e.lcZ(73,76,"P2P_PROVIDER.TASKS")),e.xp6(4),e.Q6J("hidden",!n.isOpenFilterTag),e.xp6(3),e.hij(" ",e.lcZ(80,78,"REPLICATION.RESOURCE_TYPE")," "),e.xp6(3),e.hij(" ",e.lcZ(83,80,"REPLICATION.STATUS")," "),e.xp6(2),e.s9C("filterPlaceholder",e.lcZ(85,82,"REPLICATION.FILTER_PLACEHOLDER")),e.Q6J("withDivider",!0)("currentValue",n.searchTask),e.xp6(4),e.Q6J("clrDgLoading",n.loading),e.xp6(2),e.Oqu(e.lcZ(91,84,"REPLICATION.TASK_ID")),e.xp6(3),e.Oqu(e.lcZ(94,86,"REPLICATION.RESOURCE_TYPE")),e.xp6(2),e.Q6J("clrDgField","src_resource"),e.xp6(1),e.Oqu(e.lcZ(97,88,"REPLICATION.SOURCE")),e.xp6(2),e.Q6J("clrDgField","dst_resource"),e.xp6(1),e.Oqu(e.lcZ(100,90,"REPLICATION.DESTINATION")),e.xp6(2),e.Q6J("clrDgField","operation"),e.xp6(1),e.Oqu(e.lcZ(103,92,"REPLICATION.OPERATION")),e.xp6(3),e.Oqu(e.lcZ(106,94,"REPLICATION.STATUS")),e.xp6(2),e.Q6J("clrDgSortBy",n.startTimeComparator),e.xp6(1),e.Oqu(e.lcZ(109,96,"REPLICATION.CREATION_TIME")),e.xp6(2),e.Q6J("clrDgSortBy",n.endTimeComparator),e.xp6(1),e.Oqu(e.lcZ(112,98,"REPLICATION.END_TIME")),e.xp6(3),e.Oqu(e.lcZ(115,100,"REPLICATION.LOGS")),e.xp6(3),e.Oqu(e.lcZ(118,102,"P2P_PROVIDER.TASKS_PLACEHOLDER")),e.xp6(2),e.Q6J("ngForOf",n.tasks),e.xp6(2),e.Q6J("clrDgPage",n.currentPage)("clrDgTotalItems",n.totalCount)("clrDgPageSize",n.pageSize),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(108,nn)),e.xp6(1),e.Oqu(e.lcZ(125,104,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",n.totalCount),e.xp6(1),e.AsE("",n.totalCount," ",e.lcZ(128,106,"REPLICATION.ITEMS")," "))},dependencies:[r.YN,r.Kr,a.C9t,a.fv_,a.m4W,a.dRQ,a.YYR,a.Ltv,a.F7K,a.Z4N,a.jND,a.KHL,a.PDs,a.Gcc,a.dml,a.Nh1,a.K8c,a.qvL,a.MgK,x.sg,x.O5,$.z,M.X$,ce.Z],styles:[".replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .onback[_ngcontent-%COMP%]{color:#007cbb;font-size:14px;cursor:pointer}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%]{display:flex;align-items:center}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{min-width:250px;margin-right:5px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:150px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   span[_ngcontent-%COMP%]{color:#007cbb;font-size:12px;margin-left:10px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%]   .id-divider[_ngcontent-%COMP%]{display:inline-block;height:25px;width:2px;background-color:#ccc;margin:0 20px -2px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%]   .h2-style[_ngcontent-%COMP%]{display:inline-block}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]{margin-top:24px;display:flex;flex-wrap:wrap}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]{margin-right:10px;text-align:left}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;height:27px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .common-style[_ngcontent-%COMP%]{width:12px;height:12px;margin-top:16px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-success[_ngcontent-%COMP%]{background-color:#308700}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-failed[_ngcontent-%COMP%]{background-color:#c92101}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-progress[_ngcontent-%COMP%]{background-color:#1c5898}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-stopped[_ngcontent-%COMP%]{background-color:#a1a1a1}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-span[_ngcontent-%COMP%]{flex:0 0 100px;margin:10px 0 0 10px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .execution-details[_ngcontent-%COMP%]{width:200px;margin:8px 35px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .executions-detail[_ngcontent-%COMP%]{width:400px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .executions-detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;width:120px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .executions-detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:10px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]{margin-top:65px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]{padding-right:18px;height:24px;display:flex;justify-content:flex-end}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]   .filter-tag[_ngcontent-%COMP%]{float:left;margin-top:8px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{cursor:pointer;margin-top:7px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   clr-datagrid[_ngcontent-%COMP%]{margin-top:20px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   clr-datagrid[_ngcontent-%COMP%]   .resource-width[_ngcontent-%COMP%]{width:150px}.margin-top-16px[_ngcontent-%COMP%]{margin-top:16px}.button-stop[_ngcontent-%COMP%]{margin-top:16px;margin-left:-5px}"]}),c})(),ln=(()=>{var i;class c{constructor(t,n){this.replicationService=t,this.router=n}resolve(t,n){let l=t.params.id;return l||(l=t.queryParams.project_id),this.replicationService.getReplicationExecution({id:+l}).pipe((0,R.U)(s=>(s||this.router.navigate(["/harbor","projects"]),s)),(0,P.K)(s=>(this.router.navigate(["/harbor","projects"]),null)))}}return(i=c).\u0275fac=function(t){return new(t||i)(e.LFG(W.xZ),e.LFG(E.F0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),c})();var de=p(8778);const sn=[{path:"",component:Kt,data:{reuse:!0,routeConfigId:de.j.REPLICATION_PAGE}},{path:":id/tasks",component:rn,resolve:{replicationTasksRoutingResolver:ln},data:{routeConfigId:de.j.REPLICATION_TASKS_PAGE}}];let cn=(()=>{var i;class c{}return(i=c).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[ne.en],imports:[d.m,r.UX,E.Bz.forChild(sn)]}),c})()},8078:(Y,N,p)=>{p.d(N,{_:()=>E});var r=p(5879),d=p(9515);let E=(()=>{var A;class e{constructor(){}}return(A=e).\u0275fac=function(L){return new(L||A)},A.\u0275cmp=r.Xpm({type:A,selectors:[["cron-tooltip"]],decls:86,vars:51,consts:[[1,"table","table-noborder","table-style","table-tag"],[1,"table-title","tag-thead"],[1,"tag-header-color"],[1,"tag-thead"],[1,"tag-tbody"],[1,"tag-tr"],[1,"tag-body-color"]],template:function(L,T){1&L&&(r.TgZ(0,"table",0)(1,"caption",1)(2,"span",2),r._uU(3),r.ALo(4,"translate"),r.qZA()(),r.TgZ(5,"thead",3)(6,"tr")(7,"th",2),r._uU(8),r.ALo(9,"translate"),r.qZA(),r.TgZ(10,"th",2),r._uU(11),r.ALo(12,"translate"),r.qZA(),r.TgZ(13,"th",2),r._uU(14),r.ALo(15,"translate"),r.qZA(),r.TgZ(16,"th",2),r._uU(17),r.ALo(18,"translate"),r.qZA()()(),r.TgZ(19,"tbody",4)(20,"tr",5)(21,"td",6),r._uU(22),r.ALo(23,"translate"),r.qZA(),r.TgZ(24,"td",6),r._uU(25),r.ALo(26,"translate"),r.qZA(),r.TgZ(27,"td",6),r._uU(28,"0-59"),r.qZA(),r.TgZ(29,"td",6),r._uU(30,"* / , -"),r.qZA()(),r.TgZ(31,"tr",5)(32,"td",6),r._uU(33),r.ALo(34,"translate"),r.qZA(),r.TgZ(35,"td",6),r._uU(36),r.ALo(37,"translate"),r.qZA(),r.TgZ(38,"td",6),r._uU(39,"0-59"),r.qZA(),r.TgZ(40,"td",6),r._uU(41,"* / , -"),r.qZA()(),r.TgZ(42,"tr",5)(43,"td",6),r._uU(44),r.ALo(45,"translate"),r.qZA(),r.TgZ(46,"td",6),r._uU(47),r.ALo(48,"translate"),r.qZA(),r.TgZ(49,"td",6),r._uU(50,"0-23"),r.qZA(),r.TgZ(51,"td",6),r._uU(52,"* / , -"),r.qZA()(),r.TgZ(53,"tr",5)(54,"td",6),r._uU(55),r.ALo(56,"translate"),r.qZA(),r.TgZ(57,"td",6),r._uU(58),r.ALo(59,"translate"),r.qZA(),r.TgZ(60,"td",6),r._uU(61,"1-31"),r.qZA(),r.TgZ(62,"td",6),r._uU(63,"* / , - ?"),r.qZA()(),r.TgZ(64,"tr",5)(65,"td",6),r._uU(66),r.ALo(67,"translate"),r.qZA(),r.TgZ(68,"td",6),r._uU(69),r.ALo(70,"translate"),r.qZA(),r.TgZ(71,"td",6),r._uU(72,"1-12 or JAN-DEC"),r.qZA(),r.TgZ(73,"td",6),r._uU(74,"* / , -"),r.qZA()(),r.TgZ(75,"tr",5)(76,"td",6),r._uU(77),r.ALo(78,"translate"),r.qZA(),r.TgZ(79,"td",6),r._uU(80),r.ALo(81,"translate"),r.qZA(),r.TgZ(82,"td",6),r._uU(83,"0-6 or SUN-SAT"),r.qZA(),r.TgZ(84,"td",6),r._uU(85,"* / , - ?"),r.qZA()()()()),2&L&&(r.xp6(3),r.hij(" ",r.lcZ(4,17,"REPLICATION.CRON_TITLE")," "),r.xp6(5),r.hij(" ",r.lcZ(9,19,"REPLICATION.FIELD_NAME")," "),r.xp6(3),r.hij(" ",r.lcZ(12,21,"REPLICATION.MANDATORY")," "),r.xp6(3),r.hij(" ",r.lcZ(15,23,"REPLICATION.ALLOWED_VALUES")," "),r.xp6(3),r.hij(" ",r.lcZ(18,25,"REPLICATION.ALLOWED_CHARACTERS")," "),r.xp6(5),r.hij(" ",r.lcZ(23,27,"REPLICATION.SECONDS")," "),r.xp6(3),r.Oqu(r.lcZ(26,29,"REPLICATION.YES")),r.xp6(8),r.hij(" ",r.lcZ(34,31,"REPLICATION.MINUTES")," "),r.xp6(3),r.Oqu(r.lcZ(37,33,"REPLICATION.YES")),r.xp6(8),r.hij(" ",r.lcZ(45,35,"REPLICATION.HOURS")," "),r.xp6(3),r.Oqu(r.lcZ(48,37,"REPLICATION.YES")),r.xp6(8),r.hij(" ",r.lcZ(56,39,"REPLICATION.DAY_MONTH")," "),r.xp6(3),r.Oqu(r.lcZ(59,41,"REPLICATION.YES")),r.xp6(8),r.hij(" ",r.lcZ(67,43,"REPLICATION.MONTH")," "),r.xp6(3),r.Oqu(r.lcZ(70,45,"REPLICATION.YES")),r.xp6(8),r.hij(" ",r.lcZ(78,47,"REPLICATION.DAY_WEEK")," "),r.xp6(3),r.Oqu(r.lcZ(81,49,"REPLICATION.YES")))},dependencies:[d.X$],styles:[".table-style[_ngcontent-%COMP%]{margin-top:0;border-top-left-radius:0;border-top-right-radius:0;color:#fff}.table-style[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]{border-top-left-radius:.125rem;border-top-right-radius:.125rem}.table-style[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}"]}),e})()},927:(Y,N,p)=>{p.d(N,{z:()=>q});var r=p(5879),d=p(8645),E=p(3620),A=p(6223),e=p(6814),Z=p(8280);const L=["inputElement"];function T(C,R){1&C&&r._UZ(0,"span",4)}let q=(()=>{var C;class R{set filterPlaceholder(f){this.placeHolder=f}constructor(f){this.cd=f,this.placeHolder="",this.filterTerms=new d.x,this.isExpanded=!1,this.filterEvt=new r.vpe,this.openFlag=new r.vpe,this.readonly=null,this.expandMode=!1,this.withDivider=!1}ngOnInit(){this.filterTerms.pipe((0,E.b)(500)).subscribe(f=>{this.filterEvt.emit(f)})}valueChange(){this.filterTerms.next(this.currentValue&&this.currentValue.trim())}inputFocus(){this.openFlag.emit(this.isExpanded)}onClick(){this.expandMode||(this.isExpanded=!this.isExpanded,this.isExpanded&&(this.cd.detectChanges(),this.inputElement.nativeElement.focus()),this.openFlag.emit(this.isExpanded))}get isShowSearchBox(){return this.expandMode||!this.expandMode&&this.isExpanded}}return(C=R).\u0275fac=function(f){return new(f||C)(r.Y36(r.sBO))},C.\u0275cmp=r.Xpm({type:C,selectors:[["hbr-filter"]],viewQuery:function(f,m){if(1&f&&r.Gf(L,5),2&f){let I;r.iGM(I=r.CRH())&&(m.inputElement=I.first)}},inputs:{readonly:"readonly",currentValue:"currentValue",filterPlaceholder:"filterPlaceholder",expandMode:"expandMode",withDivider:"withDivider",width:"width"},outputs:{filterEvt:"filterEvt",openFlag:"openFlag"},decls:5,vars:9,consts:[["shape","search","size","20",1,"search-btn",3,"click"],["type","text","autofocus","",1,"filter-input","clr-input",3,"hidden","placeholder","ngModel","keyup","focus","ngModelChange"],["inputElement",""],["class","filter-divider",4,"ngIf"],[1,"filter-divider"]],template:function(f,m){1&f&&(r.TgZ(0,"span")(1,"clr-icon",0),r.NdJ("click",function(){return m.onClick()}),r.qZA(),r.TgZ(2,"input",1,2),r.NdJ("keyup",function(){return m.valueChange()})("focus",function(){return m.inputFocus()})("ngModelChange",function(D){return m.currentValue=D}),r.qZA(),r.YNc(4,T,1,0,"span",3),r.qZA()),2&f&&(r.xp6(1),r.ekj("filter-icon",m.isShowSearchBox),r.xp6(1),r.Udp("width",m.width,"px"),r.s9C("placeholder",m.placeHolder),r.Q6J("hidden",!m.isShowSearchBox)("ngModel",m.currentValue),r.uIk("readOnly",m.readonly),r.xp6(2),r.Q6J("ngIf",m.withDivider))},dependencies:[A.Fj,A.JJ,A.On,e.O5,Z.qvL],styles:[".filter-icon[_ngcontent-%COMP%]{position:relative;right:-20px}.filter-divider[_ngcontent-%COMP%]{display:inline-block;height:16px;width:1px;padding-top:12px;padding-bottom:12px;position:relative;top:9px;margin-right:6px;margin-left:6px}.search-btn[_ngcontent-%COMP%]{cursor:pointer}.search-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.filter-input[_ngcontent-%COMP%]{padding-left:24px}"]}),R})()},8383:(Y,N,p)=>{p.d(N,{q:()=>q});var r=p(27),d=p(5879),E=p(6814),A=p(8280);function e(C,R){1&C&&d._UZ(0,"clr-icon",5)}function Z(C,R){1&C&&d._UZ(0,"clr-icon",6)}function L(C,R){if(1&C&&(d.TgZ(0,"clr-tooltip-content",7)(1,"span"),d._uU(2),d.qZA()()),2&C){const P=d.oxw();d.Q6J("clrPosition","right"),d.xp6(2),d.Oqu(P.label.description)}}const T=function(C,R,P){return{"background-color":C,color:R,border:P}};let q=(()=>{var C;class R{constructor(){this.hasIcon=!0,this.withTooltip=!1}ngOnChanges(){if(this.label){let f=this.label.color;f||(f="#FFFFFF"),this.labelColor=r.oW.find(m=>m.color===f)}}}return(C=R).\u0275fac=function(f){return new(f||C)},C.\u0275cmp=d.Xpm({type:C,selectors:[["hbr-label-piece"]],inputs:{label:"label",labelWidth:"labelWidth",hasIcon:"hasIcon",withTooltip:"withTooltip"},features:[d.TTD],decls:8,vars:12,consts:[["clrTooltipTrigger","",1,"label",3,"title","ngStyle"],["shape","organization",4,"ngIf"],["shape","administrator",4,"ngIf"],[1,"label-name"],[3,"clrPosition",4,"ngIf"],["shape","organization"],["shape","administrator"],[3,"clrPosition"]],template:function(f,m){1&f&&(d.TgZ(0,"clr-tooltip")(1,"label",0)(2,"span"),d.YNc(3,e,1,0,"clr-icon",1),d.YNc(4,Z,1,0,"clr-icon",2),d.qZA(),d.TgZ(5,"span",3),d._uU(6),d.qZA()(),d.YNc(7,L,3,2,"clr-tooltip-content",4),d.qZA()),2&f&&(d.xp6(1),d.Udp("max-width",m.labelWidth,"px"),d.s9C("title",m.label.name),d.Q6J("ngStyle",d.kEZ(8,T,null==m.labelColor?null:m.labelColor.color,null==m.labelColor?null:m.labelColor.textColor,"#FFFFFF"===(null==m.labelColor?null:m.labelColor.color)?"1px solid #A1A1A1":"none")),d.xp6(2),d.Q6J("ngIf",m.hasIcon&&"p"===m.label.scope),d.xp6(1),d.Q6J("ngIf",m.hasIcon&&"g"===m.label.scope),d.xp6(2),d.Oqu(m.label.name),d.xp6(1),d.Q6J("ngIf",m.withTooltip&&m.label.description))},dependencies:[E.O5,E.PC,A.qvL,A.MgK,A.Jmj,A.bMv,A.zDF],styles:[".label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:inherit}.label[_ngcontent-%COMP%]   clr-icon[_ngcontent-%COMP%]{margin-right:3px;margin-top:3px}.label-name[_ngcontent-%COMP%]{min-width:0;overflow:hidden;text-overflow:ellipsis}"]}),R})()}}]);