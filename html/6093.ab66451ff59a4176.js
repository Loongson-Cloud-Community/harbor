"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[6093],{6093:(Ke,E,a)=>{a.r(E),a.d(E,{SystemRobotAccountsModule:()=>We});var e=a(5879),d=a(1691),Z=a(9315),T=a(4716),u=a(9576),P=a(5738),r=a(8280),f=a(6814),R=a(2787),O=a(9515),S=a(4410);function F(n,c){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SYSTEM_ROBOT.SELECT_ALL_PROJECT")))}function z(n,c){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SYSTEM_ROBOT.UNSELECT_ALL_PROJECT")))}function Q(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"clr-dg-row",13)(1,"clr-dg-cell")(2,"a",14),e._uU(3),e.qZA()(),e.TgZ(4,"clr-dg-cell"),e._uU(5),e.ALo(6,"harborDatetime"),e.qZA(),e.TgZ(7,"clr-dg-cell")(8,"robot-permissions-panel",15),e.NdJ("permissionsModelChange",function(o){const l=e.CHM(i).$implicit,g=e.oxw();return e.KtG(g.selectedProjectPermissionMap[l.name]=o)}),e.TgZ(9,"button",16),e._uU(10),e.ALo(11,"translate"),e._UZ(12,"clr-icon",17),e.qZA()()()()}if(2&n){const i=c.$implicit,t=e.oxw();e.Q6J("clrDgItem",i),e.xp6(2),e.Q6J("routerLink",t.getLink(i.project_id)),e.xp6(1),e.Oqu(i.name),e.xp6(2),e.Oqu(e.xi3(6,10,i.creation_time,"short")),e.xp6(3),e.Q6J("usedInDatagrid",!0)("mode",t.PermissionSelectPanelModes.DROPDOWN)("permissionsModel",t.selectedProjectPermissionMap[i.name])("candidatePermissions",null==t.robotMetadata?null:t.robotMetadata.project),e.xp6(2),e.AsE(" ",(null==t.selectedProjectPermissionMap[i.name]?null:t.selectedProjectPermissionMap[i.name].length)||0," ",e.lcZ(11,13,"SYSTEM_ROBOT.PERMISSIONS")," ")}}const k=function(){return[5,10]},b=100;let x=(()=>{var n;class c{constructor(t,o){this.projectService=t,this.cdf=o,this.selectedRow=[],this.selectedRowForEdit=[],this.timeComparator=new d.sH("creation_time","date"),this.projects=[],this.pageSize=5,this.currentPage=1,this.showSelectAll=!0,this.initialAccess=[],this.selectedProjectPermissionMap={},this.selectedProjectPermissionMapForEdit={},this.loadingData=!0,this.PermissionSelectPanelModes=u.L}ngOnInit(){this.loadDataFromBackend()}resetAccess(t){this.projects&&this.projects.length&&this.projects.forEach(o=>{this.selectedProjectPermissionMap[o.name]=(0,d.d9)(t)})}getLink(t){return`/harbor/projects/${t}`}selectAllOrUnselectAll(){this.showSelectAll?this.myNameFilterValue?this.projects.forEach(t=>{let o=!1;-1!==t.name.indexOf(this.myNameFilterValue)&&(this.selectedRow.forEach(s=>{s.name===t.name&&(o=!0)}),o||this.selectedRow.push(t))}):this.selectedRow=this.projects:this.selectedRow=[],this.showSelectAll=!this.showSelectAll}loadDataFromBackend(){this.loadingData=!0,this.projectService.listProjectsResponse({withDetail:!1,page:1,pageSize:b}).subscribe({next:t=>{if(t.headers){const o=t.headers.get("X-Total-Count"),s=parseInt(o,0);let l=t.body||[];if(s<=b)this.projects=t.body,this.initDataForEditMode(),this.loadingData=!1,this.cdf.detectChanges();else{const g=Math.ceil(s/b),C=[];for(let _=2;_<=g;_++)C.push(this.projectService.listProjects({withDetail:!1,page:_,pageSize:b}));(0,Z.D)(C).pipe((0,T.x)(()=>{this.loadingData=!1})).subscribe(_=>{_&&_.length&&(_.forEach(M=>{l=l.concat(M)}),this.projects=l,this.initDataForEditMode(),this.cdf.detectChanges())})}}},error:t=>{this.loadingData=!1}})}initDataForEditMode(){this.initDataForEdit?.length&&(this.selectedRow=[],this.projects.forEach((t,o)=>{this.initDataForEdit.forEach(s=>{t.name===s.namespace&&(s.access.forEach(l=>{this.selectedProjectPermissionMap[t.name]=s.access}),this.selectedRow.push(t))}),this.selectedProjectPermissionMapForEdit=(0,d.d9)(this.selectedProjectPermissionMap),this.selectedRowForEdit=(0,d.d9)(this.selectedRow)}))}}return(n=c).\u0275fac=function(t){return new(t||n)(e.Y36(P.Y),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-list-all-projects"]],inputs:{robotMetadata:"robotMetadata",initDataForEdit:"initDataForEdit"},decls:31,vars:40,consts:[[1,"datagrid-compact",3,"clrDgPreserveSelection","clrDgSelected","clrDgLoading","clrDgSelectedChange"],[1,"action-bar"],[3,"mode","permissionsModel","candidatePermissions","permissionsModelChange"],[1,"btn","btn-secondary","btn-sm","m-0"],["size","12","shape","caret down"],[1,"btn","btn-secondary","btn-sm","m-0","ml-1",3,"click"],[4,"ngIf"],[3,"clrDgField","clrFilterValue","clrFilterValueChange"],[3,"clrDgSortBy"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgPage","clrDgPageSize","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[3,"clrDgItem"],["href","javascript:void(0)",3,"routerLink"],[3,"usedInDatagrid","mode","permissionsModel","candidatePermissions","permissionsModelChange"],[1,"btn","btn-link","btn-sm","m-0","p-0"],["shape","caret down"]],template:function(t,o){if(1&t&&(e.TgZ(0,"clr-datagrid",0),e.NdJ("clrDgSelectedChange",function(l){return o.selectedRow=l}),e.TgZ(1,"clr-dg-action-bar",1)(2,"robot-permissions-panel",2),e.NdJ("permissionsModelChange",function(l){return o.initialAccess=l})("permissionsModelChange",function(){return o.resetAccess(o.initialAccess)}),e.TgZ(3,"button",3),e._uU(4),e.ALo(5,"translate"),e._UZ(6,"clr-icon",4),e.qZA()(),e.TgZ(7,"button",5),e.NdJ("click",function(){return o.selectAllOrUnselectAll()}),e.YNc(8,F,3,3,"span",6),e.YNc(9,z,3,3,"span",6),e.qZA()(),e.TgZ(10,"clr-dg-column",7),e.NdJ("clrFilterValueChange",function(l){return o.myNameFilterValue=l}),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"clr-dg-column",8),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"clr-dg-column"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.YNc(19,Q,13,15,"clr-dg-row",9),e.TgZ(20,"clr-dg-footer")(21,"clr-dg-pagination",10,11),e.NdJ("clrDgPageChange",function(l){return o.currentPage=l}),e.TgZ(23,"clr-dg-page-size",12),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"span"),e._uU(27),e.ALo(28,"translate"),e.qZA(),e._uU(29),e.ALo(30,"translate"),e.qZA()()()),2&t){const s=e.MAs(22);e.Q6J("clrDgPreserveSelection",!0)("clrDgSelected",o.selectedRow)("clrDgLoading",o.loadingData),e.xp6(2),e.Q6J("mode",o.PermissionSelectPanelModes.DROPDOWN)("permissionsModel",o.initialAccess)("candidatePermissions",null==o.robotMetadata?null:o.robotMetadata.project),e.xp6(2),e.hij(" ",e.lcZ(5,25,"SYSTEM_ROBOT.RESET_PERMISSION")," "),e.xp6(4),e.Q6J("ngIf",o.showSelectAll),e.xp6(1),e.Q6J("ngIf",!o.showSelectAll),e.xp6(1),e.Q6J("clrDgField","name")("clrFilterValue",o.myNameFilterValue),e.xp6(1),e.Oqu(e.lcZ(12,27,"PROJECT.NAME")),e.xp6(2),e.Q6J("clrDgSortBy",o.timeComparator),e.xp6(1),e.Oqu(e.lcZ(15,29,"PROJECT.CREATION_TIME")),e.xp6(3),e.Oqu(e.lcZ(18,31,"SYSTEM_ROBOT.PERMISSION_COLUMN")),e.xp6(2),e.Q6J("clrDgItemsOf",o.projects),e.xp6(2),e.Q6J("clrDgPage",o.currentPage)("clrDgPageSize",o.pageSize),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(39,k)),e.xp6(1),e.Oqu(e.lcZ(25,33,"PAGINATION.PAGE_SIZE")),e.xp6(3),e.lnq("",s.firstItem+1," - ",s.lastItem+1," ",e.lcZ(28,35,"PROJECT.OF")," "),e.xp6(2),e.AsE(" ",null==o.projects?null:o.projects.length," ",e.lcZ(30,37,"PROJECT.ITEMS")," ")}},dependencies:[r.C9t,r.Gwl,r.fv_,r.m4W,r.dRQ,r.f6,r.YYR,r.Ltv,r.Z4N,r.jND,r.KHL,r.PDs,r.Gcc,r.dml,r.Nh1,r.K8c,r.qvL,f.O5,u.T,R.rH,O.X$,S.Z],styles:[".ml-20px[_ngcontent-%COMP%]{margin-left:20px}.action-bar[_ngcontent-%COMP%]{margin-top:0;display:flex;align-items:center}.datagrid-host[_ngcontent-%COMP%]{position:inherit}[_nghost-%COMP%]  .datagrid-spinner{top:5rem!important;width:62%!important;height:32%!important}[_nghost-%COMP%]  .spinner{left:14rem!important}"]}),c})();var N=a(3997),G=a(2181),w=a(7398),v=a(3620),y=a(4664),p=a(8245),H=a(8645),m=a(6126),I=a(208),A=a(3924),W=a(7342),L=a(7229),D=a(3419),U=a(7546),h=a(6223),K=a(625);const V=["robotForm"],$=["wizard"];function X(n,c){1&n&&(e.TgZ(0,"h3",46),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SYSTEM_ROBOT.CREATE_ROBOT")," "))}function ee(n,c){1&n&&(e.TgZ(0,"h3",46),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SYSTEM_ROBOT.EDIT_ROBOT")," "))}function te(n,c){1&n&&(e.TgZ(0,"p",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SYSTEM_ROBOT.CREATE_ROBOT_SUMMARY")," "))}function oe(n,c){1&n&&(e.TgZ(0,"p",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SYSTEM_ROBOT.EDIT_ROBOT_SUMMARY")," "))}function ne(n,c){1&n&&(e._uU(0),e.ALo(1,"translate")),2&n&&e.Oqu(e.lcZ(1,1,"ROBOT_ACCOUNT.BASIC_INFO"))}function se(n,c){1&n&&(e.TgZ(0,"clr-tooltip-content",48)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"SYSTEM_ROBOT.FINAL_SYSTEM_NAME_TIP")))}function ie(n,c){1&n&&(e.TgZ(0,"clr-tooltip"),e._UZ(1,"clr-icon",24),e.YNc(2,se,4,3,"clr-tooltip-content",25),e.qZA())}function re(n,c){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ROBOT_ACCOUNT.ACCOUNT_EXISTING")))}function le(n,c){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SYSTEM_ROBOT.NAME_TOOLTIP")))}function ce(n,c){if(1&n&&(e.TgZ(0,"clr-control-error"),e.YNc(1,re,3,3,"span",13),e.YNc(2,le,3,3,"span",13),e.qZA()),2&n){const i=e.oxw(),t=e.MAs(32);e.xp6(1),e.Q6J("ngIf",!((t.dirty||t.touched)&&t.invalid)&&i.isNameExisting),e.xp6(1),e.Q6J("ngIf",(t.dirty||t.touched)&&t.invalid)}}function ae(n,c){1&n&&(e.TgZ(0,"clr-tooltip-content",48)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"SYSTEM_ROBOT.EXPIRATION_TIME_EXPLAIN")))}function pe(n,c){if(1&n&&(e.TgZ(0,"option",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.AsE(" ",i.systemExpirationDays," ",e.lcZ(2,2,"SYSTEM_ROBOT.EXPIRATION_DEFAULT")," ")}}function de(n,c){1&n&&(e.TgZ(0,"clr-control-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SYSTEM_ROBOT.EXPIRATION_REQUIRED")," "))}function me(n,c){1&n&&e._UZ(0,"clr-icon",52)}const ge=function(n){return{showWarning:n}};function he(n,c){if(1&n&&(e.TgZ(0,"clr-control-helper")(1,"span",50),e.YNc(2,me,1,0,"clr-icon",51),e.TgZ(3,"span"),e._uU(4),e.ALo(5,"translate"),e.qZA(),e._uU(6,": "),e.TgZ(7,"span"),e._uU(8),e.ALo(9,"harborDatetime"),e.qZA()()()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(9,ge,i.shouldShowWarning())),e.xp6(1),e.Q6J("ngIf",i.shouldShowWarning()),e.xp6(2),e.Oqu(e.lcZ(5,4,"SYSTEM_ROBOT.EXPIRES_AT")),e.xp6(4),e.Oqu(e.xi3(9,6,i.calculateExpiresAt(),"short"))}}function _e(n,c){1&n&&(e._uU(0),e.ALo(1,"translate")),2&n&&e.Oqu(e.lcZ(1,1,"ROBOT_ACCOUNT.SELECT_SYSTEM_PERMISSIONS"))}function ue(n,c){1&n&&(e._uU(0),e.ALo(1,"translate")),2&n&&e.Oqu(e.lcZ(1,1,"ROBOT_ACCOUNT.SELECT_PROJECT_PERMISSIONS"))}function Te(n,c){1&n&&(e.TgZ(0,"clr-tooltip-content",53)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&n&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"SYSTEM_ROBOT.COVER_ALL_EXPLAIN")))}function fe(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"div",54)(1,"robot-permissions-panel",36),e.NdJ("permissionsModelChange",function(o){e.CHM(i);const s=e.oxw();return e.KtG(s.permissionForCoverAll.access=o)}),e.qZA()()}if(2&n){const i=e.oxw();e.xp6(1),e.Q6J("mode",i.PermissionSelectPanelModes.NORMAL)("permissionsModel",i.permissionForCoverAll.access)("candidatePermissions",null==i.robotMetadata?null:i.robotMetadata.project)}}function Oe(n,c){if(1&n&&(e.TgZ(0,"div",39),e._UZ(1,"app-list-all-projects",55),e.qZA()),2&n){const i=e.oxw();e.xp6(1),e.Q6J("initDataForEdit",i.isEditMode?i.systemRobot.permissions:null)("robotMetadata",i.robotMetadata)}}const Ae=function(){return{standalone:!0}};let j=(()=>{var n;class c{constructor(t,o,s,l){this.configService=t,this.robotService=o,this.msgHandler=s,this.operationService=l,this.isEditMode=!1,this.addSuccess=new e.vpe,this.addRobotOpened=!1,this.systemRobot=(0,d.d9)(p.ye),this.expirationType=p.I1.DAYS,this.coverAll=!1,this.coverAllForEdit=!1,this.isNameExisting=!1,this.loading=!1,this.checkNameOnGoing=!1,this.loadingSystemConfig=!1,this.saveBtnState=r.xp5.DEFAULT,this._nameSubject=new H.x,this.permissionForCoverAll={access:[],kind:p.sC.PROJECT,namespace:p.IH},this.permissionForSystem={access:[],kind:p.sC.SYSTEM,namespace:p.We},this.showPage3=!1,this.PermissionSelectPanelModes=u.L}ngOnInit(){this.subscribeName()}ngOnDestroy(){this._nameSubscription&&(this._nameSubscription.unsubscribe(),this._nameSubscription=null)}subscribeName(){this._nameSubscription||(this._nameSubscription=this._nameSubject.pipe((0,N.x)(),(0,G.h)(t=>(!this.isEditMode||!this.originalRobotForEdit||this.originalRobotForEdit.name!==t)&&t?.length>0),(0,w.U)(t=>(this.checkNameOnGoing=!!t,t)),(0,v.b)(500),(0,y.w)(t=>(this.isNameExisting=!1,this.checkNameOnGoing=!0,this.robotService.ListRobot({q:encodeURIComponent(`name=${t}`)}).pipe((0,T.x)(()=>this.checkNameOnGoing=!1))))).subscribe(t=>{t&&t.length>0&&(this.isNameExisting=!0)}))}isExpirationInvalid(){return this.systemRobot.duration<-1}inputExpiration(){this.expirationType=-1==+this.systemRobot.duration?p.I1.NEVER:p.I1.DAYS}changeExpirationType(){this.expirationType===p.I1.DEFAULT&&(this.systemRobot.duration=this.systemExpirationDays),this.expirationType===p.I1.DAYS&&(this.systemRobot.duration=this.systemExpirationDays),this.expirationType===p.I1.NEVER&&(this.systemRobot.duration=-1)}getSystemRobotExpiration(){this.loadingSystemConfig=!0,this.configService.getConfiguration().pipe((0,T.x)(()=>this.loadingSystemConfig=!1)).subscribe(t=>{t&&t.robot_token_duration&&t.robot_token_duration.value&&(this.systemRobot.duration=t.robot_token_duration.value,this.systemExpirationDays=this.systemRobot.duration)})}inputName(){this._nameSubject.next(this.systemRobot.name)}cancel(){this.wizard.reset(),this.reset(),this.addRobotOpened=!1}reset(){this.open(!1),this.systemRobot=(0,d.d9)(p.ye),this.permissionForCoverAll={access:[],kind:p.sC.PROJECT,namespace:p.IH},this.permissionForSystem={access:[],kind:p.sC.SYSTEM,namespace:p.We},this.coverAll=!1,this.showPage3=!1,this.robotForm.reset(),this.expirationType=p.I1.DAYS,this.getSystemRobotExpiration()}resetForEdit(t){this.open(!0),this.originalRobotForEdit=(0,d.d9)(t),this.systemRobot=(0,d.d9)(t),this.permissionForSystem={access:(0,p.TJ)(t),kind:p.sC.SYSTEM,namespace:p.We},this.permissionForSystemForEdit=(0,d.d9)(this.permissionForSystem),this.expirationType=-1===t.duration?p.I1.NEVER:p.I1.DAYS,t&&t.permissions&&t.permissions.length&&(this.coverAll=!1,t.permissions.forEach(o=>{o.kind===p.sC.PROJECT&&o.namespace===p.IH&&(this.coverAll=!0,this.permissionForCoverAll=(0,d.d9)(o),this.permissionForCoverAllForEdit=(0,d.d9)(o))})),this.robotForm.reset({name:this.systemRobot.name,expiration:this.systemRobot.duration,description:this.systemRobot.description}),this.coverAllForEdit=this.coverAll}open(t){this.isNameExisting=!1,this.isEditMode=t,this.addRobotOpened=!0,this.inlineAlertComponent.close(),this._nameSubject.next("")}disabled(){return this.isEditMode?!this.canEdit():!this.canAdd()}canAdd(){if(this.robotForm.invalid)return!1;if(this.coverAll){if(!this.permissionForCoverAll.access?.length)return!1}else{if(!this.permissionForSystem?.access?.length&&!this.listAllProjectsComponent?.selectedRow?.length)return!1;if(this.listAllProjectsComponent?.selectedRow?.length)for(let t=0;t<this.listAllProjectsComponent?.selectedRow?.length;t++)if(!this.listAllProjectsComponent?.selectedProjectPermissionMap[this.listAllProjectsComponent?.selectedRow[t].name]?.length)return!1}return!0}canEdit(){if(!this.canAdd())return!1;if(this.systemRobot.duration!=this.originalRobotForEdit.duration||this.systemRobot.description!=this.originalRobotForEdit.description||!(0,d.Iq)(this.permissionForSystem,this.permissionForSystemForEdit)||this.coverAll!==this.coverAllForEdit||this.coverAll&&!(0,d.Iq)(this.permissionForCoverAll,this.permissionForCoverAllForEdit))return!0;if(this.listAllProjectsComponent){if(!(0,d.eD)(this.listAllProjectsComponent.selectedRow,this.listAllProjectsComponent.selectedRowForEdit))return!0;for(let t=0;t<this.listAllProjectsComponent.selectedRow.length;t++)if(!(0,d.eD)(this.listAllProjectsComponent.selectedProjectPermissionMap[this.listAllProjectsComponent.selectedRow[t].name],this.listAllProjectsComponent.selectedProjectPermissionMapForEdit[this.listAllProjectsComponent.selectedRow[t].name]))return!0}return!1}save(){const t=(0,d.d9)(this.systemRobot);if(t.disable=!1,t.level=p.sC.SYSTEM,t.duration=+this.systemRobot.duration,t.permissions=[],this.permissionForSystem?.access?.length&&t.permissions.push(this.permissionForSystem),this.coverAll?this.permissionForCoverAll?.access?.length&&t.permissions.push(this.permissionForCoverAll):this.listAllProjectsComponent.selectedRow.forEach(o=>{this.listAllProjectsComponent.selectedProjectPermissionMap[o.name]?.length&&t.permissions.push({kind:p.sC.PROJECT,namespace:o.name,access:this.listAllProjectsComponent.selectedProjectPermissionMap[o.name]})}),t.permissions&&t.permissions.length)for(let o=0;o<t.permissions.length;o++)if((0,p.Ji)(t.permissions[o].access))return void this.inlineAlertComponent.showInlineError("SYSTEM_ROBOT.PUSH_PERMISSION_TOOLTIP");if(this.saveBtnState=r.xp5.LOADING,this.isEditMode){t.disable=this.systemRobot.disable;const o=new m.gB;o.name="SYSTEM_ROBOT.UPDATE_ROBOT",o.data.id=t.id,o.state=m.yb.progressing,o.data.name=t.name,this.operationService.publishInfo(o),this.robotService.UpdateRobot({robotId:this.originalRobotForEdit.id,robot:t}).subscribe(s=>{this.saveBtnState=r.xp5.SUCCESS,this.addSuccess.emit(null),this.cancel(),(0,m.hm)(o,m.yb.success),this.msgHandler.showSuccess("SYSTEM_ROBOT.UPDATE_ROBOT_SUCCESSFULLY")},s=>{this.saveBtnState=r.xp5.ERROR,(0,m.hm)(o,m.yb.failure,(0,A.Po)(s)),this.inlineAlertComponent.showInlineError(s)})}else{const o=new m.gB;o.name="SYSTEM_ROBOT.ADD_ROBOT",o.data.id=t.id,o.state=m.yb.progressing,o.data.name=t.name,this.operationService.publishInfo(o),this.robotService.CreateRobot({robot:t}).subscribe(s=>{this.saveBtnState=r.xp5.SUCCESS,this.addSuccess.emit(s),this.cancel(),(0,m.hm)(o,m.yb.success)},s=>{this.saveBtnState=r.xp5.ERROR,this.inlineAlertComponent.showInlineError(s),(0,m.hm)(o,m.yb.failure,(0,A.Po)(s))})}}calculateExpiresAt(){return this.systemRobot&&this.systemRobot.creation_time&&this.systemRobot.duration>0?new Date(new Date(this.systemRobot.creation_time).getTime()+864e5*this.systemRobot.duration):null}shouldShowWarning(){return new Date>=this.calculateExpiresAt()}clrWizardPageOnLoad(){this.inlineAlertComponent.close(),this.showPage3=!0}}return(n=c).\u0275fac=function(t){return new(t||n)(e.Y36(W.e),e.Y36(L.b),e.Y36(D.d),e.Y36(U.f9))},n.\u0275cmp=e.Xpm({type:n,selectors:[["new-robot"]],viewQuery:function(t,o){if(1&t&&(e.Gf(x,5),e.Gf(I.l,5),e.Gf(V,7),e.Gf($,5)),2&t){let s;e.iGM(s=e.CRH())&&(o.listAllProjectsComponent=s.first),e.iGM(s=e.CRH())&&(o.inlineAlertComponent=s.first),e.iGM(s=e.CRH())&&(o.robotForm=s.first),e.iGM(s=e.CRH())&&(o.wizard=s.first)}},inputs:{robotMetadata:"robotMetadata"},outputs:{addSuccess:"addSuccess"},decls:89,vars:68,consts:[[3,"clrWizardOpen","clrWizardOpenChange","clrWizardOnCancel"],["wizard",""],["class","modal-title",4,"ngIf"],["class","mt-0",4,"ngIf"],[3,"type"],[3,"clrLoading","type"],[3,"clrWizardPageNextDisabled"],["clrPageTitle",""],[1,"clr-form","clr-form-horizontal"],["robotForm","ngForm"],[1,"form-block"],[1,"clr-form-control"],["for","name",1,"clr-control-label","required"],[4,"ngIf"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["type","text","id","name","required","","pattern","^[a-z0-9]+(?:[._-][a-z0-9]+)*$","maxLengthExt","255","autocomplete","off","size","30","name","name",1,"clr-input","input-width",3,"disabled","ngModel","ngModelChange","keyup"],["name","ngModel"],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"spinner","spinner-inline",3,"hidden"],[1,"mt-2"],["clrTextarea","","type","text","id","description","name","description",1,"input-width",3,"ngModel","ngModelChange"],[1,"clr-form-control","mt-2"],[1,"clr-control-label","required"],["clrTooltipTrigger","","shape","info-circle","size","24"],["clrPosition","top-right","clrSize","lg",4,"clrIfOpen"],[1,"clr-control-container","input-width"],[1,"flex"],[1,"clr-select-wrapper"],["id","expiration-type",1,"clr-select",3,"ngModelOptions","ngModel","change","ngModelChange"],["value","default",4,"ngIf"],["value","days"],["value","never"],["name","expiration","type","text","autocomplete","off","required","","pattern","^[\\-1-9]{1}[0-9]*$","id","robotTokenExpiration","size","20",1,"clr-input","expiration-width",3,"disabled","ngModel","input","ngModelChange"],["expiration","ngModel"],[1,"pb-0"],[3,"mode","permissionsModel","candidatePermissions","permissionsModelChange"],[1,"pb-0",3,"clrWizardPagePreventDefaultNext","clrWizardPageNextDisabled","clrWizardPageOnLoad","clrWizardPageOnCommit"],[1,"clr-form","clr-form-horizontal","pb-0","pt-0"],[1,"clr-form-control","mt-1"],[1,"clr-control-label"],["clrCheckbox","","id","coverAll","name","coverAll","type","checkbox",3,"ngModel","ngModelChange"],["clrTooltipTrigger","","shape","info-circle","size","24",1,"opacity-07"],["clrPosition","bottom-right","clrSize","lg",4,"clrIfOpen"],["class","clr-form-control mt-0",4,"ngIf"],["class","clr-form-control mt-1",4,"ngIf"],[1,"modal-title"],[1,"mt-0"],["clrPosition","top-right","clrSize","lg"],["value","default"],[3,"ngClass"],["class","alert-icon","shape","exclamation-triangle",4,"ngIf"],["shape","exclamation-triangle",1,"alert-icon"],["clrPosition","bottom-right","clrSize","lg"],[1,"clr-form-control","mt-0"],[1,"all-projects",3,"initDataForEdit","robotMetadata"]],template:function(t,o){if(1&t&&(e.TgZ(0,"clr-wizard",0,1),e.NdJ("clrWizardOpenChange",function(l){return o.addRobotOpened=l})("clrWizardOnCancel",function(){return o.cancel()}),e.TgZ(2,"clr-wizard-title"),e.YNc(3,X,3,3,"h3",2),e.YNc(4,ee,3,3,"h3",2),e.YNc(5,te,3,3,"p",3),e.YNc(6,oe,3,3,"p",3),e.qZA(),e.TgZ(7,"clr-wizard-button",4),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"clr-wizard-button",4),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"clr-wizard-button",4),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"clr-wizard-button",5),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"clr-wizard-page",6),e.YNc(20,ne,2,3,"ng-template",7),e.TgZ(21,"form",8,9)(23,"section",10)(24,"div",11)(25,"label",12),e._uU(26),e.ALo(27,"translate"),e.YNc(28,ie,3,0,"clr-tooltip",13),e.qZA(),e.TgZ(29,"div",14)(30,"div",15)(31,"input",16,17),e.NdJ("ngModelChange",function(l){return o.systemRobot.name=l})("keyup",function(){return o.inputName()}),e.qZA(),e._UZ(33,"clr-icon",18)(34,"span",19),e.qZA(),e.YNc(35,ce,3,2,"clr-control-error",13),e.qZA()(),e.TgZ(36,"clr-textarea-container",20)(37,"label"),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"textarea",21),e.NdJ("ngModelChange",function(l){return o.systemRobot.description=l}),e.qZA()(),e.TgZ(41,"div",22)(42,"label",23),e._uU(43),e.ALo(44,"translate"),e.TgZ(45,"clr-tooltip"),e._UZ(46,"clr-icon",24),e.YNc(47,ae,4,3,"clr-tooltip-content",25),e.qZA()(),e.TgZ(48,"div",26)(49,"div",27)(50,"div",28)(51,"select",29),e.NdJ("change",function(){return o.changeExpirationType()})("ngModelChange",function(l){return o.expirationType=l}),e.YNc(52,pe,3,4,"option",30),e.TgZ(53,"option",31),e._uU(54),e.ALo(55,"translate"),e.qZA(),e.TgZ(56,"option",32),e._uU(57),e.ALo(58,"translate"),e.qZA()()(),e.TgZ(59,"div",15)(60,"input",33,34),e.NdJ("input",function(){return o.inputExpiration()})("ngModelChange",function(l){return o.systemRobot.duration=l}),e.qZA(),e._UZ(62,"clr-icon",18)(63,"span",19),e.YNc(64,de,3,3,"clr-control-error",13),e.qZA()(),e.YNc(65,he,10,11,"clr-control-helper",13),e.qZA()()()()(),e.TgZ(66,"clr-wizard-page",35),e.YNc(67,_e,2,3,"ng-template",7),e.TgZ(68,"form",8)(69,"section",10)(70,"robot-permissions-panel",36),e.NdJ("permissionsModelChange",function(l){return o.permissionForSystem.access=l}),e.qZA()()()(),e.TgZ(71,"clr-wizard-page",37),e.NdJ("clrWizardPageOnLoad",function(){return o.clrWizardPageOnLoad()})("clrWizardPageOnCommit",function(){return o.save()}),e.YNc(72,ue,2,3,"ng-template",7),e._UZ(73,"inline-alert"),e.TgZ(74,"form",38)(75,"section",10)(76,"div",39)(77,"label",40),e._uU(78),e.ALo(79,"translate"),e.qZA(),e.TgZ(80,"div",14)(81,"clr-checkbox-wrapper")(82,"input",41),e.NdJ("ngModelChange",function(l){return o.coverAll=l}),e.qZA(),e.TgZ(83,"label")(84,"clr-tooltip"),e._UZ(85,"clr-icon",42),e.YNc(86,Te,4,3,"clr-tooltip-content",43),e.qZA()()()()(),e.YNc(87,fe,2,3,"div",44),e.YNc(88,Oe,2,2,"div",45),e.qZA()()()()),2&t){const s=e.MAs(22),l=e.MAs(32),g=e.MAs(61);e.Q6J("clrWizardOpen",o.addRobotOpened),e.xp6(3),e.Q6J("ngIf",!o.isEditMode),e.xp6(1),e.Q6J("ngIf",o.isEditMode),e.xp6(1),e.Q6J("ngIf",!o.isEditMode),e.xp6(1),e.Q6J("ngIf",o.isEditMode),e.xp6(1),e.Q6J("type","cancel"),e.xp6(1),e.Oqu(e.lcZ(9,47,"BUTTON.CANCEL")),e.xp6(2),e.Q6J("type","previous"),e.xp6(1),e.Oqu(e.lcZ(12,49,"ROBOT_ACCOUNT.BACK")),e.xp6(2),e.Q6J("type","next"),e.xp6(1),e.Oqu(e.lcZ(15,51,"ROBOT_ACCOUNT.NEXT")),e.xp6(2),e.Q6J("clrLoading",o.saveBtnState)("type","finish"),e.xp6(1),e.Oqu(e.lcZ(18,53,"ROBOT_ACCOUNT.FINISH")),e.xp6(2),e.Q6J("clrWizardPageNextDisabled",!s.valid||o.checkNameOnGoing||o.isNameExisting),e.xp6(7),e.hij("",e.lcZ(27,55,"P2P_PROVIDER.NAME")," "),e.xp6(2),e.Q6J("ngIf",!o.isEditMode),e.xp6(1),e.ekj("clr-error",(l.dirty||l.touched)&&l.invalid||o.isNameExisting),e.xp6(2),e.Q6J("disabled",o.loading||o.isEditMode)("ngModel",o.systemRobot.name),e.xp6(3),e.Q6J("hidden",!o.checkNameOnGoing),e.xp6(1),e.Q6J("ngIf",(l.dirty||l.touched)&&l.invalid||o.isNameExisting),e.xp6(3),e.Oqu(e.lcZ(39,57,"DISTRIBUTION.DESCRIPTION")),e.xp6(2),e.Q6J("ngModel",o.systemRobot.description),e.xp6(3),e.hij("",e.lcZ(44,59,"SYSTEM_ROBOT.EXPIRATION_TIME")," "),e.xp6(5),e.ekj("clr-error",(g.dirty||g.touched)&&g.invalid||o.isExpirationInvalid()),e.xp6(3),e.Q6J("ngModelOptions",e.DdM(67,Ae))("ngModel",o.expirationType),e.xp6(1),e.Q6J("ngIf",!o.isEditMode),e.xp6(2),e.hij(" ",e.lcZ(55,61,"SYSTEM_ROBOT.EXPIRATION_DAYS")," "),e.xp6(3),e.hij(" ",e.lcZ(58,63,"SYSTEM_ROBOT.EXPIRATION_NEVER")," "),e.xp6(3),e.Q6J("disabled",o.loadingSystemConfig)("ngModel",o.systemRobot.duration),e.xp6(3),e.Q6J("hidden",!o.loadingSystemConfig),e.xp6(1),e.Q6J("ngIf",(g.dirty||g.touched)&&g.invalid||o.isExpirationInvalid()),e.xp6(1),e.Q6J("ngIf",o.isEditMode&&(null==o.systemRobot?null:o.systemRobot.duration)>0&&!((g.dirty||g.touched)&&g.invalid)||o.isExpirationInvalid()),e.xp6(5),e.Q6J("mode",o.PermissionSelectPanelModes.NORMAL)("permissionsModel",o.permissionForSystem.access)("candidatePermissions",null==o.robotMetadata?null:o.robotMetadata.system),e.xp6(1),e.Q6J("clrWizardPagePreventDefaultNext",!0)("clrWizardPageNextDisabled",o.disabled()),e.xp6(7),e.Oqu(e.lcZ(79,65,"SYSTEM_ROBOT.COVER_ALL")),e.xp6(4),e.Q6J("ngModel",o.coverAll),e.xp6(5),e.Q6J("ngIf",o.coverAll),e.xp6(1),e.Q6J("ngIf",o.showPage3&&!o.coverAll)}},dependencies:[h._Y,h.YN,h.Kr,h.Fj,h.Wl,h.EJ,h.JJ,h.JL,h.Q7,h.c5,h.On,h.F,r.qvL,r.cCV,r.nqY,r.MgK,r.VqA,r.CM6,r.KKC,r.PEh,r.XE5,r.LAP,r.Jmj,r.bMv,r.zDF,r.rQy,r.XyT,r.$ER,r.VWQ,r.CkG,f.mk,f.O5,K.GA,I.l,u.T,x,O.X$,S.Z],styles:[".rule-width[_ngcontent-%COMP%]{width:100%}.input-width[_ngcontent-%COMP%]{width:350px}.padding-left-0[_ngcontent-%COMP%]{padding-left:0}.no-margin[_ngcontent-%COMP%]{margin:0}.padding-left-120[_ngcontent-%COMP%]{padding-left:126px}.w-90[_ngcontent-%COMP%]{width:90%}.date[_ngcontent-%COMP%]{margin-top:-.9rem}.input-width-date[_ngcontent-%COMP%]{width:265px}.width-table[_ngcontent-%COMP%]{width:388px}.all-projects[_ngcontent-%COMP%]{width:100%}.opacity-07[_ngcontent-%COMP%]{opacity:.7}.disabled[_ngcontent-%COMP%]{opacity:.5}.modal-footer[_ngcontent-%COMP%]{align-items:center;justify-content:space-between}.message[_ngcontent-%COMP%]{margin-left:10px}.flex[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.expiration-width[_ngcontent-%COMP%]{width:194px}.showWarning[_ngcontent-%COMP%]{color:#b3a000}.ml-20px[_ngcontent-%COMP%]{margin-left:20px}[_nghost-%COMP%]  .modal-dialog{width:48rem}"]}),c})();var J=a(9265),be=a(6306);function Ce(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"clr-dg-row",13)(1,"clr-dg-cell")(2,"a",14),e.NdJ("click",function(){const s=e.CHM(i).$implicit,l=e.oxw();let g;return e.KtG(l.goToLink(null==(g=l.getProject(s))?null:g.project_id))}),e._uU(3),e.qZA()(),e.TgZ(4,"clr-dg-cell")(5,"robot-permissions-panel",15)(6,"button",16),e._uU(7),e.ALo(8,"translate"),e._UZ(9,"clr-icon",17),e.qZA()()(),e.TgZ(10,"clr-dg-cell"),e._uU(11),e.ALo(12,"harborDatetime"),e.qZA()()}if(2&n){const i=c.$implicit,t=e.oxw();let o;e.Q6J("clrDgItem",i),e.xp6(3),e.Oqu(i.namespace),e.xp6(2),e.Q6J("mode",t.PermissionSelectPanelModes.MODAL)("permissionsModel",i.access)("candidatePermissions",i.access),e.xp6(2),e.AsE(" ",null==i.access?null:i.access.length," ",e.lcZ(8,8,"SYSTEM_ROBOT.PERMISSIONS")," "),e.xp6(4),e.Oqu(e.xi3(12,10,null==(o=t.getProject(i))?null:o.creation_time,"short"))}}const Re=function(){return[10,20,30]};let Y=(()=>{var n;class c{constructor(t,o){this.router=t,this.projectService=o,this.projectsModalOpened=!1,this.permissions=[],this.pageSize=10,this.loading=!1,this.PermissionSelectPanelModes=u.L}close(){this.projectsModalOpened=!1}clrDgRefresh(t){this.permissions.length&&(t?(this.pageSize=t.page.size,this.getProjectFromBackend(this.permissions.slice(t.page.from,t.page.to+1))):this.getProjectFromBackend(this.permissions.slice(0,this.pageSize)))}getProjectFromBackend(t){const o=[];t?.forEach(s=>{s?.kind===p.sC.PROJECT&&o.push(s?.namespace)}),this.loading=!0,this.projectService.listProjects({withDetail:!1,page:1,pageSize:t?.length,q:encodeURIComponent(`name={${o.join(" ")}}`)}).pipe((0,T.x)(()=>this.loading=!1)).subscribe(s=>{s?.length&&(this.cachedAllProjects=s)})}getProject(t){if(this.cachedAllProjects&&this.cachedAllProjects.length)for(let o=0;o<this.cachedAllProjects.length;o++)if(t.namespace===this.cachedAllProjects[o].name)return this.cachedAllProjects[o];return null}goToLink(t){this.router.navigate(["harbor","projects",t])}}return(n=c).\u0275fac=function(t){return new(t||n)(e.Y36(R.F0),e.Y36(P.Y))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-projects-modal"]],decls:38,vars:39,consts:[["clrModalSize","lg",3,"clrModalOpen","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"nav-divider"],[1,"name"],[1,"modal-body"],[1,"mt-0"],[3,"clrDgLoading","clrDgRefresh"],[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[3,"clrDgPageSize"],["pagination",""],[3,"clrPageSizeOptions"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],[3,"clrDgItem"],["href","javascript:void(0)",3,"click"],[3,"mode","permissionsModel","candidatePermissions"],["modal","",1,"btn","btn-link","btn-sm","m-0"],["size","12","shape","caret down",1,"icon"]],template:function(t,o){if(1&t&&(e.TgZ(0,"clr-modal",0),e.NdJ("clrModalOpenChange",function(l){return o.projectsModalOpened=l}),e.TgZ(1,"h3",1)(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA(),e._UZ(5,"div",2),e.TgZ(6,"span",3),e._uU(7),e.qZA()(),e.TgZ(8,"div",4)(9,"p",5),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"clr-datagrid",6),e.NdJ("clrDgRefresh",function(l){return o.clrDgRefresh(l)}),e.TgZ(13,"clr-dg-column"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"clr-dg-column"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"clr-dg-column"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.YNc(22,Ce,13,13,"clr-dg-row",7),e.TgZ(23,"clr-dg-footer")(24,"clr-dg-pagination",8,9)(26,"clr-dg-page-size",10),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"span"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e._uU(32),e.ALo(33,"translate"),e.qZA()()()(),e.TgZ(34,"div",11)(35,"button",12),e.NdJ("click",function(){return o.close()}),e._uU(36),e.ALo(37,"translate"),e.qZA()()()),2&t){const s=e.MAs(25);e.Q6J("clrModalOpen",o.projectsModalOpened)("clrModalStaticBackdrop",!0)("clrModalClosable",!0),e.xp6(3),e.Oqu(e.lcZ(4,20,"SYSTEM_ROBOT.PROJECTS_MODAL_TITLE")),e.xp6(4),e.Oqu(o.robotName),e.xp6(3),e.hij(" ",e.lcZ(11,22,"SYSTEM_ROBOT.PROJECTS_MODAL_SUMMARY")," "),e.xp6(2),e.Q6J("clrDgLoading",o.loading),e.xp6(2),e.Oqu(e.lcZ(15,24,"PROJECT.NAME")),e.xp6(3),e.Oqu(e.lcZ(18,26,"SYSTEM_ROBOT.PERMISSION_COLUMN")),e.xp6(3),e.Oqu(e.lcZ(21,28,"PROJECT.CREATION_TIME")),e.xp6(2),e.Q6J("clrDgItemsOf",o.permissions),e.xp6(2),e.Q6J("clrDgPageSize",o.pageSize),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(38,Re)),e.xp6(1),e.Oqu(e.lcZ(28,30,"PAGINATION.PAGE_SIZE")),e.xp6(3),e.lnq("",s.firstItem+1," - ",s.lastItem+1," ",e.lcZ(31,32,"PROJECT.OF")," "),e.xp6(2),e.AsE(" ",null==o.permissions?null:o.permissions.length," ",e.lcZ(33,34,"PROJECT.ITEMS")," "),e.xp6(4),e.hij(" ",e.lcZ(37,36,"BUTTON.CLOSE")," ")}},dependencies:[r.C9t,r.fv_,r.m4W,r.dRQ,r.f6,r.YYR,r.Ltv,r.Z4N,r.jND,r.KHL,r.PDs,r.Gcc,r.dml,r.Nh1,r.K8c,r.qvL,r.qAN,r.VLi,u.T,O.X$,S.Z],styles:['.nav-divider[_ngcontent-%COMP%]{display:inline-block;width:1px;height:30px;position:relative;top:10px;opacity:.15;content:"";margin-right:1rem;margin-left:1rem}.name[_ngcontent-%COMP%]{font-size:16px;opacity:.9}']}),c})();var Me=a(2096),q=a(927),Ee=a(9862),B=a(6266),Ze=a(3612),Pe=a(6593),xe=a(4167),Ne=a(8105),we=a(7681);function ve(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2);return e.KtG(o.disableOrEnable())}),e._UZ(1,"clr-icon",35),e._uU(2,"\xa0 "),e.TgZ(3,"span",36),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&n){const i=e.oxw(2);e.Q6J("disabled",!(i.selectedRows&&1===i.selectedRows.length&&i.selectedRows[0].disable)),e.xp6(4),e.Oqu(e.lcZ(5,2,"WEBHOOK.ENABLED_BUTTON"))}}function ye(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2);return e.KtG(o.disableOrEnable())}),e._UZ(1,"clr-icon",37),e._uU(2,"\xa0 "),e.TgZ(3,"span",38),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&n){const i=e.oxw(2);e.Q6J("disabled",!(i.selectedRows&&1===i.selectedRows.length&&!i.selectedRows[0].disable)),e.xp6(4),e.Oqu(e.lcZ(5,2,"WEBHOOK.DISABLED_BUTTON"))}}function Ie(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"clr-dropdown-menu")(1,"button",25),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.openTokenModal())}),e._UZ(2,"clr-icon",26),e._uU(3,"\xa0 "),e.TgZ(4,"span",27),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"button",25),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.openNewRobotModal(!0))}),e._UZ(8,"clr-icon",28),e._uU(9,"\xa0 "),e.TgZ(10,"span",29),e._uU(11),e.ALo(12,"translate"),e.qZA()(),e.YNc(13,ve,6,4,"button",30),e.YNc(14,ye,6,4,"button",30),e._UZ(15,"div",31),e.TgZ(16,"button",25),e.NdJ("click",function(){e.CHM(i);const o=e.oxw();return e.KtG(o.openDeleteRobotsDialog())}),e._UZ(17,"clr-icon",32),e._uU(18,"\xa0 "),e.TgZ(19,"span",33),e._uU(20),e.ALo(21,"translate"),e.qZA()()()}if(2&n){const i=e.oxw();e.xp6(1),e.Q6J("disabled",i.loadingData||!(i.selectedRows&&1===i.selectedRows.length)),e.xp6(4),e.Oqu(e.lcZ(6,8,"SYSTEM_ROBOT.VIEW_SECRET")),e.xp6(2),e.Q6J("disabled",i.loadingData||!(i.selectedRows&&1===i.selectedRows.length)),e.xp6(4),e.Oqu(e.lcZ(12,10,"BUTTON.EDIT")),e.xp6(2),e.Q6J("ngIf",i.selectedRows&&1===i.selectedRows.length&&i.selectedRows[0].disable),e.xp6(1),e.Q6J("ngIf",!(i.selectedRows&&1===i.selectedRows.length&&i.selectedRows[0].disable)),e.xp6(2),e.Q6J("disabled",i.loadingData||!(i.selectedRows&&i.selectedRows.length>=1)),e.xp6(4),e.Oqu(e.lcZ(21,12,"BUTTON.DELETE"))}}function Le(n,c){1&n&&e._UZ(0,"clr-icon",46)}function De(n,c){1&n&&e._UZ(0,"clr-icon",47)}function Ue(n,c){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SCHEDULE.NONE")," "))}function je(n,c){if(1&n&&(e.TgZ(0,"robot-permissions-panel",48)(1,"button",49),e._uU(2),e.ALo(3,"translate"),e._UZ(4,"clr-icon",50),e.qZA()()),2&n){const i=e.oxw().$implicit,t=e.oxw();let o;e.Q6J("mode",t.PermissionSelectPanelModes.MODAL)("permissionsModel",t.getSystemAccess(i))("candidatePermissions",t.getSystemAccess(i)),e.xp6(2),e.AsE(" ",null==(o=t.getSystemAccess(i))?null:o.length," ",e.lcZ(3,5,"SYSTEM_ROBOT.PERMISSIONS")," ")}}function Je(n,c){if(1&n&&(e.TgZ(0,"div",51)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"robot-permissions-panel",48)(5,"button",52),e._uU(6),e.ALo(7,"translate"),e._UZ(8,"clr-icon",50),e.qZA()()()),2&n){const i=e.oxw().$implicit,t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,6,"SYSTEM_ROBOT.ALL_PROJECTS")),e.xp6(2),e.Q6J("mode",t.PermissionSelectPanelModes.MODAL)("permissionsModel",null==i.permissionScope?null:i.permissionScope.access)("candidatePermissions",null==i.permissionScope?null:i.permissionScope.access),e.xp6(2),e.AsE(" ",null==i.permissionScope||null==i.permissionScope.access?null:i.permissionScope.access.length," ",e.lcZ(7,8,"SYSTEM_ROBOT.PERMISSIONS")," ")}}function Ye(n,c){if(1&n){const i=e.EpF();e.TgZ(0,"a",54),e.NdJ("click",function(){e.CHM(i);const o=e.oxw(2).$implicit,s=e.oxw();return e.KtG(s.openProjectModal(s.getProjects(o),o.name))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&n){const i=e.oxw(2).$implicit,t=e.oxw();let o;e.xp6(1),e.AsE(" ",null==(o=t.getProjects(i))?null:o.length," ",e.lcZ(2,2,"SYSTEM_ROBOT.COVERED_PROJECTS")," ")}}function qe(n,c){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"SCHEDULE.NONE")," "))}function Be(n,c){if(1&n&&(e.TgZ(0,"span"),e.YNc(1,Ye,3,4,"a",53),e.YNc(2,qe,3,3,"span",22),e.qZA()),2&n){const i=e.oxw().$implicit,t=e.oxw();let o,s;e.xp6(1),e.Q6J("ngIf",null==(o=t.getProjects(i))?null:o.length),e.xp6(1),e.Q6J("ngIf",!(null!=(s=t.getProjects(i))&&s.length))}}function Fe(n,c){if(1&n&&(e.TgZ(0,"clr-dg-row",39)(1,"clr-dg-cell"),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell",40),e.YNc(4,Le,1,0,"clr-icon",41),e.YNc(5,De,1,0,"clr-icon",42),e.qZA(),e.TgZ(6,"clr-dg-cell"),e.YNc(7,Ue,3,3,"span",22),e.YNc(8,je,5,7,"robot-permissions-panel",43),e.qZA(),e.TgZ(9,"clr-dg-cell"),e.YNc(10,Je,9,10,"div",44),e.YNc(11,Be,3,2,"span",22),e.qZA(),e.TgZ(12,"clr-dg-cell"),e._uU(13),e.ALo(14,"harborDatetime"),e.qZA(),e.TgZ(15,"clr-dg-cell"),e._UZ(16,"app-remaining-time",45),e.qZA(),e.TgZ(17,"clr-dg-cell"),e._uU(18),e.qZA()()),2&n){const i=c.$implicit,t=e.oxw();let o,s;e.Q6J("clrDgItem",i),e.xp6(2),e.Oqu(i.name),e.xp6(1),e.Q6J("ngSwitch",i.disable),e.xp6(1),e.Q6J("ngSwitchCase",!1),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(2),e.Q6J("ngIf",!(null!=(o=t.getSystemAccess(i))&&o.length)),e.xp6(1),e.Q6J("ngIf",null==(s=t.getSystemAccess(i))?null:s.length),e.xp6(2),e.Q6J("ngIf",null==i.permissionScope?null:i.permissionScope.coverAll),e.xp6(1),e.Q6J("ngIf",!i.permissionScope||!(null!=i.permissionScope&&i.permissionScope.coverAll)),e.xp6(2),e.Oqu(e.xi3(14,13,i.creation_time,"short")),e.xp6(3),e.Q6J("deadline",null==i?null:i.expires_at)("timeDiff",t.deltaTime),e.xp6(2),e.Oqu(i.description)}}function ze(n,c){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){e.oxw();const i=e.MAs(53);e.xp6(1),e.lnq("",i.firstItem+1," - ",i.lastItem+1," ",e.lcZ(2,3,"ROBOT_ACCOUNT.OF")," ")}}const Qe=function(){return[15,25,50]};let ke=(()=>{var n;class c{constructor(t,o,s,l,g,C,_,M){this.robotService=t,this.msgHandler=o,this.operateDialogService=s,this.operationService=l,this.sanitizer=g,this.translate=C,this.systemInfoService=_,this.permissionService=M,this.pageSize=(0,d.tb)(d.V2.SYSTEM_ROBOT_COMPONENT),this.currentPage=1,this.total=0,this.robots=[],this.selectedRows=[],this.loading=!0,this.loadingData=!1,this.addBtnState=r.xp5.DEFAULT,this.loadingMetadata=!1,this.NEW_EMPTY_ROBOT=p.ye,this.PermissionSelectPanelModes=u.L}ngOnInit(){this.getRobotPermissions(),this.getCurrenTime(),this.searchSub||(this.searchSub=this.filterComponent.filterTerms.pipe((0,v.b)(500),(0,N.x)(),(0,y.w)(t=>{this.currentPage=1,this.selectedRows=[];const o={page:this.currentPage,pageSize:this.pageSize};return this.searchKey=t,this.searchKey&&(o.q=encodeURIComponent(`name=~${this.searchKey}`)),this.loading=!0,this.robotService.ListRobotResponse(o).pipe((0,T.x)(()=>{this.loading=!1}))})).subscribe(t=>{this.total=Number.parseInt(t.headers.get("x-total-count"),10),this.robots=t.body,this.calculateProjects()},t=>{this.msgHandler.handleError(t)})),this.subscription||(this.subscription=this.operateDialogService.confirmationConfirm$.subscribe(t=>{t&&1===t.state&&4===t.source&&this.deleteRobots(t.data),1===t.state&&16===t.source&&this.operateRobot()}))}ngOnDestroy(){this.searchSub&&(this.searchSub.unsubscribe(),this.searchSub=null),this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}getRobotPermissions(){this.loadingData=!0,this.permissionService.getPermissions().pipe((0,T.x)(()=>this.loadingData=!1)).subscribe(t=>{this.robotMetadata=t})}getCurrenTime(){this.systemInfoService.getSystemInfo().subscribe(t=>{t?.current_time&&(this.deltaTime=(new Date).getTime()-new Date(t?.current_time).getTime())})}clrLoad(t){t&&t.page&&t.page.size&&(this.pageSize=t.page.size,(0,d.Pe)(d.V2.SYSTEM_ROBOT_COMPONENT,this.pageSize)),this.selectedRows=[];const o={page:this.currentPage,pageSize:this.pageSize,sort:(0,d.td)(t)};this.searchKey&&(o.q=encodeURIComponent(`name=~${this.searchKey}`)),this.loading=!0,this.robotService.ListRobotResponse(o).pipe((0,T.x)(()=>this.loading=!1)).subscribe(s=>{this.total=Number.parseInt(s.headers.get("x-total-count"),10),this.robots=s.body,this.calculateProjects()},s=>{this.msgHandler.error(s)})}openNewRobotModal(t){t?this.newRobotComponent.resetForEdit((0,d.d9)(this.selectedRows[0])):this.newRobotComponent.reset()}openTokenModal(){this.viewTokenComponent.open(),this.viewTokenComponent.robot=(0,d.d9)(this.selectedRows[0])}calculateProjects(){if(this.robots&&this.robots.length)for(let t=0;t<this.robots.length;t++)if(this.robots[t]&&this.robots[t].permissions&&this.robots[t].permissions.length)for(let o=0;o<this.robots[t].permissions.length;o++)if(this.robots[t].permissions[o].kind===p.sC.PROJECT&&this.robots[t].permissions[o].namespace===p.IH){this.robots[t].permissionScope={coverAll:!0,access:this.robots[t].permissions[o].access};break}}getProjects(t){const o=[];if(t&&t.permissions&&t.permissions.length)for(let s=0;s<t.permissions.length;s++)t.permissions[s].kind===p.sC.PROJECT&&o.push(t.permissions[s]);return o}openProjectModal(t,o){this.projectsModalComponent.projectsModalOpened=!0,this.projectsModalComponent.robotName=o,this.projectsModalComponent.permissions=t,this.projectsModalComponent.clrDgRefresh()}refresh(){this.currentPage=1,this.selectedRows=[],this.clrLoad()}deleteRobots(t){let o=[];t&&t.length&&(t.forEach(s=>{o.push(this.deleteRobot(s))}),(0,Z.D)(...o).subscribe(s=>{let l;s&&s.length&&s.forEach(g=>{g instanceof Ee.UA&&(l=(0,A.Po)(g))}),l?this.msgHandler.handleError(l):this.msgHandler.showSuccess("SYSTEM_ROBOT.DELETE_ROBOT_SUCCESS"),this.refresh()}))}deleteRobot(t){let o=new m.gB;return o.name="SYSTEM_ROBOT.DELETE_ROBOT",o.data.id=t.id,o.state=m.yb.progressing,o.data.name=t.name,this.operationService.publishInfo(o),this.robotService.DeleteRobot({robotId:t.id}).pipe((0,w.U)(()=>{(0,m.hm)(o,m.yb.success)}),(0,be.K)(s=>{const l=(0,A.Po)(s);return(0,m.hm)(o,m.yb.failure,l),(0,Me.of)(s)}))}openDeleteRobotsDialog(){const t=this.selectedRows.map(s=>s.name).join(","),o=new B.c("ROBOT_ACCOUNT.DELETION_TITLE","ROBOT_ACCOUNT.DELETION_SUMMARY",t,this.selectedRows,4,2);this.operateDialogService.openComfirmDialog(o)}disableOrEnable(){const s=new B.c(this.selectedRows[0].disable?"SYSTEM_ROBOT.ENABLE_TITLE":"SYSTEM_ROBOT.DISABLE_TITLE",this.selectedRows[0].disable?"SYSTEM_ROBOT.ENABLE_SUMMARY":"SYSTEM_ROBOT.DISABLE_SUMMARY",this.selectedRows[0].name,this.selectedRows[0],16,this.selectedRows[0].disable?4:5);this.operateDialogService.openComfirmDialog(s)}operateRobot(){const t=(0,d.d9)(this.selectedRows[0]),o=t.disable?"SYSTEM_ROBOT.ENABLE_ROBOT_SUCCESSFULLY":"SYSTEM_ROBOT.DISABLE_ROBOT_SUCCESSFULLY";t.disable=!t.disable,delete t.secret;const s=new m.gB;s.name=t.disable?"SYSTEM_ROBOT.DISABLE_TITLE":"SYSTEM_ROBOT.ENABLE_TITLE",s.data.id=t.id,s.state=m.yb.progressing,s.data.name=t.name,this.operationService.publishInfo(s),this.robotService.UpdateRobot({robot:t,robotId:t.id}).subscribe(l=>{(0,m.hm)(s,m.yb.success),this.msgHandler.showSuccess(o),this.refresh()},l=>{(0,m.hm)(s,m.yb.failure,(0,A.Po)(l)),this.msgHandler.showSuccess(l)})}addSuccess(t){if(t){this.viewTokenComponent.open(),this.viewTokenComponent.tokenModalOpened=!1,this.viewTokenComponent.robot=(0,d.d9)(t),this.viewTokenComponent.copyToken=!0,this.translate.get("ROBOT_ACCOUNT.CREATED_SUCCESS",{param:t.name}).subscribe(s=>{this.viewTokenComponent.createSuccess=s});const o=`data:text/json;charset=utf-8, ${encodeURIComponent(JSON.stringify(t))}`;this.viewTokenComponent.downLoadHref=this.sanitizer.bypassSecurityTrustUrl(o),this.viewTokenComponent.downLoadFileName=`${t.name}.json`}this.refresh()}getSystemAccess(t){return(0,p.TJ)(t)}}return(n=c).\u0275fac=function(t){return new(t||n)(e.Y36(L.b),e.Y36(D.d),e.Y36(Ze.O),e.Y36(U.f9),e.Y36(Pe.H7),e.Y36(O.sK),e.Y36(xe.e),e.Y36(Ne.q))},n.\u0275cmp=e.Xpm({type:n,selectors:[["system-robot-accounts"]],viewQuery:function(t,o){if(1&t&&(e.Gf(j,7),e.Gf(J.N,5),e.Gf(Y,5),e.Gf(q.z,7)),2&t){let s;e.iGM(s=e.CRH())&&(o.newRobotComponent=s.first),e.iGM(s=e.CRH())&&(o.viewTokenComponent=s.first),e.iGM(s=e.CRH())&&(o.projectsModalComponent=s.first),e.iGM(s=e.CRH())&&(o.filterComponent=s.first)}},decls:63,vars:60,consts:[[1,"custom-h2"],[1,"row","robot-space"],[1,"row","flex-items-xs-between","rightPos"],[1,"flex-xs-middle","option-left"],[1,"flex-xs-middle","option-right"],[3,"width","withDivider","filterPlaceholder"],[1,"refresh-btn",3,"click"],["shape","refresh"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"btn","btn-secondary",3,"disabled","clrLoading","click"],["shape","plus","size","16"],["clrDropdownTrigger","",1,"btn","btn-link",3,"clrCloseMenuOnItemClick"],["shape","caret\n            down"],[4,"clrIfOpen"],[3,"clrDgLoading","clrDgSelected","clrDgRefresh","clrDgSelectedChange"],[3,"clrDgSortBy"],[1,"permission-col"],[1,"projects-col"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgPageSize","clrDgPage","clrDgTotalItems","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],[3,"robotMetadata","addSuccess"],[3,"refreshSuccess"],["clrDropdownItem","",3,"disabled","click"],["shape","details","size","16"],["id","system-robot-token"],["shape","edit","size","16"],["id","system-robot-edit"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],[1,"dropdown-divider"],["shape","window-close","size","16"],["id","system-robot-delete"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["size","16","shape","success-standard"],["id","distribution-enable"],["size","16","shape","ban"],["id","distribution-disable"],[3,"clrDgItem"],[3,"ngSwitch"],["shape","check-circle","size","20","class","color-green",4,"ngSwitchCase"],["shape","times-circle","size","16","class","color-red red-position",4,"ngSwitchCase"],[3,"mode","permissionsModel","candidatePermissions",4,"ngIf"],["class","all-projects",4,"ngIf"],[3,"deadline","timeDiff"],["shape","check-circle","size","20",1,"color-green"],["shape","times-circle","size","16",1,"color-red","red-position"],[3,"mode","permissionsModel","candidatePermissions"],["modal","",1,"btn","btn-link","btn-sm","m-0","p-0"],["size","12","shape","caret down",1,"icon"],[1,"all-projects"],["modal","",1,"btn","btn-link","btn-sm","m-0"],["href","javascript:void(0)",3,"click",4,"ngIf"],["href","javascript:void(0)",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1)(4,"div")(5,"div",2),e._UZ(6,"div",3),e.TgZ(7,"div",4),e._UZ(8,"hbr-filter",5),e.ALo(9,"translate"),e.TgZ(10,"span",6),e.NdJ("click",function(){return o.refresh()}),e._UZ(11,"clr-icon",7),e.qZA()()()(),e.TgZ(12,"div",8)(13,"clr-dg-action-bar")(14,"button",9),e.NdJ("click",function(){return o.openNewRobotModal(!1)}),e.TgZ(15,"span"),e._UZ(16,"clr-icon",10),e._uU(17),e.ALo(18,"translate"),e.qZA()(),e.TgZ(19,"clr-dropdown",11)(20,"span"),e._uU(21),e.ALo(22,"translate"),e._UZ(23,"clr-icon",12),e.qZA(),e.YNc(24,Ie,22,14,"clr-dropdown-menu",13),e.qZA()(),e.TgZ(25,"clr-datagrid",14),e.NdJ("clrDgRefresh",function(l){return o.clrLoad(l)})("clrDgSelectedChange",function(l){return o.selectedRows=l}),e.TgZ(26,"clr-dg-column",15),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"clr-dg-column"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"clr-dg-column",16),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"clr-dg-column",17),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"clr-dg-column",15),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"clr-dg-column"),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"clr-dg-column"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"clr-dg-placeholder"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.YNc(50,Fe,19,16,"clr-dg-row",18),e.TgZ(51,"clr-dg-footer")(52,"clr-dg-pagination",19,20),e.NdJ("clrDgPageChange",function(l){return o.currentPage=l}),e.TgZ(54,"clr-dg-page-size",21),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.YNc(57,ze,3,5,"span",22),e._uU(58),e.ALo(59,"translate"),e.qZA()()()()(),e.TgZ(60,"new-robot",23),e.NdJ("addSuccess",function(l){return o.addSuccess(l)}),e.qZA(),e.TgZ(61,"view-token",24),e.NdJ("refreshSuccess",function(){return o.refresh()}),e.qZA(),e._UZ(62,"app-projects-modal")),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,31,"SYSTEM_ROBOT.ROBOT_ACCOUNT_NAV")),e.xp6(7),e.s9C("filterPlaceholder",e.lcZ(9,33,"SYSTEM_ROBOT.SEARCH_BY_NAME")),e.Q6J("width",240)("withDivider",!0),e.xp6(6),e.Q6J("disabled",o.loadingData||o.loadingMetadata)("clrLoading",o.addBtnState),e.xp6(3),e.hij("\xa0",e.lcZ(18,35,"ROBOT_ACCOUNT.NEW_ROBOT_ACCOUNT")," "),e.xp6(2),e.Q6J("clrCloseMenuOnItemClick",!1),e.xp6(2),e.Oqu(e.lcZ(22,37,"MEMBER.ACTION")),e.xp6(4),e.Q6J("clrDgLoading",o.loading)("clrDgSelected",o.selectedRows),e.xp6(1),e.Q6J("clrDgSortBy","name"),e.xp6(1),e.Oqu(e.lcZ(28,39,"ROBOT_ACCOUNT.NAME")),e.xp6(3),e.Oqu(e.lcZ(31,41,"ROBOT_ACCOUNT.ENABLED_STATE")),e.xp6(3),e.Oqu(e.lcZ(34,43,"ROBOT_ACCOUNT.SYSTEM_PERMISSIONS")),e.xp6(3),e.Oqu(e.lcZ(37,45,"SYSTEM_ROBOT.PROJECTS")),e.xp6(2),e.Q6J("clrDgSortBy","creation_time"),e.xp6(1),e.Oqu(e.lcZ(40,47,"ROBOT_ACCOUNT.CREATION")),e.xp6(3),e.Oqu(e.lcZ(43,49,"SYSTEM_ROBOT.EXPIRES_IN")),e.xp6(3),e.Oqu(e.lcZ(46,51,"ROBOT_ACCOUNT.DESCRIPTION")),e.xp6(3),e.Oqu(e.lcZ(49,53,"SYSTEM_ROBOT.NOT_FOUND")),e.xp6(2),e.Q6J("ngForOf",o.robots),e.xp6(2),e.Q6J("clrDgPageSize",o.pageSize)("clrDgPage",o.currentPage)("clrDgTotalItems",o.total),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(59,Qe)),e.xp6(1),e.Oqu(e.lcZ(56,55,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",o.total),e.xp6(1),e.AsE(" ",o.total," ",e.lcZ(59,57,"ROBOT_ACCOUNT.ITEMS")," "),e.xp6(2),e.Q6J("robotMetadata",o.robotMetadata))},dependencies:[r.C9t,r.Gwl,r.fv_,r.m4W,r.dRQ,r.YYR,r.Ltv,r.F7K,r.Z4N,r.jND,r.KHL,r.PDs,r.Gcc,r.dml,r.Nh1,r.K8c,r.qvL,r.cCV,r.nqY,r.MPb,r.f_W,r.zwp,r.ZUS,r.lU3,f.sg,f.O5,f.RF,f.n9,q.z,J.N,we.h,u.T,j,Y,O.X$,S.Z],styles:[".robot-space[_ngcontent-%COMP%]{margin-top:28px;position:relative}.robot-space[_ngcontent-%COMP%]   clr-icon.red-position[_ngcontent-%COMP%]{margin-left:2px}.robot-space[_ngcontent-%COMP%]   .rightPos[_ngcontent-%COMP%]{position:absolute;z-index:100;right:35px;margin-top:4px}.robot-space[_ngcontent-%COMP%]   .rightPos[_ngcontent-%COMP%]   .option-left[_ngcontent-%COMP%]{padding-left:16px;position:relative;top:10px}.robot-space[_ngcontent-%COMP%]   .rightPos[_ngcontent-%COMP%]   .option-right[_ngcontent-%COMP%]{padding-right:16px}.robot-space[_ngcontent-%COMP%]   .rightPos[_ngcontent-%COMP%]   .option-right[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{cursor:pointer}.all-projects[_ngcontent-%COMP%]{display:flex;align-items:center;height:16px}.icon[_ngcontent-%COMP%]{margin-top:3px}.projects-col[_ngcontent-%COMP%]{min-width:14rem!important}.permission-col[_ngcontent-%COMP%]{min-width:8rem!important}"]}),c})();var Ge=a(4554);const He=[{path:"",component:ke}];let We=(()=>{var n;class c{}return(n=c).\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[Ge.m,R.Bz.forChild(He)]}),c})()}}]);