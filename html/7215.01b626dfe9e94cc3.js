"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[7215],{7477:(L,Z,s)=>{s.d(Z,{f:()=>v});var e=s(9862),E=s(3586),S=s(2181),g=s(7398),T=s(5879),t=s(9462);let v=(()=>{var m;class x extends E.b{constructor(l,p){super(l,p)}exportScanDataResponse(l){let p=this.newParams(),h=new e.WM,M=null;M=l.criteria,null!=l.XScanDataType&&(h=h.set("X-Scan-Data-Type",l.XScanDataType.toString())),null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("POST",this.rootUrl+"/export/cve",M,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}exportScanData(l){return this.exportScanDataResponse(l).pipe((0,g.U)(p=>p.body))}getScanDataExportExecutionResponse(l){let p=this.newParams(),h=new e.WM;null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("GET",this.rootUrl+`/export/cve/execution/${l.executionId}`,null,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}getScanDataExportExecution(l){return this.getScanDataExportExecutionResponse(l).pipe((0,g.U)(p=>p.body))}getScanDataExportExecutionListResponse(l){let p=this.newParams(),h=new e.WM;null!=l&&(h=h.set("X-Request-Id",l.toString()));let O=new e.aW("GET",this.rootUrl+"/export/cve/executions",null,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}getScanDataExportExecutionList(l){return this.getScanDataExportExecutionListResponse(l).pipe((0,g.U)(p=>p.body))}downloadScanDataResponse(l){let p=this.newParams(),h=new e.WM;null!=l.format&&(p=p.set("format",l.format.toString())),null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("GET",this.rootUrl+`/export/cve/download/${l.executionId}`,null,{headers:h,params:p,responseType:"blob"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}downloadScanData(l){return this.downloadScanDataResponse(l).pipe((0,g.U)(p=>p.body))}}return(m=x).exportScanDataPath="/export/cve",m.getScanDataExportExecutionPath="/export/cve/execution/{execution_id}",m.getScanDataExportExecutionListPath="/export/cve/executions",m.downloadScanDataPath="/export/cve/download/{execution_id}",m.\u0275fac=function(l){return new(l||m)(T.LFG(t.p),T.LFG(e.eN))},m.\u0275prov=T.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),x})()},1695:(L,Z,s)=>{s.d(Z,{K:()=>v});var e=s(9862),E=s(3586),S=s(2181),g=s(7398),T=s(5879),t=s(9462);let v=(()=>{var m;class x extends E.b{constructor(l,p){super(l,p)}listUsersResponse(l){let p=this.newParams(),h=new e.WM;null!=l.sort&&(p=p.set("sort",l.sort.toString())),null!=l.q&&(p=p.set("q",l.q.toString())),null!=l.pageSize&&(p=p.set("page_size",l.pageSize.toString())),null!=l.page&&(p=p.set("page",l.page.toString())),null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("GET",this.rootUrl+"/users",null,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}listUsers(l){return this.listUsersResponse(l).pipe((0,g.U)(p=>p.body))}createUserResponse(l){let p=this.newParams(),h=new e.WM,M=null;M=l.userReq,null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("POST",this.rootUrl+"/users",M,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}createUser(l){return this.createUserResponse(l).pipe((0,g.U)(p=>p.body))}getCurrentUserInfoResponse(l){let p=this.newParams(),h=new e.WM;null!=l&&(h=h.set("X-Request-Id",l.toString()));let O=new e.aW("GET",this.rootUrl+"/users/current",null,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}getCurrentUserInfo(l){return this.getCurrentUserInfoResponse(l).pipe((0,g.U)(p=>p.body))}searchUsersResponse(l){let p=this.newParams(),h=new e.WM;null!=l.username&&(p=p.set("username",l.username.toString())),null!=l.pageSize&&(p=p.set("page_size",l.pageSize.toString())),null!=l.page&&(p=p.set("page",l.page.toString())),null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("GET",this.rootUrl+"/users/search",null,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}searchUsers(l){return this.searchUsersResponse(l).pipe((0,g.U)(p=>p.body))}getUserResponse(l){let p=this.newParams(),h=new e.WM;null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("GET",this.rootUrl+`/users/${l.userId}`,null,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}getUser(l){return this.getUserResponse(l).pipe((0,g.U)(p=>p.body))}updateUserProfileResponse(l){let p=this.newParams(),h=new e.WM,M=null;M=l.profile,null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("PUT",this.rootUrl+`/users/${l.userId}`,M,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}updateUserProfile(l){return this.updateUserProfileResponse(l).pipe((0,g.U)(p=>p.body))}deleteUserResponse(l){let p=this.newParams(),h=new e.WM;null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("DELETE",this.rootUrl+`/users/${l.userId}`,null,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}deleteUser(l){return this.deleteUserResponse(l).pipe((0,g.U)(p=>p.body))}setUserSysAdminResponse(l){let p=this.newParams(),h=new e.WM,M=null;M=l.sysadminFlag,null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("PUT",this.rootUrl+`/users/${l.userId}/sysadmin`,M,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}setUserSysAdmin(l){return this.setUserSysAdminResponse(l).pipe((0,g.U)(p=>p.body))}updateUserPasswordResponse(l){let p=this.newParams(),h=new e.WM,M=null;M=l.password,null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("PUT",this.rootUrl+`/users/${l.userId}/password`,M,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}updateUserPassword(l){return this.updateUserPasswordResponse(l).pipe((0,g.U)(p=>p.body))}getCurrentUserPermissionsResponse(l){let p=this.newParams(),h=new e.WM;null!=l.scope&&(p=p.set("scope",l.scope.toString())),null!=l.relative&&(p=p.set("relative",l.relative.toString())),null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("GET",this.rootUrl+"/users/current/permissions",null,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}getCurrentUserPermissions(l){return this.getCurrentUserPermissionsResponse(l).pipe((0,g.U)(p=>p.body))}setCliSecretResponse(l){let p=this.newParams(),h=new e.WM,M=null;M=l.secret,null!=l.XRequestId&&(h=h.set("X-Request-Id",l.XRequestId.toString()));let O=new e.aW("PUT",this.rootUrl+`/users/${l.userId}/cli_secret`,M,{headers:h,params:p,responseType:"json"});return this.http.request(O).pipe((0,S.h)(d=>d instanceof e.Zn),(0,g.U)(d=>d))}setCliSecret(l){return this.setCliSecretResponse(l).pipe((0,g.U)(p=>p.body))}}return(m=x).listUsersPath="/users",m.createUserPath="/users",m.getCurrentUserInfoPath="/users/current",m.searchUsersPath="/users/search",m.getUserPath="/users/{user_id}",m.updateUserProfilePath="/users/{user_id}",m.deleteUserPath="/users/{user_id}",m.setUserSysAdminPath="/users/{user_id}/sysadmin",m.updateUserPasswordPath="/users/{user_id}/password",m.getCurrentUserPermissionsPath="/users/current/permissions",m.setCliSecretPath="/users/{user_id}/cli_secret",m.\u0275fac=function(l){return new(l||m)(T.LFG(t.p),T.LFG(e.eN))},m.\u0275prov=T.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),x})()},7215:(L,Z,s)=>{s.r(Z),s.d(Z,{BaseModule:()=>Fe});var e=s(4554),E=s(2787),S=s(3109),g=s(3924),T=s(208),t=s(5879),v=s(9862),m=s(7398),x=s(6306),b=s(8504),l=s(1691);const p=l.S$+"/users/:user_id/password";let O=(()=>{var i;class u{constructor(o){this.http=o}changePassword(o,n){if(!n||""===n.new_password.trim()||""===n.old_password.trim())return(0,b._)("Invalid data");let a=p.replace(":user_id",o+"");return this.http.put(a,JSON.stringify(n),l.T0).pipe((0,m.U)(()=>null),(0,x.K)(c=>(0,b._)(c)))}sendResetPasswordMail(o){return o?this.http.get("/c/sendEmail?email="+o,l.EX).pipe((0,m.U)(a=>a),(0,x.K)(a=>(0,b._)(a))):(0,b._)("Invalid email")}resetPassword(o,n){if(!o||!n)return(0,b._)("Invalid reset uuid or password");let a=(new v.LE).set("reset_uuid",o).set("password",n);return this.http.post("/c/reset",a.toString(),l.FI).pipe((0,m.U)(c=>c),(0,x.K)(c=>(0,b._)(c)))}}return(i=u).\u0275fac=function(o){return new(o||i)(t.LFG(v.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),u})();var d=s(1575),I=s(3419),C=s(6223),_=s(8280),f=s(6814),R=s(9515);const F=["changepwdForm"];function rt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"clr-icon",26),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.showOldPwd=!n.showOldPwd)}),t.qZA()}}function st(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"clr-icon",27),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.showOldPwd=!n.showOldPwd)}),t.qZA()}}function at(i,u){1&i&&(t.TgZ(0,"clr-control-error")(1,"span",28),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"TOOLTIP.CURRENT_PWD")))}function lt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"clr-icon",26),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.showNewPwd=!n.showNewPwd)}),t.qZA()}}function ct(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"clr-icon",27),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.showNewPwd=!n.showNewPwd)}),t.qZA()}}function pt(i,u){1&i&&(t.TgZ(0,"clr-control-error")(1,"span",29),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"TOOLTIP.PASSWORD")))}function dt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"clr-icon",26),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.showReNewPwd=!n.showReNewPwd)}),t.qZA()}}function ut(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"clr-icon",27),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.showReNewPwd=!n.showReNewPwd)}),t.qZA()}}function _t(i,u){1&i&&(t.TgZ(0,"clr-control-error")(1,"span",30),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"TOOLTIP.CONFIRM_PWD")))}let k=(()=>{var i;class u{constructor(o,n,a){this.passwordService=o,this.session=n,this.msgHandler=a,this.showOldPwd=!1,this.showNewPwd=!1,this.showReNewPwd=!1,this.opened=!1,this.oldPwd="",this.newPwd="",this.reNewPwd="",this.error=null,this.formValueChanged=!1,this.onCalling=!1,this.validationStateMap={newPassword:!0,reNewPassword:!0}}get isValid(){return!(!this.pwdForm||!this.pwdForm.form.get("newPassword"))&&this.pwdForm.valid&&this.pwdForm.form.get("newPassword").value===this.pwdForm.form.get("reNewPassword").value&&null===this.error}get valueChanged(){return this.formValueChanged}get showProgress(){return this.onCalling}getValidationState(o){return this.validationStateMap[o]}handleValidation(o,n){if(n){let a=this.pwdForm.controls[o];if(a&&(this.validationStateMap[o]=a.valid,a.valid&&("reNewPassword"===o||"newPassword"===o))){let A=this.pwdForm.controls["reNewPassword"===o?"newPassword":"reNewPassword"];A&&A.valid&&(this.validationStateMap.reNewPassword=a.value===A.value)}}else this.validationStateMap[o]=!0}ngAfterViewChecked(){this.pwdFormRef!==this.pwdForm&&(this.pwdFormRef=this.pwdForm,this.pwdFormRef&&this.pwdFormRef.valueChanges.subscribe(o=>{this.formValueChanged=!0,this.error=null,this.inlineAlert.close()}))}open(){this.formValueChanged=!1,this.onCalling=!1,this.error=null,this.validationStateMap={newPassword:!0,reNewPassword:!0},this.pwdForm.reset(),this.inlineAlert.close(),this.opened=!0}close(){this.formValueChanged?(0,g.Oc)(this.pwdForm)?this.opened=!1:this.inlineAlert.showInlineConfirmation({message:"ALERT.FORM_CHANGE_CONFIRMATION"}):this.opened=!1}confirmCancel(o){this.opened=!1}doOk(){if(this.onCalling||!this.isValid)return;let o=this.session.getCurrentUser();o&&(this.onCalling=!0,this.passwordService.changePassword(o.user_id,{new_password:this.pwdForm.value.newPassword,old_password:this.pwdForm.value.oldPassword}).subscribe(()=>{this.onCalling=!1,this.opened=!1,this.msgHandler.showSuccess("CHANGE_PWD.SAVE_SUCCESS")},n=>{if(this.onCalling=!1,this.error=n,this.msgHandler.isAppLevel(n))this.opened=!1,this.msgHandler.handleError(n);else{let a=""+n.error;a&&a.includes("old_password_is_not_correct")?this.inlineAlert.showInlineError("INCONRRECT_OLD_PWD"):this.inlineAlert.showInlineError(n)}}))}}return(i=u).\u0275fac=function(o){return new(o||i)(t.Y36(O),t.Y36(d.m),t.Y36(I.d))},i.\u0275cmp=t.Xpm({type:i,selectors:[["password-setting"]],viewQuery:function(o,n){if(1&o&&(t.Gf(F,7),t.Gf(T.l,7)),2&o){let a;t.iGM(a=t.CRH())&&(n.pwdForm=a.first),t.iGM(a=t.CRH())&&(n.inlineAlert=a.first)}},decls:52,vars:44,consts:[[3,"clrModalOpen","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body","body-format"],[3,"confirmEvt"],[1,"clr-form","clr-form-horizontal"],["changepwdForm","ngForm"],[1,"clr-form-control"],["for","oldPassword",1,"clr-control-label","required"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["id","oldPassword","required","","name","oldPassword","size","40",1,"clr-input","pwd-input",3,"type","ngModel","ngModelChange"],["oldPassInput","ngModel"],["shape","eye","class","pw-eye",3,"click",4,"ngIf"],["shape","eye-hide","class","pw-eye",3,"click",4,"ngIf"],["shape","exclamation-circle",1,"clr-validate-icon"],[4,"ngIf"],["for","newPassword",1,"clr-control-label","required"],["id","newPassword","required","","pattern","^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).{8,128}$","name","newPassword","size","40",1,"clr-input","pwd-input",3,"type","ngModel","ngModelChange","input","blur"],["newPassInput","ngModel"],["for","reNewPassword",1,"clr-control-label","required"],["id","reNewPassword","required","","pattern","^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).{8,128}$","name","reNewPassword","size","40",1,"clr-input","pwd-input",3,"type","ngModel","ngModelChange","input","blur"],["reNewPassInput","ngModel"],[1,"modal-footer"],[1,"spinner","spinner-inline","loading-top",3,"hidden"],["type","button","id","cancel-btn",1,"btn","btn-outline",3,"click"],["type","button","id","ok-btn",1,"btn","btn-primary",3,"disabled","click"],["shape","eye",1,"pw-eye",3,"click"],["shape","eye-hide",1,"pw-eye",3,"click"],["id","oldPassword-error"],["id","newPassword-error"],["id","reNewPassword-error"]],template:function(o,n){if(1&o&&(t.TgZ(0,"clr-modal",0),t.NdJ("clrModalOpenChange",function(c){return n.opened=c}),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"inline-alert",3),t.NdJ("confirmEvt",function(c){return n.confirmCancel(c)}),t.qZA(),t.TgZ(6,"form",4,5)(8,"div",6)(9,"label",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",8)(13,"div",9)(14,"input",10,11),t.NdJ("ngModelChange",function(c){return n.oldPwd=c}),t.qZA(),t.YNc(16,rt,1,0,"clr-icon",12),t.YNc(17,st,1,0,"clr-icon",13),t._UZ(18,"clr-icon",14),t.qZA(),t.YNc(19,at,4,3,"clr-control-error",15),t.qZA()(),t.TgZ(20,"div",6)(21,"label",16),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"div",8)(25,"div",9)(26,"input",17,18),t.NdJ("ngModelChange",function(c){return n.newPwd=c})("input",function(){return n.handleValidation("newPassword",!1)})("blur",function(){return n.handleValidation("newPassword",!0)}),t.qZA(),t.YNc(28,lt,1,0,"clr-icon",12),t.YNc(29,ct,1,0,"clr-icon",13),t._UZ(30,"clr-icon",14),t.qZA(),t.YNc(31,pt,4,3,"clr-control-error",15),t.qZA()(),t.TgZ(32,"div",6)(33,"label",19),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"div",8)(37,"div",9)(38,"input",20,21),t.NdJ("ngModelChange",function(c){return n.reNewPwd=c})("input",function(){return n.handleValidation("reNewPassword",!1)})("blur",function(){return n.handleValidation("reNewPassword",!0)}),t.qZA(),t.YNc(40,dt,1,0,"clr-icon",12),t.YNc(41,ut,1,0,"clr-icon",13),t._UZ(42,"clr-icon",14),t.qZA(),t.YNc(43,_t,4,3,"clr-control-error",15),t.qZA()()()(),t.TgZ(44,"div",22),t._UZ(45,"span",23),t.TgZ(46,"button",24),t.NdJ("click",function(){return n.close()}),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"button",25),t.NdJ("click",function(){return n.doOk()}),t._uU(50),t.ALo(51,"translate"),t.qZA()()()),2&o){const a=t.MAs(15);t.Q6J("clrModalOpen",n.opened)("clrModalStaticBackdrop",!0)("clrModalClosable",!1),t.xp6(2),t.Oqu(t.lcZ(3,32,"CHANGE_PWD.TITLE")),t.xp6(8),t.Oqu(t.lcZ(11,34,"CHANGE_PWD.CURRENT_PWD")),t.xp6(2),t.ekj("clr-error",a.invalid&&(a.dirty||a.touched)),t.xp6(2),t.Q6J("type",n.showOldPwd?"text":"password")("ngModel",n.oldPwd),t.xp6(2),t.Q6J("ngIf",!n.showOldPwd),t.xp6(1),t.Q6J("ngIf",n.showOldPwd),t.xp6(2),t.Q6J("ngIf",a.invalid&&(a.dirty||a.touched)),t.xp6(3),t.Oqu(t.lcZ(23,36,"CHANGE_PWD.NEW_PWD")),t.xp6(2),t.ekj("clr-error",!n.getValidationState("newPassword")),t.xp6(2),t.Q6J("type",n.showNewPwd?"text":"password")("ngModel",n.newPwd),t.xp6(2),t.Q6J("ngIf",!n.showNewPwd),t.xp6(1),t.Q6J("ngIf",n.showNewPwd),t.xp6(2),t.Q6J("ngIf",!n.getValidationState("newPassword")),t.xp6(3),t.Oqu(t.lcZ(35,38,"CHANGE_PWD.CONFIRM_PWD")),t.xp6(2),t.ekj("clr-error",!n.getValidationState("reNewPassword")),t.xp6(2),t.Q6J("type",n.showReNewPwd?"text":"password")("ngModel",n.reNewPwd),t.xp6(2),t.Q6J("ngIf",!n.showReNewPwd),t.xp6(1),t.Q6J("ngIf",n.showReNewPwd),t.xp6(2),t.Q6J("ngIf",!n.getValidationState("reNewPassword")),t.xp6(2),t.Q6J("hidden",!1===n.showProgress),t.xp6(2),t.hij(" ",t.lcZ(48,40,"BUTTON.CANCEL")," "),t.xp6(2),t.Q6J("disabled",!n.isValid||n.showProgress),t.xp6(1),t.hij(" ",t.lcZ(51,42,"BUTTON.OK")," ")}},dependencies:[C._Y,C.Fj,C.JJ,C.JL,C.Q7,C.c5,C.On,C.F,_.qvL,_.qAN,_.VLi,_.MgK,_.VqA,f.O5,T.l,R.X$],styles:[".reset-modal-title-override[_ngcontent-%COMP%]{font-size:14px!important}.form-group-override[_ngcontent-%COMP%]{padding-left:130px!important}.password-body[_ngcontent-%COMP%]{min-height:130px}.pw-eye[_ngcontent-%COMP%]{margin-left:-24px;margin-right:8px;cursor:pointer}.pwd-input[_ngcontent-%COMP%]{padding-right:26px}.clr-control-label[_ngcontent-%COMP%]{width:8.6rem!important}",".form-group-override[_ngcontent-%COMP%]{padding-left:170px!important}.form-group-label-override[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.sub-label-for-input[_ngcontent-%COMP%]{position:absolute;top:26px;font-size:10px;font-weight:400;line-height:12px;left:170px}.body-format[_ngcontent-%COMP%]{overflow-y:hidden}.loading-top[_ngcontent-%COMP%]{top:8px}"]}),u})();var j=s(2300),Q=s(9221),N=s(27),ht=s(5477);class Y{constructor(){this.confirm_secret="",this.input_secret=""}}var gt=s(6266),H=s(4766),mt=s(1695),q=s(6682),ft=s(625),Ct=s(7625),Tt=s(1183);const At=["confirmationDialog"],vt=["accountSettingsFrom"],Mt=["resetSecretFrom"],Ot=["accountSettingInlineAlert"],St=["resetSecretInlineAlert"],xt=["copyInput"];function bt(i,u){1&i&&(t.TgZ(0,"clr-tooltip-content",49)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"PROFILE.ADMIN_RENAME_TIP"),""))}function Et(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"div",45)(1,"button",46),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.onRename())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"clr-tooltip"),t._UZ(5,"clr-icon",47),t.YNc(6,bt,4,3,"clr-tooltip-content",48),t.qZA()()}if(2&i){const r=t.oxw();t.xp6(1),t.Q6J("disabled",r.RenameOnGoing),t.xp6(1),t.hij(" ",t.lcZ(3,2,"PROFILE.ADMIN_RENAME_BUTTON")," ")}}function Zt(i,u){if(1&i&&(t.TgZ(0,"clr-control-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,r.emailTooltip)," ")}}function Pt(i,u){1&i&&(t.TgZ(0,"clr-control-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TOOLTIP.FULL_NAME")," "))}function It(i,u){1&i&&(t.TgZ(0,"clr-control-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TOOLTIP.COMMENT")," "))}function Nt(i,u){1&i&&(t.TgZ(0,"clr-tooltip-content",61)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"PROFILE.CLI_PASSWORD_TIP"),""))}function wt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){t.CHM(r);const n=t.oxw(2);return t.KtG(n.generateCli(n.account.user_id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"PROFILE.ADMIN_CLI_SECRET_BUTTON")," "))}function Ut(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(r);const n=t.oxw(2);return t.KtG(n.openSecretDetail())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"PROFILE.ADMIN_CLI_SECRET_RESET_BUTTON")," "))}function Rt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"div",64),t.NdJ("click",function(){t.CHM(r);const n=t.oxw(2);return t.KtG(n.showGenerateCliFn())}),t._uU(1," \xb7\xb7\xb7 "),t.qZA()}}function Lt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"div",50)(1,"label",51),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"clr-tooltip"),t._UZ(5,"clr-icon",52),t.YNc(6,Nt,4,3,"clr-tooltip-content",53),t.qZA()(),t._UZ(7,"input",54),t.YNc(8,wt,3,3,"button",55),t.YNc(9,Ut,3,3,"button",56),t.TgZ(10,"div",57)(11,"hbr-copy-input",58,59),t.NdJ("onCopySuccess",function(n){t.CHM(r);const a=t.oxw();return t.KtG(a.onSuccess(n))})("onCopyError",function(n){t.CHM(r);const a=t.oxw();return t.KtG(a.onError(n))}),t.qZA()(),t.YNc(13,Rt,2,0,"div",60),t.qZA()}if(2&i){const r=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,6,"PROFILE.CLI_PASSWORD")," "),t.xp6(5),t.Q6J("ngModel","account.oidc_user_meta.secret"),t.xp6(1),t.Q6J("ngIf",r.showGenerateCli),t.xp6(1),t.Q6J("ngIf",r.showGenerateCli),t.xp6(2),t.Q6J("defaultValue",r.account.oidc_user_meta.secret),t.xp6(2),t.Q6J("ngIf",!r.showGenerateCli)}}function yt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"clr-icon",65),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.showInputSecret=!n.showInputSecret)}),t.qZA()}}function Dt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"clr-icon",66),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.showInputSecret=!n.showInputSecret)}),t.qZA()}}function Jt(i,u){1&i&&(t.TgZ(0,"clr-control-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TOOLTIP.NEW_SECRET")," "))}function Gt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"clr-icon",65),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.showConfirmSecret=!n.showConfirmSecret)}),t.qZA()}}function Ft(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"clr-icon",66),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.showConfirmSecret=!n.showConfirmSecret)}),t.qZA()}}let V=(()=>{var i;class u{constructor(o,n,a,c,A,P){this.session=o,this.msgHandler=n,this.router=a,this.searchTrigger=c,this.userService=A,this.appConfigService=P,this.opened=!1,this.staticBackdrop=!0,this.error=null,this.emailTooltip="TOOLTIP.EMAIL",this.mailAlreadyChecked={},this.isOnCalling=!1,this.formValueChanged=!1,this.checkOnGoing=!1,this.RenameOnGoing=!1,this.originAdminName="admin",this.newAdminName="admin@harbor.local",this.renameConfirmation=!1,this.showSecretDetail=!1,this.resetForms=new Y,this.showGenerateCli=!1,this.showInputSecret=!1,this.showConfirmSecret=!1,this.validationStateMap={account_settings_email:!0,account_settings_full_name:!0}}ngOnInit(){this.refreshAccount()}refreshAccount(){this.account=Object.assign({},this.session.getCurrentUser()),this.originalStaticData=Object.assign({},this.session.getCurrentUser())}ngAfterViewChecked(){this.accountFormRef!==this.accountForm&&(this.accountFormRef=this.accountForm,this.accountFormRef&&this.accountFormRef.valueChanges.subscribe(o=>{this.error&&(this.error=null),this.formValueChanged=!0,this.account.username===this.originAdminName&&this.inlineAlert.close()}))}getValidationState(o){return this.validationStateMap[o]}handleValidation(o,n){if(n){let a=this.accountForm.controls[o];if(a&&(this.validationStateMap[o]=a.valid,a.valid&&"account_settings_email"===o&&this.formValueChanged&&this.account.email!==this.originalStaticData.email)){if(this.mailAlreadyChecked[this.account.email])return this.validationStateMap[o]=!this.mailAlreadyChecked[this.account.email].result,void(this.validationStateMap[o]||(this.emailTooltip="TOOLTIP.EMAIL_EXISTING"));(this.session.getCurrentUser()?.has_admin_role||this.appConfigService.getConfig()?.self_registration)&&(this.checkOnGoing=!0,this.session.checkUserExisting("email",this.account.email).subscribe(c=>{this.checkOnGoing=!1,this.validationStateMap[o]=!c,c&&(this.emailTooltip="TOOLTIP.EMAIL_EXISTING"),this.mailAlreadyChecked[this.account.email]={result:c}},c=>{this.checkOnGoing=!1,this.validationStateMap[o]=!1}))}}else this.validationStateMap[o]=!0,this.emailTooltip="TOOLTIP.EMAIL"}isUserDataChange(){if(!this.originalStaticData||!this.account)return!1;for(let o in this.originalStaticData)if(this.originalStaticData[o]!==this.account[o])return!0;return!1}get isValid(){return this.accountForm&&this.accountForm.valid&&null===this.error&&this.validationStateMap.account_settings_email}get showProgress(){return this.isOnCalling}get checkProgress(){return this.checkOnGoing}get canRename(){return this.account&&this.account.has_admin_role&&"admin"===this.originalStaticData.username&&1===this.account.user_id}onRename(){this.account.username=this.newAdminName,this.RenameOnGoing=!0}confirmRename(){this.canRename&&this.session.updateAccountSettings(this.account).subscribe(()=>{this.session.renameAdmin(this.account).subscribe(()=>{this.msgHandler.showSuccess("PROFILE.RENAME_SUCCESS"),this.opened=!1,this.logOut()},o=>{this.msgHandler.handleError(o)})},o=>{this.isOnCalling=!1,this.error=o,this.msgHandler.isAppLevel(o)?(this.opened=!1,this.msgHandler.handleError(o)):this.inlineAlert.showInlineError(o)})}logOut(){this.router.navigate([N.ZB.EMBEDDED_SIGN_IN],{queryParams:{signout:!0}}),this.searchTrigger.closeSearch(!0)}open(){this.originalStaticData=Object.assign({},this.session.getCurrentUser()),this.account=Object.assign({},this.session.getCurrentUser()),this.formValueChanged=!1,this.inlineAlert.close(),this.mailAlreadyChecked={},this.validationStateMap={account_settings_email:!0,account_settings_full_name:!0},this.showGenerateCli=!1,this.opened=!0}close(){this.formValueChanged&&this.isUserDataChange()?this.RenameOnGoing?(this.RenameOnGoing=!1,this.opened=!1):this.inlineAlert.showInlineConfirmation({message:"ALERT.FORM_CHANGE_CONFIRMATION"}):this.opened=!1}submit(){if(this.isValid&&!this.isOnCalling&&this.session.getCurrentUser()){if(this.RenameOnGoing&&!this.renameConfirmation)return this.renameConfirmation=!0,void this.inlineAlert.showInlineWarning({message:"PROFILE.RENAME_CONFIRM_INFO"});this.isOnCalling=!0,this.RenameOnGoing&&this.renameConfirmation?this.confirmRename():this.session.updateAccountSettings(this.account).subscribe(()=>{this.isOnCalling=!1,this.opened=!1,this.msgHandler.showSuccess("PROFILE.SAVE_SUCCESS"),this.session.retrieveUser().subscribe(()=>{this.refreshAccount()})},n=>{this.isOnCalling=!1,this.error=n,this.msgHandler.isAppLevel(n)?(this.opened=!1,this.msgHandler.handleError(n)):this.inlineAlert.showInlineError(n)})}}confirmNo(o){this.RenameOnGoing&&(this.RenameOnGoing=!1),this.renameConfirmation&&(this.renameConfirmation=!1)}confirmYes(o){this.RenameOnGoing&&(this.RenameOnGoing=!1),this.renameConfirmation&&(this.renameConfirmation=!1),this.inlineAlert.close(),this.opened=!1}onSuccess(o){this.inlineAlert.showInlineSuccess({message:"PROFILE.COPY_SUCCESS"})}onError(o){this.inlineAlert.showInlineError({message:"PROFILE.COPY_ERROR"})}generateCli(o){let n=new gt.c("PROFILE.CONFIRM_TITLE_CLI_GENERATE","PROFILE.CONFIRM_BODY_CLI_GENERATE","",o,7,0);this.confirmationDialogComponent.open(n)}showGenerateCliFn(){this.showGenerateCli=!this.showGenerateCli}confirmGenerate(){this.resetCliSecret(null)}resetCliSecret(o){this.userService.setCliSecret({userId:this.account.user_id,secret:o?{secret:o}:{}}).subscribe({next:n=>{o?this.account.oidc_user_meta.secret=o:this.userService.getCurrentUserInfo().subscribe(a=>{this.account.oidc_user_meta.secret=a?.oidc_user_meta?.secret}),this.closeReset(),this.inlineAlert.showInlineSuccess({message:"PROFILE.GENERATE_SUCCESS"})},error:n=>{this.resetSecretInlineAlert.showInlineError({message:"PROFILE.GENERATE_ERROR"})}})}disableChangeCliSecret(){return this.resetSecretFrom.invalid||this.resetSecretFrom.value.input_secret!==this.resetSecretFrom.value.confirm_secret}closeReset(){this.showSecretDetail=!1,this.showGenerateCliFn(),this.resetSecretFrom.resetForm(new Y)}openSecretDetail(){this.showSecretDetail=!0,this.resetSecretInlineAlert.close()}}return(i=u).\u0275fac=function(o){return new(o||i)(t.Y36(d.m),t.Y36(I.d),t.Y36(E.F0),t.Y36(H.V),t.Y36(mt.K),t.Y36(q._))},i.\u0275cmp=t.Xpm({type:i,selectors:[["account-settings-modal"]],viewQuery:function(o,n){if(1&o&&(t.Gf(At,5),t.Gf(vt,7),t.Gf(Mt,7),t.Gf(Ot,5),t.Gf(St,5),t.Gf(xt,5)),2&o){let a;t.iGM(a=t.CRH())&&(n.confirmationDialogComponent=a.first),t.iGM(a=t.CRH())&&(n.accountForm=a.first),t.iGM(a=t.CRH())&&(n.resetSecretFrom=a.first),t.iGM(a=t.CRH())&&(n.inlineAlert=a.first),t.iGM(a=t.CRH())&&(n.resetSecretInlineAlert=a.first),t.iGM(a=t.CRH())&&(n.copyInput=a.first)}},decls:89,vars:72,consts:[[3,"clrModalOpen","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body","body-format"],[3,"confirmEvt","closeEvt"],["accountSettingInlineAlert",""],[1,"clr-form","clr-form-horizontal"],["accountSettingsFrom","ngForm"],[1,"clr-form-control"],["for","account_settings_username","aria-haspopup","true",1,"clr-control-label"],[1,"clr-control-container","display-flex"],["type","text","name","account_settings_username","disabled","","id","account_settings_username","size","30",1,"clr-input",3,"ngModel","ngModelChange"],["class","rename-tool",4,"ngIf"],["for","account_settings_email",1,"required","clr-control-label"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["name","account_settings_email","type","text","required","","email","","id","account_settings_email","size","30",1,"clr-input",3,"ngModel","ngModelChange","input","blur"],["eamilInput","ngModel"],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"spinner","spinner-inline",3,"hidden"],[4,"ngIf"],["clrInput","","type","text","name","account_settings_full_name","maxLengthExt","30","id","account_settings_full_name","size","30",3,"ngModel","required","ngModelChange","input","blur"],["fullNameInput","ngModel"],["clrInput","","type","text","maxlength","30","size","30","name","account_settings_comments","id","account_settings_comments",3,"ngModel","ngModelChange"],["commentInput","ngModel"],["class","clr-form-control cli-secret",4,"ngIf"],[1,"modal-footer"],[1,"spinner","spinner-inline","loading-top",3,"hidden"],["type","button","id","cancel-btn",1,"btn","btn-outline",3,"click"],["type","button","id","submit-btn",1,"btn","btn-primary",3,"disabled","click"],[3,"clrModalOpen","clrModalSize","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],[1,"modal-body","upload-secret"],["resetSecretInlineAlert",""],[1,"clr-form","reset-cli-form","clr-form-horizontal"],["resetSecretFrom","ngForm"],["for","input-secret",1,"clr-control-label"],["id","new-token","type","password","maxlength","30","size","30","required","","pattern","^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).{8,128}$","name","input_secret","id","input-secret",1,"clr-input","pwd-input",3,"type","ngModel","ngModelChange"],["inputSecret","ngModel"],["shape","eye","class","pw-eye",3,"click",4,"ngIf"],["shape","eye-hide","class","pw-eye",3,"click",4,"ngIf"],["for","confirm-secret",1,"clr-control-label"],["type","password","maxlength","30","size","30","name","confirm_secret","id","confirm-secret",1,"clr-input","pwd-input",3,"type","ngModel","ngModelChange"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"confirmAction"],["confirmationDialog",""],[1,"rename-tool"],["id","rename-btn",1,"btn","btn-outline",3,"disabled","click"],["clrTooltipTrigger","","shape","info-circle","size","24"],["clrPosition","bottom-left","clrSize","md",4,"clrIfOpen"],["clrPosition","bottom-left","clrSize","md"],[1,"clr-form-control","cli-secret"],[1,"clr-control-label"],["clrTooltipTrigger","","shape","info-circle","size","20"],["clrPosition","top-right","clrSize","md",4,"clrIfOpen"],["id","cli_password","type","password","name","cli_password","disabled","","size","33",1,"clr-input","input-cli",3,"ngModel"],["id","generate-cli-btn","class","btn btn-outline btn-padding-less",3,"click",4,"ngIf"],["id","reset-cli-btn","class","btn btn-outline btn-padding-less",3,"click",4,"ngIf"],[1,"rename-tool","reset-cli"],["iconMode","true",3,"defaultValue","onCopySuccess","onCopyError"],["copyInput",""],["id","hidden-generate-cli","class","hidden-generate-cli",3,"click",4,"ngIf"],["clrPosition","top-right","clrSize","md"],["id","generate-cli-btn",1,"btn","btn-outline","btn-padding-less",3,"click"],["id","reset-cli-btn",1,"btn","btn-outline","btn-padding-less",3,"click"],["id","hidden-generate-cli",1,"hidden-generate-cli",3,"click"],["shape","eye",1,"pw-eye",3,"click"],["shape","eye-hide",1,"pw-eye",3,"click"]],template:function(o,n){if(1&o){const a=t.EpF();t.TgZ(0,"clr-modal",0),t.NdJ("clrModalOpenChange",function(A){return n.opened=A}),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"inline-alert",3,4),t.NdJ("confirmEvt",function(A){return n.confirmYes(A)})("closeEvt",function(A){return n.confirmNo(A)}),t.qZA(),t.TgZ(7,"form",5,6)(9,"div",7)(10,"label",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",9)(14,"input",10),t.NdJ("ngModelChange",function(A){return n.account.username=A}),t.qZA(),t.YNc(15,Et,7,4,"div",11),t.qZA()(),t.TgZ(16,"div",7)(17,"label",12),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div",13)(21,"div",14)(22,"input",15,16),t.NdJ("ngModelChange",function(A){return n.account.email=A})("input",function(){return n.handleValidation("account_settings_email",!1)})("blur",function(){return n.handleValidation("account_settings_email",!0)}),t.qZA(),t._UZ(24,"clr-icon",17)(25,"span",18),t.qZA(),t.YNc(26,Zt,3,3,"clr-control-error",19),t.qZA()(),t.TgZ(27,"clr-input-container")(28,"label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"input",20,21),t.NdJ("ngModelChange",function(A){return n.account.realname=A})("input",function(){return n.handleValidation("account_settings_full_name",!1)})("blur",function(){return n.handleValidation("account_settings_full_name",!0)}),t.qZA(),t.YNc(33,Pt,3,3,"clr-control-error",19),t.qZA(),t.TgZ(34,"clr-input-container")(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"input",22,23),t.NdJ("ngModelChange",function(A){return n.account.comment=A}),t.qZA(),t.YNc(40,It,3,3,"clr-control-error",19),t.qZA(),t.YNc(41,Lt,14,8,"div",24),t.qZA()(),t.TgZ(42,"div",25),t._UZ(43,"span",26),t.TgZ(44,"button",27),t.NdJ("click",function(){return n.close()}),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"button",28),t.NdJ("click",function(){return n.submit()}),t._uU(48),t.ALo(49,"translate"),t.qZA()()(),t.TgZ(50,"clr-modal",29),t.NdJ("clrModalOpenChange",function(A){return n.showSecretDetail=A}),t.TgZ(51,"h3",1),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"div",30),t._UZ(55,"inline-alert",1,31),t.TgZ(57,"form",32,33)(59,"div",7)(60,"label",34),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"div",13)(64,"div",14)(65,"input",35,36),t.NdJ("ngModelChange",function(A){return n.resetForms.input_secret=A}),t.qZA(),t.YNc(67,yt,1,0,"clr-icon",37),t.YNc(68,Dt,1,0,"clr-icon",38),t._UZ(69,"clr-icon",17),t.qZA(),t.YNc(70,Jt,3,3,"clr-control-error",19),t.qZA()(),t.TgZ(71,"div",7)(72,"label",39),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"div",13)(76,"div",14)(77,"input",40),t.NdJ("ngModelChange",function(A){return n.resetForms.confirm_secret=A}),t.qZA(),t.YNc(78,Gt,1,0,"clr-icon",37),t.YNc(79,Ft,1,0,"clr-icon",38),t.qZA()()()()(),t.TgZ(80,"div",25)(81,"button",41),t.NdJ("click",function(){return n.closeReset()}),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"button",42),t.NdJ("click",function(){t.CHM(a);const A=t.MAs(58);return t.KtG(n.resetCliSecret(A.value.input_secret))}),t._uU(85),t.ALo(86,"translate"),t.qZA()()(),t.TgZ(87,"confirmation-dialog",43,44),t.NdJ("confirmAction",function(){return n.confirmGenerate()}),t.qZA()}if(2&o){const a=t.MAs(39),c=t.MAs(66);t.Q6J("clrModalOpen",n.opened)("clrModalStaticBackdrop",n.staticBackdrop)("clrModalClosable",!1),t.xp6(2),t.Oqu(t.lcZ(3,48,"PROFILE.TITLE")),t.xp6(9),t.Oqu(t.lcZ(12,50,"PROFILE.USER_NAME")),t.xp6(3),t.Q6J("ngModel",n.account.username),t.xp6(1),t.Q6J("ngIf",n.canRename),t.xp6(3),t.Oqu(t.lcZ(19,52,"PROFILE.EMAIL")),t.xp6(2),t.ekj("clr-error",!n.getValidationState("account_settings_email")),t.xp6(2),t.Q6J("ngModel",n.account.email),t.xp6(3),t.Q6J("hidden",!n.checkProgress),t.xp6(1),t.Q6J("ngIf",!n.getValidationState("account_settings_email")),t.xp6(2),t.ekj("required",!n.account.oidc_user_meta),t.xp6(1),t.Oqu(t.lcZ(30,54,"PROFILE.FULL_NAME")),t.xp6(2),t.Q6J("ngModel",n.account.realname)("required",!n.account.oidc_user_meta),t.xp6(2),t.Q6J("ngIf",!n.getValidationState("account_settings_full_name")),t.xp6(3),t.Oqu(t.lcZ(37,56,"PROFILE.COMMENT")),t.xp6(2),t.Q6J("ngModel",n.account.comment),t.xp6(2),t.Q6J("ngIf",a.invalid&&(a.dirty||a.touched)),t.xp6(1),t.Q6J("ngIf",n.account.oidc_user_meta),t.xp6(2),t.Q6J("hidden",!1===n.showProgress),t.xp6(2),t.hij(" ",t.lcZ(46,58,"BUTTON.CANCEL")," "),t.xp6(2),t.Q6J("disabled",!n.isValid||n.showProgress||!n.isUserDataChange()||n.checkProgress),t.xp6(1),t.hij(" ",t.lcZ(49,60,"BUTTON.OK")," "),t.xp6(2),t.Q6J("clrModalOpen",n.showSecretDetail)("clrModalSize","sm")("clrModalStaticBackdrop",n.staticBackdrop)("clrModalClosable",!1),t.xp6(2),t.hij(" ",t.lcZ(53,62,"PROFILE.ADMIN_CLI_SECRET_RESET_BUTTON")," "),t.xp6(9),t.Oqu(t.lcZ(62,64,"SYSTEM_ROBOT.CONFIRM_SECRET")),t.xp6(2),t.ekj("clr-error",(c.dirty||c.touched)&&c.invalid),t.xp6(2),t.Q6J("type",n.showInputSecret?"text":"password")("ngModel",n.resetForms.input_secret),t.xp6(2),t.Q6J("ngIf",!n.showInputSecret),t.xp6(1),t.Q6J("ngIf",n.showInputSecret),t.xp6(2),t.Q6J("ngIf",(c.dirty||c.touched)&&c.invalid),t.xp6(3),t.Oqu(t.lcZ(74,66,"PROFILE.CONFIRM_SECRET")),t.xp6(4),t.Q6J("type",n.showConfirmSecret?"text":"password")("ngModel",n.resetForms.confirm_secret),t.xp6(1),t.Q6J("ngIf",!n.showConfirmSecret),t.xp6(1),t.Q6J("ngIf",n.showConfirmSecret),t.xp6(3),t.hij(" ",t.lcZ(83,68,"BUTTON.CANCEL")," "),t.xp6(2),t.Q6J("disabled",n.disableChangeCliSecret()),t.xp6(1),t.hij(" ",t.lcZ(86,70,"BUTTON.CONFIRM")," ")}},dependencies:[C._Y,C.Fj,C.JJ,C.JL,C.Q7,C.nD,C.c5,C.on,C.On,C.F,_.qvL,_.qAN,_.VLi,_.nqY,_.MgK,_.VqA,_.xRP,_.G55,_.Jmj,_.bMv,_.zDF,f.O5,ft.GA,T.l,Ct.z,Tt.s,R.X$],styles:["clr-modal[_ngcontent-%COMP%]     div.modal-dialog{width:unset}clr-modal[_ngcontent-%COMP%]   .rename-tool[_ngcontent-%COMP%]{bottom:9px}clr-modal[_ngcontent-%COMP%]   .rename-tool[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:6px;margin-left:5px;padding-left:3px;padding-right:3px}clr-modal[_ngcontent-%COMP%]   .label-inner-text[_ngcontent-%COMP%]{margin:0}clr-modal[_ngcontent-%COMP%]   .cli-secret[_ngcontent-%COMP%]{align-items:center}clr-modal[_ngcontent-%COMP%]   .cli-secret[_ngcontent-%COMP%]   .btn-padding-less[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px;margin-left:5px}clr-modal[_ngcontent-%COMP%]   .cli-secret[_ngcontent-%COMP%]   .input-cli[_ngcontent-%COMP%]{width:9.5rem}clr-modal[_ngcontent-%COMP%]   .hidden-generate-cli[_ngcontent-%COMP%]{font-size:30px;color:gray;margin-left:.5rem;cursor:pointer;line-height:30px}.reset-cli-form[_ngcontent-%COMP%]{width:19.5rem}.display-flex[_ngcontent-%COMP%], .set-btns[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]  .upload-secret{width:24.5rem}.pwd-input[_ngcontent-%COMP%]{padding-right:26px}.pw-eye[_ngcontent-%COMP%]{margin-left:-20px;margin-right:8px;cursor:pointer}",".form-group-override[_ngcontent-%COMP%]{padding-left:170px!important}.form-group-label-override[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.sub-label-for-input[_ngcontent-%COMP%]{position:absolute;top:26px;font-size:10px;font-weight:400;line-height:12px;left:170px}.body-format[_ngcontent-%COMP%]{overflow-y:hidden}.loading-top[_ngcontent-%COMP%]{top:8px}"]}),u})();var D=s(3555),qt=s(2471),Bt=s(6902),kt=s(6376);function jt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"div")(1,"clr-alert",1),t.NdJ("clrAlertClosedChange",function(n){t.CHM(r);const a=t.oxw();return t.KtG(!(a.globalMessageOpened=n))})("clrAlertClosedChange",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.onClose())}),t.TgZ(2,"clr-alert-item",2)(3,"span",3),t._uU(4),t.qZA()()()()}if(2&i){const r=t.oxw();t.xp6(1),t.Q6J("clrAlertType",r.globalMessage.type)("clrAlertAppLevel",!1)("clrAlertClosed",!r.globalMessageOpened),t.xp6(3),t.Oqu(r.message)}}let Qt=(()=>{var i;class u{constructor(o,n,a,c,A){this.elementRef=o,this.messageService=n,this.router=a,this.route=c,this.translate=A,this.globalMessage=new Bt.v,this.globalMessageOpened=!1,this.messageText="",this.timer=null}ngOnInit(){this.msgSub||(this.msgSub=this.messageService.messageAnnounced$.subscribe(o=>{this.globalMessageOpened=!0,this.globalMessage=o,this.messageText=o.message,this.translateMessage(o),this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>this.onClose(),N.Tk)}))}ngOnDestroy(){this.msgSub&&(this.msgSub.unsubscribe(),this.msgSub=null)}translateMessage(o){let n="UNKNOWN_ERROR";o&&o.message&&(n="string"==typeof o.message?o.message.trim():o.message,""===n&&(n="UNKNOWN_ERROR")),this.translate.get(n,{param:""}).subscribe(c=>this.messageText=c)}get message(){return this.messageText}onClose(){this.timer&&clearTimeout(this.timer),this.globalMessageOpened=!1}}return(i=u).\u0275fac=function(o){return new(o||i)(t.Y36(t.SBq),t.Y36(kt.e),t.Y36(E.F0),t.Y36(E.gz),t.Y36(R.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["global-message"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"clrAlertType","clrAlertAppLevel","clrAlertClosed","clrAlertClosedChange"],[1,"flex-center"],[1,"alert-text"]],template:function(o,n){1&o&&t.YNc(0,jt,5,4,"div",0),2&o&&t.Q6J("ngIf",n.globalMessageOpened)},dependencies:[f.O5,_.TIm,_.CyW,_.I9z],styles:[".alert-style[_ngcontent-%COMP%]{display:inline}.alert-text[_ngcontent-%COMP%]{flex:0 1 auto!important}.flex-center[_ngcontent-%COMP%]{justify-content:center}"]}),u})();var Yt=s(7969),w=s(7546),K=s(9315),z=s(6126),y=s(6825);const Ht=(0,y.X$)("SlideInOutAnimation",[(0,y.SB)("in",(0,y.oB)({right:0})),(0,y.SB)("out",(0,y.oB)({right:"-325px"})),(0,y.eR)("in <=> out",[(0,y.jt)("0.5s ease-in-out")])]);var Vt=s(4410),Kt=s(7477);function zt(i,u){if(1&i&&(t.TgZ(0,"span",13),t._uU(1),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Oqu(r.getNewMessageCountStr())}}function Wt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"clr-icon",31),t.NdJ("click",function(){t.CHM(r);const n=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.download(n))}),t.qZA()}}function Xt(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20)(5,"clr-icon",21),t.qZA(),t.TgZ(6,"div",22)(7,"label",23),t.NdJ("click",function(){t.CHM(r);const n=t.MAs(19),a=t.oxw(2);return t.KtG(a.toggleTitle(n))}),t.TgZ(8,"span",24)(9,"span",25),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,Wt,1,0,"clr-icon",26),t.qZA()(),t.TgZ(13,"span",27),t._uU(14),t.qZA(),t.TgZ(15,"span",28),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"span",29,30),t._uU(20),t.qZA()()()}if(2&i){const r=u.$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==r.state),t.xp6(1),t.Q6J("hidden","success"!==r.state),t.xp6(1),t.Q6J("hidden","failure"!==r.state),t.xp6(1),t.Q6J("hidden","interrupt"!==r.state),t.xp6(5),t.Oqu(t.lcZ(11,9,r.name)),t.xp6(2),t.Q6J("ngIf","success"===r.state&&(null==r||null==r.data?null:r.data.hasFile)),t.xp6(2),t.Oqu(r.data.name),t.xp6(2),t.Oqu(t.lcZ(17,11,r.timeDiff)),t.xp6(4),t.Oqu(r.data.errorInf)}}function $t(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20)(5,"clr-icon",21),t.qZA(),t.TgZ(6,"div",22)(7,"label",23),t.NdJ("click",function(){t.CHM(r);const n=t.MAs(16),a=t.oxw(2);return t.KtG(a.toggleTitle(n))}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"span",27),t._uU(11),t.qZA(),t.TgZ(12,"span",28),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"span",29,30),t._uU(17),t.qZA()()()}if(2&i){const r=u.$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==r.state),t.xp6(1),t.Q6J("hidden","success"!==r.state),t.xp6(1),t.Q6J("hidden","failure"!==r.state),t.xp6(1),t.Q6J("hidden","interrupt"!==r.state),t.xp6(3),t.Oqu(t.lcZ(9,8,r.name)),t.xp6(3),t.Oqu(r.data.name),t.xp6(2),t.Oqu(t.lcZ(14,10,r.timeDiff)),t.xp6(4),t.Oqu(r.data.errorInf)}}function te(i,u){if(1&i&&(t.TgZ(0,"clr-tab-content",14),t.YNc(1,Xt,21,13,"div",15),t.YNc(2,$t,18,12,"div",15),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.exportJobs),t.xp6(1),t.Q6J("ngForOf",r.resultLists)}}function ee(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20)(5,"clr-icon",21),t.qZA(),t.TgZ(6,"div",22)(7,"label",23),t.NdJ("click",function(){t.CHM(r);const n=t.MAs(18),a=t.oxw(3);return t.KtG(a.toggleTitle(n))}),t.TgZ(8,"span",24)(9,"span",25),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"span",27),t._uU(13),t.qZA(),t.TgZ(14,"span",28),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"span",29,30),t._uU(19),t.qZA()()()}if(2&i){const r=t.oxw().$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==r.state),t.xp6(1),t.Q6J("hidden","success"!==r.state),t.xp6(1),t.Q6J("hidden","failure"!==r.state),t.xp6(1),t.Q6J("hidden","interrupt"!==r.state),t.xp6(5),t.Oqu(t.lcZ(11,8,r.name)),t.xp6(3),t.Oqu(r.data.name),t.xp6(2),t.Oqu(t.lcZ(16,10,r.timeDiff)),t.xp6(4),t.Oqu(r.data.errorInf)}}function ne(i,u){if(1&i&&(t.ynx(0),t.YNc(1,ee,20,12,"div",34),t.BQk()),2&i){const r=u.$implicit;t.xp6(1),t.Q6J("ngIf","progressing"===r.state)}}function oe(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20),t.qZA(),t.TgZ(5,"div",22)(6,"label",23),t.NdJ("click",function(){t.CHM(r);const n=t.MAs(15),a=t.oxw(2);return t.KtG(a.toggleTitle(n))}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span",27),t._uU(10),t.qZA(),t.TgZ(11,"span",28),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"span",29,30),t._uU(16),t.qZA()()()}if(2&i){const r=u.$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==r.state),t.xp6(1),t.Q6J("hidden","success"!==r.state),t.xp6(1),t.Q6J("hidden","failure"!==r.state),t.xp6(3),t.Oqu(t.lcZ(8,7,r.name)),t.xp6(3),t.Oqu(r.data.name),t.xp6(2),t.Oqu(t.lcZ(13,9,r.timeDiff)),t.xp6(4),t.Oqu(r.data.errorInf)}}function ie(i,u){if(1&i&&(t.TgZ(0,"clr-tab-content",32),t.YNc(1,ne,2,1,"ng-container",33),t.YNc(2,oe,17,11,"div",15),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.exportJobs),t.xp6(1),t.Q6J("ngForOf",r.runningLists)}}function re(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20)(5,"clr-icon",21),t.qZA(),t.TgZ(6,"div",22)(7,"label",23),t.NdJ("click",function(){t.CHM(r);const n=t.MAs(18),a=t.oxw(3);return t.KtG(a.toggleTitle(n))}),t.TgZ(8,"span",24)(9,"span",25),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"span",27),t._uU(13),t.qZA(),t.TgZ(14,"span",28),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"span",29,30),t._uU(19),t.qZA()()()}if(2&i){const r=t.oxw().$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==r.state),t.xp6(1),t.Q6J("hidden","success"!==r.state),t.xp6(1),t.Q6J("hidden","failure"!==r.state),t.xp6(1),t.Q6J("hidden","interrupt"!==r.state),t.xp6(5),t.Oqu(t.lcZ(11,8,r.name)),t.xp6(3),t.Oqu(r.data.name),t.xp6(2),t.Oqu(t.lcZ(16,10,r.timeDiff)),t.xp6(4),t.Oqu(r.data.errorInf)}}function se(i,u){if(1&i&&(t.ynx(0),t.YNc(1,re,20,12,"div",34),t.BQk()),2&i){const r=u.$implicit;t.xp6(1),t.Q6J("ngIf","failure"===r.state)}}function ae(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20),t.qZA(),t.TgZ(5,"div",22)(6,"label",23),t.NdJ("click",function(){t.CHM(r);const n=t.MAs(15),a=t.oxw(2);return t.KtG(a.toggleTitle(n))}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span",27),t._uU(10),t.qZA(),t.TgZ(11,"span",28),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"span",29,30),t._uU(16),t.qZA()()()}if(2&i){const r=u.$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==r.state),t.xp6(1),t.Q6J("hidden","success"!==r.state),t.xp6(1),t.Q6J("hidden","failure"!==r.state),t.xp6(3),t.Oqu(t.lcZ(8,7,r.name)),t.xp6(3),t.Oqu(r.data.name),t.xp6(2),t.Oqu(t.lcZ(13,9,r.timeDiff)),t.xp6(4),t.Oqu(r.data.errorInf)}}function le(i,u){if(1&i&&(t.TgZ(0,"clr-tab-content",35),t.YNc(1,se,2,1,"ng-container",33),t.YNc(2,ae,17,11,"div",15),t.qZA()),2&i){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.exportJobs),t.xp6(1),t.Q6J("ngForOf",r.failLists)}}const W="operation",J=500;let _e=(()=>{var i;class u{beforeUnloadHander(o){this.session.getCurrentUser()&&localStorage.setItem(`${W}-${this.session.getCurrentUser().user_id}`,JSON.stringify({updated:(new Date).getTime(),data:this.resultLists,newMessageCount:this._newMessageCount}))}constructor(o,n,a,c,A,P){this.session=o,this.operationService=n,this.translate=a,this.scanDataExportService=c,this.event=A,this.msgHandler=P,this.resultLists=[],this.exportJobs=[],this.animationState="out",this._newMessageCount=0,this.retryTimes=50,this.refreshExportJobSub||(this.refreshExportJobSub=this.event.subscribe(D.n.REFRESH_EXPORT_JOBS,()=>{"out"===this.animationState&&(this._newMessageCount+=1),this.refreshExportJobs(!1)})),this.batchInfoSubscription||(this.batchInfoSubscription=n.operationInfo$.subscribe(G=>{"out"===this.animationState&&(this._newMessageCount+=1),G&&(this.resultLists.length>=J&&this.resultLists.splice(499,this.resultLists.length+1-J),this.resultLists.unshift(G))}))}getNewMessageCountStr(){return this._newMessageCount?this._newMessageCount>J?J+"+":this._newMessageCount.toString():""}resetNewMessageCount(){this._newMessageCount=0}mouseover(){this._timeoutInterval&&(clearInterval(this._timeoutInterval),this._timeoutInterval=null)}mouseleave(){this._timeoutInterval||(this._timeoutInterval=setTimeout(()=>{this.animationState="out"},5e3))}get runningLists(){let o=[];return this.resultLists.forEach(n=>{"progressing"===n.state&&o.push(n)}),o}get failLists(){let o=[];return this.resultLists.forEach(n=>{"failure"===n.state&&o.push(n)}),o}init(){if(this.session.getCurrentUser()){this.refreshExportJobs(!1);const o=localStorage.getItem(`${W}-${this.session.getCurrentUser().user_id}`);if(o){const n=JSON.parse(o);n&&(n.newMessageCount&&(this._newMessageCount=n.newMessageCount),n.data&&n.data.length&&(n.data=n.data.filter(a=>(new Date).getTime()-a.timeStamp<2592e6),n.data.forEach(a=>{a.state===z.yb.progressing&&(a.state=z.yb.interrupt,a.data.errorInf="operation been interrupted")}),this.resultLists=n.data))}}}ngOnInit(){this.init()}ngOnDestroy(){this.batchInfoSubscription&&(this.batchInfoSubscription.unsubscribe(),this.batchInfoSubscription=null),this._timeoutInterval&&(clearInterval(this._timeoutInterval),this._timeoutInterval=null),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.refreshExportJobSub&&(this.refreshExportJobSub.unsubscribe(),this.refreshExportJobSub=null)}toggleTitle(o){o.style.display="block"===o.style.display?"none":"block"}slideOut(){this.animationState="out"===this.animationState?"in":"out","in"===this.animationState&&(this.resetNewMessageCount(),this.TabEvent())}openSlide(){this.animationState="in",this.resetNewMessageCount()}TabEvent(){let o,n,a,c;(0,K.D)([this.translate.get("OPERATION.SECOND_AGO"),this.translate.get("OPERATION.MINUTE_AGO"),this.translate.get("OPERATION.HOUR_AGO"),this.translate.get("OPERATION.DAY_AGO")]).subscribe(A=>{[o,n,a,c]=A}),this.resultLists.forEach(A=>{const P=(new Date).getTime()-+A.timeStamp;A.timeDiff=this.calculateTime(P,o,n,a,c)}),this.refreshExportJobs(!1)}calculateTime(o,n,a,c,A){const P=Math.floor(o/1e3/60);return P>0&&P<60?Math.floor(P)+a:P>=60&&Math.floor(P/60)<24?Math.floor(P/60)+c:Math.floor(P/60)>=24?Math.floor(P/60/24)+A:n}refreshExportJobs(o){this.session.getCurrentUser()&&(o?this.retryTimes--:this.retryTimes=50,this.scanDataExportService.getScanDataExportExecutionList().subscribe(n=>{if(n?.items){this.exportJobs=[];let a=!1;n.items.forEach(c=>{const A={name:"CVE_EXPORT.EXPORT_TITLE",state:this.MapStatus(c.status),data:{hasFile:c.file_present,name:`csv_file_${(new Vt.Z).transform(c.start_time,"yyyyMMddHHmmss")}`,id:c.id,errorInf:c.status_text?c.status_text:null},timeStamp:new Date(c.start_time).getTime(),timeDiff:"OPERATION.SECOND_AGO"};this.exportJobs.push(A),this.isRunningState(c.status)&&(a=!0)}),this.refreshTimestampForExportJob(),a&&this.retryTimes>0&&(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.timeout=setTimeout(()=>{this.refreshExportJobs(!0)},7e3))}}))}isRunningState(o){return!!o&&(o===w.TX.RUNNING||o===w.TX.PENDING||o===w.TX.SCHEDULED)}MapStatus(o){if(o){if(this.isRunningState(o))return w.he.PROGRESSING;if(o===w.TX.STOPPED)return w.he.INTERRUPT;if(o===w.TX.SUCCESS)return w.he.SUCCESS;if(o===w.TX.ERROR)return w.he.FAILURE}return w.he.FAILURE}download(o){o?.data?.id&&o?.data?.name&&this.scanDataExportService.downloadScanData({executionId:+o.data.id}).subscribe(n=>{(0,w.yg)(n,o.data.name),this.refreshExportJobs(!1)},n=>{this.msgHandler.error(n)})}refreshTimestampForExportJob(){let o,n,a,c;(0,K.D)([this.translate.get("OPERATION.SECOND_AGO"),this.translate.get("OPERATION.MINUTE_AGO"),this.translate.get("OPERATION.HOUR_AGO"),this.translate.get("OPERATION.DAY_AGO")]).subscribe(A=>{[o,n,a,c]=A}),this.exportJobs?.length&&this.exportJobs.forEach(A=>{const P=(new Date).getTime()-+A.timeStamp;A.timeDiff=this.calculateTime(P,o,n,a,c)})}}return(i=u).\u0275fac=function(o){return new(o||i)(t.Y36(d.m),t.Y36(w.f9),t.Y36(R.sK),t.Y36(Kt.f),t.Y36(D.P),t.Y36(I.d))},i.\u0275cmp=t.Xpm({type:i,selectors:[["hbr-operation-model"]],hostBindings:function(o,n){1&o&&t.NdJ("beforeunload",function(c){return n.beforeUnloadHander(c)},!1,t.Jf7)},decls:28,vars:18,consts:[[1,"operDiv",3,"mouseover","mouseleave"],[1,"position-relative","w-100","h-100"],[1,"toolBar",3,"click"],["class","badge badge-danger margin-left-5",4,"ngIf"],[1,"side-form"],["shape","refresh",1,"freshIcon",3,"click"],[1,"custom-h2","event-text"],[1,"tab-top"],["clrTabLink","","id","link1",3,"click"],["id","contentAll",4,"clrIfActive"],["clrTabLink","",3,"click"],["id","contentRun",4,"clrIfActive"],["id","contentFailed",4,"clrIfActive"],[1,"badge","badge-danger","margin-left-5"],["id","contentAll"],["class","eventInfo",4,"ngFor","ngForOf"],[1,"eventInfo"],[1,"iconsArea"],[1,"spinner","spinner-inline","spinner-pos",3,"hidden"],["size","18","shape","success-standard",1,"color-green",3,"hidden"],["size","18","shape","error-standard",1,"color-red",3,"hidden"],["size","18","shape","unlink",1,"color-orange",3,"hidden"],[1,"infoArea"],[1,"eventName",3,"click"],[1,"flex"],[1,"job-name"],["class","btn btn-link","size","16","shape","download",3,"click",4,"ngIf"],[1,"eventTarget"],[1,"eventTime"],[1,"eventErrorInf"],["spanErrorInfo",""],["size","16","shape","download",1,"btn","btn-link",3,"click"],["id","contentRun"],[4,"ngFor","ngForOf"],["class","eventInfo",4,"ngIf"],["id","contentFailed"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t.NdJ("mouseover",function(){return n.mouseover()})("mouseleave",function(){return n.mouseleave()}),t.TgZ(1,"div",1)(2,"a",2),t.NdJ("click",function(){return n.slideOut()}),t._uU(3),t.ALo(4,"translate"),t.YNc(5,zt,2,1,"span",3),t.qZA(),t.TgZ(6,"div",4)(7,"clr-icon",5),t.NdJ("click",function(){return n.TabEvent()}),t.qZA(),t.TgZ(8,"h3",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",7)(12,"clr-tabs")(13,"clr-tab")(14,"button",8),t.NdJ("click",function(){return n.TabEvent()}),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,te,3,2,"clr-tab-content",9),t.qZA(),t.TgZ(18,"clr-tab")(19,"button",10),t.NdJ("click",function(){return n.TabEvent()}),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.YNc(22,ie,3,2,"clr-tab-content",11),t.qZA(),t.TgZ(23,"clr-tab")(24,"button",10),t.NdJ("click",function(){return n.TabEvent()}),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.YNc(27,le,3,2,"clr-tab-content",12),t.qZA()()()()()()),2&o&&(t.Q6J("@SlideInOutAnimation",n.animationState),t.xp6(3),t.Oqu(t.lcZ(4,8,"OPERATION.EVENT_LOG")),t.xp6(2),t.Q6J("ngIf",n.getNewMessageCountStr()),t.xp6(4),t.hij(" ",t.lcZ(10,10,"OPERATION.LOCAL_EVENT")," "),t.xp6(6),t.hij(" ",t.lcZ(16,12,"OPERATION.ALL")," "),t.xp6(2),t.Q6J("clrIfActive",!0),t.xp6(3),t.hij(" ",t.lcZ(21,14,"OPERATION.RUNNING")," "),t.xp6(5),t.hij(" ",t.lcZ(26,16,"OPERATION.FAILED")," "))},dependencies:[f.sg,f.O5,_.qvL,_.tam,_.MgK,_.UkA,_.S4y,_.gKI,_.Iq$,_.dl,_.Qs7,R.X$],styles:[".side-form[_ngcontent-%COMP%]{width:325px;height:100%;left:28px;padding-top:20px;border-left:1px solid #e0e0e0}.eventInfo[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-content:flex-start;padding:8px 5px 8px 10px;border-bottom:1px solid #ccc}.iconsArea[_ngcontent-%COMP%]{flex-shrink:1}.infoArea[_ngcontent-%COMP%]{margin-left:10px;width:270px}.eventName[_ngcontent-%COMP%]{display:block;margin-bottom:-5px;font-size:16px}.eventErrorInf[_ngcontent-%COMP%]{display:block;font-size:12px;color:red;line-height:.6rem}.eventTarget[_ngcontent-%COMP%]{display:inline-flex;width:160px;font-size:12px;flex-shrink:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.eventTime[_ngcontent-%COMP%]{float:right;font-size:12px}[_nghost-%COMP%]  .nav{padding-left:38px}.operDiv[_ngcontent-%COMP%]{position:fixed;top:60px;z-index:600;width:325px;bottom:0}.toolBar[_ngcontent-%COMP%]{position:absolute;transform-origin:top right;border-top:1px solid #ccc;transform:translate(-100%) rotate(-90deg);margin-top:10px;padding:0 10px;height:25px;line-height:25px;letter-spacing:1.2px;font-weight:500;box-shadow:-2px -1px 3px #bebbbb;cursor:pointer;text-align:left;text-decoration:none;left:-25px}.freshIcon[_ngcontent-%COMP%]{float:right;margin-right:20px;margin-top:-10px;cursor:pointer}[_nghost-%COMP%]  #contentAll{position:absolute;top:115px;bottom:0;width:100%;overflow-y:auto}[_nghost-%COMP%]  #contentFailed{position:absolute;top:115px;bottom:0;width:100%;overflow-y:auto}[_nghost-%COMP%]  #contentRun{position:absolute;top:115px;bottom:0;width:100%;overflow-y:auto}.event-text[_ngcontent-%COMP%]{margin-left:34px}.color-red[_ngcontent-%COMP%]{color:red}.color-green[_ngcontent-%COMP%]{color:green}.color-orange[_ngcontent-%COMP%]{color:orange}.tab-top[_ngcontent-%COMP%]{margin-top:10px}.margin-left-5[_ngcontent-%COMP%]{margin-left:5px}.flex[_ngcontent-%COMP%]{display:flex;align-items:center}"],data:{animation:[Ht]}}),u})();var he=s(8488),$=s(6609),ge=s(3612);function me(i,u){1&i&&(t.TgZ(0,"div",7),t._UZ(1,"clr-icon",8),t.qZA())}function fe(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.confirm())}),t._uU(4),t.ALo(5,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"BUTTON.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(5,4,"BUTTON.CONFIRM")," "))}function Ce(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.confirm())}),t._uU(4),t.ALo(5,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"BUTTON.NO")," "),t.xp6(3),t.hij(" ",t.lcZ(5,4,"BUTTON.YES")," "))}function Te(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",12),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.confirm())}),t._uU(4),t.ALo(5,"translate"),t.qZA()}if(2&i){const r=t.oxw();t.Q6J("hidden",r.isDelete),t.xp6(1),t.hij(" ",t.lcZ(2,4,"BUTTON.CANCEL")," "),t.xp6(2),t.Q6J("hidden",r.isDelete),t.xp6(1),t.hij(" ",t.lcZ(5,6,"BUTTON.DELETE")," ")}}function Ae(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BUTTON.CLOSE")," "))}function ve(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",13),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.confirm())}),t._uU(4),t.ALo(5,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"BUTTON.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(5,4,"BUTTON.ENABLE")," "))}function Me(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",14),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.confirm())}),t._uU(4),t.ALo(5,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"BUTTON.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(5,4,"BUTTON.DISABLE")," "))}function Oe(i,u){if(1&i){const r=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",15),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",16),t.NdJ("click",function(){t.CHM(r);const n=t.oxw();return t.KtG(n.cancel())}),t._uU(7),t.ALo(8,"translate"),t.qZA()}if(2&i){const r=t.oxw();t.Q6J("hidden",r.isDelete),t.xp6(1),t.hij(" ",t.lcZ(2,7,"BUTTON.CANCEL")," "),t.xp6(2),t.Q6J("hidden",r.isDelete),t.xp6(1),t.hij(" ",t.lcZ(5,9,"BUTTON.SWITCH")," "),t.xp6(2),t.Q6J("disabled","true")("hidden",!r.isDelete),t.xp6(1),t.hij(" ",t.lcZ(8,11,"BUTTON.CLOSE")," ")}}let Se=(()=>{var i;class u{constructor(o,n){this.confirmationService=o,this.translate=n,this.opened=!1,this.dialogTitle="",this.dialogContent="",this.isDelete=!1,this.annouceSubscription=o.confirmationAnnouced$.subscribe(a=>{this.dialogTitle=a.title,this.dialogContent=a.message,this.message=a,this.translate.get(this.dialogTitle).subscribe(c=>this.dialogTitle=c),this.translate.get(this.dialogContent,{param:a.param}).subscribe(c=>this.dialogContent=c),this.buttons=a.buttons,this.open()})}ngOnDestroy(){this.annouceSubscription&&this.annouceSubscription.unsubscribe()}open(o){o&&(this.dialogTitle=o.title,this.message=o,this.translate.get(this.dialogTitle).subscribe(n=>this.dialogTitle=n),this.translate.get(o.message,{param:o.param}).subscribe(n=>{this.dialogContent=n}),this.buttons=o.buttons),this.opened=!0}close(){this.opened=!1}cancel(){this.message?(this.confirmationService.cancel(new $.y(2,this.message.data?this.message.data:{},this.message.targetId?this.message.targetId:0)),this.isDelete=!1,this.close()):this.close()}confirm(){this.message?(this.confirmationService.confirm(new $.y(1,this.message.data?this.message.data:{},this.message.targetId?this.message.targetId:0)),this.close()):this.close()}}return(i=u).\u0275fac=function(o){return new(o||i)(t.Y36(ge.O),t.Y36(R.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["global-confirmation-dialog"]],decls:15,vars:14,consts:[[3,"clrModalOpen","clrModalClosable","clrModalStaticBackdrop","clrModalOpenChange"],[1,"modal-title","confirmation-title"],[1,"modal-body"],["class","confirmation-icon-inline",4,"ngIf"],[1,"confirmation-content"],[1,"modal-footer",3,"ngSwitch"],[3,"ngSwitchCase"],[1,"confirmation-icon-inline"],["shape","warning","size","64",1,"is-warning"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline",3,"hidden","click"],["type","button",1,"btn","btn-danger",3,"hidden","click"],["type","button","id","dialog-action-enable",1,"btn","btn-primary",3,"click"],["type","button","id","dialog-action-disable",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"hidden"],["type","button",1,"btn","btn-primary",3,"disabled","hidden","click"]],template:function(o,n){1&o&&(t.TgZ(0,"clr-modal",0),t.NdJ("clrModalOpenChange",function(c){return n.opened=c}),t.TgZ(1,"h3",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,me,2,0,"div",3),t.TgZ(5,"div",4),t._uU(6),t.qZA()(),t.TgZ(7,"div",5),t.YNc(8,fe,6,6,"ng-template",6),t.YNc(9,Ce,6,6,"ng-template",6),t.YNc(10,Te,6,8,"ng-template",6),t.YNc(11,Ae,3,3,"ng-template",6),t.YNc(12,ve,6,6,"ng-template",6),t.YNc(13,Me,6,6,"ng-template",6),t.YNc(14,Oe,9,13,"ng-template",6),t.qZA()()),2&o&&(t.Q6J("clrModalOpen",n.opened)("clrModalClosable",!1)("clrModalStaticBackdrop",!0),t.xp6(2),t.Oqu(n.dialogTitle),t.xp6(2),t.Q6J("ngIf",2!==n.buttons),t.xp6(2),t.Oqu(n.dialogContent),t.xp6(1),t.Q6J("ngSwitch",n.buttons),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",4),t.xp6(1),t.Q6J("ngSwitchCase",5),t.xp6(1),t.Q6J("ngSwitchCase",6))},dependencies:[_.qvL,_.qAN,_.VLi,f.O5,f.RF,f.n9,R.X$],styles:[".confirmation-icon-inline[_ngcontent-%COMP%]{display:inline-block}.confirmation-title[_ngcontent-%COMP%]{line-height:24px;font-size:22px;margin-top:0}.confirmation-content[_ngcontent-%COMP%]{font-size:14px;line-height:24px;display:inline-block;vertical-align:middle;width:80%;white-space:pre-wrap;word-break:break-all}.batchInfoUl[_ngcontent-%COMP%]{padding:20px;list-style-type:none}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:24px;border-bottom:1px solid #e8e8e8}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{padding-right:20px;width:240px;display:inline-block;color:#666;text-overflow:ellipsis;overflow:hidden;vertical-align:middle}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{width:220px;display:inline-block;color:#666}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;line-height:1.2em;font-size:.8em;color:#999}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}"]}),u})();const xe=["scrollDiv"];function be(i,u){1&i&&(t.TgZ(0,"a",42),t._UZ(1,"clr-icon",22),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"SIDE_NAV.SYSTEM_MGMT.GROUP")," "))}function Ee(i,u){1&i&&(t.TgZ(0,"a",43),t._UZ(1,"clr-icon",44),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"CLEARANCES.CLEARANCES")," "))}function Ze(i,u){1&i&&(t.TgZ(0,"a",45),t._UZ(1,"clr-icon",46),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"JOB_SERVICE_DASHBOARD.JOB_SERVICE_DASHBOARD")," "))}function Pe(i,u){if(1&i&&(t.TgZ(0,"clr-vertical-nav-group-children")(1,"a",21),t._UZ(2,"clr-icon",22),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",23),t._UZ(6,"clr-icon",24),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,be,4,3,"a",25),t.TgZ(10,"a",26),t._UZ(11,"clr-icon",27),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"a",28),t._UZ(15,"clr-icon",29),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"a",30),t._UZ(19,"clr-icon",31),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.TgZ(22,"a",32),t._UZ(23,"clr-icon",33),t._uU(24),t.ALo(25,"translate"),t.qZA(),t.TgZ(26,"a",34),t._UZ(27,"clr-icon",35),t._uU(28),t.ALo(29,"translate"),t.qZA(),t.TgZ(30,"a",36),t._UZ(31,"clr-icon",37),t._uU(32),t.ALo(33,"translate"),t.qZA(),t.YNc(34,Ee,4,3,"a",38),t.YNc(35,Ze,4,3,"a",39),t.TgZ(36,"a",40),t._UZ(37,"clr-icon",41),t._uU(38),t.ALo(39,"translate"),t.qZA()()),2&i){const r=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,12,"SIDE_NAV.SYSTEM_MGMT.USER")," "),t.xp6(4),t.hij(" ",t.lcZ(8,14,"SYSTEM_ROBOT.ROBOT_ACCOUNT_NAV")," "),t.xp6(2),t.Q6J("ngIf",!r.isDBAuth()),t.xp6(3),t.hij(" ",t.lcZ(13,16,"SIDE_NAV.SYSTEM_MGMT.REGISTRY")," "),t.xp6(4),t.hij(" ",t.lcZ(17,18,"SIDE_NAV.SYSTEM_MGMT.REPLICATION")," "),t.xp6(4),t.hij(" ",t.lcZ(21,20,"SIDE_NAV.DISTRIBUTIONS.NAME")," "),t.xp6(4),t.hij(" ",t.lcZ(25,22,"CONFIG.LABEL")," "),t.xp6(4),t.hij(" ",t.lcZ(29,24,"CONFIG.PROJECT_QUOTAS")," "),t.xp6(4),t.hij(" ",t.lcZ(33,26,"SIDE_NAV.SYSTEM_MGMT.INTERROGATION_SERVICES")," "),t.xp6(2),t.Q6J("ngIf",r.hasAdminRole),t.xp6(1),t.Q6J("ngIf",r.hasAdminRole),t.xp6(3),t.hij(" ",t.lcZ(39,28,"SIDE_NAV.SYSTEM_MGMT.CONFIG")," ")}}function Ie(i,u){1&i&&(t.TgZ(0,"clr-vertical-nav-group",17),t._UZ(1,"clr-icon",18),t._uU(2),t.ALo(3,"translate"),t._UZ(4,"a",19),t.YNc(5,Pe,40,30,"clr-vertical-nav-group-children",20),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"SIDE_NAV.SYSTEM_MGMT.NAME")," "),t.xp6(3),t.Q6J("clrIfExpanded",!0))}function Ne(i,u){1&i&&t._UZ(0,"clr-icon",50)}function we(i,u){1&i&&t._UZ(0,"clr-icon",51)}function Ue(i,u){if(1&i){const r=t.EpF();t.ynx(0),t.TgZ(1,"a",47),t.NdJ("click",function(){t.CHM(r);const n=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.themeChanged(n))}),t.YNc(2,Ne,1,0,"clr-icon",48),t.YNc(3,we,1,0,"clr-icon",49),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.BQk()}if(2&i){const r=t.oxw().$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("ngIf","DARK"===o.styleMode),t.xp6(1),t.Q6J("ngIf","LIGHT"===o.styleMode),t.xp6(1),t.hij(" ",t.lcZ(5,3,r.text)," ")}}function Re(i,u){if(1&i&&(t.ynx(0),t.YNc(1,Ue,6,5,"ng-container",6),t.BQk()),2&i){const r=u.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",r.showStyle===o.styleMode)}}function Le(i,u){if(1&i&&(t.TgZ(0,"clr-vertical-nav",7)(1,"div")(2,"a",8),t._UZ(3,"clr-icon",9),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"a",10),t._UZ(7,"clr-icon",11),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,Ie,6,4,"clr-vertical-nav-group",12),t.qZA(),t.TgZ(11,"div",13),t.YNc(12,Re,2,1,"ng-container",14),t.TgZ(13,"a",15),t._UZ(14,"clr-icon",16),t._uU(15),t.ALo(16,"translate"),t.qZA()()()),2&i){const r=t.oxw();t.Q6J("clrVerticalNavCollapsible",!0),t.xp6(4),t.hij(" ",t.lcZ(5,6,"SIDE_NAV.PROJECTS")," "),t.xp6(4),t.hij(" ",t.lcZ(9,8,"SIDE_NAV.LOGS")," "),t.xp6(2),t.Q6J("ngIf",r.isSystemAdmin),t.xp6(2),t.Q6J("ngForOf",r.themeArray),t.xp6(3),t.hij(" ",t.lcZ(16,10,"SIDE_NAV.HARBOR_API_MANAGEMENT")," ")}}function ye(i,u){1&i&&t._UZ(0,"hbr-operation-model")}const tt="styleModeLocal";let De=(()=>{var i;class u{constructor(o,n,a,c,A,P,G,qe){this.route=o,this.router=n,this.session=a,this.searchTrigger=c,this.appConfigService=A,this.theme=P,this.event=G,this.cd=qe,this.isSearchResultsOpened=!1,this.themeArray=(0,l.d9)(ht.tI),this.styleMode=this.themeArray[0].showStyle}ngOnInit(){this.scrollToPositionSub||(this.scrollToPositionSub=this.event.subscribe(D.n.SCROLL_TO_POSITION,o=>{this.scrollDiv&&this.scrollDiv.nativeElement&&(this.cd.detectChanges(),this.scrollDiv.nativeElement.scrollTop=o)})),this.searchSub=this.searchTrigger.searchTriggerChan$.subscribe(o=>{o&&""!==o.trim()&&(this.isSearchResultsOpened=!0)}),this.searchCloseSub=this.searchTrigger.searchCloseChan$.subscribe(o=>{this.isSearchResultsOpened=!1}),localStorage&&(this.styleMode=localStorage.getItem(tt))}isDBAuth(){return!this.appConfigService?.configurations?.auth_mode||this.appConfigService.configurations.auth_mode===N.Au.DB_AUTH}publishScrollEvent(){this.scrollDiv&&this.scrollDiv.nativeElement&&this.event.publish(D.n.SCROLL,{url:this.router.url,scrollTop:this.scrollDiv.nativeElement.scrollTop})}ngOnDestroy(){this.searchSub&&this.searchSub.unsubscribe(),this.searchCloseSub&&this.searchCloseSub.unsubscribe(),this.scrollToPositionSub&&(this.scrollToPositionSub.unsubscribe(),this.scrollToPositionSub=null)}get shouldOverrideContent(){return this.router.routerState.snapshot.url.toString().startsWith(N.ZB.EMBEDDED_SIGN_IN)}get showSearch(){return this.isSearchResultsOpened}get isSystemAdmin(){let o=this.session.getCurrentUser();return null!=o&&o.has_admin_role}get isUserExisting(){return null!=this.session.getCurrentUser()}get hasAdminRole(){return this.session.getCurrentUser()&&this.session.getCurrentUser().has_admin_role}openModal(o){switch(o.modalName){case S.D.USER_PROFILE:this.accountSettingsModal.open();break;case S.D.CHANGE_PWD:this.pwdSetting.open();break;case S.D.ABOUT:this.aboutDialog.open()}}themeChanged(o){this.styleMode=o.mode,this.theme.loadStyle(o.toggleFileName),localStorage&&localStorage.setItem(tt,this.styleMode),this.event.publish(D.n.THEME_CHANGE)}}return(i=u).\u0275fac=function(o){return new(o||i)(t.Y36(E.gz),t.Y36(E.F0),t.Y36(d.m),t.Y36(H.V),t.Y36(q._),t.Y36(qt.f),t.Y36(D.P),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["harbor-shell"]],viewQuery:function(o,n){if(1&o&&(t.Gf(V,5),t.Gf(k,5),t.Gf(j.S,5),t.Gf(Q.f,5),t.Gf(xe,5)),2&o){let a;t.iGM(a=t.CRH())&&(n.accountSettingsModal=a.first),t.iGM(a=t.CRH())&&(n.pwdSetting=a.first),t.iGM(a=t.CRH())&&(n.navigator=a.first),t.iGM(a=t.CRH())&&(n.aboutDialog=a.first),t.iGM(a=t.CRH())&&(n.scrollDiv=a.first)}},decls:15,vars:8,consts:[[3,"showAccountSettingsModal","showDialogModalAction"],[1,"content-container"],[1,"content-area",3,"scroll"],["scrollDiv",""],[1,"global-msg"],[3,"clrVerticalNavCollapsible",4,"ngIf"],[4,"ngIf"],[3,"clrVerticalNavCollapsible"],["clrVerticalNavLink","","routerLinkActive","active","routerLink","/harbor/projects"],["shape","organization","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLinkActive","active","routerLink","/harbor/logs"],["shape","list","clrVerticalNavIcon",""],["routerLinkActive","active",4,"ngIf"],[1,"mb-1"],[4,"ngFor","ngForOf"],["rel","noopener noreferrer","clrVerticalNavLink","","routerLinkActive","active","target","_blank","routerLink","/devcenter-api-2.0"],["shape","network-globe","clrVerticalNavIcon",""],["routerLinkActive","active"],["shape","administrator","clrVerticalNavIcon",""],["routerLink","#","hidden","","aria-hidden","true"],[4,"clrIfExpanded"],["clrVerticalNavLink","","routerLink","/harbor/users","routerLinkActive","active"],["shape","users","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/robot-accounts","routerLinkActive","active"],["shape","robot-head","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/groups","routerLinkActive","active",4,"ngIf"],["clrVerticalNavLink","","routerLink","/harbor/registries","routerLinkActive","active"],["shape","block","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/replications","routerLinkActive","active"],["shape","cloud-traffic","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/distribution/instances","routerLinkActive","active"],["shape","share","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/labels","routerLinkActive","active"],["shape","tag","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/project-quotas","routerLinkActive","active"],["shape","resource-pool","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/interrogation-services","routerLinkActive","active"],["shape","shield","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/clearing-job","routerLinkActive","active",4,"ngIf"],["clrVerticalNavLink","","routerLink","/harbor/job-service-dashboard","routerLinkActive","active",4,"ngIf"],["clrVerticalNavLink","","routerLinkActive","active","routerLink","/harbor/configs"],["shape","cog","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/groups","routerLinkActive","active"],["clrVerticalNavLink","","routerLink","/harbor/clearing-job","routerLinkActive","active"],["shape","trash","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/job-service-dashboard","routerLinkActive","active"],["shape","dashboard","clrVerticalNavIcon",""],["clrVerticalNavLink","",1,"pointer",3,"click"],["clrVerticalNavIcon","","size","20","shape","sun","class","is-solid",4,"ngIf"],["clrVerticalNavIcon","","size","20","shape","moon","class","is-solid",4,"ngIf"],["clrVerticalNavIcon","","size","20","shape","sun",1,"is-solid"],["clrVerticalNavIcon","","size","20","shape","moon",1,"is-solid"]],template:function(o,n){1&o&&(t.TgZ(0,"clr-main-container"),t._UZ(1,"app-app-level-alerts"),t.TgZ(2,"navigator",0),t.NdJ("showAccountSettingsModal",function(c){return n.openModal(c)})("showDialogModalAction",function(c){return n.openModal(c)}),t.qZA(),t.TgZ(3,"div",1)(4,"div",2,3),t.NdJ("scroll",function(){return n.publishScrollEvent()}),t._UZ(6,"global-message",4)(7,"search-result")(8,"router-outlet"),t.qZA(),t.YNc(9,Le,17,12,"clr-vertical-nav",5),t.YNc(10,ye,1,0,"hbr-operation-model",6),t.qZA()(),t._UZ(11,"account-settings-modal")(12,"password-setting")(13,"global-confirmation-dialog")(14,"about-dialog")),2&o&&(t.xp6(4),t.ekj("container-override",n.showSearch)("content-area-override",!n.shouldOverrideContent)("start-content-padding",n.shouldOverrideContent),t.xp6(5),t.Q6J("ngIf",n.isUserExisting),t.xp6(1),t.Q6J("ngIf",n.isUserExisting))},dependencies:[_.Nz$,_.qvL,_.DbV,_.QoI,_.zuD,_.fzC,_.zYX,_.A0B,_.d6G,_.ogR,f.sg,f.O5,Qt,j.S,Yt.B,Q.f,_e,he.y,E.lC,E.rH,E.Od,k,V,Se,R.X$],styles:[".side-nav-override[_ngcontent-%COMP%]{box-shadow:6px 0 #ccc}.container-override[_ngcontent-%COMP%]{position:relative!important}.content-container[_ngcontent-%COMP%]{position:relative}.start-content-padding[_ngcontent-%COMP%]{padding:0!important;background-color:#fff;overflow-y:hidden!important}.content-area-override[_ngcontent-%COMP%]{padding-left:36px!important;padding-bottom:36px!important;padding-right:21px!important}.nav-link-override[_ngcontent-%COMP%]{width:126px!important}clr-vertical-nav[_ngcontent-%COMP%]     .nav-content{display:flex;justify-content:space-between}.font-size-13[_ngcontent-%COMP%]{font-size:13px}.global-msg[_ngcontent-%COMP%]{position:absolute;top:0;left:2rem;right:2rem;z-index:600}"]}),u})();var Je=s(5592);let U=(()=>{var i;class u{constructor(o,n,a){this.authService=o,this.router=n,this.appConfigService=a}canActivate(o,n){return new Je.y(a=>{let c=this.authService.getCurrentUser();if(c)return c.has_admin_role?a.next(!0):(this.router.navigate([N.ZB.HARBOR_DEFAULT]),a.next(!1));this.authService.retrieveUser().subscribe(()=>(c=this.authService.getCurrentUser(),c.has_admin_role?a.next(!0):(this.router.navigate([N.ZB.HARBOR_DEFAULT]),a.next(!1))),A=>n.url===N.ZB.HARBOR_ROOT||n.url.startsWith(N.ZB.EMBEDDED_SIGN_IN)?a.next(!0):(this.router.navigate([N.ZB.EMBEDDED_SIGN_IN],{queryParams:{redirect_url:n.url}}),a.next(!1)))})}canActivateChild(o,n){return this.canActivate(o,n)}}return(i=u).\u0275fac=function(o){return new(o||i)(t.LFG(d.m),t.LFG(E.F0),t.LFG(q._))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),u})();var et=s(2096),B=s(9788),nt=s(2141);let ot=(()=>{var i;class u{constructor(o,n,a){this.sessionService=o,this.projectService=n,this.router=a}canActivate(o,n){const a=o.params.id;return this.sessionService.setProjectMembers([]),null!==this.sessionService.getCurrentUser()?this.hasProjectPerm(n.url,a,o):this.sessionService.retrieveUser().pipe(()=>this.hasProjectPerm(n.url,a,o),(0,x.K)(A=>(this.router.navigate([N.ZB.HARBOR_DEFAULT]),(0,et.of)(!1))))}canActivateChild(o,n){return this.canActivate(o,n)}hasProjectPerm(o,n,a){return this.projectService.getProjectFromCache(n).pipe((0,m.U)(()=>!0),(0,x.K)(c=>(401===c.status&&a.queryParams[B.jv]!==B.gT?(this.sessionService.clear(),this.router.navigate([N.ZB.EMBEDDED_SIGN_IN],{queryParams:{redirect_url:(0,l.ub)(this.router.url,B.jv)}})):this.router.navigate([N.ZB.HARBOR_DEFAULT]),(0,et.of)(!1))))}}return(i=u).\u0275fac=function(o){return new(o||i)(t.LFG(d.m),t.LFG(nt.Y4),t.LFG(E.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),u})(),it=(()=>{var i;class u{constructor(o,n,a){this.sessionService=o,this.projectService=n,this.router=a}resolve(o,n){let a=o.params.id;return a||(a=o.queryParams.project_id),this.projectService.getProjectFromCache(a).pipe((0,m.U)(c=>{if(c){let A=this.sessionService.getCurrentUser();return A&&(A.has_admin_role?(c.has_project_admin_role=!0,c.is_member=!0,c.role_name="MEMBER.SYS_ADMIN"):(c.has_project_admin_role=c.current_user_role_id===N.G7.PROJECT_ADMIN,c.is_member=c.current_user_role_id>0,c.role_name=N.Hp[c.current_user_role_id])),c}return this.router.navigate(["/harbor","projects"]),null},(0,x.K)(c=>(this.router.navigate(["/harbor","projects"]),null))))}}return(i=u).\u0275fac=function(o){return new(o||i)(t.LFG(d.m),t.LFG(nt.Y4),t.LFG(E.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),u})();const Ge=[{path:"",component:De,children:[{path:"",redirectTo:"projects",pathMatch:"full"},{path:"projects",loadChildren:()=>Promise.all([s.e(5738),s.e(8592),s.e(6253)]).then(s.bind(s,6253)).then(i=>i.ProjectsModule)},{path:"logs",loadChildren:()=>s.e(8244).then(s.bind(s,8244)).then(i=>i.LogModule)},{path:"users",canActivate:[U],loadChildren:()=>Promise.all([s.e(5691),s.e(9942)]).then(s.bind(s,9942)).then(i=>i.UserModule)},{path:"robot-accounts",canActivate:[U],loadChildren:()=>Promise.all([s.e(5738),s.e(5817),s.e(8592),s.e(6093)]).then(s.bind(s,6093)).then(i=>i.SystemRobotAccountsModule)},{path:"groups",canActivate:[U],loadChildren:()=>s.e(3785).then(s.bind(s,3785)).then(i=>i.GroupModule)},{path:"registries",canActivate:[U],loadChildren:()=>s.e(488).then(s.bind(s,488)).then(i=>i.EndpointModule)},{path:"replications",canActivate:[U],loadChildren:()=>Promise.all([s.e(5738),s.e(4665),s.e(6379),s.e(6149),s.e(3664),s.e(2079),s.e(974),s.e(8592),s.e(8787)]).then(s.bind(s,8787)).then(i=>i.ReplicationModule)},{path:"distribution",canActivate:[U],loadChildren:()=>Promise.all([s.e(4665),s.e(3651)]).then(s.bind(s,3651)).then(i=>i.DistributionModule)},{path:"interrogation-services",canActivate:[U],loadChildren:()=>Promise.all([s.e(5738),s.e(575),s.e(8592),s.e(1653)]).then(s.bind(s,1653)).then(i=>i.InterrogationServicesModule)},{path:"labels",canActivate:[U],loadChildren:()=>Promise.all([s.e(1683),s.e(5834)]).then(s.bind(s,5834)).then(i=>i.LabelsModule)},{path:"project-quotas",canActivate:[U],loadChildren:()=>Promise.all([s.e(5738),s.e(8592),s.e(3031)]).then(s.bind(s,3031)).then(i=>i.ProjectQuotasModule)},{path:"clearing-job",canActivate:[U],loadChildren:()=>Promise.all([s.e(575),s.e(3664),s.e(8592),s.e(3204)]).then(s.bind(s,3204)).then(i=>i.ClearingJobModule)},{path:"job-service-dashboard",canActivate:[U],loadChildren:()=>Promise.all([s.e(5738),s.e(4665),s.e(6379),s.e(6149),s.e(3664),s.e(2079),s.e(974),s.e(8592),s.e(5206)]).then(s.bind(s,5206)).then(i=>i.JobServiceDashboardModule)},{path:"configs",canActivate:[U],loadChildren:()=>Promise.all([s.e(8592),s.e(3751)]).then(s.bind(s,3751)).then(i=>i.ConfigurationModule)},{path:"projects/:id",loadChildren:()=>Promise.all([s.e(5738),s.e(7939)]).then(s.bind(s,7939)).then(i=>i.ProjectModule),canActivate:[ot],resolve:{projectResolver:it}},{path:"projects/:id/repositories",loadChildren:()=>Promise.all([s.e(5738),s.e(4665),s.e(6379),s.e(6149),s.e(3664),s.e(2079),s.e(974),s.e(2926)]).then(s.bind(s,2926)).then(i=>i.ArtifactModule),canActivate:[ot],resolve:{projectResolver:it}}]}];let Fe=(()=>{var i;class u{}return(i=u).\u0275fac=function(o){return new(o||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[e.m,E.Bz.forChild(Ge)]}),u})()},3612:(L,Z,s)=>{s.d(Z,{O:()=>S});var e=s(8645),E=s(5879);let S=(()=>{var g;class T{constructor(){this.confirmationAnnoucedSource=new e.x,this.confirmationConfirmSource=new e.x,this.confirmationAnnouced$=this.confirmationAnnoucedSource.asObservable(),this.confirmationConfirm$=this.confirmationConfirmSource.asObservable()}confirm(v){this.confirmationConfirmSource.next(v)}cancel(v){this.confirm(v)}openComfirmDialog(v){this.confirmationAnnoucedSource.next(v)}}return(g=T).\u0275fac=function(v){return new(v||g)},g.\u0275prov=E.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),T})()},6266:(L,Z,s)=>{s.d(Z,{c:()=>e});class e{constructor(S,g,T,t,v,m){this.data={},this.targetId=0,this.title=S,this.message=g,this.data=t,this.targetId=v,this.param=T,this.buttons=m||0}}},6609:(L,Z,s)=>{s.d(Z,{y:()=>e});class e{constructor(S,g,T){this.state=0,this.data={},this.source=0,this.state=S,this.data=g,this.source=T}}},3555:(L,Z,s)=>{s.d(Z,{P:()=>S,n:()=>g});var e=s(7394),E=s(5879);let S=(()=>{var T;class t{constructor(){this._channels=[]}subscribe(m,x){return this._channels[m]||(this._channels[m]=[]),this._channels[m].push(x),new e.w0(()=>{this.unsubscribe(m,x)})}unsubscribe(m,x=null){let b=this._channels[m];if(!b)return;if(!x)return void delete this._channels[m];let l=b.indexOf(x);l<0||(b.splice(l,1),b.length||delete this._channels[m])}publish(m,x){const b=this._channels[m];b&&b.forEach(l=>{l(x)})}}return(T=t).\u0275fac=function(m){return new(m||T)},T.\u0275prov=E.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),t})();var g=function(T){return T.SCROLL="scroll",T.SCROLL_TO_POSITION="scrollToPosition",T.REFRESH_PROJECT_INFO="refreshProjectInfo",T.START_SCAN_ARTIFACT="startScanArtifact",T.START_GENERATE_SBOM="startGenerateSbom",T.STOP_SCAN_ARTIFACT="stopScanArtifact",T.STOP_SBOM_ARTIFACT="stopSbomArtifact",T.UPDATE_VULNERABILITY_INFO="UpdateVulnerabilityInfo",T.UPDATE_SBOM_INFO="UpdateSbomInfo",T.REFRESH_EXPORT_JOBS="refreshExportJobs",T.DELETE_ACCESSORY="deleteAccessory",T.COPY_DIGEST="copyDigest",T.REFRESH_BANNER_MESSAGE="refreshBannerMessage",T.RETRIEVED_ICON="retrievedIcon",T.THEME_CHANGE="themeChange",T}(g||{})},7625:(L,Z,s)=>{s.d(Z,{z:()=>O});var e=s(5879),S=(s(27),s(6609)),g=s(9515),T=s(6814),t=s(8280);function v(d,I){if(1&d){const C=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.cancel())}),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",9),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.confirm())}),e._uU(4),e.ALo(5,"translate"),e.qZA()}2&d&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"BUTTON.CANCEL")," "),e.xp6(3),e.hij(" ",e.lcZ(5,4,"BUTTON.CONFIRM")," "))}function m(d,I){if(1&d){const C=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.cancel())}),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",9),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.confirm())}),e._uU(4),e.ALo(5,"translate"),e.qZA()}2&d&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"BUTTON.NO")," "),e.xp6(3),e.hij(" ",e.lcZ(5,4,"BUTTON.YES")," "))}function x(d,I){if(1&d){const C=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.cancel())}),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",11),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.confirm())}),e._uU(4),e.ALo(5,"translate"),e.qZA()}if(2&d){const C=e.oxw();e.Q6J("hidden",C.isDelete),e.xp6(1),e.hij(" ",e.lcZ(2,4,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("hidden",C.isDelete),e.xp6(1),e.hij(" ",e.lcZ(5,6,"BUTTON.DELETE")," ")}}function b(d,I){if(1&d){const C=e.EpF();e.TgZ(0,"button",9),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.cancel())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&d&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"BUTTON.CLOSE")," "))}function l(d,I){if(1&d){const C=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.cancel())}),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",12),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.confirm())}),e._uU(4),e.ALo(5,"translate"),e.qZA()}2&d&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"BUTTON.CANCEL")," "),e.xp6(3),e.hij(" ",e.lcZ(5,4,"BUTTON.ENABLE")," "))}function p(d,I){if(1&d){const C=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.cancel())}),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",13),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.confirm())}),e._uU(4),e.ALo(5,"translate"),e.qZA()}2&d&&(e.xp6(1),e.hij(" ",e.lcZ(2,2,"BUTTON.CANCEL")," "),e.xp6(3),e.hij(" ",e.lcZ(5,4,"BUTTON.DISABLE")," "))}function h(d,I){if(1&d){const C=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.cancel())}),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",14),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.confirm())}),e._uU(4),e.ALo(5,"translate"),e.qZA()}if(2&d){const C=e.oxw();e.Q6J("hidden",C.isDelete),e.xp6(1),e.hij(" ",e.lcZ(2,4,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("hidden",C.isDelete),e.xp6(1),e.hij(" ",e.lcZ(5,6,"BUTTON.REPLICATE")," ")}}function M(d,I){if(1&d){const C=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.cancel())}),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"button",14),e.NdJ("click",function(){e.CHM(C);const f=e.oxw();return e.KtG(f.confirm())}),e._uU(4),e.ALo(5,"translate"),e.qZA()}if(2&d){const C=e.oxw();e.Q6J("hidden",C.isDelete),e.xp6(1),e.hij(" ",e.lcZ(2,4,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("hidden",C.isDelete),e.xp6(1),e.hij(" ",e.lcZ(5,6,"BUTTON.STOP")," ")}}let O=(()=>{var d;class I{constructor(_){this.translate=_,this.opened=!1,this.dialogTitle="",this.dialogContent="",this.confirmAction=new e.vpe,this.cancelAction=new e.vpe,this.isDelete=!1}open(_){this.dialogTitle=_.title,this.message=_,this.translate.get(this.dialogTitle).subscribe(f=>this.dialogTitle=f),this.translate.get(_.message,{param:_.param}).subscribe(f=>{this.dialogContent=f}),this.buttons=_.buttons,this.opened=!0}colorChange(_){return _.loading||_.errorState?!_.loading&&_.errorState?"red":"#666":"green"}toggleErrorTitle(_){_.style.display="none"===_.style.display?"block":"none"}close(){this.opened=!1}cancel(){this.message?(this.cancelAction.emit(new S.y(2,this.message.data?this.message.data:{},this.message.targetId?this.message.targetId:0)),this.isDelete=!1,this.close()):this.close()}confirm(){if(!this.message)return void this.close();let R=new S.y(1,this.message.data?this.message.data:{},this.message.targetId?this.message.targetId:0);this.confirmAction.emit(R),this.close()}}return(d=I).\u0275fac=function(_){return new(_||d)(e.Y36(g.sK))},d.\u0275cmp=e.Xpm({type:d,selectors:[["confirmation-dialog"]],outputs:{confirmAction:"confirmAction",cancelAction:"cancelAction"},decls:17,vars:14,consts:[[3,"clrModalOpen","clrModalClosable","clrModalStaticBackdrop","clrModalOpenChange"],[1,"modal-title","confirmation-title"],[1,"modal-body"],[1,"confirmation-icon-inline"],["shape","warning","size","64",1,"is-warning"],[1,"confirmation-content"],[1,"modal-footer",3,"ngSwitch"],[3,"ngSwitchCase"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline",3,"hidden","click"],["type","button",1,"btn","btn-danger",3,"hidden","click"],["type","button","id","dialog-action-enable",1,"btn","btn-primary",3,"click"],["type","button","id","dialog-action-disable",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"hidden","click"]],template:function(_,f){1&_&&(e.TgZ(0,"clr-modal",0),e.NdJ("clrModalOpenChange",function(F){return f.opened=F}),e.TgZ(1,"h3",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e._UZ(5,"clr-icon",4),e.qZA(),e.TgZ(6,"div",5),e._uU(7),e.qZA()(),e.TgZ(8,"div",6),e.YNc(9,v,6,6,"ng-template",7),e.YNc(10,m,6,6,"ng-template",7),e.YNc(11,x,6,8,"ng-template",7),e.YNc(12,b,3,3,"ng-template",7),e.YNc(13,l,6,6,"ng-template",7),e.YNc(14,p,6,6,"ng-template",7),e.YNc(15,h,6,8,"ng-template",7),e.YNc(16,M,6,8,"ng-template",7),e.qZA()()),2&_&&(e.Q6J("clrModalOpen",f.opened)("clrModalClosable",!1)("clrModalStaticBackdrop",!0),e.xp6(2),e.Oqu(f.dialogTitle),e.xp6(5),e.Oqu(f.dialogContent),e.xp6(1),e.Q6J("ngSwitch",f.buttons),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2),e.xp6(1),e.Q6J("ngSwitchCase",3),e.xp6(1),e.Q6J("ngSwitchCase",4),e.xp6(1),e.Q6J("ngSwitchCase",5),e.xp6(1),e.Q6J("ngSwitchCase",6),e.xp6(1),e.Q6J("ngSwitchCase",7))},dependencies:[T.RF,T.n9,t.qvL,t.qAN,t.VLi,g.X$],styles:[".confirmation-icon-inline[_ngcontent-%COMP%]{display:inline-block}.confirmation-title[_ngcontent-%COMP%]{line-height:24px;font-size:22px;margin-top:0}.confirmation-content[_ngcontent-%COMP%]{font-size:14px;line-height:24px;display:inline-block;vertical-align:middle;width:80%;white-space:pre-wrap}.batchInfoUl[_ngcontent-%COMP%]{padding:20px;list-style-type:none}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:24px;border-bottom:1px solid #e8e8e8}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{padding-right:20px;width:240px;display:inline-block;color:#666;text-overflow:ellipsis;overflow:hidden;vertical-align:middle}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{width:220px;display:inline-block;color:#666}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;line-height:1.2em;font-size:.8em;color:#999}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}"]}),I})()},6126:(L,Z,s)=>{s.d(Z,{gB:()=>e,hm:()=>E,yb:()=>S});class e{constructor(){this.name="",this.state="",this.data={id:-1,name:"",errorInf:""},this.timeStamp=(new Date).getTime(),this.timeDiff="OPERATION.SECOND_AGO"}}function E(g,T,t,v){return g.state=T,g.data.errorInf=t,g.timeStamp=(new Date).getTime(),g}const S={progressing:"progressing",success:"success",failure:"failure",interrupt:"interrupt"}},7546:(L,Z,s)=>{s.d(Z,{TX:()=>t,f9:()=>S,he:()=>T,yg:()=>g});var e=s(8645),E=s(5879);let S=(()=>{var v;class m{constructor(){this.subjects=null,this.operationInfoSource=new e.x,this.operationInfo$=this.operationInfoSource.asObservable()}publishInfo(b){this.operationInfoSource.next(b)}}return(v=m).\u0275fac=function(b){return new(b||v)},v.\u0275prov=E.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),m})();function g(v,m){let x=window.URL.createObjectURL(v),b=document.createElement("a");document.body.appendChild(b),b.setAttribute("style","display: none"),b.href=x,b.download=m,b.click(),window.URL.revokeObjectURL(x),b.remove()}var T=function(v){return v.SUCCESS="success",v.FAILURE="failure",v.INTERRUPT="interrupt",v.PROGRESSING="progressing",v}(T||{}),t=function(v){return v.PENDING="Pending",v.RUNNING="Running",v.STOPPED="Stopped",v.ERROR="Error",v.SUCCESS="Success",v.SCHEDULED="Scheduled",v}(t||{})},1183:(L,Z,s)=>{s.d(Z,{s:()=>m});var e=s(5879),E=s(9241),S=s(6223),g=s(6814),T=s(8280),t=s(544);function v(x,b){if(1&x&&(e.TgZ(0,"div",6),e._uU(1),e.qZA()),2&x){const l=e.oxw();e.xp6(1),e.hij(" ",l.headerTitle," ")}}let m=(()=>{var x;class b{constructor(p){this.clipboardSrv=p,this.inputSize=40,this.headerTitle="Copy Input",this.defaultValue="N/A",this.iconMode=!1,this.state=0,this.onCopySuccess=new e.vpe,this.onCopyError=new e.vpe}onSuccess(p){this.state=1,this.onCopySuccess.emit(p)}onError(p){this.state=2,this.onCopyError.emit(p)}reset(){this.state=0}setPullCommendShow(){this.iconMode=!1}get isCopied(){return 1===this.state&&this.clipboardSrv?.getCurrentCopiedText()===this.defaultValue}get hasCopyError(){return 2===this.state}}return(x=b).\u0275fac=function(p){return new(p||x)(e.Y36(E.Yv))},x.\u0275cmp=e.Xpm({type:x,selectors:[["hbr-copy-input"]],inputs:{inputSize:"inputSize",headerTitle:"headerTitle",defaultValue:"defaultValue",iconMode:"iconMode"},outputs:{onCopySuccess:"onCopySuccess",onCopyError:"onCopyError"},decls:12,vars:12,consts:[["class","command-title",4,"ngIf"],["type","text","readonly","",1,"command-input",3,"size","ngModel","ngModelChange"],["inputTarget",""],["name","inputTarget1","rows","1",1,"inputTarget",3,"ngModel","cols","ngModelChange"],["inputTarget1",""],["shape","copy","size","24",1,"info-tips-icon",3,"ngxClipboard","cbOnSuccess","cbOnError"],[1,"command-title"]],template:function(p,h){if(1&p&&(e.TgZ(0,"div"),e.YNc(1,v,2,1,"div",0),e.TgZ(2,"div")(3,"span")(4,"input",1,2),e.NdJ("ngModelChange",function(O){return h.defaultValue=O}),e.qZA()(),e.TgZ(6,"span")(7,"textarea",3,4),e.NdJ("ngModelChange",function(O){return h.defaultValue=O}),e._uU(9,"            "),e.qZA()(),e.TgZ(10,"span")(11,"clr-icon",5),e.NdJ("cbOnSuccess",function(O){return h.onSuccess(O)})("cbOnError",function(O){return h.onError(O)}),e.qZA()()()()),2&p){const M=e.MAs(8);e.xp6(1),e.Q6J("ngIf",!h.iconMode),e.xp6(2),e.ekj("hide",h.iconMode),e.xp6(1),e.s9C("size",h.inputSize),e.Q6J("ngModel",h.defaultValue),e.xp6(3),e.s9C("cols",h.inputSize),e.Q6J("ngModel",h.defaultValue),e.xp6(4),e.ekj("is-success",h.isCopied)("is-error",h.hasCopyError),e.Q6J("ngxClipboard",M)}},dependencies:[S.Fj,S.JJ,S.On,g.O5,T.qvL,t.y],styles:[".commands-container[_ngcontent-%COMP%]{min-width:360px;max-width:720px;padding-left:24px}.h5-override[_ngcontent-%COMP%]{display:inline-block!important;margin-top:0!important;margin-bottom:12px}.commands-section[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:24px}.info-tips-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.command-title[_ngcontent-%COMP%]{font-size:14px}.command-input[_ngcontent-%COMP%]{font-size:14px;font-weight:500;border:0}[_nghost-%COMP%]  .dropdown-menu{min-width:360px;max-width:720px}.btn-font[_ngcontent-%COMP%]{font-size:14px!important}.hide[_ngcontent-%COMP%]{display:none}.inputTarget[_ngcontent-%COMP%]{width:1px;min-width:0;padding:0;opacity:.01}.dropdown-width[_ngcontent-%COMP%]{min-width:600px}"]}),b})()}}]);