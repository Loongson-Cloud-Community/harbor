"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[2914],{2914:($,u,c)=>{c.r(u),c.d(u,{ProjectConfigModule:()=>K});var h=c(2787),P=c(4554),e=c(5879),y=c(1575),_=c(1691),x=c(6266),g=c(2141),C=c(3555),w=c(7655),m=c(9515),p=c(6223),a=c(8280),A=c(6814),v=c(7625);const T=["cfgConfirmationDialog"],j=["dateInput"],O=["dateSystemInput"];function I(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"clr-checkbox-container",24)(1,"label")(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"clr-checkbox-wrapper")(6,"input",25),e.NdJ("ngModelChange",function(t){e.CHM(o);const n=e.oxw();return e.KtG(n.projectPolicy.ContentTrustCosign=t)}),e.qZA(),e.TgZ(7,"label",26),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"clr-checkbox-wrapper")(11,"input",27),e.NdJ("ngModelChange",function(t){e.CHM(o);const n=e.oxw();return e.KtG(n.projectPolicy.ContentTrust=t)}),e.qZA(),e.TgZ(12,"label",28),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.TgZ(15,"clr-control-helper",5),e._uU(16),e.ALo(17,"translate"),e.qZA()()}if(2&i){const o=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,8,"PROJECT_CONFIG.SECURITY")),e.xp6(3),e.Q6J("ngModel",o.projectPolicy.ContentTrustCosign)("disabled",!o.hasChangeConfigRole),e.xp6(2),e.Oqu(e.lcZ(9,10,"ACCESSORY.CO_SIGN")),e.xp6(3),e.Q6J("ngModel",o.projectPolicy.ContentTrust)("disabled",!o.hasChangeConfigRole),e.xp6(2),e.Oqu(e.lcZ(14,12,"ACCESSORY.NOTARY")),e.xp6(3),e.hij(" ",e.lcZ(17,14,"PROJECT_CONFIG.CONTENT_TRUST_POLCIY")," ")}}function Z(i,s){1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"PROJECT_CONFIG.SECURITY")))}function b(i,s){if(1&i&&(e.TgZ(0,"option",29),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const o=s.$implicit;e.Q6J("ngValue",o.severity),e.xp6(1),e.hij(" ",e.lcZ(2,2,o.severityLevel)," ")}}function L(i,s){1&i&&(e.TgZ(0,"span",53),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CVE_ALLOWLIST.WARNING_SYS")))}function E(i,s){1&i&&(e.TgZ(0,"span",53),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"CVE_ALLOWLIST.WARNING_PRO")))}function M(i,s){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,L,3,3,"span",52),e.YNc(2,E,3,3,"span",52),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.isUseSystemAllowlist()),e.xp6(1),e.Q6J("ngIf",!o.isUseSystemAllowlist())}}function S(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"div",54)(1,"clr-icon",55),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.showAddModal=!1)}),e.qZA(),e.TgZ(2,"div")(3,"clr-textarea-container",56)(4,"label"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"textarea",57),e.NdJ("ngModelChange",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.cveIds=t)}),e.qZA(),e.TgZ(8,"clr-control-helper"),e._uU(9),e.ALo(10,"translate"),e.qZA()()(),e.TgZ(11,"div")(12,"button",58),e.NdJ("click",function(){e.CHM(o);const t=e.oxw(2);return e.KtG(t.addToProjectAllowlist())}),e._uU(13),e.ALo(14,"translate"),e.qZA()()()}if(2&i){const o=e.oxw(2);e.xp6(5),e.Oqu(e.lcZ(6,5,"CVE_ALLOWLIST.ENTER")),e.xp6(2),e.Q6J("ngModel",o.cveIds),e.xp6(2),e.Oqu(e.lcZ(10,7,"CVE_ALLOWLIST.HELP")),e.xp6(3),e.Q6J("disabled",o.isDisabled()),e.xp6(1),e.hij(" ",e.lcZ(14,9,"CVE_ALLOWLIST.ADD")," ")}}function N(i,s){1&i&&(e.TgZ(0,"li",62),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CVE_ALLOWLIST.NONE")," "))}function R(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"li")(1,"a",63),e.NdJ("click",function(){const n=e.CHM(o).$implicit,r=e.oxw(3);return e.KtG(r.goToDetail(n.cve_id))}),e._uU(2),e.qZA()()}if(2&i){const o=s.$implicit;e.xp6(2),e.Oqu(o.cve_id)}}function U(i,s){if(1&i&&(e.TgZ(0,"ul",59),e.YNc(1,N,3,3,"li",60),e.YNc(2,R,3,1,"li",61),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==o.systemAllowlist||null==o.systemAllowlist.items?null:o.systemAllowlist.items.length)<1),e.xp6(1),e.Q6J("ngForOf",null==o.systemAllowlist?null:o.systemAllowlist.items)}}function J(i,s){1&i&&(e.TgZ(0,"li",62),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"CVE_ALLOWLIST.NONE")," "))}function q(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"li")(1,"a",63),e.NdJ("click",function(){const n=e.CHM(o).$implicit,r=e.oxw(3);return e.KtG(r.goToDetail(n.cve_id))}),e._uU(2),e.qZA(),e.TgZ(3,"a",64),e.NdJ("click",function(){const n=e.CHM(o).index,r=e.oxw(3);return e.KtG(r.deleteItem(n))}),e._UZ(4,"clr-icon",65),e.qZA()()}if(2&i){const o=s.$implicit;e.xp6(2),e.Oqu(o.cve_id)}}function G(i,s){if(1&i&&(e.TgZ(0,"ul",59),e.YNc(1,J,3,3,"li",60),e.YNc(2,q,5,1,"li",61),e.qZA()),2&i){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",(null==o.projectAllowlist||null==o.projectAllowlist.items?null:o.projectAllowlist.items.length)<1),e.xp6(1),e.Q6J("ngForOf",null==o.projectAllowlist?null:o.projectAllowlist.items)}}function k(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"input",66,67),e.NdJ("clrDateChange",function(t){e.CHM(o);const n=e.oxw(2);return e.KtG(n.expiresDate=t)}),e.ALo(2,"translate"),e.qZA()}if(2&i){const o=e.oxw(2);e.s9C("placeholder",e.lcZ(2,3,"CVE_ALLOWLIST.NEVER_EXPIRES")),e.Q6J("disabled",!o.hasChangeConfigRole)("clrDate",o.expiresDate)}}function V(i,s){if(1&i&&(e._UZ(0,"input",68),e.ALo(1,"translate")),2&i){const o=e.oxw(2);e.s9C("placeholder",e.lcZ(1,3,"CVE_ALLOWLIST.NEVER_EXPIRES")),e.s9C("value",o.systemExpiresDateString),e.Q6J("disabled",!o.hasChangeConfigRole)}}function Y(i,s){if(1&i){const o=e.EpF();e.TgZ(0,"div",30)(1,"label",31),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",32)(5,"div",5)(6,"div")(7,"span"),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"div")(11,"span"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"div")(15,"span"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.YNc(18,M,3,2,"div",8),e.qZA(),e.TgZ(19,"clr-radio-container",24)(20,"clr-radio-wrapper")(21,"input",33),e.NdJ("ngModelChange",function(t){e.CHM(o);const n=e.oxw();return e.KtG(n.systemAllowlistOrProjectAllowlist=t)}),e.qZA(),e.TgZ(22,"label"),e._uU(23),e.ALo(24,"translate"),e.qZA()(),e.TgZ(25,"clr-radio-wrapper")(26,"input",34),e.NdJ("ngModelChange",function(t){e.CHM(o);const n=e.oxw();return e.KtG(n.systemAllowlistOrProjectAllowlist=t)}),e.qZA(),e.TgZ(27,"label"),e._uU(28),e.ALo(29,"translate"),e.qZA()()(),e.TgZ(30,"div",35)(31,"div",36)(32,"div")(33,"button",37),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.showAddModal=!t.showAddModal)}),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"button",38),e.NdJ("click",function(){e.CHM(o);const t=e.oxw();return e.KtG(t.addSystem())}),e._uU(37),e.ALo(38,"translate"),e.qZA()(),e.YNc(39,S,15,11,"div",39),e.YNc(40,U,3,2,"ul",40),e.YNc(41,G,3,2,"ul",40),e.qZA(),e.TgZ(42,"div",41)(43,"div",42)(44,"label",43),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"div",44)(48,"input",45,46),e.NdJ("clrDateChange",function(t){e.CHM(o);const n=e.oxw();return e.KtG(n.systemExpiresDate=t)}),e.qZA(),e.YNc(50,k,3,5,"input",47),e.YNc(51,V,2,5,"input",48),e.qZA()(),e.TgZ(52,"div",49),e._UZ(53,"label",50),e.TgZ(54,"clr-checkbox-wrapper")(55,"input",51),e.NdJ("ngModelChange",function(t){e.CHM(o);const n=e.oxw();return e.KtG(n.neverExpires=t)}),e.qZA(),e.TgZ(56,"label"),e._uU(57),e.ALo(58,"translate"),e.qZA()()()()()()()}if(2&i){const o=e.oxw();e.ekj("clr-form-control-disabled",!o.hasChangeConfigRole),e.xp6(2),e.Oqu(e.lcZ(3,28,"CVE_ALLOWLIST.CVE_ALLOWLIST")),e.xp6(6),e.Oqu(e.lcZ(9,30,"CVE_ALLOWLIST.PRO_ALLOWLIST_EXPLAIN")),e.xp6(4),e.Oqu(e.lcZ(13,32,"CVE_ALLOWLIST.PRO_OR_SYS")),e.xp6(4),e.Oqu(e.lcZ(17,34,"CVE_ALLOWLIST.MERGE_INTO")),e.xp6(2),e.Q6J("ngIf",o.hasExpired),e.xp6(3),e.Q6J("ngModel",o.systemAllowlistOrProjectAllowlist),e.uIk("disabled",o.hasChangeConfigRole?null:"disabled"),e.xp6(2),e.Oqu(e.lcZ(24,36,"CVE_ALLOWLIST.SYS_ALLOWLIST")),e.xp6(3),e.Q6J("ngModel",o.systemAllowlistOrProjectAllowlist),e.uIk("disabled",o.hasChangeConfigRole?null:"disabled"),e.xp6(2),e.Oqu(e.lcZ(29,38,"CVE_ALLOWLIST.PRO_ALLOWLIST")),e.xp6(5),e.Q6J("disabled",o.isUseSystemAllowlist()||!o.hasChangeConfigRole),e.xp6(1),e.hij(" ",e.lcZ(35,40,"CVE_ALLOWLIST.ADD")," "),e.xp6(2),e.Q6J("disabled",o.isUseSystemAllowlist()||!o.hasChangeConfigRole),e.xp6(1),e.hij(" ",e.lcZ(38,42,"CVE_ALLOWLIST.ADD_SYSTEM")," "),e.xp6(2),e.Q6J("ngIf",o.showAddModal&&!o.isUseSystemAllowlist()),e.xp6(1),e.Q6J("ngIf",o.isUseSystemAllowlist()),e.xp6(1),e.Q6J("ngIf",!o.isUseSystemAllowlist()),e.xp6(4),e.Oqu(e.lcZ(46,44,"CVE_ALLOWLIST.EXPIRES_AT")),e.xp6(3),e.Q6J("clrDate",o.systemExpiresDate),e.xp6(2),e.Q6J("ngIf",!o.isUseSystemAllowlist()),e.xp6(1),e.Q6J("ngIf",o.isUseSystemAllowlist()),e.xp6(4),e.Q6J("disabled",o.isUseSystemAllowlist()||!o.hasChangeConfigRole)("checked",o.neverExpires)("ngModel",o.neverExpires),e.xp6(2),e.hij(" ",e.lcZ(58,46,"CVE_ALLOWLIST.NEVER_EXPIRES")," ")}}const d=1e3;class f{constructor(){this.Public=!1,this.ContentTrust=!1,this.ContentTrustCosign=!1,this.PreventVulImg=!1,this.PreventVulImgSeverity="low",this.ScanImgOnPush=!1,this.GenerateSbomOnPush=!1}initByProject(s){this.Public="true"===s.metadata.public,this.ContentTrust="true"===s.metadata.enable_content_trust,this.ContentTrustCosign="true"===s.metadata.enable_content_trust_cosign,this.PreventVulImg="true"===s.metadata.prevent_vul,s.metadata.severity&&(this.PreventVulImgSeverity=s.metadata.severity),this.ScanImgOnPush="true"===s.metadata.auto_scan,this.GenerateSbomOnPush="true"===s.metadata.auto_sbom_generation}}let H=(()=>{var i;class s{constructor(l,t,n,r,B,X){this.errorHandler=l,this.translate=t,this.projectService=n,this.systemInfoService=r,this.userPermission=B,this.event=X,this.onGoing=!1,this.projectName="unknown",this.isProxyCacheProject=!1,this.orgProjectPolicy=new f,this.projectPolicy=new f,this.severityOptions=[{severity:"critical",severityLevel:"VULNERABILITY.SEVERITY.CRITICAL"},{severity:"high",severityLevel:"VULNERABILITY.SEVERITY.HIGH"},{severity:"medium",severityLevel:"VULNERABILITY.SEVERITY.MEDIUM"},{severity:"low",severityLevel:"VULNERABILITY.SEVERITY.LOW"},{severity:"none",severityLevel:"VULNERABILITY.SEVERITY.NONE"}],this.userSystemAllowlist=!0,this.showAddModal=!1,this.userProjectAllowlist=!1}ngOnInit(){this.projectId?(this.systemInfoService.getSystemInfo().subscribe(l=>{this.systemInfo=l,setTimeout(()=>{this.dateSystemInput.nativeElement.parentNode.setAttribute("hidden","hidden")},100)},l=>this.errorHandler.error(l)),this.retrieve(),this.getPermission(),this.getSystemAllowlist()):this.errorHandler.error("Project ID cannot be unset.")}getSystemAllowlist(){this.systemInfoService.getSystemAllowlist().subscribe(l=>{l&&(this.systemAllowlist=l,this.systemAllowlist.expires_at&&(this.systemExpiresDate=new Date(this.systemAllowlist.expires_at*d),setTimeout(()=>{this.systemExpiresDateString=this.dateSystemInput.nativeElement.value},100)))},l=>{this.errorHandler.error(l)})}getPermission(){this.userPermission.getPermission(this.projectId,g._W.CONFIGURATION.KEY,g._W.CONFIGURATION.VALUE.UPDATE).subscribe(l=>{this.hasChangeConfigRole=l})}retrieve(l){this.projectService.getProject(this.projectId).subscribe(t=>{this.orgProjectPolicy.initByProject(t),this.projectPolicy.initByProject(t),t.cve_allowlist||(t.cve_allowlist={items:[],expires_at:null}),t.cve_allowlist.items||(t.cve_allowlist.items=[]),t.cve_allowlist.expires_at||(t.cve_allowlist.expires_at=null),t.metadata.reuse_sys_cve_allowlist||(t.metadata.reuse_sys_cve_allowlist="true"),t&&t.cve_allowlist&&(this.projectAllowlist=(0,_.d9)(t.cve_allowlist),this.projectAllowlistOrigin=(0,_.d9)(t.cve_allowlist),this.systemAllowlistOrProjectAllowlist=t.metadata.reuse_sys_cve_allowlist,this.systemAllowlistOrProjectAllowlistOrigin=t.metadata.reuse_sys_cve_allowlist)},t=>this.errorHandler.error(t))}refresh(){this.retrieve(),this.event.publish(C.n.REFRESH_PROJECT_INFO)}isValid(){let l=!1;return(!this.projectPolicy.PreventVulImg||this.severityOptions.some(t=>t.severity===this.projectPolicy.PreventVulImgSeverity))&&(l=!0),l}hasChanges(){return!(0,_.jy)(this.orgProjectPolicy,this.projectPolicy)}save(){!this.hasChanges()&&!this.hasAllowlistChanged||(this.onGoing=!0,this.projectService.updateProjectPolicy(this.projectId,this.projectPolicy,this.systemAllowlistOrProjectAllowlist,this.projectAllowlist).subscribe(()=>{this.onGoing=!1,this.translate.get("CONFIG.SAVE_SUCCESS").subscribe(l=>{this.errorHandler.info(l)}),this.refresh()},l=>{this.onGoing=!1,this.errorHandler.error(l)}))}cancel(){let l=new x.c("CONFIG.CONFIRM_TITLE","CONFIG.CONFIRM_SUMMARY","",{},10);this.confirmationDlg.open(l)}reset(){this.projectPolicy=(0,_.d9)(this.orgProjectPolicy)}confirmCancel(l){l&&10===l.source&&1===l.state&&(this.reset(),this.hasAllowlistChanged&&(this.projectAllowlist=(0,_.d9)(this.projectAllowlistOrigin),this.systemAllowlistOrProjectAllowlist=this.systemAllowlistOrProjectAllowlistOrigin))}isUseSystemAllowlist(){return"true"===this.systemAllowlistOrProjectAllowlist}deleteItem(l){this.projectAllowlist.items.splice(l,1)}addSystem(){if(this.showAddModal=!1,!(this.systemAllowlist&&this.systemAllowlist.items&&this.systemAllowlist.items.length>0))return;this.projectAllowlist&&!this.projectAllowlist.items&&(this.projectAllowlist.items=[]);let l={};this.projectAllowlist.items.forEach(t=>{l[t.cve_id]=!0}),this.systemAllowlist.items.forEach(t=>{l[t.cve_id]||(l[t.cve_id]=!0,this.projectAllowlist.items.push(t))})}addToProjectAllowlist(){this.projectAllowlist&&!this.projectAllowlist.items&&(this.projectAllowlist.items=[]);let l={};this.projectAllowlist.items.forEach(t=>{l[t.cve_id]=!0}),this.cveIds.split(/[\n,]+/).forEach(t=>{let n={};n.cve_id=t.trim(),l[n.cve_id]||(l[n.cve_id]=!0,this.projectAllowlist.items.push(n))}),this.cveIds=null,this.showAddModal=!1}get hasAllowlistChanged(){return!((0,_.jy)(this.projectAllowlist,this.projectAllowlistOrigin)&&this.systemAllowlistOrProjectAllowlistOrigin===this.systemAllowlistOrProjectAllowlist)}isDisabled(){let l=this.cveIds;return!(l&&l.trim())}get expiresDate(){if("true"===this.systemAllowlistOrProjectAllowlist){if(this.systemAllowlist&&this.systemAllowlist.expires_at)return new Date(this.systemAllowlist.expires_at*d)}else if(this.projectAllowlist&&this.projectAllowlist.expires_at)return new Date(this.projectAllowlist.expires_at*d);return null}set expiresDate(l){"false"===this.systemAllowlistOrProjectAllowlist&&this.projectAllowlist&&l&&(this.projectAllowlist.expires_at=Math.floor(l.getTime()/d))}get neverExpires(){if("true"===this.systemAllowlistOrProjectAllowlist){if(this.systemAllowlist&&this.systemAllowlist.expires_at)return!(this.systemAllowlist&&this.systemAllowlist.expires_at)}else if(this.projectAllowlist&&this.projectAllowlist.expires_at)return!(this.projectAllowlist&&this.projectAllowlist.expires_at);return!0}set neverExpires(l){l?(this.projectAllowlist.expires_at=null,this.systemInfoService.resetDateInput(this.dateInput)):this.projectAllowlist.expires_at=Math.floor((new Date).getTime()/d)}get hasExpired(){if("true"===this.systemAllowlistOrProjectAllowlist){if(this.systemAllowlist&&this.systemAllowlist.expires_at)return(new Date).getTime()>this.systemAllowlist.expires_at*d}else if(this.projectAllowlistOrigin&&this.projectAllowlistOrigin.expires_at)return(new Date).getTime()>this.projectAllowlistOrigin.expires_at*d;return!1}goToDetail(l){window.open(`https://nvd.nist.gov/vuln/detail/${l}`,"_blank")}}return(i=s).\u0275fac=function(l){return new(l||i)(e.Y36(w.q),e.Y36(m.sK),e.Y36(g.Y4),e.Y36(g.Ob),e.Y36(g.Hx),e.Y36(C.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hbr-project-policy-config"]],viewQuery:function(l,t){if(1&l&&(e.Gf(T,5),e.Gf(j,5),e.Gf(O,5)),2&l){let n;e.iGM(n=e.CRH())&&(t.confirmationDlg=n.first),e.iGM(n=e.CRH())&&(t.dateInput=n.first),e.iGM(n=e.CRH())&&(t.dateSystemInput=n.first)}},inputs:{projectId:"projectId",projectName:"projectName",isProxyCacheProject:"isProxyCacheProject",hasSignedIn:"hasSignedIn",hasProjectAdminRole:"hasProjectAdminRole"},decls:70,vars:58,consts:[[1,"clr-form","clr-form-horizontal"],["projectPolicyForm","ngForm"],[1,"form-block"],["id","clr-wrapper-public"],["type","checkbox","id","clr-checkbox-wrapper-public","clrCheckbox","","name","public",3,"ngModel","disabled","ngModelChange"],[1,"config-subtext"],["clrInline","",4,"ngIf"],["id","prevent-vulenrability-image",1,"margin-top-05"],[4,"ngIf"],["type","checkbox","clrCheckbox","","name","prevent-vulenrability-image-input",3,"ngModel","disabled","ngModelChange"],[1,"chk-explain"],["id","severity-blk"],[1,"clr-select-wrapper"],["id","severity","name","severity",1,"clr-select",3,"ngModel","disabled","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],["id","scan-image-on-push-wrapper"],["type","checkbox","clrCheckbox","","name","scan-image-on-push",3,"ngModel","disabled","ngModelChange"],["id","generate-sbom-on-push-wrapper"],["type","checkbox","clrCheckbox","","name","generate-sbom-on-push",3,"ngModel","disabled","ngModelChange"],["class","clr-form-control",3,"clr-form-control-disabled",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-outline",3,"disabled","click"],[3,"confirmAction"],["cfgConfirmationDialog",""],["clrInline",""],["id","content-trust-cosign","type","checkbox","clrCheckbox","","name","content-trust-cosign",3,"ngModel","disabled","ngModelChange"],["for","content-trust-cosign"],["id","content-trust","type","checkbox","clrCheckbox","","name","content-trust",3,"ngModel","disabled","ngModelChange"],["for","content-trust"],[3,"ngValue"],[1,"clr-form-control"],[1,"clr-control-label"],[1,"w-100","clr-control-container"],["id","use-system","type","radio","clrRadio","","name","systemAllowlistOrProjectAllowlist","required","","value","true",3,"ngModel","ngModelChange"],["id","use-project","type","radio","clrRadio","","name","systemAllowlistOrProjectAllowlist","required","","value","false",3,"ngModel","ngModelChange"],[1,"clr-row","width-90per"],[1,"clr-col","position-relative","col-flex-grow-0"],["id","show-add-modal",1,"btn","btn-link",3,"disabled","click"],["id","add-system",1,"btn","btn-link","ml-1",3,"disabled","click"],["class","add-modal add-modal-dark",4,"ngIf"],["class","allowlist-window",4,"ngIf"],[1,"clr-col","padding-top-16","pl-2"],[1,"clr-row","expire-data"],[1,"bottom-line","bottom-line-project-config","clr-col-3"],[1,"underline"],["readonly","","type","date",3,"clrDate","clrDateChange"],["dateSystemInput",""],["readonly","","type","date","newFormLayout","true",3,"disabled","placeholder","clrDate","clrDateChange",4,"ngIf"],["clrInput","","readonly","","type","text",3,"disabled","placeholder","value",4,"ngIf"],[1,"clr-row"],["for","neverExpires",1,"clr-col-3"],["type","checkbox","clrCheckbox","","name","neverExpires","id","neverExpires",3,"disabled","checked","ngModel","ngModelChange"],["class","label label-warning",4,"ngIf"],[1,"label","label-warning"],[1,"add-modal","add-modal-dark"],["shape","window-close",1,"float-lg-right","margin-top-4",3,"click"],[1,"flex-direction-column"],["id","allowlist-textarea","clrTextarea","","name","cveIds",1,"w-100",3,"ngModel","ngModelChange"],["id","add-to-allowlist",1,"btn","btn-link",3,"disabled","click"],[1,"allowlist-window"],["class","none",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"none"],["href","javascript:void(0)",3,"click"],["href","javascript:void(0)",1,"float-lg-right",3,"click"],["shape","times-circle"],["readonly","","type","date","newFormLayout","true",3,"disabled","placeholder","clrDate","clrDateChange"],["dateInput",""],["clrInput","","readonly","","type","text",3,"disabled","placeholder","value"]],template:function(l,t){1&l&&(e.TgZ(0,"form",0,1)(2,"section",2)(3,"clr-checkbox-container",3)(4,"label"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"clr-checkbox-wrapper")(8,"input",4),e.NdJ("ngModelChange",function(r){return t.projectPolicy.Public=r}),e.qZA(),e.TgZ(9,"label"),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.TgZ(12,"clr-control-helper",5),e._uU(13),e.ALo(14,"translate"),e.qZA()(),e.YNc(15,I,18,16,"clr-checkbox-container",6),e.TgZ(16,"clr-checkbox-container",7)(17,"label"),e.YNc(18,Z,3,3,"span",8),e.qZA(),e.TgZ(19,"clr-checkbox-wrapper")(20,"input",9),e.NdJ("ngModelChange",function(r){return t.projectPolicy.PreventVulImg=r}),e.qZA(),e.TgZ(21,"label"),e._uU(22),e.ALo(23,"translate"),e.qZA()(),e.TgZ(24,"clr-control-helper",5)(25,"div",10)(26,"label",5)(27,"div",11)(28,"div"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"div",12)(32,"select",13),e.NdJ("ngModelChange",function(r){return t.projectPolicy.PreventVulImgSeverity=r}),e.YNc(33,b,3,4,"option",14),e.qZA()(),e.TgZ(34,"div"),e._uU(35),e.ALo(36,"translate"),e.qZA()()()()()(),e.TgZ(37,"clr-checkbox-container")(38,"label"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"clr-checkbox-wrapper",15)(42,"input",16),e.NdJ("ngModelChange",function(r){return t.projectPolicy.ScanImgOnPush=r}),e.qZA(),e.TgZ(43,"label"),e._uU(44),e.ALo(45,"translate"),e.qZA()(),e.TgZ(46,"clr-control-helper",5),e._uU(47),e.ALo(48,"translate"),e.qZA()(),e.TgZ(49,"clr-checkbox-container")(50,"label"),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.TgZ(53,"clr-checkbox-wrapper",17)(54,"input",18),e.NdJ("ngModelChange",function(r){return t.projectPolicy.GenerateSbomOnPush=r}),e.qZA(),e.TgZ(55,"label"),e._uU(56),e.ALo(57,"translate"),e.qZA()(),e.TgZ(58,"clr-control-helper",5),e._uU(59),e.ALo(60,"translate"),e.qZA()(),e.YNc(61,Y,59,48,"div",19),e.TgZ(62,"button",20),e.NdJ("click",function(){return t.save()}),e._uU(63),e.ALo(64,"translate"),e.qZA(),e.TgZ(65,"button",21),e.NdJ("click",function(){return t.cancel()}),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"confirmation-dialog",22,23),e.NdJ("confirmAction",function(r){return t.confirmCancel(r)}),e.qZA()()()),2&l&&(e.xp6(5),e.Oqu(e.lcZ(6,30,"PROJECT_CONFIG.REGISTRY")),e.xp6(3),e.Q6J("ngModel",t.projectPolicy.Public)("disabled",!t.hasChangeConfigRole),e.xp6(2),e.Oqu(e.lcZ(11,32,"PROJECT_CONFIG.PUBLIC_TOGGLE")),e.xp6(3),e.hij(" ",e.lcZ(14,34,"PROJECT_CONFIG.PUBLIC_POLICY")," "),e.xp6(2),e.Q6J("ngIf",!t.isProxyCacheProject),e.xp6(3),e.Q6J("ngIf",!!t.isProxyCacheProject),e.xp6(2),e.Q6J("ngModel",t.projectPolicy.PreventVulImg)("disabled",!t.hasChangeConfigRole),e.xp6(2),e.Oqu(e.lcZ(23,36,"PROJECT_CONFIG.PREVENT_VULNERABLE_TOGGLE")),e.xp6(7),e.hij(" ",e.lcZ(30,38,"PROJECT_CONFIG.PREVENT_VULNERABLE_1")," "),e.xp6(3),e.Q6J("ngModel",t.projectPolicy.PreventVulImgSeverity)("disabled",!t.projectPolicy.PreventVulImg),e.xp6(1),e.Q6J("ngForOf",t.severityOptions),e.xp6(2),e.hij(" ",e.lcZ(36,40,"PROJECT_CONFIG.PREVENT_VULNERABLE_2")," "),e.xp6(4),e.Oqu(e.lcZ(40,42,"PROJECT_CONFIG.SCAN")),e.xp6(3),e.Q6J("ngModel",t.projectPolicy.ScanImgOnPush)("disabled",!t.hasChangeConfigRole),e.xp6(2),e.Oqu(e.lcZ(45,44,"PROJECT_CONFIG.AUTOSCAN_TOGGLE")),e.xp6(3),e.hij(" ",e.lcZ(48,46,"PROJECT_CONFIG.AUTOSCAN_POLICY")," "),e.xp6(4),e.Oqu(e.lcZ(52,48,"PROJECT_CONFIG.SBOM")),e.xp6(3),e.Q6J("ngModel",t.projectPolicy.GenerateSbomOnPush)("disabled",!t.hasChangeConfigRole),e.xp6(2),e.Oqu(e.lcZ(57,50,"PROJECT_CONFIG.AUTOSBOM_TOGGLE")),e.xp6(3),e.hij(" ",e.lcZ(60,52,"PROJECT_CONFIG.AUTOSBOM_POLICY")," "),e.xp6(2),e.Q6J("ngIf",t.systemInfo),e.xp6(1),e.Q6J("disabled",!((t.isValid()&&t.hasChanges()||t.hasAllowlistChanged)&&t.hasChangeConfigRole)),e.xp6(1),e.hij(" ",e.lcZ(64,54,"BUTTON.SAVE")," "),e.xp6(2),e.Q6J("disabled",!((t.isValid()&&t.hasChanges()||t.hasAllowlistChanged)&&t.hasChangeConfigRole)),e.xp6(1),e.hij(" ",e.lcZ(67,56,"BUTTON.CANCEL")," "))},dependencies:[p._Y,p.YN,p.Kr,p.Fj,p.Wl,p.EJ,p._,p.JJ,p.JL,p.Q7,p.On,p.F,a.qvL,a.MgK,a.CM6,a.KKC,a.Y_4,a.PEh,a.Tsp,a.ZJg,a.xRP,a.asN,a.DAq,a.EeQ,a.XE5,a.LAP,A.sg,A.O5,v.z,m.X$],styles:["#severity-blk[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block}.select[_ngcontent-%COMP%]{width:120px}.margin-top-4[_ngcontent-%COMP%]{margin-top:4px}.allowlist-window[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:3px;padding:12px;height:224px;width:270px;overflow-y:auto}.allowlist-window[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{height:24px;line-height:24px;list-style-type:none}.width-90per[_ngcontent-%COMP%]{width:90%}.none[_ngcontent-%COMP%]{color:#ccc}.underline[_ngcontent-%COMP%]{border-bottom:1px solid}.color-0079bb[_ngcontent-%COMP%]{color:#0079bb}.padding-top-16[_ngcontent-%COMP%]{padding-top:16px}.position-relative[_ngcontent-%COMP%]{position:relative}.add-modal[_ngcontent-%COMP%]{position:absolute;padding:0 8px}.add-modal[_ngcontent-%COMP%]   .flex-direction-column[_ngcontent-%COMP%]{flex-direction:column}.add-modal[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;border:1px solid}.add-modal[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}.hand[_ngcontent-%COMP%]{cursor:pointer;margin:0}.config-subtext[_ngcontent-%COMP%]{font-size:.55rem;line-height:1.2rem;font-weight:300}.col-flex-grow-0[_ngcontent-%COMP%]{flex-grow:0}.expire-data[_ngcontent-%COMP%]{min-width:12.5rem;margin-top:-1rem}.bottom-line[_ngcontent-%COMP%]{display:flex;flex-direction:column-reverse;font-size:13px;color:#000}.margin-top-05[_ngcontent-%COMP%]{margin-top:.5rem}"]}),s})();const W=[{path:"",component:(()=>{var i;class s{constructor(l,t,n){this.route=l,this.router=t,this.session=n,this.isProxyCacheProject=!1}ngOnInit(){this.projectId=+this.route.snapshot.parent.parent.params.id,this.currentUser=this.session.getCurrentUser(),this.hasSignedIn=null!==this.session.getCurrentUser();let l=this.route.snapshot.parent.parent.data;if(l){let t=l.projectResolver;this.projectName=t.name,t.registry_id&&(this.isProxyCacheProject=!0)}}}return(i=s).\u0275fac=function(l){return new(l||i)(e.Y36(h.gz),e.Y36(h.F0),e.Y36(y.m))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-project-config"]],decls:3,vars:4,consts:[[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","config-top"],[3,"projectId","projectName","isProxyCacheProject","hasSignedIn"]],template:function(l,t){1&l&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"hbr-project-policy-config",2),e.qZA()()),2&l&&(e.xp6(2),e.Q6J("projectId",t.projectId)("projectName",t.projectName)("isProxyCacheProject",t.isProxyCacheProject)("hasSignedIn",t.hasSignedIn))},dependencies:[H],styles:[".config-top[_ngcontent-%COMP%]{top:8px}"]}),s})()}];let K=(()=>{var i;class s{}return(i=s).\u0275fac=function(l){return new(l||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[h.Bz.forChild(W),P.m]}),s})()}}]);