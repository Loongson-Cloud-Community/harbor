"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[4771],{2383:(w,P,s)=>{s.d(P,{L:()=>n});var e=s(9862),A=s(3586),h=s(2181),d=s(7398),t=s(5879),M=s(9462);let n=(()=>{var v;class C extends A.b{constructor(r,o){super(r,o)}listScannersResponse(r){let o=this.newParams(),i=new e.WM;null!=r.sort&&(o=o.set("sort",r.sort.toString())),null!=r.q&&(o=o.set("q",r.q.toString())),null!=r.pageSize&&(o=o.set("page_size",r.pageSize.toString())),null!=r.page&&(o=o.set("page",r.page.toString())),null!=r.XRequestId&&(i=i.set("X-Request-Id",r.XRequestId.toString()));let c=new e.aW("GET",this.rootUrl+"/scanners",null,{headers:i,params:o,responseType:"json"});return this.http.request(c).pipe((0,h.h)(g=>g instanceof e.Zn),(0,d.U)(g=>g))}listScanners(r){return this.listScannersResponse(r).pipe((0,d.U)(o=>o.body))}createScannerResponse(r){let o=this.newParams(),i=new e.WM,l=null;l=r.registration,null!=r.XRequestId&&(i=i.set("X-Request-Id",r.XRequestId.toString()));let c=new e.aW("POST",this.rootUrl+"/scanners",l,{headers:i,params:o,responseType:"json"});return this.http.request(c).pipe((0,h.h)(g=>g instanceof e.Zn),(0,d.U)(g=>g))}createScanner(r){return this.createScannerResponse(r).pipe((0,d.U)(o=>o.body))}pingScannerResponse(r){let o=this.newParams(),i=new e.WM,l=null;l=r.settings,null!=r.XRequestId&&(i=i.set("X-Request-Id",r.XRequestId.toString()));let c=new e.aW("POST",this.rootUrl+"/scanners/ping",l,{headers:i,params:o,responseType:"json"});return this.http.request(c).pipe((0,h.h)(g=>g instanceof e.Zn),(0,d.U)(g=>g))}pingScanner(r){return this.pingScannerResponse(r).pipe((0,d.U)(o=>o.body))}getScannerResponse(r){let o=this.newParams(),i=new e.WM;null!=r.XRequestId&&(i=i.set("X-Request-Id",r.XRequestId.toString()));let c=new e.aW("GET",this.rootUrl+`/scanners/${r.registrationId}`,null,{headers:i,params:o,responseType:"json"});return this.http.request(c).pipe((0,h.h)(g=>g instanceof e.Zn),(0,d.U)(g=>g))}getScanner(r){return this.getScannerResponse(r).pipe((0,d.U)(o=>o.body))}updateScannerResponse(r){let o=this.newParams(),i=new e.WM,l=null;l=r.registration,null!=r.XRequestId&&(i=i.set("X-Request-Id",r.XRequestId.toString()));let c=new e.aW("PUT",this.rootUrl+`/scanners/${r.registrationId}`,l,{headers:i,params:o,responseType:"json"});return this.http.request(c).pipe((0,h.h)(g=>g instanceof e.Zn),(0,d.U)(g=>g))}updateScanner(r){return this.updateScannerResponse(r).pipe((0,d.U)(o=>o.body))}deleteScannerResponse(r){let o=this.newParams(),i=new e.WM;null!=r.XRequestId&&(i=i.set("X-Request-Id",r.XRequestId.toString()));let c=new e.aW("DELETE",this.rootUrl+`/scanners/${r.registrationId}`,null,{headers:i,params:o,responseType:"json"});return this.http.request(c).pipe((0,h.h)(g=>g instanceof e.Zn),(0,d.U)(g=>g))}deleteScanner(r){return this.deleteScannerResponse(r).pipe((0,d.U)(o=>o.body))}setScannerAsDefaultResponse(r){let o=this.newParams(),i=new e.WM,l=null;l=r.payload,null!=r.XRequestId&&(i=i.set("X-Request-Id",r.XRequestId.toString()));let c=new e.aW("PATCH",this.rootUrl+`/scanners/${r.registrationId}`,l,{headers:i,params:o,responseType:"json"});return this.http.request(c).pipe((0,h.h)(g=>g instanceof e.Zn),(0,d.U)(g=>g))}setScannerAsDefault(r){return this.setScannerAsDefaultResponse(r).pipe((0,d.U)(o=>o.body))}getScannerMetadataResponse(r){let o=this.newParams(),i=new e.WM;null!=r.XRequestId&&(i=i.set("X-Request-Id",r.XRequestId.toString()));let c=new e.aW("GET",this.rootUrl+`/scanners/${r.registrationId}/metadata`,null,{headers:i,params:o,responseType:"json"});return this.http.request(c).pipe((0,h.h)(g=>g instanceof e.Zn),(0,d.U)(g=>g))}getScannerMetadata(r){return this.getScannerMetadataResponse(r).pipe((0,d.U)(o=>o.body))}}return(v=C).listScannersPath="/scanners",v.createScannerPath="/scanners",v.pingScannerPath="/scanners/ping",v.getScannerPath="/scanners/{registration_id}",v.updateScannerPath="/scanners/{registration_id}",v.deleteScannerPath="/scanners/{registration_id}",v.setScannerAsDefaultPath="/scanners/{registration_id}",v.getScannerMetadataPath="/scanners/{registration_id}/metadata",v.\u0275fac=function(r){return new(r||v)(t.LFG(M.p),t.LFG(e.eN))},v.\u0275prov=t.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),C})()},5205:(w,P,s)=>{s.d(P,{K2:()=>n,RH:()=>v,VK:()=>t,ee:()=>e,wm:()=>L,yt:()=>C});class e{constructor(o,i){this.value=o,this.editable=i}}class A{constructor(o,i){this.value=o,this.editable=i}}class h{constructor(o,i){this.value=o,this.editable=i}}class d{constructor(o,i){this.value=o,this.editable=i}}class t{constructor(){this.auth_mode=new e("db_auth",!0),this.primary_auth_mode=new h(!1,!0),this.project_creation_restriction=new e("everyone",!0),this.self_registration=new h(!1,!0),this.ldap_base_dn=new e("",!0),this.ldap_filter=new e("",!0),this.ldap_scope=new A(0,!0),this.ldap_search_dn=new e("",!0),this.ldap_search_password=new e("",!0),this.ldap_timeout=new A(5,!0),this.ldap_uid=new e("",!0),this.ldap_url=new e("",!0),this.ldap_verify_cert=new h(!0,!0),this.ldap_group_base_dn=new e("",!0),this.ldap_group_search_filter=new e("",!0),this.ldap_group_attribute_name=new e("",!0),this.ldap_group_search_scope=new A(0,!0),this.ldap_group_membership_attribute=new e("",!0),this.ldap_group_admin_dn=new e("",!0),this.uaa_client_id=new e("",!0),this.uaa_client_secret=new e("",!0),this.uaa_endpoint=new e("",!0),this.uaa_verify_cert=new h(!1,!0),this.email_host=new e("",!0),this.email_identity=new e("",!0),this.email_from=new e("",!0),this.email_port=new A(25,!0),this.email_ssl=new h(!1,!0),this.email_username=new e("",!0),this.email_password=new e("",!0),this.email_insecure=new h(!1,!0),this.token_expiration=new A(30,!0),this.robot_name_prefix=new e("",!0),this.robot_token_duration=new A(30,!0),this.cfg_expiration=new A(30,!0),this.verify_remote_cert=new h(!1,!0),this.scan_all_policy=new d({type:"daily",parameter:{daily_time:0}},!0),this.read_only=new h(!1,!0),this.notification_enable=new h(!1,!0),this.http_authproxy_admin_groups=new e("",!0),this.http_authproxy_endpoint=new e("",!0),this.http_authproxy_tokenreview_endpoint=new e("",!0),this.http_authproxy_verify_cert=new h(!1,!0),this.http_authproxy_skip_search=new h(!1,!0),this.oidc_name=new e("",!0),this.oidc_endpoint=new e("",!0),this.oidc_client_id=new e("",!0),this.oidc_client_secret=new e("",!0),this.oidc_verify_cert=new h(!1,!0),this.oidc_auto_onboard=new h(!1,!0),this.oidc_scope=new e("",!0),this.oidc_groups_claim=new e("",!0),this.oidc_admin_group=new e("",!0),this.oidc_group_filter=new e("",!0),this.oidc_user_claim=new e("",!0),this.count_per_project=new A(-1,!0),this.storage_per_project=new A(-1,!0),this.audit_log_forward_endpoint=new e("",!0),this.skip_audit_log_database=new h(!1,!0),this.session_timeout=new A(60,!0),this.scanner_skip_update_pulltime=new h(!1,!0),this.banner_message=new e(JSON.stringify(new v),!0)}}var n=function(r){return r.MANUAL="Manual",r.SCHEDULE="Schedule",r.EVENT="Event",r}(n||{});class v{constructor(){this.closable=!1}}var C=function(r){return r.SUCCESS="success",r.INFO="info",r.WARNING="warning",r.ERROR="danger",r}(C||{});const L={[C.SUCCESS]:"BANNER_MESSAGE.SUCCESS",[C.INFO]:"BANNER_MESSAGE.INFO",[C.WARNING]:"BANNER_MESSAGE.WARNING",[C.ERROR]:"BANNER_MESSAGE.DANGER"}},5413:(w,P,s)=>{s.d(P,{f:()=>e});const e="https://goharbor.io/blog/harbor-1.10-release/#vulnerability-scanning-with-pluggable-scanners"},3179:(w,P,s)=>{s.d(P,{GL:()=>h,If:()=>t,Iz:()=>d,SF:()=>v,d4:()=>C,gX:()=>L,i4:()=>M,og:()=>A,ur:()=>n});var e=s(1691);const A=[{severity:"Critical",severityLevel:"VULNERABILITY.SEVERITY.CRITICAL"},{severity:"High",severityLevel:"VULNERABILITY.SEVERITY.HIGH"},{severity:"Medium",severityLevel:"VULNERABILITY.SEVERITY.MEDIUM"},{severity:"Low",severityLevel:"VULNERABILITY.SEVERITY.LOW"},{severity:"Unknown",severityLevel:"UNKNOWN"},{severity:"None",severityLevel:"VULNERABILITY.SEVERITY.NONE"}];var h=function(r){return r.ALL="all",r.CVE_ID="cve_id",r.SEVERITY="severity",r.CVSS3="cvss_score_v3",r.REPO="repository_name",r.PACKAGE="package",r.TAG="tag",r.PROJECT_ID="project_id",r.DIGEST="digest",r}(h||{});const d={[h.ALL]:"SECURITY_HUB.OPTION_ALL",[h.CVE_ID]:"SECURITY_HUB.CVE_ID",[h.SEVERITY]:"VULNERABILITY.GRID.COLUMN_SEVERITY",[h.CVSS3]:"VULNERABILITY.GRID.CVSS3",[h.REPO]:"SECURITY_HUB.REPO_NAME",[h.PACKAGE]:"VULNERABILITY.GRID.COLUMN_PACKAGE",[h.TAG]:"REPLICATION.TAG",[h.PROJECT_ID]:"SECURITY_HUB.OPTION_PROJECT_ID_NAME",[h.DIGEST]:"P2P_PROVIDER.DIGEST"},t="vulnerabilities";function M(r){switch(r){case e.AT.CRITICAL:return"VULNERABILITY.SEVERITY.CRITICAL";case e.AT.HIGH:return"VULNERABILITY.SEVERITY.HIGH";case e.AT.MEDIUM:return"VULNERABILITY.SEVERITY.MEDIUM";case e.AT.LOW:return"VULNERABILITY.SEVERITY.LOW";case e.AT.NONE:return"VULNERABILITY.SEVERITY.NONE";default:return"UNKNOWN"}}function n(r,o,i){const l=o?.split("/")[0];return["/harbor/projects",r,"repositories",l?o?.substring(l.length+1):o,"artifacts-tab","artifacts",i]}function v(r,o){const i=o?.split("/")[0];return["/harbor/projects",r,"repositories",i?o?.substring(i.length+1):o]}const C=/^([0-9]|10)(\.\d)?$/;var L=function(r){return r.CRITICAL="#FF4D2E",r.HIGH="#FF8F3D",r.MEDIUM="#FFCE66",r.LOW="#FFF1AD",r.NONE="#2EC0FF",r.NA="gray",r}(L||{})},3109:(w,P,s)=>{s.d(P,{D:()=>e});const e={USER_PROFILE:"USER_PROFILE",CHANGE_PWD:"CHANGE_PWD",ABOUT:"ABOUT"}},9221:(w,P,s)=>{s.d(P,{f:()=>L});var e=s(5879),A=s(6682),h=s(5948),d=s(6814),t=s(8280),M=s(2787),n=s(9515);function v(r,o){1&r&&(e.TgZ(0,"div")(1,"p",9),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"p",9)(5,"a",10),e._uU(6),e.ALo(7,"translate"),e.qZA()()()),2&r&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"ABOUT.COPYRIGHT")),e.xp6(4),e.Oqu(e.lcZ(7,4,"ABOUT.OPEN_SOURCE_LICENSE")))}function C(r,o){if(1&r&&(e.TgZ(0,"div")(1,"p",9),e._uU(2),e.qZA()()),2&r){const i=e.oxw();e.xp6(2),e.Oqu(i.customIntroduction)}}let L=(()=>{var r;class o{constructor(l,c){this.appConfigService=l,this.skinableConfig=c,this.opened=!1,this.build="4276418"}ngOnInit(){let l=this.skinableConfig.getSkinConfig();l&&l.product&&(this.customLogo=l.product.logo,this.customName=l.product.name,this.customIntroduction=l.product.introduction)}get version(){return this.appConfigService.getConfig().harbor_version}open(){this.opened=!0}close(){this.opened=!1}}return(r=o).\u0275fac=function(l){return new(l||r)(e.Y36(A._),e.Y36(h.s))},r.\u0275cmp=e.Xpm({type:r,selectors:[["about-dialog"]],decls:18,vars:16,consts:[[3,"clrModalOpen","clrModalClosable","clrModalStaticBackdrop","clrModalOpenChange"],[1,"modal-body","dialog-body"],[1,"harbor-logo-black"],[1,"harbor-icon",3,"src"],["tabindex","1",1,"content"],[1,"p5","about-version"],[4,"ngIf"],[1,"modal-footer","margin-left-override"],["type","button",1,"btn","btn-primary",3,"click"],[1,"p5"],["routerLink","/license","target","_blank","rel","noopener noreferrer"]],template:function(l,c){1&l&&(e.TgZ(0,"clr-modal",0),e.NdJ("clrModalOpenChange",function(Z){return c.opened=Z}),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA(),e.TgZ(4,"div",4)(5,"div"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"div")(9,"span",5),e._uU(10),e.ALo(11,"translate"),e.qZA()(),e.YNc(12,v,8,6,"div",6),e.YNc(13,C,3,1,"div",6),e.qZA()(),e.TgZ(14,"div",7)(15,"button",8),e.NdJ("click",function(){return c.close()}),e._uU(16),e.ALo(17,"translate"),e.qZA()()()),2&l&&(e.Q6J("clrModalOpen",c.opened)("clrModalClosable",!1)("clrModalStaticBackdrop",!1),e.xp6(3),e.Q6J("src",c.customLogo?"images/"+c.customLogo:"images/harbor-logo.svg",e.LSH),e.xp6(3),e.hij(" ",c.customName?c.customName:e.lcZ(7,10,"APP_TITLE.HARBOR")," "),e.xp6(4),e.AsE("",e.lcZ(11,12,"ABOUT.VERSION")," ",c.version,""),e.xp6(2),e.Q6J("ngIf",!c.customIntroduction),e.xp6(1),e.Q6J("ngIf",c.customIntroduction),e.xp6(3),e.hij(" ",e.lcZ(17,14,"BUTTON.CLOSE")," "))},dependencies:[d.O5,t.qAN,t.VLi,M.rH,n.X$],styles:[".about-version[_ngcontent-%COMP%]{font-size:14px;color:#565656;font-weight:500}.dialog-body[_ngcontent-%COMP%]{display:flex;padding-left:0}.content[_ngcontent-%COMP%]{margin:0 10px 10px;outline:none;width:470px}.harbor-icon[_ngcontent-%COMP%]{width:56px;filter:drop-shadow(rgb(0,0,0) 58px 2px)}.harbor-logo-black[_ngcontent-%COMP%]{width:60px;overflow:hidden}"]}),o})()},8488:(w,P,s)=>{s.d(P,{y:()=>J});var e=s(5413),A=s(1691),h=s(9315),d=s(9788),t=s(27),M=s(5205),n=s(5879),v=s(1575),C=s(2383),L=s(2787),r=s(6376),o=s(9483),i=s(6682),l=s(6814),c=s(8280),g=s(9515);function Z(b,U){if(1&b){const x=n.EpF();n.TgZ(0,"clr-alert",4),n.NdJ("clrAlertClosedChange",function(T){n.CHM(x);const m=n.oxw();return n.KtG(m.bannerMessageClosed=T)}),n.TgZ(1,"clr-alert-item")(2,"span",5),n._uU(3),n.qZA()()()}if(2&b){const x=n.oxw();n.Q6J("clrAlertType",x.getBannerMessageType())("clrAlertAppLevel",!0)("clrAlertClosed",x.bannerMessageClosed)("clrAlertClosable",x.getBannerMessageClosable()),n.xp6(3),n.Oqu(x.getBannerMessage())}}function j(b,U){1&b&&(n.TgZ(0,"clr-alert",6)(1,"clr-alert-item")(2,"span",7),n._uU(3),n.ALo(4,"translate"),n.qZA()()()),2&b&&(n.Q6J("clrAlertType","warning")("clrAlertAppLevel",!0)("clrAlertClosable",!1),n.xp6(3),n.Oqu(n.lcZ(4,4,"REPO_READ_ONLY")))}function E(b,U){if(1&b){const x=n.EpF();n.TgZ(0,"clr-alert",8)(1,"clr-alert-item")(2,"span",7),n._uU(3),n.ALo(4,"translate"),n.qZA(),n.TgZ(5,"div",9)(6,"button",10),n.NdJ("click",function(){n.CHM(x);const T=n.oxw();return n.KtG(T.signIn())}),n._uU(7),n.ALo(8,"translate"),n.qZA()()()()}if(2&b){const x=n.oxw();n.Q6J("clrAlertType",null==x.message?null:x.message.type)("clrAlertAppLevel",!0),n.xp6(3),n.Oqu(n.lcZ(4,4,null==x.message?null:x.message.message)),n.xp6(4),n.hij(" ",n.lcZ(8,6,"BUTTON.LOG_IN")," ")}}function N(b,U){if(1&b){const x=n.EpF();n.TgZ(0,"clr-alert",11),n.NdJ("clrAlertClosedChange",function(){n.CHM(x);const T=n.oxw();return n.KtG(T.closeHealthWarning())}),n.TgZ(1,"clr-alert-item")(2,"span",7),n._uU(3),n.ALo(4,"translate"),n.TgZ(5,"a",12),n._uU(6),n.ALo(7,"translate"),n.qZA()(),n.TgZ(8,"div",9),n._uU(9),n.ALo(10,"translate"),n.TgZ(11,"a",13),n._uU(12),n.ALo(13,"translate"),n.qZA()()()()}2&b&&(n.Q6J("clrAlertType","warning")("clrAlertAppLevel",!0),n.xp6(3),n.hij(" ",n.lcZ(4,6,"JOB_SERVICE_DASHBOARD.WAITING_TOO_LONG_1")," "),n.xp6(3),n.hij(" ",n.lcZ(7,8,"JOB_SERVICE_DASHBOARD.WAITING_TOO_LONG_2")," "),n.xp6(3),n.hij(" ",n.lcZ(10,10,"JOB_SERVICE_DASHBOARD.WAITING_TOO_LONG_3")," "),n.xp6(3),n.Oqu(n.lcZ(13,12,"JOB_SERVICE_DASHBOARD.WAITING_TOO_LONG_4")))}function H(b,U){if(1&b){const x=n.EpF();n.TgZ(0,"clr-alert",11),n.NdJ("clrAlertClosedChange",function(){n.CHM(x);const T=n.oxw();return n.KtG(T.closeInfo())}),n.TgZ(1,"clr-alert-item")(2,"span",7),n._uU(3),n.ALo(4,"translate"),n.TgZ(5,"a",14),n._uU(6),n.ALo(7,"translate"),n.qZA()(),n.TgZ(8,"div",15)(9,"a",16),n._uU(10),n.ALo(11,"translate"),n.qZA()()()()}if(2&b){const x=n.oxw();n.Q6J("clrAlertType","info")("clrAlertAppLevel",!0),n.xp6(3),n.hij(" ",n.lcZ(4,6,"SCANNER.HELP_INFO_1")," "),n.xp6(2),n.s9C("href",x.scannerDocUrl,n.LSH),n.xp6(1),n.Oqu(n.lcZ(7,8,"SCANNER.HELP_INFO_2")),n.xp6(4),n.Oqu(n.lcZ(11,10,"SCANNER.ALL_SCANNERS"))}}const G="hasShowScannerInfo",B="yes";let J=(()=>{var b;class U{constructor(I,T,m,R,f,u,a){this.session=I,this.scannerService=T,this.router=m,this.messageService=R,this.route=f,this.jobServiceDashboardHealthCheckService=u,this.appConfigService=a,this.scannerDocUrl=e.f,this.showScannerInfo=!1,this.showLogin=!1}get bannerMessageClosed(){return this.appConfigService.getBannerMessageClosed()}set bannerMessageClosed(I){this.appConfigService.setBannerMessageClosed(I)}ngOnInit(){localStorage&&localStorage.getItem(G)===B||this.session.getCurrentUser()?.has_admin_role&&this.getDefaultScanner(),this.appLevelMsgSub||(this.appLevelMsgSub=this.messageService.appLevelAnnounced$.subscribe(I=>{if(this.message=I,I.statusCode===t.EU.Unauthorized){if(this.showLogin=!0,this.session.getCurrentUser()&&!this.isSignInUrl()&&this.route.snapshot.queryParams[d.jv]!==B){const T=(0,A.ub)(this.router.url,d.jv);this.session.clear(),this.router.navigate([t.ZB.EMBEDDED_SIGN_IN],{queryParams:{redirect_url:T}})}}else this.showLogin=!1})),this.clearSub||(this.clearSub=this.messageService.clearChan$.subscribe(I=>{this.showLogin=!1}))}ngOnDestroy(){this.appLevelMsgSub&&(this.appLevelMsgSub.unsubscribe(),this.appLevelMsgSub=null)}get showReadOnly(){return this.appConfigService.getConfig()?.read_only}shouldShowScannerInfo(){return this.session.getCurrentUser()?.has_admin_role&&this.showScannerInfo}getDefaultScanner(){this.scannerService.listScannersResponse({pageSize:A.L8,page:1}).subscribe(I=>{if(I.headers){const T=I.headers.get("X-Total-Count"),m=parseInt(T,0);let R=I.body||[];if(m<=A.L8)R&&R.length&&(this.showScannerInfo=R.some(f=>f.is_default));else{const f=Math.ceil(m/A.L8),u=[];for(let a=2;a<=f;a++)u.push(this.scannerService.listScanners({page:a,pageSize:A.L8}));(0,h.D)(u).subscribe(a=>{a&&a.length&&(a.forEach(S=>{R=R.concat(S)}),this.showScannerInfo=R.some(S=>S.is_default))})}}})}closeInfo(){localStorage&&localStorage.setItem(G,B),this.showScannerInfo=!1}signIn(){const I=(0,A.ub)(this.router.url,d.jv);this.router.navigate([t.ZB.EMBEDDED_SIGN_IN],{queryParams:{redirect_url:I}})}isSignInUrl(){return(-1===this.router.url?.indexOf("?")?this.router.url:this.router.url?.split("?")[0])===t.ZB.EMBEDDED_SIGN_IN}showJobServiceDashboardHealthCheck(){return this.jobServiceDashboardHealthCheckService.hasUnhealthyQueue()&&!this.jobServiceDashboardHealthCheckService.hasManuallyClosed()}closeHealthWarning(){this.jobServiceDashboardHealthCheckService.setManuallyClosed(!0)}isLogin(){return!!this.session.getCurrentUser()}hasValidBannerMessage(){const I=this.appConfigService.getConfig()?.current_time?new Date(this.appConfigService.getConfig()?.current_time):new Date;if(this.appConfigService.getConfig()?.banner_message){const T=JSON.parse(this.appConfigService.getConfig()?.banner_message);if(T?.fromDate&&T?.toDate)return new Date(I)<=new Date(T.toDate)&&new Date(I)>=new Date(T.fromDate);if(T?.fromDate&&!T?.toDate)return new Date(I)>=new Date(T.fromDate);if(!T?.fromDate&&T?.toDate)return new Date(I)<=new Date(T.toDate)}return!1}getBannerMessage(){return this.appConfigService.getConfig()?.banner_message&&JSON.parse(this.appConfigService.getConfig()?.banner_message)?.message?JSON.parse(this.appConfigService.getConfig()?.banner_message)?.message:null}getBannerMessageType(){return this.appConfigService.getConfig()?.banner_message&&JSON.parse(this.appConfigService.getConfig()?.banner_message)?.type?JSON.parse(this.appConfigService.getConfig()?.banner_message)?.type:M.yt.WARNING}getBannerMessageClosable(){return!this.appConfigService.getConfig()?.banner_message||JSON.parse(this.appConfigService.getConfig()?.banner_message)?.closable}}return(b=U).\u0275fac=function(I){return new(I||b)(n.Y36(v.m),n.Y36(C.L),n.Y36(L.F0),n.Y36(r.e),n.Y36(L.gz),n.Y36(o.qq),n.Y36(i._))},b.\u0275cmp=n.Xpm({type:b,selectors:[["app-app-level-alerts"]],decls:6,vars:5,consts:[[3,"clrAlertType","clrAlertAppLevel","clrAlertClosed","clrAlertClosable","clrAlertClosedChange",4,"ngIf"],[3,"clrAlertType","clrAlertAppLevel","clrAlertClosable",4,"ngIf"],[3,"clrAlertType","clrAlertAppLevel",4,"ngIf"],[3,"clrAlertType","clrAlertAppLevel","clrAlertClosedChange",4,"ngIf"],[3,"clrAlertType","clrAlertAppLevel","clrAlertClosed","clrAlertClosable","clrAlertClosedChange"],[1,"alert-text","banner-message"],[3,"clrAlertType","clrAlertAppLevel","clrAlertClosable"],[1,"alert-text"],[3,"clrAlertType","clrAlertAppLevel"],[1,"alert-actions"],[1,"btn","alert-action","no-underline",3,"click"],[3,"clrAlertType","clrAlertAppLevel","clrAlertClosedChange"],["href","#","routerLink","/harbor/job-service-dashboard/pending-jobs",1,"alert-action"],["rel","noopener noreferrer","target","_blank","href","https://github.com/goharbor/harbor/wiki/Reduce-job-queue-latency(wait-time)",1,"alert-action"],["rel","noopener noreferrer","target","_blank",1,"alert-action",3,"href"],[1,"alert-actions","last"],["href","#","routerLink","/harbor/interrogation-services/scanners",1,"alert-action"]],template:function(I,T){1&I&&(n.TgZ(0,"clr-alerts"),n.YNc(1,Z,4,5,"clr-alert",0),n.YNc(2,j,5,6,"clr-alert",1),n.YNc(3,E,9,8,"clr-alert",2),n.YNc(4,N,14,14,"clr-alert",3),n.YNc(5,H,12,12,"clr-alert",3),n.qZA()),2&I&&(n.xp6(1),n.Q6J("ngIf",T.hasValidBannerMessage()),n.xp6(1),n.Q6J("ngIf",T.showReadOnly&&T.isLogin()),n.xp6(1),n.Q6J("ngIf",T.showLogin),n.xp6(1),n.Q6J("ngIf",T.showJobServiceDashboardHealthCheck()&&T.isLogin()),n.xp6(1),n.Q6J("ngIf",T.shouldShowScannerInfo()&&T.isLogin()))},dependencies:[l.O5,c.TIm,c.CyW,c.SKA,c.I9z,L.rH,g.X$],styles:[".alert-text[_ngcontent-%COMP%]{flex:0 0 auto!important}.alert-action[_ngcontent-%COMP%]{text-decoration:underline}.last[_ngcontent-%COMP%]{position:absolute;right:3rem}.no-underline[_ngcontent-%COMP%]{text-decoration:none}.banner-message[_ngcontent-%COMP%]{min-width:0;word-break:break-word}"]}),U})()},7969:(w,P,s)=>{s.d(P,{B:()=>T});var e=s(7398),A=s(6306),h=s(8504),d=s(1691),t=s(5879),M=s(9862);const n=d.S$+"/search";let v=(()=>{var m;class R{constructor(u){this.http=u}doSearch(u){return this.http.get(n+"?q="+u,d.EX).pipe((0,e.U)(S=>S),(0,A.K)(S=>(0,h._)(S)))}}return(m=R).\u0275fac=function(u){return new(u||m)(t.LFG(M.eN))},m.\u0275prov=t.Yz7({token:m,factory:m.\u0275fac}),R})();class C{constructor(){this.project=[],this.repository=[]}}var L=s(2181),r=s(4664),o=s(3419),i=s(4766),l=s(6814),c=s(9788),g=s(3179),Z=s(2787),j=s(1575),E=s(8280),N=s(9515);function H(m,R){if(1&m&&(t.TgZ(0,"clr-dg-row",4)(1,"clr-dg-cell")(2,"a",5),t._uU(3),t.qZA()(),t.TgZ(4,"clr-dg-cell"),t._uU(5),t.qZA(),t.TgZ(6,"clr-dg-cell"),t._uU(7),t.qZA()()),2&m){const f=R.$implicit,u=t.oxw();t.Q6J("clrDgItem",f),t.xp6(2),t.Q6J("routerLink",u.getLink(f.project_id,f.name||f.repository_name))("queryParams",u.getQueryParams()),t.xp6(1),t.Oqu(f.name||f.repository_name),t.xp6(2),t.Oqu(f.artifact_count),t.xp6(2),t.Oqu(f.pull_count)}}function G(m,R){if(1&m&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&m){t.oxw();const f=t.MAs(19);t.xp6(1),t.lnq("",f.firstItem+1," - ",f.lastItem+1," ",t.lcZ(2,3,"REPOSITORY.OF")," ")}}let B=(()=>{var m;class R{constructor(u,a,S){this.router=u,this.searchTrigger=a,this.sessionService=S,this.getLink=g.SF}getQueryParams(){return this.sessionService.getCurrentUser()?null:{[c.jv]:c.gT}}}return(m=R).\u0275fac=function(u){return new(u||m)(t.Y36(Z.F0),t.Y36(i.V),t.Y36(j.m))},m.\u0275cmp=t.Xpm({type:m,selectors:[["list-repository-ro"]],inputs:{repositories:"repositories"},decls:20,vars:19,consts:[[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[4,"ngIf"],[3,"clrDgPageSize"],["pagination",""],[3,"clrDgItem"],["href","javascript:void(0)",3,"routerLink","queryParams"]],template:function(u,a){1&u&&(t.TgZ(0,"clr-datagrid")(1,"clr-dg-column"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"clr-dg-column"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"clr-dg-column"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,H,8,6,"clr-dg-row",0),t.TgZ(11,"clr-dg-placeholder"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"clr-dg-footer"),t.YNc(15,G,3,5,"span",1),t._uU(16),t.ALo(17,"translate"),t._UZ(18,"clr-dg-pagination",2,3),t.qZA()()),2&u&&(t.xp6(2),t.Oqu(t.lcZ(3,9,"REPOSITORY.NAME")),t.xp6(3),t.Oqu(t.lcZ(6,11,"REPOSITORY.ARTIFACTS_COUNT")),t.xp6(3),t.Oqu(t.lcZ(9,13,"REPOSITORY.PULL_COUNT")),t.xp6(2),t.Q6J("clrDgItemsOf",a.repositories),t.xp6(2),t.Oqu(t.lcZ(13,15,"REPOSITORY.PLACEHOLDER")),t.xp6(3),t.Q6J("ngIf",null==a.repositories?null:a.repositories.length),t.xp6(1),t.AsE(" ",null==a.repositories?null:a.repositories.length," ",t.lcZ(17,17,"REPOSITORY.ITEMS")," "),t.xp6(2),t.Q6J("clrDgPageSize",5))},dependencies:[l.O5,E.C9t,E.fv_,E.m4W,E.dRQ,E.f6,E.Ltv,E.F7K,E.Z4N,E.jND,E.KHL,E.PDs,E.Gcc,E.dml,E.Nh1,E.K8c,Z.rH,N.X$],encapsulation:2,changeDetection:0}),R})();var J=s(4410);function b(m,R){if(1&m&&(t.TgZ(0,"clr-dg-row",4)(1,"clr-dg-cell")(2,"a",5),t._uU(3),t.qZA()(),t.TgZ(4,"clr-dg-cell"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"clr-dg-cell"),t._uU(8),t.qZA(),t.TgZ(9,"clr-dg-cell"),t._uU(10),t.ALo(11,"harborDatetime"),t.qZA()()),2&m){const f=R.$implicit,u=t.oxw();t.Q6J("clrDgItem",f),t.xp6(2),t.Q6J("routerLink",u.getLink(f.project_id)),t.xp6(1),t.Oqu(f.name),t.xp6(2),t.Oqu(t.lcZ(6,6,"true"===f.metadata.public?"PROJECT.PUBLIC":"PROJECT.PRIVATE")),t.xp6(3),t.Oqu(f.repo_count),t.xp6(2),t.Oqu(t.xi3(11,8,f.creation_time,"short"))}}function U(m,R){if(1&m&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&m){t.oxw();const f=t.MAs(22);t.xp6(1),t.lnq("",f.firstItem+1," - ",f.lastItem+1," ",t.lcZ(2,3,"PROJECT.OF")," ")}}let x=(()=>{var m;class R{constructor(){}getLink(u){return`/harbor/projects/${u}/repositories`}}return(m=R).\u0275fac=function(u){return new(u||m)},m.\u0275cmp=t.Xpm({type:m,selectors:[["list-project-ro"]],inputs:{projects:"projects"},decls:23,vars:22,consts:[[3,"clrDgItem",4,"clrDgItems","clrDgItemsOf"],[4,"ngIf"],[3,"clrDgPageSize"],["pagination",""],[3,"clrDgItem"],["href","javascript:void(0)",3,"routerLink"]],template:function(u,a){1&u&&(t.TgZ(0,"clr-datagrid")(1,"clr-dg-column"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"clr-dg-column"),t._uU(5),t.ALo(6,"translate"),t.qZA(),t.TgZ(7,"clr-dg-column"),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"clr-dg-column"),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,b,12,11,"clr-dg-row",0),t.TgZ(14,"clr-dg-placeholder"),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"clr-dg-footer"),t.YNc(18,U,3,5,"span",1),t._uU(19),t.ALo(20,"translate"),t._UZ(21,"clr-dg-pagination",2,3),t.qZA()()),2&u&&(t.xp6(2),t.Oqu(t.lcZ(3,10,"PROJECT.NAME")),t.xp6(3),t.Oqu(t.lcZ(6,12,"PROJECT.ACCESS_LEVEL")),t.xp6(3),t.Oqu(t.lcZ(9,14,"PROJECT.REPO_COUNT")),t.xp6(3),t.Oqu(t.lcZ(12,16,"PROJECT.CREATION_TIME")),t.xp6(2),t.Q6J("clrDgItemsOf",a.projects),t.xp6(2),t.Oqu(t.lcZ(16,18,"PROJECT.NO_PROJECT")),t.xp6(3),t.Q6J("ngIf",null==a.projects?null:a.projects.length),t.xp6(1),t.AsE(" ",null==a.projects?null:a.projects.length," ",t.lcZ(20,20,"PROJECT.ITEMS")," "),t.xp6(2),t.Q6J("clrDgPageSize",5))},dependencies:[l.O5,E.C9t,E.fv_,E.m4W,E.dRQ,E.f6,E.Ltv,E.F7K,E.Z4N,E.jND,E.KHL,E.PDs,E.Gcc,E.dml,E.Nh1,E.K8c,Z.rH,N.X$,J.Z],encapsulation:2,changeDetection:0}),R})();function I(m,R){if(1&m){const f=t.EpF();t.TgZ(0,"div",1),t._UZ(1,"div",2),t.TgZ(2,"div",3)(3,"a",4),t.NdJ("click",function(){t.CHM(f);const a=t.oxw();return t.KtG(a.close())}),t._uU(4),t.ALo(5,"translate"),t.qZA()(),t.TgZ(6,"div",5),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"div",6)(10,"div",7)(11,"h2"),t._uU(12),t.ALo(13,"translate"),t.qZA(),t._UZ(14,"list-project-ro",8),t.qZA(),t.TgZ(15,"div",9)(16,"h2"),t._uU(17),t.ALo(18,"translate"),t.qZA(),t._UZ(19,"list-repository-ro",10),t.qZA()()()}if(2&m){const f=t.oxw();t.xp6(4),t.hij("<\xa0",t.lcZ(5,7,"SEARCH.BACK"),""),t.xp6(2),t.Q6J("hidden",f.done),t.xp6(1),t.hij(" ",t.lcZ(8,9,"SEARCH.IN_PROGRESS")," "),t.xp6(5),t.Oqu(t.lcZ(13,11,"PROJECT.PROJECTS")),t.xp6(2),t.Q6J("projects",f.searchResults.project),t.xp6(3),t.Oqu(t.lcZ(18,13,"PROJECT_DETAIL.REPOSITORIES")),t.xp6(2),t.Q6J("repositories",f.searchResults.repository)}}let T=(()=>{var m;class R{constructor(u,a,S){this.search=u,this.msgHandler=a,this.searchTrigger=S,this.searchResults=new C,this.currentTerm="",this.stateIndicator=!1,this.onGoing=!1,this.mouseOn=!1}ngOnInit(){this.searchSub=this.searchTrigger.searchTriggerChan$.pipe((0,L.h)(u=>(""===u&&(this.searchResults.project=[],this.searchResults.repository=[]),!(!u||!u.trim()))),(0,r.w)(u=>(this.stateIndicator||this.show(),this.currentTerm=u,this.onGoing=!0,this.search.doSearch(u)))).subscribe(u=>{this.onGoing=!1,this.originalCopy=u,this.searchResults=this.clone(u)},u=>{this.onGoing=!1,this.msgHandler.handleError(u)}),this.closeSearchSub=this.searchTrigger.searchCloseChan$.subscribe(u=>{this.close()})}ngOnDestroy(){this.searchSub&&this.searchSub.unsubscribe(),this.closeSearchSub&&this.closeSearchSub.unsubscribe()}clone(u){let a=new C;return u&&(u.project.forEach(S=>a.project.push(Object.assign({},S))),u.repository.forEach(S=>a.repository.push(Object.assign({},S)))),a}get state(){return this.stateIndicator}get done(){return!this.onGoing}get hover(){return this.mouseOn}show(){this.stateIndicator=!0}close(){this.stateIndicator=!1,this.searchTrigger.clear(!0)}doSearch(u){if(!u||""===u.trim())return this.searchResults.project=[],void(this.searchResults.repository=[]);this.onGoing||(this.stateIndicator||this.show(),this.currentTerm=u,this.onGoing=!0,this.search.doSearch(u).subscribe(a=>{this.onGoing=!1,this.originalCopy=a,this.searchResults=this.clone(a)},a=>{this.onGoing=!1,this.msgHandler.handleError(a)}))}}return(m=R).\u0275fac=function(u){return new(u||m)(t.Y36(v),t.Y36(o.d),t.Y36(i.V))},m.\u0275cmp=t.Xpm({type:m,selectors:[["search-result"]],features:[t._Bn([v])],decls:1,vars:1,consts:[["class","search-overlay",4,"ngIf"],[1,"search-overlay"],["id","placeholder1"],[1,"search-header"],["href","javascript:void(0)",3,"click"],[1,"spinner","spinner-lg","search-spinner",3,"hidden"],["id","results"],["id","project-results"],[3,"projects"],["id","repo-results"],[3,"repositories"]],template:function(u,a){1&u&&t.YNc(0,I,20,15,"div",0),2&u&&t.Q6J("ngIf",a.state)},dependencies:[l.O5,B,x,N.X$],styles:['.search-overlay[_ngcontent-%COMP%]{display:block;position:fixed;height:100%;width:100%;z-index:999;box-sizing:border-box;background:#fafafa;top:60px;left:0;padding-left:36px;padding-right:36px}.search-header[_ngcontent-%COMP%]{display:inline-block;width:100%;position:relative}.search-close[_ngcontent-%COMP%]{position:absolute;right:24px;cursor:pointer}.search-parent-override[_ngcontent-%COMP%]{position:relative!important}.search-spinner[_ngcontent-%COMP%]{top:50%;left:50%;position:absolute;z-index:1}.grid-header-wrapper[_ngcontent-%COMP%]{text-align:right}.grid-filter[_ngcontent-%COMP%]{position:relative;top:8px;margin:0 auto}.search-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}.search[_ngcontent-%COMP%]:before{content:"";display:inline-block;background:#fafafa;opacity:.15;height:40px;width:1px;top:10px}#results[_ngcontent-%COMP%]{overflow-y:auto;max-height:85%}#placeholder1[_ngcontent-%COMP%]{height:24px}.search-input[_ngcontent-%COMP%]{outline:none}.search-input[_ngcontent-%COMP%]::placeholder{color:#fafafa}']}),R})()},208:(w,P,s)=>{s.d(P,{l:()=>L});var e=s(5879),A=s(3924),h=s(9515),d=s(7655),t=s(6814),M=s(8280);function n(r,o){if(1&r){const i=e.EpF();e.TgZ(0,"div",6)(1,"button",7),e.NdJ("click",function(){e.CHM(i);const c=e.oxw(3);return e.KtG(c.close())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",7),e.NdJ("click",function(){e.CHM(i);const c=e.oxw(3);return e.KtG(c.confirmCancel())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,2,"BUTTON.NO")," "),e.xp6(3),e.hij(" ",e.lcZ(6,4,"BUTTON.YES")," "))}function v(r,o){if(1&r&&(e.TgZ(0,"div",3)(1,"span",4),e._uU(2),e.qZA(),e.YNc(3,n,7,6,"div",5),e.qZA()),2&r){const i=e.oxw(2);e.xp6(1),e.ekj("alert-text-blink",i.blinking),e.xp6(1),e.hij(" ",i.errorMessage," "),e.xp6(1),e.Q6J("ngIf",i.showCancelAction)}}function C(r,o){if(1&r){const i=e.EpF();e.TgZ(0,"clr-alert",1),e.NdJ("clrAlertClosedChange",function(c){e.CHM(i);const g=e.oxw();return e.KtG(g.alertClose=c)}),e.YNc(1,v,4,4,"div",2),e.qZA()}if(2&r){const i=e.oxw();e.Q6J("clrAlertClosed",i.alertClose)("clrAlertType",i.inlineAlertType)("clrAlertClosable",i.inlineAlertClosable)("clrAlertAppLevel",i.useAppLevelStyle),e.xp6(1),e.Q6J("ngIf",!i.alertClose)}}let L=(()=>{var r;class o{constructor(l,c){this.translate=l,this.errHandler=c,this.inlineAlertType="danger",this.inlineAlertClosable=!1,this.alertClose=!0,this.displayedText="",this.showCancelAction=!1,this.useAppLevelStyle=!1,this.timer=null,this.count=0,this.blinking=!1,this.confirmEvt=new e.vpe,this.closeEvt=new e.vpe}get errorMessage(){return this.displayedText}showInlineError(l){this.displayedText=(0,A.Po)(l),this.displayedText&&this.translate.get(this.displayedText).subscribe(c=>this.displayedText=c),this.errHandler.handleErrorPopupUnauthorized(l),this.inlineAlertType="danger",this.showCancelAction=!1,this.inlineAlertClosable=!0,this.alertClose=!1,this.useAppLevelStyle=!1}showInlineConfirmation(l){this.displayedText="",l&&l.message&&this.translate.get(l.message).subscribe(c=>this.displayedText=c),this.inlineAlertType="warning",this.showCancelAction=!0,this.inlineAlertClosable=!1,this.alertClose=!1,this.useAppLevelStyle=!1}showInlineSuccess(l){this.displayedText="",l&&l.message&&this.translate.get(l.message).subscribe(c=>this.displayedText=c),this.inlineAlertType="success",this.showCancelAction=!1,this.inlineAlertClosable=!0,this.alertClose=!1,this.useAppLevelStyle=!1}showInlineWarning(l){this.displayedText="",l&&l.message&&this.translate.get(l.message).subscribe(c=>this.displayedText=c),this.inlineAlertType="warning",this.showCancelAction=!1,this.inlineAlertClosable=!0,this.alertClose=!1,this.useAppLevelStyle=!1}close(){this.alertClose=!0}blink(){}confirmCancel(){this.confirmEvt.emit(!0)}}return(r=o).\u0275fac=function(l){return new(l||r)(e.Y36(h.sK),e.Y36(d.q))},r.\u0275cmp=e.Xpm({type:r,selectors:[["inline-alert"]],outputs:{confirmEvt:"confirmEvt",closeEvt:"closeEvt"},decls:1,vars:1,consts:[[3,"clrAlertClosed","clrAlertType","clrAlertClosable","clrAlertAppLevel","clrAlertClosedChange",4,"ngIf"],[3,"clrAlertClosed","clrAlertType","clrAlertClosable","clrAlertAppLevel","clrAlertClosedChange"],["class","alert-item",4,"ngIf"],[1,"alert-item"],[1,"alert-text"],["class","alert-actions",4,"ngIf"],[1,"alert-actions"],[1,"btn","btn-link","alert-btn-link",3,"click"]],template:function(l,c){1&l&&e.YNc(0,C,2,5,"clr-alert",0),2&l&&e.Q6J("ngIf",!c.alertClose)},dependencies:[t.O5,M.TIm,M.I9z,h.X$],styles:[".alert-text-blink[_ngcontent-%COMP%]{color:red;font-weight:bolder}.alert-btn-link[_ngcontent-%COMP%]{padding:0!important;min-width:30px!important}.alert-item[_ngcontent-%COMP%]{text-align:center;align-items:center}[_nghost-%COMP%]  .alert-icon-wrapper{display:inline}"]}),o})()},2300:(w,P,s)=>{s.d(P,{S:()=>u});var e=s(5879),A=s(6814),h=s(3109),d=s(27),t=s(5477),M=s(3924),n=s(7398),v=s(9315),C=s(1575),L=s(2787),r=s(9515),o=s(6682),i=s(3419),l=s(4766),c=s(5948),g=s(8280),Z=s(3620),j=s(8645),E=s(6223);const H="globalSearch";let G=(()=>{var a;class S{constructor(_,p,D,y,Y,q,W){this.searchTrigger=_,this.router=p,this.activatedRoute=D,this.location=y,this.appConfigService=Y,this.translate=q,this.skinableConfig=W,this.searchTerms=new j.x,this.isResPanelOpened=!1,this._searchTerm=""}ngOnInit(){let _=this.skinableConfig.getSkinConfig();_&&_.product&&_.product.name?this.translate.get("GLOBAL_SEARCH.PLACEHOLDER",{param:_.product.name}).subscribe(p=>{this.placeholderText=p}):this.translate.get("GLOBAL_SEARCH.PLACEHOLDER",{param:"Harbor"}).subscribe(p=>{this.placeholderText=p}),this.searchSub=this.searchTerms.pipe((0,Z.b)(500)).subscribe(p=>{this.searchTrigger.triggerSearch(p)}),this.closeSub=this.searchTrigger.searchClearChan$.subscribe(p=>{this.searchTerm=""}),this._searchTerm=this.activatedRoute.snapshot.queryParams[H],this._searchTerm&&this.searchTerms.next(this._searchTerm)}ngOnDestroy(){this.searchSub&&this.searchSub.unsubscribe(),this.closeSub&&this.closeSub.unsubscribe()}search(_){this.searchTerms.next(_.trim())}get searchTerm(){return this._searchTerm}set searchTerm(_){let p;p=_?this.router.createUrlTree([],{relativeTo:this.activatedRoute,queryParams:{[H]:_}}).toString():this.router.createUrlTree([],{relativeTo:this.activatedRoute}).toString(),this.location.replaceState(p),this._searchTerm=_}}return(a=S).\u0275fac=function(_){return new(_||a)(e.Y36(l.V),e.Y36(L.F0),e.Y36(L.gz),e.Y36(A.Ye),e.Y36(o._),e.Y36(r.sK),e.Y36(c.s))},a.\u0275cmp=e.Xpm({type:a,selectors:[["global-search"]],decls:5,vars:4,consts:[[1,"search"],["for","search_input"],["autocomplete","off","name","globalSearchBox","id","search_input","type","text",1,"search-input",3,"ngModel","placeholder","ngModelChange","keyup"],["globalSearchBox",""]],template:function(_,p){if(1&_){const D=e.EpF();e.TgZ(0,"form",0)(1,"label",1)(2,"input",2,3),e.NdJ("ngModelChange",function(Y){return p.searchTerm=Y})("keyup",function(){e.CHM(D);const Y=e.MAs(3);return e.KtG(p.search(Y.value))}),e.ALo(4,"translate"),e.qZA()()()}2&_&&(e.xp6(2),e.s9C("placeholder",e.lcZ(4,2,p.placeholderText)),e.Q6J("ngModel",p.searchTerm))},dependencies:[E._Y,E.Fj,E.JJ,E.JL,E.On,E.F,g.MgK,r.X$],styles:['.search-overlay[_ngcontent-%COMP%]{display:block;position:fixed;height:100%;width:100%;z-index:999;box-sizing:border-box;background:#fafafa;top:60px;left:0;padding-left:36px;padding-right:36px}.search-header[_ngcontent-%COMP%]{display:inline-block;width:100%;position:relative}.search-close[_ngcontent-%COMP%]{position:absolute;right:24px;cursor:pointer}.search-parent-override[_ngcontent-%COMP%]{position:relative!important}.search-spinner[_ngcontent-%COMP%]{top:50%;left:50%;position:absolute;z-index:1}.grid-header-wrapper[_ngcontent-%COMP%]{text-align:right}.grid-filter[_ngcontent-%COMP%]{position:relative;top:8px;margin:0 auto}.search-header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}.search[_ngcontent-%COMP%]:before{content:"";display:inline-block;background:#fafafa;opacity:.15;height:40px;width:1px;top:10px}#results[_ngcontent-%COMP%]{overflow-y:auto;max-height:85%}#placeholder1[_ngcontent-%COMP%]{height:24px}.search-input[_ngcontent-%COMP%]{outline:none}.search-input[_ngcontent-%COMP%]::placeholder{color:#fafafa}']}),S})();function B(a,S){if(1&a&&e._UZ(0,"img",18),2&a){const O=e.oxw();e.uIk("src","images/"+(null==O.customStyle||null==O.customStyle.product?null:O.customStyle.product.logo),e.LSH)}}function J(a,S){1&a&&e._UZ(0,"img",19),2&a&&e.Q6J("src","images/harbor-logo.svg",e.LSH)}function b(a,S){if(1&a){const O=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(){const D=e.CHM(O).$implicit,y=e.oxw(2);return e.KtG(y.switchLanguage(D[0]))}),e._uU(1),e.qZA()}if(2&a){const O=S.$implicit,_=e.oxw(2);e.ekj("lang-selected",_.matchLang(O[0])),e.xp6(1),e.Oqu(O[1][0])}}function U(a,S){if(1&a&&(e.TgZ(0,"clr-dropdown-menu"),e.YNc(1,b,2,3,"a",20),e.qZA()),2&a){const O=e.oxw();e.xp6(1),e.Q6J("ngForOf",O.guiLanguages)}}function x(a,S){if(1&a){const O=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(){const D=e.CHM(O).$implicit,y=e.oxw(2);return e.KtG(y.switchDatetimeRendering(D[0]))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&a){const O=S.$implicit,_=e.oxw(2);e.ekj("locale-selected",_.matchDatetimeRendering(O[0])),e.xp6(1),e.Oqu(e.lcZ(2,3,O[1]))}}function I(a,S){if(1&a&&(e.TgZ(0,"clr-dropdown-menu"),e.YNc(1,x,3,5,"a",22),e.qZA()),2&a){const O=e.oxw();e.xp6(1),e.Q6J("ngForOf",O.guiDatetimeRenderings)}}function T(a,S){if(1&a){const O=e.EpF();e.TgZ(0,"a",21),e.NdJ("click",function(){e.CHM(O);const p=e.oxw(3);return e.KtG(p.openChangePwdModal())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACCOUNT_SETTINGS.CHANGE_PWD")))}function m(a,S){if(1&a){const O=e.EpF();e.TgZ(0,"clr-dropdown-menu",28)(1,"a",21),e.NdJ("click",function(){e.CHM(O);const p=e.oxw(2);return e.KtG(p.openAccountSettingsModal())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.YNc(4,T,3,3,"a",29),e.TgZ(5,"a",21),e.NdJ("click",function(){e.CHM(O);const p=e.oxw(2);return e.KtG(p.openAboutDialog())}),e._uU(6),e.ALo(7,"translate"),e.qZA(),e._UZ(8,"div",30),e.TgZ(9,"a",21),e.NdJ("click",function(){e.CHM(O);const p=e.oxw(2);return e.KtG(p.logOut())}),e._uU(10),e.ALo(11,"translate"),e.qZA()()}if(2&a){const O=e.oxw(2);e.Q6J("clrPosition","bottom-right"),e.xp6(2),e.Oqu(e.lcZ(3,5,"ACCOUNT_SETTINGS.PROFILE")),e.xp6(2),e.Q6J("ngIf",O.canChangePassword),e.xp6(2),e.Oqu(e.lcZ(7,7,"ACCOUNT_SETTINGS.ABOUT")),e.xp6(4),e.Oqu(e.lcZ(11,9,"ACCOUNT_SETTINGS.LOGOUT"))}}function R(a,S){if(1&a&&(e.TgZ(0,"clr-dropdown",23)(1,"button",24),e._UZ(2,"clr-icon",25),e.TgZ(3,"span"),e._uU(4),e.qZA(),e._UZ(5,"clr-icon",26),e.qZA(),e.YNc(6,m,12,11,"clr-dropdown-menu",27),e.qZA()),2&a){const O=e.oxw();e.xp6(4),e.Oqu(O.accountName)}}function f(a,S){if(1&a){const O=e.EpF();e.TgZ(0,"a",31),e.NdJ("click",function(){e.CHM(O);const p=e.oxw();return e.KtG(p.openAboutDialog())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&a&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"ACCOUNT_SETTINGS.ABOUT")))}let u=(()=>{var a;class S{constructor(_,p,D,y,Y,q,W,K,F){this.session=_,this.router=p,this.location=D,this.translate=y,this.appConfigService=Y,this.msgHandler=q,this.searchTrigger=W,this.skinableConfig=K,this.commonStrings=F,this.showAccountSettingsModal=new e.vpe,this.showDialogModalAction=new e.vpe,this.guiLanguages=Object.entries(d.a2),this.guiDatetimeRenderings=Object.entries(d.Nr),this.selectedLang=d.V6,this.selectedDatetimeRendering=d.e7,this.appTitle="APP_TITLE.HARBOR"}ngOnInit(){this.customStyle=this.skinableConfig.getSkinConfig(),this.selectedLang=this.translate.currentLang,this.selectedLang&&((0,A.qS)(d.a2[this.selectedLang][1],this.selectedLang),this.translateClarityComponents()),this.selectedDatetimeRendering=(0,M.tY)()}translateClarityComponents(){const _=[],p={};for(let D in d.i0)_.push(this.translate.get(d.i0[D]).pipe((0,n.U)(y=>[D,y])));(0,v.D)(_).subscribe(D=>{D?.length&&(D.forEach(y=>{p[y[0]]=y[1]}),this.commonStrings.localize(p))})}get isSessionValid(){return null!=this.session.getCurrentUser()}get accountName(){return this.session.getCurrentUser()?this.session.getCurrentUser().username:"N/A"}get currentLang(){return this.selectedLang?d.a2[this.selectedLang][0]:null}get currentDatetimeRendering(){return d.Nr[this.selectedDatetimeRendering]}get admiralLink(){return this.appConfigService.getAdmiralEndpoint(window.location.href)}get canDownloadCert(){return this.session.getCurrentUser()&&this.session.getCurrentUser().has_admin_role&&this.appConfigService.getConfig()&&this.appConfigService.getConfig().has_ca_root}get canChangePassword(){let _=this.session.getCurrentUser(),p=this.appConfigService.getConfig();return _&&(p&&!("ldap_auth"===p.auth_mode||"uaa_auth"===p.auth_mode||"oidc_auth"===p.auth_mode)||1===_.user_id&&"admin"===_.username)}matchLang(_){return _===this.selectedLang}matchDatetimeRendering(_){return _===this.selectedDatetimeRendering}openAccountSettingsModal(){this.showAccountSettingsModal.emit({modalName:h.D.USER_PROFILE,modalFlag:!0})}openChangePwdModal(){this.showDialogModalAction.emit({modalName:h.D.CHANGE_PWD,modalFlag:!0})}openAboutDialog(){this.showDialogModalAction.emit({modalName:h.D.ABOUT,modalFlag:!0})}logOut(){this.router.navigate([d.ZB.EMBEDDED_SIGN_IN],{queryParams:{signout:!0,redirect_url:this.location.pathname}}),this.searchTrigger.closeSearch(!0)}switchLanguage(_){this.selectedLang=_,localStorage.setItem(d.R4,_),this.translate.use(_).subscribe(()=>window.location.reload())}switchDatetimeRendering(_){this.selectedDatetimeRendering=_,localStorage.setItem(d.Vd,_),window.location.reload()}homeAction(){null!=this.session.getCurrentUser()?this.router.navigate([d.ZB.HARBOR_DEFAULT]):this.router.navigate([d.ZB.HARBOR_ROOT]),this.searchTrigger.closeSearch(!0)}registryAction(){this.searchTrigger.closeSearch(!0)}getBgColor(){if(this.customStyle&&this.customStyle.headerBgColor&&localStorage){if(localStorage.getItem(t.BJ)===t.XO.LIGHT)return`background-color:${this.customStyle.headerBgColor.lightMode} !important`;if(localStorage.getItem(t.BJ)===t.XO.DARK)return`background-color:${this.customStyle.headerBgColor.darkMode} !important`}return null}}return(a=S).\u0275fac=function(_){return new(_||a)(e.Y36(C.m),e.Y36(L.F0),e.Y36(A.lw),e.Y36(r.sK),e.Y36(o._),e.Y36(i.d),e.Y36(l.V),e.Y36(c.s),e.Y36(g.CHR))},a.\u0275cmp=e.Xpm({type:a,selectors:[["navigator"]],outputs:{showAccountSettingsModal:"showAccountSettingsModal",showDialogModalAction:"showDialogModalAction"},decls:29,vars:12,consts:[[1,"header-5","header"],[1,"branding"],["href","javascript:void(0)",1,"nav-link",3,"click"],["class","headerLogo",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"title"],[1,"header-actions"],[1,"dropdown-lang","dropdown","bottom-left"],["clrDropdownToggle","",1,"nav-icon","nav-icon-width"],["shape","world",1,"icon-left"],[1,"currentLocale"],["size","10","shape","caret down"],[4,"clrIfOpen"],[1,"dropdown-locale","dropdown","bottom-left"],["shape","date",1,"icon-left"],[1,"nav-divider"],["class","dropdown",4,"ngIf"],["href","javascript:void(0)","id","aboutMenu","class","nav-link nav-text nav-about-link",3,"click",4,"ngIf"],[1,"headerLogo"],[1,"harbor-logo",3,"src"],["href","javascript:void(0)","clrDropdownItem","",3,"lang-selected","click",4,"ngFor","ngForOf"],["href","javascript:void(0)","clrDropdownItem","",3,"click"],["href","javascript:void(0)","clrDropdownItem","",3,"locale-selected","click",4,"ngFor","ngForOf"],[1,"dropdown"],["clrDropdownToggle","",1,"nav-text"],["shape","user","size","24",1,"is-inverse","user-icon"],["size","10","shape","caret down",1,"user-down"],[3,"clrPosition",4,"clrIfOpen"],[3,"clrPosition"],["href","javascript:void(0)","clrDropdownItem","",3,"click",4,"ngIf"],[1,"dropdown-divider"],["href","javascript:void(0)","id","aboutMenu",1,"nav-link","nav-text","nav-about-link",3,"click"]],template:function(_,p){if(1&_&&(e.TgZ(0,"clr-header",0)(1,"div",1)(2,"a",2),e.NdJ("click",function(){return p.homeAction()}),e.YNc(3,B,1,1,"img",3),e.YNc(4,J,1,1,"ng-template",null,4,e.W1O),e.TgZ(6,"span",5),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e._UZ(9,"global-search"),e.TgZ(10,"div",6)(11,"clr-dropdown",7)(12,"button",8),e._UZ(13,"clr-icon",9),e.TgZ(14,"span",10),e._uU(15),e.qZA(),e._UZ(16,"clr-icon",11),e.qZA(),e.YNc(17,U,2,1,"clr-dropdown-menu",12),e.qZA(),e.TgZ(18,"clr-dropdown",13)(19,"button",8),e._UZ(20,"clr-icon",14),e.TgZ(21,"span",10),e._uU(22),e.ALo(23,"translate"),e.qZA(),e._UZ(24,"clr-icon",11),e.qZA(),e.YNc(25,I,2,1,"clr-dropdown-menu",12),e.qZA(),e._UZ(26,"div",15),e.YNc(27,R,7,1,"clr-dropdown",16),e.YNc(28,f,3,3,"a",17),e.qZA()()),2&_){const D=e.MAs(5);e.uIk("style",p.getBgColor(),e.Ckj),e.xp6(3),e.Q6J("ngIf",null==p.customStyle||null==p.customStyle.product?null:p.customStyle.product.logo)("ngIfElse",D),e.xp6(4),e.Oqu(null!=p.customStyle&&null!=p.customStyle.product&&p.customStyle.product.name?null==p.customStyle||null==p.customStyle.product?null:p.customStyle.product.name:e.lcZ(8,8,p.appTitle)),e.xp6(8),e.Oqu(p.currentLang),e.xp6(7),e.Oqu(e.lcZ(23,10,p.currentDatetimeRendering)),e.xp6(5),e.Q6J("ngIf",p.isSessionValid),e.xp6(1),e.Q6J("ngIf",!p.isSessionValid)}},dependencies:[A.sg,A.O5,g.qvL,g.nqY,g.uUW,g.toC,g.f_W,g.zwp,g.ZUS,g.lU3,G,r.X$],styles:['.sign-in-override[_ngcontent-%COMP%]{padding-left:0!important;padding-right:5px!important}.sign-up-override[_ngcontent-%COMP%]{padding-left:5px!important}.custom-divider[_ngcontent-%COMP%]{display:inline-block;border-right:2px inset snow;padding:2px 0;vertical-align:middle;height:24px}.locale-selected[_ngcontent-%COMP%]{font-weight:700}.nav-divider[_ngcontent-%COMP%]{display:inline-block;width:1px;height:40px;background-color:#fafafa;position:relative;top:10px;opacity:.15;content:""}.nav-about-link[_ngcontent-%COMP%]{padding-left:1.6rem!important;padding-right:1rem!important;min-width:125px;text-align:left!important}.harbor-logo[_ngcontent-%COMP%]{width:40px;margin-right:15px}.nav-icon-width[_ngcontent-%COMP%]{width:auto!important;padding-left:18px!important}.nav-icon-width[_ngcontent-%COMP%]   .icon-left[_ngcontent-%COMP%]{left:-8px}.nav-icon-width[_ngcontent-%COMP%]   .currentLocale[_ngcontent-%COMP%]{padding-right:40px}.user-icon[_ngcontent-%COMP%]{left:-2px}.headerLogo[_ngcontent-%COMP%]{width:36px;height:36px;object-fit:fill}.dropdown-item[_ngcontent-%COMP%]{outline:none}.dropdown-locale[_ngcontent-%COMP%]{padding-right:.5rem}.user-down[_ngcontent-%COMP%]{right:1rem!important}']}),S})()},625:(w,P,s)=>{s.d(P,{GA:()=>t});var e=s(6223),A=s(5879);const h=/[\u4e00-\u9fa5]/;let t=(()=>{var M;class n{constructor(){this.valFn=e.kI.nullValidator}ngOnChanges(C){const L=C.maxLengthExt;this.valFn=L?function d(M){return n=>{const v=n.value;if(!v||""===v.trim())return null;const C=new RegExp(h,"i");let L=0,r=v.length;for(let o=0;o<r;o++)C.test(v[o])?L+=3:L++;return L>M?{maxLengthExt:L}:null}}(L.currentValue):e.kI.nullValidator}validate(C){return this.valFn(C)}}return(M=n).\u0275fac=function(C){return new(C||M)},M.\u0275dir=A.lG2({type:M,selectors:[["","maxLengthExt",""]],inputs:{maxLengthExt:"maxLengthExt"},features:[A._Bn([{provide:e.Cf,useExisting:M,multi:!0}]),A.TTD]}),n})()},4410:(w,P,s)=>{s.d(P,{Z:()=>n});var e=s(6814),A=s(27),h=s(3924),d=s(5879);const t=new Date("1970-1-1"),M={"iso-8601":function v(C){switch(C){case"short":return"yyyy-MM-dd, HH:mm";case"medium":return"yyyy-MM-dd, HH:mm:ss";case"long":return"yyyy-MM-dd, HH:mm:ss z";case"full":return"EEEE yyyy-MM-dd, HH:mm:ss zzzz";case"shortDate":case"mediumDate":return"yyyy-MM-dd";case"longDate":return"yyyy-MM-dd z";case"fullDate":return"EEEE yyyy-MM-dd zzzz";case"shortTime":return"HH:mm";case"mediumTime":return"HH:mm:ss";case"longTime":return"HH:mm:ss z";case"fullTime":return"HH:mm:ss zzzz";default:return C}},"locale-default":C=>C};let n=(()=>{var C;class L{transform(o,i){if(o&&o<=t)return"-";const l=localStorage.getItem(A.R4),c=(0,h.yv)(l)?l:A.V6,g=M[(0,h.tY)()];return new e.uU(c).transform(o,g(i||"medium"))}}return(C=L).\u0275fac=function(o){return new(o||C)},C.\u0275pipe=d.Yjl({name:"harborDatetime",type:C,pure:!0}),L})()}}]);